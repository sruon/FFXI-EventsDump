# Event 65

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 3/30      |
| Offset          | 0x0002    |
| Data Size       | 439 bytes |
| Calculated Size | 439 bytes |
| Instructions    | 48        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000:       20 01 46 01 42 45  00 80 F0 FF FF 7F F0 FF     .F.BE........
0010: FF 7F 66 64 6F 31 01 80  55 00 80 F0 FF FF 7F F0  ..fdo1..U.......
0020: FF FF 7F 66 64 6F 31 38  02 80 37 03 80 04 80 05  ...fdo18..7.....
0030: 80 06 80 97 01 80 07 80  45 08 80 F0 FF FF 7F F0  ........E.......
0040: FF FF 7F 77 30 30 30 01  80 55 08 80 F0 FF FF 7F  ...w000..U......
0050: F0 FF FF 7F 77 30 30 30  45 00 80 F0 FF FF 7F F0  ....w000E.......
0060: FF FF 7F 66 64 69 31 01  80 55 00 80 F0 FF FF 7F  ...fdi1..U......
0070: F0 FF FF 7F 66 64 69 31  27 03 E9 F1 09 01 02 1C  ....fdi1'.......
0080: 09 80 32 0A 80 1F 00 0B  80 0C 80 0D 80 1F 01 6F  ..2............o
0090: 39 0E 80 1C 09 80 39 0F  80 1C 09 80 39 10 80 1C  9.....9.....9...
00A0: 11 80 03 00 00 87 7F 1A  25 01 66 01 00 F0 FF FF  ........%.f.....
00B0: 7F F0 FF FF 7F 73 69 72  30 53 F0 FF FF 7F F0 FF  .....sir0S......
00C0: FF 7F 73 69 72 30 1C 09  80 66 01 00 F0 FF FF 7F  ..sir0...f......
00D0: F0 FF FF 7F 73 68 61 31  53 F0 FF FF 7F F0 FF FF  ....sha1S.......
00E0: 7F 73 68 61 31 48 12 80  23 45 00 80 F0 FF FF 7F  .sha1H..#E......
00F0: F0 FF FF 7F 66 64 6F 32  01 80 55 00 80 F0 FF FF  ....fdo2..U.....
0100: 7F F0 FF FF 7F 66 64 6F  32 27 03 E9 F1 09 01 03  .....fdo2'......
0110: 46 00 45 00 80 F0 FF FF  7F F0 FF FF 7F 66 64 69  F.E..........fdi
0120: 32 01 80 21 00 03 01 00  00 00 02 01 00 13 80 05  2..!............
0130: 3A 01 08 01 00 07 80 01  3F 01 08 01 00 14 80 14  :.......?.......
0140: 01 00 15 80 07 01 00 16  80 1B 03 01 00 00 00 02  ................
0150: 01 00 13 80 05 5F 01 08  01 00 07 80 01 64 01 08  ....._.......d..
0160: 01 00 14 80 14 01 00 15  80 07 01 00 17 80 1B 03  ................
0170: 01 00 00 00 02 01 00 13  80 05 84 01 08 01 00 07  ................
0180: 80 01 89 01 08 01 00 14  80 14 01 00 15 80 07 01  ................
0190: 00 18 80 1B 03 01 00 00  00 02 01 00 13 80 05 A9  ................
01A0: 01 08 01 00 07 80 01 AE  01 08 01 00 14 80 14 01  ................
01B0: 00 15 80 07 01 00 19 80  1B                       .........       
```

## Opcodes

```
  0: 0x0002 [0x20] SET_CLI_EVENT_UC_FLAG: Lock player control
  1: 0x0004 [0x46] CAMERA_CONTROL: Disable user control
  2: 0x0006 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  3: 0x0007 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
  4: 0x0018 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=200*
  5: 0x0027 [0x38] SET_CLIENT_EVENT_MODE(mode=19*)
  6: 0x002A [0x37] UPDATE_EVENT_POSITION_AND_DIR: x=-50.005*, z=-145.107*, y=-16.999*, direction=88.3°*
  7: 0x0033 [0x97] SAVE_SET_WIND_VALUES(wind_base=0x8001, wind_width=0x8007)
  8: 0x0038 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "w000" with entities [LocalPlayer, LocalPlayer], work=[244*, 0*]
  9: 0x0049 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "w000" with entities [LocalPlayer, LocalPlayer], work=244*
 10: 0x0058 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 11: 0x0069 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=200*
 12: 0x0078 [0x27] REQ_SET(priority=0x03, entity_id=Granite Door (ID: 17428969/0x0109F1E9), tag_num=0x02)
 13: 0x007F [0x1C] WAIT(120* ticks)
 14: 0x0082 [0x32] ExtData[1]->MainSpeed = 13* * 0.1
 15: 0x0085 [0x1F] MOVE_ENTITY: EventEntity moves to X=-50.022*, Z=-148.977*, Y=-17.000*
 16: 0x008D [0x1F] MOVE_ENTITY: Update entity position (mode=1)
 17: 0x008F [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 18: 0x0090 [0x39] SET_ENTITY_DIRECTION(direction=8.4°*)
 19: 0x0093 [0x1C] WAIT(120* ticks)
 20: 0x0096 [0x39] SET_ENTITY_DIRECTION(direction=1.9°*)
 21: 0x0099 [0x1C] WAIT(120* ticks)
 22: 0x009C [0x39] SET_ENTITY_DIRECTION(direction=6.0°*)
 23: 0x009F [0x1C] WAIT(60* ticks)
 24: 0x00A2 [0x03] ExtData[1]->WorkLocal[0] = LocalPlayer->Race
 25: 0x00A7 [0x1A] CALL_SUBROUTINE(address=0x0125)
 26: 0x00AA [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "sir0" with entities [LocalPlayer, LocalPlayer], work=ExtData[1]->WorkLocal[1]
 27: 0x00B9 [0x53] WAIT_SCHEDULER_TASK: Wait for scheduler "sir0" with entities [LocalPlayer, LocalPlayer]
 28: 0x00C6 [0x1C] WAIT(120* ticks)
 29: 0x00C9 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "sha1" with entities [LocalPlayer, LocalPlayer], work=ExtData[1]->WorkLocal[1]
 30: 0x00D8 [0x53] WAIT_SCHEDULER_TASK: Wait for scheduler "sha1" with entities [LocalPlayer, LocalPlayer]
 31: 0x00E5 [0x48] [System] [7463*]:
    → "You could not find Lightbringer here. Your investigation is over.\u007F1\u0000\u0007"
 32: 0x00E8 [0x23] WAIT_FOR_DIALOG_INTERACTION
 33: 0x00E9 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo2" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 34: 0x00FA [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo2" with entities [LocalPlayer, LocalPlayer], work=200*
 35: 0x0109 [0x27] REQ_SET(priority=0x03, entity_id=Granite Door (ID: 17428969/0x0109F1E9), tag_num=0x03)
 36: 0x0110 [0x46] CAMERA_CONTROL: Restore default settings
 37: 0x0112 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi2" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 38: 0x0123 [0x21] END_EVENT
 39: 0x0124 [0x00] END_REQSTACK()

SUBROUTINE_0125:
 40: 0x0125 [0x03] ExtData[1]->WorkLocal[1] = ExtData[1]->WorkLocal[0]
 41: 0x012A [0x02] IF !(ExtData[1]->WorkLocal[1] > 5*) GOTO 0x013A
 42: 0x0132 [0x08] ExtData[1]->WorkLocal[1] -= 1*
 43: 0x0137 [0x01] GOTO 0x013F
 44: 0x013A [0x08] ExtData[1]->WorkLocal[1] -= 2*
 45: 0x013F [0x14] ExtData[1]->WorkLocal[1] *= 10*
 46: 0x0144 [0x07] ExtData[1]->WorkLocal[1] += 9*
 47: 0x0149 [0x1B] RETURN
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x014A [0x03] ExtData[1]->WorkLocal[1] = ExtData[1]->WorkLocal[0]
     0x014F [0x02] IF !(ExtData[1]->WorkLocal[1] > 5*) GOTO 0x015F
     0x0157 [0x08] ExtData[1]->WorkLocal[1] -= 1*
     0x015C [0x01] GOTO 0x0164
     0x015F [0x08] ExtData[1]->WorkLocal[1] -= 2*
     0x0164 [0x14] ExtData[1]->WorkLocal[1] *= 10*
     0x0169 [0x07] ExtData[1]->WorkLocal[1] += 70*
     0x016E [0x1B] RETURN
     0x016F [0x03] ExtData[1]->WorkLocal[1] = ExtData[1]->WorkLocal[0]
     0x0174 [0x02] IF !(ExtData[1]->WorkLocal[1] > 5*) GOTO 0x0184
     0x017C [0x08] ExtData[1]->WorkLocal[1] -= 1*
     0x0181 [0x01] GOTO 0x0189
     0x0184 [0x08] ExtData[1]->WorkLocal[1] -= 2*
     0x0189 [0x14] ExtData[1]->WorkLocal[1] *= 10*
     0x018E [0x07] ExtData[1]->WorkLocal[1] += 140*
     0x0193 [0x1B] RETURN
     0x0194 [0x03] ExtData[1]->WorkLocal[1] = ExtData[1]->WorkLocal[0]
     0x0199 [0x02] IF !(ExtData[1]->WorkLocal[1] > 5*) GOTO 0x01A9
     0x01A1 [0x08] ExtData[1]->WorkLocal[1] -= 1*
     0x01A6 [0x01] GOTO 0x01AE
     0x01A9 [0x08] ExtData[1]->WorkLocal[1] -= 2*
     0x01AE [0x14] ExtData[1]->WorkLocal[1] *= 10*
     0x01B3 [0x07] ExtData[1]->WorkLocal[1] += 210*
     0x01B8 [0x1B] RETURN
```