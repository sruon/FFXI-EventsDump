# Event 32004

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 19/19     |
| Offset          | 0x0EA2    |
| Data Size       | 857 bytes |
| Calculated Size | 857 bytes |
| Instructions    | 2         |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0EA0:       21 00 24 31 80 0A  80 02 80 25 02 00 10 02    !.$1.....%....
0EB0: 80 00 BA 0E 05 02 00 01  BA 0E 1B 02 04 00 2E 80  ................
0EC0: 80 C6 0E 01 8D 0F 79 00  F0 FF FF 7F F0 FF FF 7F  ......y.........
0ED0: 42 46 01 37 26 80 27 80  28 80 29 80 1C 3F 80 45  BF.7&.'.(.)..?.E
0EE0: 7F 80 F0 FF FF 7F F0 FF  FF 7F 62 63 36 32 02 80  ..........bc62..
0EF0: 1C 3F 80 45 01 80 F0 FF  FF 7F F0 FF FF 7F 66 64  .?.E..........fd
0F00: 69 31 02 80 48 80 80 23  27 03 0D E2 03 01 03 1C  i1..H..#'.......
0F10: 81 80 27 04 0D E2 03 01  04 32 17 80 1F 00 2A 80  ..'......2....*.
0F20: 2B 80 28 80 1F 01 2A 04  0D E2 03 01 03 02 10 82  +.(...*.........
0F30: 80 03 03 10 83 80 48 84  80 23 92 01 F0 FF FF 7F  ......H..#......
0F40: 02 01 00 0A 80 80 54 0F  37 36 80 37 80 38 80 29  ......T.76.7.8.)
0F50: 80 01 54 0F 45 85 80 F0  FF FF 7F F0 FF FF 7F 62  ..T.E..........b
0F60: 61 63 6B 02 80 45 01 80  F0 FF FF 7F F0 FF FF 7F  ack..E..........
0F70: 66 64 69 31 02 80 55 01  80 F0 FF FF 7F F0 FF FF  fdi1..U.........
0F80: 7F 66 64 69 31 92 00 F0  FF FF 7F 46 00 1B 02 16  .fdi1......F....
0F90: 00 2E 80 80 99 0F 01 17  10 46 01 45 01 80 F0 FF  .........F.E....
0FA0: FF 7F F0 FF FF 7F 66 64  6F 32 02 80 55 01 80 F0  ......fdo2..U...
0FB0: FF FF 7F F0 FF FF 7F 66  64 6F 32 92 01 F0 FF FF  .......fdo2.....
0FC0: 7F 37 36 80 54 80 55 80  56 80 1A 54 11 1C 3F 80  .76.T.U.V..T..?.
0FD0: 5C 00 02 80 5C 01 02 80  5C 02 86 80 5C 03 87 80  \...\...\...\...
0FE0: 9A 45 01 80 F0 FF FF 7F  F0 FF FF 7F 66 64 69 31  .E..........fdi1
0FF0: 02 80 55 01 80 F0 FF FF  7F F0 FF FF 7F 66 64 69  ..U..........fdi
1000: 31 62 0E 80 F0 FF FF 7F  F0 FF FF 7F 6D 61 69 6E  1b..........main
1010: 02 80 1C 0B 80 46 00 1B  24 88 80 0A 80 02 80 25  .....F..$......%
1020: 02 00 10 02 80 00 2E 10  05 1A 00 01 2E 10 1B 05  ................
1030: 1B 00 1B 46 01 37 36 80  89 80 8A 80 56 80 1A 54  ...F.76.....V..T
1040: 11 1C 0A 80 45 01 80 F0  FF FF 7F F0 FF FF 7F 66  ....E..........f
1050: 64 69 31 02 80 62 0A 80  F0 FF FF 7F F0 FF FF 7F  di1..b..........
1060: 6D 61 69 6E 02 80 1C 05  80 45 01 80 F0 FF FF 7F  main.....E......
1070: F0 FF FF 7F 66 64 6F 32  02 80 55 01 80 F0 FF FF  ....fdo2..U.....
1080: 7F F0 FF FF 7F 66 64 6F  32 92 01 F0 FF FF 7F 37  .....fdo2......7
1090: 36 80 54 80 55 80 56 80  1A 54 11 5C 00 02 80 5C  6.T.U.V..T.\...\
10A0: 01 02 80 5C 02 86 80 5C  03 87 80 9A 45 01 80 F0  ...\...\....E...
10B0: FF FF 7F F0 FF FF 7F 66  64 69 31 02 80 55 01 80  .......fdi1..U..
10C0: F0 FF FF 7F F0 FF FF 7F  66 64 69 31 62 0E 80 F0  ........fdi1b...
10D0: FF FF 7F F0 FF FF 7F 6D  61 69 6E 02 80 1C 0B 80  .......main.....
10E0: 46 00 1B 6C F0 FF FF 7F  02 80 0A 80 46 01 92 01  F..l........F...
10F0: F0 FF FF 7F 37 36 80 54  80 55 80 56 80 1A 54 11  ....76.T.U.V..T.
1100: 5C 00 02 80 5C 01 02 80  5C 02 86 80 5C 03 87 80  \...\...\...\...
1110: 9A 45 01 80 F0 FF FF 7F  F0 FF FF 7F 66 64 69 31  .E..........fdi1
1120: 02 80 55 01 80 F0 FF FF  7F F0 FF FF 7F 66 64 69  ..U..........fdi
1130: 31 62 0E 80 F0 FF FF 7F  F0 FF FF 7F 6D 61 69 6E  1b..........main
1140: 02 80 1C 0B 80 46 00 1B  02 04 00 02 80 80 53 11  .....F........S.
1150: 01 53 11 1B 6C F0 FF FF  7F 5A 80 0A 80 1C 0A 80  .S..l....Z......
1160: 45 85 80 F0 FF FF 7F F0  FF FF 7F 62 61 63 6B 02  E..........back.
1170: 80 1C 0A 80 6C F0 FF FF  7F 02 80 0A 80 1B 02 01  ....l...........
1180: 00 0A 80 80 9D 11 03 0A  00 36 80 03 0B 00 37 80  .........6....7.
1190: 03 0C 00 38 80 03 0D 00  29 80 01 FA 11 02 01 00  ...8....).......
11A0: 0E 80 80 BC 11 03 0A 00  02 80 03 0B 00 02 80 03  ................
11B0: 0C 00 02 80 03 0D 00 02  80 01 FA 11 02 01 00 10  ................
11C0: 80 80 DB 11 03 0A 00 02  80 03 0B 00 02 80 03 0C  ................
11D0: 00 02 80 03 0D 00 02 80  01 FA 11 02 01 00 34 80  ..............4.
11E0: 80 FA 11 03 0A 00 02 80  03 0B 00 02 80 03 0C 00  ................
11F0: 02 80 03 0D 00 02 80 01  FA 11 1B                 ...........     
```

## Opcodes

```
  0: 0x0EA2 [0x21] END_EVENT
  1: 0x0EA3 [0x00] END_REQSTACK()
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x0EA4 [0x24] CREATE_DIALOG(message_id=7449*, default_option=1*, option_flags=0*)
    → "Enter the battlefield?\u0007\u000BEnter.\u0007Decline.\u007F1\u0000\u0007"
     0x0EAB [0x25] WAIT_DIALOG_SELECT()
     0x0EAC [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x0EBA
     0x0EB4 [0x05] ExtData[1]->WorkLocal[2] = 1
     0x0EB7 [0x01] GOTO 0x0EBA
     0x0EBA [0x1B] RETURN
     0x0EBB [0x02] IF !(ExtData[1]->WorkLocal[4] == 31*) GOTO 0x0EC6
     0x0EC3 [0x01] GOTO 0x0F8D
     0x0EC6 [0x79] LocalPlayer looks at LocalPlayer (Basic look)
     0x0ED0 [0x42] SET_CLI_EVENT_CANCEL_DATA()
     0x0ED1 [0x46] CAMERA_CONTROL: Disable user control
     0x0ED3 [0x37] UPDATE_EVENT_POSITION_AND_DIR: x=300.005*, z=-398.276*, y=19.999*, direction=90.0°*
     0x0EDC [0x1C] WAIT(10* ticks)
     0x0EDF [0x45] LOAD_SCHEDULED_TASK: Load scheduler "bc62" with entities [LocalPlayer, LocalPlayer], work=[217*, 0*]
     0x0EF0 [0x1C] WAIT(10* ticks)
     0x0EF3 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x0F04 [0x48] [System] [7906*]:
    → "You rap on the gate using the pattern you see on the two musical scores.\u0007After a time, you hear the creaking sound of a heavy bar being lifted on the other side of the gate...\u007F1\u0000\u0007"
     0x0F07 [0x23] WAIT_FOR_DIALOG_INTERACTION
     0x0F08 [0x27] REQ_SET(priority=0x03, entity_id=Decorative Bronze Gate (ID: 17031693/0x0103E20D), tag_num=0x03)
     0x0F0F [0x1C] WAIT(90* ticks)
     0x0F12 [0x27] REQ_SET(priority=0x04, entity_id=Decorative Bronze Gate (ID: 17031693/0x0103E20D), tag_num=0x04)
     0x0F19 [0x32] ExtData[1]->MainSpeed = 13* * 0.1
     0x0F1C [0x1F] MOVE_ENTITY: EventEntity moves to X=299.989*, Z=-403.495*, Y=19.999*
     0x0F24 [0x1F] MOVE_ENTITY: Update entity position (mode=1)
     0x0F26 [0x2A] GET_REQ_LEVEL(level=4, entity_id=Decorative Bronze Gate (ID: 17031693/0x0103E20D))
     0x0F2C [0x03] Work_Zone[2] = 801*
     0x0F31 [0x03] Work_Zone[3] = 802*
     0x0F36 [0x48] [System] [7907*]:
    → "The pictographs on the \u0001\u00053\u0002\u0000\u0000\u0000 and \u0001\u00053\u0002\u0001\u0000\u0000 fade away without a trace...\u007F1\u0000\u0007"
     0x0F39 [0x23] WAIT_FOR_DIALOG_INTERACTION
     0x0F3A [0x92] LocalPlayer->Render.Flags3 ^= 0x01
     0x0F40 [0x02] IF !(ExtData[1]->WorkLocal[1] == 1*) GOTO 0x0F54
     0x0F48 [0x37] UPDATE_EVENT_POSITION_AND_DIR: x=300.000*, z=-406.000*, y=19.600*, direction=90.0°*
     0x0F51 [0x01] GOTO 0x0F54
     0x0F54 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "back" with entities [LocalPlayer, LocalPlayer], work=[108*, 0*]
     0x0F65 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x0F76 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=200*
     0x0F85 [0x92] LocalPlayer->Render.Flags3 = Flags3  // No change (flag=0)
     0x0F8B [0x46] CAMERA_CONTROL: Restore default settings
     0x0F8D [0x1B] RETURN
     0x0F8E [0x02] IF !(ExtData[1]->WorkLocal[22] == 31*) GOTO 0x0F99
     0x0F96 [0x01] GOTO 0x1017
     0x0F99 [0x46] CAMERA_CONTROL: Disable user control
     0x0F9B [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo2" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x0FAC [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo2" with entities [LocalPlayer, LocalPlayer], work=200*
     0x0FBB [0x92] LocalPlayer->Render.Flags3 ^= 0x01
     0x0FC1 [0x37] UPDATE_EVENT_POSITION_AND_DIR: x=300.000*, z=-382.000*, y=18.900*, direction=270.0°*
     0x0FCA [0x1A] CALL_SUBROUTINE(address=0x1154)
     0x0FCD [0x1C] WAIT(10* ticks)
     0x0FD0 [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 0*
     0x0FD4 [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 0*
     0x0FD8 [0x5C] MUSIC_CONTROL: Set Combat (Solo) music to song 115*
     0x0FDC [0x5C] MUSIC_CONTROL: Set Combat (Party) music to song 139*
     0x0FE0 [0x9A] WAIT_MUSIC_SERVER()
     0x0FE1 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x0FF2 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=200*
     0x1001 [0x62] LOAD_EVENT_SCHEDULER: Load scheduler "main" with entities [LocalPlayer, LocalPlayer], work=[2*, 0*]
     0x1012 [0x1C] WAIT(120* ticks)
     0x1015 [0x46] CAMERA_CONTROL: Restore default settings
     0x1017 [0x1B] RETURN
     0x1018 [0x24] CREATE_DIALOG(message_id=7450*, default_option=1*, option_flags=0*)
    → "Leave the battlefield?\u0007\u000BRun away.\u0007Stay.\u007F1\u0000\u0007"
     0x101F [0x25] WAIT_DIALOG_SELECT()
     0x1020 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x102E
     0x1028 [0x05] ExtData[1]->WorkLocal[26] = 1
     0x102B [0x01] GOTO 0x102E
     0x102E [0x1B] RETURN
     0x102F [0x05] ExtData[1]->WorkLocal[27] = 1
     0x1032 [0x1B] RETURN
     0x1033 [0x46] CAMERA_CONTROL: Disable user control
     0x1035 [0x37] UPDATE_EVENT_POSITION_AND_DIR: x=300.000*, z=-404.000*, y=19.500*, direction=270.0°*
     0x103E [0x1A] CALL_SUBROUTINE(address=0x1154)
     0x1041 [0x1C] WAIT(1* ticks)
     0x1044 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x1055 [0x62] LOAD_EVENT_SCHEDULER: Load scheduler "main" with entities [LocalPlayer, LocalPlayer], work=[1*, 0*]
     0x1066 [0x1C] WAIT(60* ticks)
     0x1069 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo2" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x107A [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo2" with entities [LocalPlayer, LocalPlayer], work=200*
     0x1089 [0x92] LocalPlayer->Render.Flags3 ^= 0x01
     0x108F [0x37] UPDATE_EVENT_POSITION_AND_DIR: x=300.000*, z=-382.000*, y=18.900*, direction=270.0°*
     0x1098 [0x1A] CALL_SUBROUTINE(address=0x1154)
     0x109B [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 0*
     0x109F [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 0*
     0x10A3 [0x5C] MUSIC_CONTROL: Set Combat (Solo) music to song 115*
     0x10A7 [0x5C] MUSIC_CONTROL: Set Combat (Party) music to song 139*
     0x10AB [0x9A] WAIT_MUSIC_SERVER()
     0x10AC [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x10BD [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=200*
     0x10CC [0x62] LOAD_EVENT_SCHEDULER: Load scheduler "main" with entities [LocalPlayer, LocalPlayer], work=[2*, 0*]
     0x10DD [0x1C] WAIT(120* ticks)
     0x10E0 [0x46] CAMERA_CONTROL: Restore default settings
     0x10E2 [0x1B] RETURN
     0x10E3 [0x6C] FADE_ENTITY_COLOR(entity_id=LocalPlayer, end_alpha=0*, fade_time=1*)
     0x10EC [0x46] CAMERA_CONTROL: Disable user control
     0x10EE [0x92] LocalPlayer->Render.Flags3 ^= 0x01
     0x10F4 [0x37] UPDATE_EVENT_POSITION_AND_DIR: x=300.000*, z=-382.000*, y=18.900*, direction=270.0°*
     0x10FD [0x1A] CALL_SUBROUTINE(address=0x1154)
     0x1100 [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 0*
     0x1104 [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 0*
     0x1108 [0x5C] MUSIC_CONTROL: Set Combat (Solo) music to song 115*
     0x110C [0x5C] MUSIC_CONTROL: Set Combat (Party) music to song 139*
     0x1110 [0x9A] WAIT_MUSIC_SERVER()
     0x1111 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x1122 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=200*
     0x1131 [0x62] LOAD_EVENT_SCHEDULER: Load scheduler "main" with entities [LocalPlayer, LocalPlayer], work=[2*, 0*]
     0x1142 [0x1C] WAIT(120* ticks)
     0x1145 [0x46] CAMERA_CONTROL: Restore default settings
     0x1147 [0x1B] RETURN
     0x1148 [0x02] IF !(ExtData[1]->WorkLocal[4] == 0*) GOTO 0x1153
     0x1150 [0x01] GOTO 0x1153
     0x1153 [0x1B] RETURN
     0x1154 [0x6C] FADE_ENTITY_COLOR(entity_id=LocalPlayer, end_alpha=128*, fade_time=1*)
     0x115D [0x1C] WAIT(1* ticks)
     0x1160 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "back" with entities [LocalPlayer, LocalPlayer], work=[108*, 0*]
     0x1171 [0x1C] WAIT(1* ticks)
     0x1174 [0x6C] FADE_ENTITY_COLOR(entity_id=LocalPlayer, end_alpha=0*, fade_time=1*)
     0x117D [0x1B] RETURN
     0x117E [0x02] IF !(ExtData[1]->WorkLocal[1] == 1*) GOTO 0x119D
     0x1186 [0x03] ExtData[1]->WorkLocal[10] = 300000*
     0x118B [0x03] ExtData[1]->WorkLocal[11] = 4294561296*
     0x1190 [0x03] ExtData[1]->WorkLocal[12] = 19600*
     0x1195 [0x03] ExtData[1]->WorkLocal[13] = 1024*
     0x119A [0x01] GOTO 0x11FA
     0x119D [0x02] IF !(ExtData[1]->WorkLocal[1] == 2*) GOTO 0x11BC
     0x11A5 [0x03] ExtData[1]->WorkLocal[10] = 0*
     0x11AA [0x03] ExtData[1]->WorkLocal[11] = 0*
     0x11AF [0x03] ExtData[1]->WorkLocal[12] = 0*
     0x11B4 [0x03] ExtData[1]->WorkLocal[13] = 0*
     0x11B9 [0x01] GOTO 0x11FA
     0x11BC [0x02] IF !(ExtData[1]->WorkLocal[1] == 3*) GOTO 0x11DB
     0x11C4 [0x03] ExtData[1]->WorkLocal[10] = 0*
     0x11C9 [0x03] ExtData[1]->WorkLocal[11] = 0*
     0x11CE [0x03] ExtData[1]->WorkLocal[12] = 0*
     0x11D3 [0x03] ExtData[1]->WorkLocal[13] = 0*
     0x11D8 [0x01] GOTO 0x11FA
     0x11DB [0x02] IF !(ExtData[1]->WorkLocal[1] == 4*) GOTO 0x11FA
     0x11E3 [0x03] ExtData[1]->WorkLocal[10] = 0*
     0x11E8 [0x03] ExtData[1]->WorkLocal[11] = 0*
     0x11ED [0x03] ExtData[1]->WorkLocal[12] = 0*
     0x11F2 [0x03] ExtData[1]->WorkLocal[13] = 0*
     0x11F7 [0x01] GOTO 0x11FA
     0x11FA [0x1B] RETURN
```