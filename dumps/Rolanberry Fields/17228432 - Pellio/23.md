# Event 23

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 4/7       |
| Offset          | 0x008D    |
| Data Size       | 256 bytes |
| Calculated Size | 256 bytes |
| Instructions    | 59        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0080:                                         03 00 00               ...
0090: 03 10 03 01 00 05 10 42  1E F0 FF FF 7F 6F 70 66  .......B.....opf
00A0: 00 80 F8 FF FF 7F F8 FF  FF 7F 74 77 61 30 03 03  ..........twa0..
00B0: 10 01 00 1D 09 80 23 1D  0A 80 23 13 03 00 0B 80  ......#...#.....
00C0: 02 03 00 04 80 80 E6 00  1D 0C 80 23 1D 0D 80 23  ...........#...#
00D0: 66 04 80 F8 FF FF 7F F8  FF FF 7F 74 77 61 31 1D  f..........twa1.
00E0: 0E 80 23 01 6A 01 02 03  00 0F 80 80 35 01 1D 10  ..#.j.......5...
00F0: 80 23 1D 11 80 23 66 04  80 F8 FF FF 7F F8 FF FF  .#...#f.........
0100: 7F 74 77 61 31 1D 12 80  23 66 04 80 F8 FF FF 7F  .twa1...#f......
0110: F8 FF FF 7F 74 77 62 30  1D 13 80 23 1D 14 80 23  ....twb0...#...#
0120: 66 04 80 F8 FF FF 7F F8  FF FF 7F 74 77 62 31 1C  f..........twb1.
0130: 15 80 01 6A 01 02 03 00  0B 80 80 5B 01 1D 16 80  ...j.......[....
0140: 23 1D 17 80 23 66 04 80  F8 FF FF 7F F8 FF FF 7F  #...#f..........
0150: 74 77 61 31 1D 18 80 23  01 6A 01 66 04 80 F8 FF  twa1...#.j.f....
0160: FF 7F F8 FF FF 7F 74 77  61 31 6E 90 E2 06 01 04  ......twa1n.....
0170: 80 99 90 E2 06 01 1D 19  80 23 59 06 90 E2 06 01  .........#Y.....
0180: 03 02 10 00 00 48 1A 80  23 20 00 21 00           .....H..# .!.   
```

## Opcodes

```
  0: 0x008D [0x03] ExtData[1]->WorkLocal[0] = Work_Zone[3]
  1: 0x0092 [0x03] ExtData[1]->WorkLocal[1] = Work_Zone[5]
  2: 0x0097 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  3: 0x0098 [0x1E] EventEntity looks at LocalPlayer and starts talking
  4: 0x009D [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  5: 0x009E [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
  6: 0x009F [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=9*, entity1=EventEntity, entity2=EventEntity, action="twa0")
  7: 0x00AE [0x03] Work_Zone[3] = ExtData[1]->WorkLocal[1]
  8: 0x00B3 [0x1D] PRINT_EVENT_MESSAGE(message_id=12430*)
    → "Yes! \u007F\u0000\u0001\u0001\u0001\u0001 \u0001\u0005$\u0002\u0001\u0000\u0000! This is exactly what I need.\u007F1\u0000\u0007"
  9: 0x00B6 [0x23] WAIT_FOR_DIALOG_INTERACTION
 10: 0x00B7 [0x1D] PRINT_EVENT_MESSAGE(message_id=12431*)
    → "Thanks so much! This'll be the perfect supplement to my research.\u007F1\u0000\u0007"
 11: 0x00BA [0x23] WAIT_FOR_DIALOG_INTERACTION
 12: 0x00BB [0x13] ExtData[1]->WorkLocal[3] = rand() % 2*
 13: 0x00C0 [0x02] IF !(ExtData[1]->WorkLocal[3] == 0*) GOTO 0x00E6
 14: 0x00C8 [0x1D] PRINT_EVENT_MESSAGE(message_id=12432*)
    → "White rolanberries are really elusive, and we're not exactly sure what causes them to develop in such a way.\u007F1\u0000\u0007"
 15: 0x00CB [0x23] WAIT_FOR_DIALOG_INTERACTION
 16: 0x00CC [0x1D] PRINT_EVENT_MESSAGE(message_id=12433*)
    → "They're malms sweeter than ordinary rolanberries, and fans of the fruit will pay out the nose for them. That's why I'm looking for a surefire way to cultivate these delicacies.\u007F1\u0000\u0007"
 17: 0x00CF [0x23] WAIT_FOR_DIALOG_INTERACTION
 18: 0x00D0 [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=0*, entity1=EventEntity, entity2=EventEntity, action="twa1")
 19: 0x00DF [0x1D] PRINT_EVENT_MESSAGE(message_id=12434*)
    → "Progress has been slow, because rolanberry cultivation is a years-long process.\u007F1\u0000\u0007"
 20: 0x00E2 [0x23] WAIT_FOR_DIALOG_INTERACTION
 21: 0x00E3 [0x01] GOTO 0x016A

SUBROUTINE_00E6:
 22: 0x00E6 [0x02] IF !(ExtData[1]->WorkLocal[3] == 1*) GOTO 0x0135
 23: 0x00EE [0x1D] PRINT_EVENT_MESSAGE(message_id=12435*)
    → "Jeuno used to be a haven for such pursuits, but with the passage of time the indutsry started to fade.\u007F1\u0000\u0007"
 24: 0x00F1 [0x23] WAIT_FOR_DIALOG_INTERACTION
 25: 0x00F2 [0x1D] PRINT_EVENT_MESSAGE(message_id=12436*)
    → "I suppose the city's vitality in recent years has been thanks to adventurers more than farmers.\u007F1\u0000\u0007"
 26: 0x00F5 [0x23] WAIT_FOR_DIALOG_INTERACTION
 27: 0x00F6 [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=0*, entity1=EventEntity, entity2=EventEntity, action="twa1")
 28: 0x0105 [0x1D] PRINT_EVENT_MESSAGE(message_id=12437*)
    → "And, of course, farming is an industry gravely affected by the ravages of war, and such fruits were deemed a luxury item rather than a necessity.\u007F1\u0000\u0007"
 29: 0x0108 [0x23] WAIT_FOR_DIALOG_INTERACTION
 30: 0x0109 [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=0*, entity1=EventEntity, entity2=EventEntity, action="twb0")
 31: 0x0118 [0x1D] PRINT_EVENT_MESSAGE(message_id=12438*)
    → "But white rolanberries--those are a game changer!\u007F1\u0000\u0007"
 32: 0x011B [0x23] WAIT_FOR_DIALOG_INTERACTION
 33: 0x011C [0x1D] PRINT_EVENT_MESSAGE(message_id=12439*)
    → "I know we can revitalize farming here in Jeuno if only I could make a breakthrough! Think of the untold riches I would have!\u007F1\u0000\u0007"
 34: 0x011F [0x23] WAIT_FOR_DIALOG_INTERACTION
 35: 0x0120 [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=0*, entity1=EventEntity, entity2=EventEntity, action="twb1")
 36: 0x012F [0x1C] WAIT(60* ticks)
 37: 0x0132 [0x01] GOTO 0x016A

SUBROUTINE_0135:
 38: 0x0135 [0x02] IF !(ExtData[1]->WorkLocal[3] == 2*) GOTO 0x015B
 39: 0x013D [0x1D] PRINT_EVENT_MESSAGE(message_id=12440*)
    → "If only my father knew how close I was, then maybe he would let me focus on that rather than sitting here pulling weeds.\u007F1\u0000\u0007"
 40: 0x0140 [0x23] WAIT_FOR_DIALOG_INTERACTION
 41: 0x0141 [0x1D] PRINT_EVENT_MESSAGE(message_id=12441*)
    → "But there's not much other fertile land in the area, and the more we expand the more tedious my labor becomes.\u007F1\u0000\u0007"
 42: 0x0144 [0x23] WAIT_FOR_DIALOG_INTERACTION
 43: 0x0145 [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=0*, entity1=EventEntity, entity2=EventEntity, action="twa1")
 44: 0x0154 [0x1D] PRINT_EVENT_MESSAGE(message_id=12442*)
    → "That's why I think we should focus on producing a small amount of high-quality goods. Quality over quantity. Added value drives the market, after all!\u007F1\u0000\u0007"
 45: 0x0157 [0x23] WAIT_FOR_DIALOG_INTERACTION
 46: 0x0158 [0x01] GOTO 0x016A

SUBROUTINE_015B:
 47: 0x015B [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=0*, entity1=EventEntity, entity2=EventEntity, action="twa1")
 48: 0x016A [0x6E] Pellio (ID: 17228432/0x0106E290) uses emote 0*
 49: 0x0171 [0x99] Wait for Pellio (ID: 17228432/0x0106E290) animation to complete
 50: 0x0176 [0x1D] PRINT_EVENT_MESSAGE(message_id=12443*)
    → "Here's a token of my appreciation. Hopefully you'll find their taste to be as exquisite as I do!\u007F1\u0000\u0007"
 51: 0x0179 [0x23] WAIT_FOR_DIALOG_INTERACTION
 52: 0x017A [0x59] UPDATE_ENTITY_DATA: Check if Pellio (ID: 17228432/0x0106E290) is performing moving action
 53: 0x0180 [0x03] Work_Zone[2] = ExtData[1]->WorkLocal[0]
 54: 0x0185 [0x48] [System] [6413*]:
    → "Obtained: \u007F\u0000\u0001\u0001\u0005#\u0002\u0000\u0000\u0000.\u007F1\u0000\u0007"
 55: 0x0188 [0x23] WAIT_FOR_DIALOG_INTERACTION
 56: 0x0189 [0x20] SET_CLI_EVENT_UC_FLAG: Unlock player control
 57: 0x018B [0x21] END_EVENT
 58: 0x018C [0x00] END_REQSTACK()
```
