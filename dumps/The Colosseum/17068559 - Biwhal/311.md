# Event 311

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 4/4       |
| Offset          | 0x0A3A    |
| Data Size       | 415 bytes |
| Calculated Size | 415 bytes |
| Instructions    | 39        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0A30:                                42 03 00 00 02 10            B.....
0A40: 03 05 00 03 10 03 0A 00  04 10 03 0B 00 05 10 03  ................
0A50: 0C 00 06 10 03 19 00 07  10 1E F0 FF FF 7F 03 02  ................
0A60: 10 01 80 03 03 10 00 80  03 04 10 05 00 03 05 10  ................
0A70: 0A 00 02 00 00 03 80 00  81 0A 1D 61 80 23 01 85  ...........a.#..
0A80: 0A 1D 62 80 23 03 06 10  0B 00 03 07 10 0C 00 02  ..b.#...........
0A90: 08 10 03 80 01 9E 0A 1D  63 80 23 01 A2 0A 1D 64  ........c.#....d
0AA0: 80 23 03 1B 00 47 80 07  1B 00 0B 00 1D 1B 00 23  .#...G.........#
0AB0: 9C 00 00 02 00 00 07 80  00 BF 0A 1D 48 80 23 03  ............H.#.
0AC0: 08 10 19 00 1D 65 80 23  21 00 41 03 80 42 80 03  .....e.#!.A..B..
0AD0: 10 03 00 41 43 80 35 80  03 10 04 00 07 04 00 3A  ...AC.5........:
0AE0: 80 41 66 80 67 80 03 10  06 00 41 03 80 14 80 04  .Af.g.....A.....
0AF0: 10 00 00 10 00 00 1C 80  07 06 00 00 00 41 1C 80  .............A..
0B00: 35 80 04 10 07 00 41 3B  80 68 80 04 10 08 00 41  5.....A;.h.....A
0B10: 2F 80 3C 80 04 10 09 00  41 22 80 69 80 04 10 0A  /.<.....A".i....
0B20: 00 41 27 80 67 80 04 10  0B 00 41 03 80 43 80 05  .A'.g.....A..C..
0B30: 10 00 00 10 00 00 42 80  07 0B 00 00 00 41 24 80  ......B......A$.
0B40: 20 80 05 10 0C 00 41 21  80 6A 80 05 10 0D 00 41   .....A!.j.....A
0B50: 69 80 67 80 05 10 0E 00  41 03 80 03 80 06 10 00  i.g.....A.......
0B60: 00 10 00 00 43 80 07 0E  00 00 00 41 07 80 3B 80  ....C......A..;.
0B70: 06 10 0F 00 41 20 80 3C  80 06 10 10 00 41 22 80  ....A .<.....A".
0B80: 67 80 06 10 11 00 41 03  80 43 80 07 10 12 00 41  g.....A..C.....A
0B90: 24 80 26 80 07 10 13 00  41 3C 80 6A 80 07 10 14  $.&.....A<.j....
0BA0: 00 41 69 80 67 80 07 10  15 00 41 03 80 42 80 08  .Ai.g.....A..B..
0BB0: 10 00 00 10 00 00 43 80  07 15 00 00 00 41 43 80  ......C......AC.
0BC0: 3B 80 08 10 16 00 41 20  80 6B 80 08 10 17 00 41  ;.....A .k.....A
0BD0: 6A 80 67 80 08 10 18 00  1B                       j.g......       
```

## Opcodes

```
  0: 0x0A3A [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x0A3B [0x03] ExtData[1]->WorkLocal[0] = Work_Zone[2]
  2: 0x0A40 [0x03] ExtData[1]->WorkLocal[5] = Work_Zone[3]
  3: 0x0A45 [0x03] ExtData[1]->WorkLocal[10] = Work_Zone[4]
  4: 0x0A4A [0x03] ExtData[1]->WorkLocal[11] = Work_Zone[5]
  5: 0x0A4F [0x03] ExtData[1]->WorkLocal[12] = Work_Zone[6]
  6: 0x0A54 [0x03] ExtData[1]->WorkLocal[25] = Work_Zone[7]
  7: 0x0A59 [0x1E] EventEntity looks at LocalPlayer and starts talking
  8: 0x0A5E [0x03] Work_Zone[2] = 2477*
  9: 0x0A63 [0x03] Work_Zone[3] = 2478*
 10: 0x0A68 [0x03] Work_Zone[4] = ExtData[1]->WorkLocal[5]
 11: 0x0A6D [0x03] Work_Zone[5] = ExtData[1]->WorkLocal[10]
 12: 0x0A72 [0x02] IF !(ExtData[1]->WorkLocal[0] == 0*) GOTO 0x0A81
 13: 0x0A7A [0x1D] PRINT_EVENT_MESSAGE(message_id=11667*)
    → "I cannot forge a new \u0001\u0005#\u0002\u0001\u0000\u0000 from this \u0001\u0005#\u0002\u0000\u0000\u0000. I can, however, add the following skill to an existing reflector:\u007F1\u0000\u0007"
 14: 0x0A7D [0x23] WAIT_FOR_DIALOG_INTERACTION
 15: 0x0A7E [0x01] GOTO 0x0A85
 16: 0x0A81 [0x1D] PRINT_EVENT_MESSAGE(message_id=11666*)
    → "Using this \u0001\u0005#\u0002\u0000\u0000\u0000, I can forge \u0001\u0001\u0001 \u0001\u0005$\u0002\u0001\u0000\u0000 containing a level 
\u0003 \u0001\u0005\u0015\u0002\u0002\u0000\u0000-type monster or add the following skill to an existing reflector:\u007F1\u0000\u0007"
 17: 0x0A84 [0x23] WAIT_FOR_DIALOG_INTERACTION
 18: 0x0A85 [0x03] Work_Zone[6] = ExtData[1]->WorkLocal[11]
 19: 0x0A8A [0x03] Work_Zone[7] = ExtData[1]->WorkLocal[12]
 20: 0x0A8F [0x02] IF !(Work_Zone[8] == 0*) GOTO 0x0A9E
 21: 0x0A97 [0x1D] PRINT_EVENT_MESSAGE(message_id=11668*)
    → "\u0001`\u001E\u0005\u007F5\u0004\u001E\u0001 (lv. 
\u0005)\u0001`\u007F1\u0000\u0007"
 22: 0x0A9A [0x23] WAIT_FOR_DIALOG_INTERACTION
 23: 0x0A9B [0x01] GOTO 0x0AA2
 24: 0x0A9E [0x1D] PRINT_EVENT_MESSAGE(message_id=11669*)
    → "\u0001`\u001E\u0005\u007F5\u0004\u001E\u0001\u0001`\u007F1\u0000\u0007"
 25: 0x0AA1 [0x23] WAIT_FOR_DIALOG_INTERACTION
 26: 0x0AA2 [0x03] ExtData[1]->WorkLocal[27] = 7393*
 27: 0x0AA7 [0x07] ExtData[1]->WorkLocal[27] += ExtData[1]->WorkLocal[11]
 28: 0x0AAC [0x1D] PRINT_EVENT_MESSAGE(message_id=0x001B)
 29: 0x0AAF [0x23] WAIT_FOR_DIALOG_INTERACTION
 30: 0x0AB0 [0x9C] STORE_CLIENT_LANGUAGE_ID(result=0x00)
 31: 0x0AB3 [0x02] IF !(ExtData[1]->WorkLocal[0] == 1*) GOTO 0x0ABF
 32: 0x0ABB [0x1D] PRINT_EVENT_MESSAGE(message_id=11626*)
    → "That's about it.\u007F1\u0000\u0007"
 33: 0x0ABE [0x23] WAIT_FOR_DIALOG_INTERACTION
 34: 0x0ABF [0x03] Work_Zone[8] = ExtData[1]->WorkLocal[25]
 35: 0x0AC4 [0x1D] PRINT_EVENT_MESSAGE(message_id=11670*)
    → "FP requirement: 
\u0006\u007F1\u0000\u0007"
 36: 0x0AC7 [0x23] WAIT_FOR_DIALOG_INTERACTION
 37: 0x0AC8 [0x21] END_EVENT
 38: 0x0AC9 [0x00] END_REQSTACK()
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x0ACA [0x41] ExtData[1]->WorkLocal[3] = Work_Zone[3] (bits 0*-5*)
     0x0AD3 [0x41] ExtData[1]->WorkLocal[4] = Work_Zone[3] (bits 6*-11*)
     0x0ADC [0x07] ExtData[1]->WorkLocal[4] += 64*
     0x0AE1 [0x41] ExtData[1]->WorkLocal[6] = Work_Zone[3] (bits 28*-31*)
     0x0AEA [0x41] ExtData[1]->WorkLocal[0] = Work_Zone[4] (bits 0*-3*)
     0x0AF3 [0x10] ExtData[1]->WorkLocal[0] <<= 4*
     0x0AF8 [0x07] ExtData[1]->WorkLocal[6] += ExtData[1]->WorkLocal[0]
     0x0AFD [0x41] ExtData[1]->WorkLocal[7] = Work_Zone[4] (bits 4*-11*)
     0x0B06 [0x41] ExtData[1]->WorkLocal[8] = Work_Zone[4] (bits 12*-15*)
     0x0B0F [0x41] ExtData[1]->WorkLocal[9] = Work_Zone[4] (bits 16*-19*)
     0x0B18 [0x41] ExtData[1]->WorkLocal[10] = Work_Zone[4] (bits 20*-26*)
     0x0B21 [0x41] ExtData[1]->WorkLocal[11] = Work_Zone[4] (bits 27*-31*)
     0x0B2A [0x41] ExtData[1]->WorkLocal[0] = Work_Zone[5] (bits 0*-6*)
     0x0B33 [0x10] ExtData[1]->WorkLocal[0] <<= 5*
     0x0B38 [0x07] ExtData[1]->WorkLocal[11] += ExtData[1]->WorkLocal[0]
     0x0B3D [0x41] ExtData[1]->WorkLocal[12] = Work_Zone[5] (bits 7*-13*)
     0x0B46 [0x41] ExtData[1]->WorkLocal[13] = Work_Zone[5] (bits 14*-25*)
     0x0B4F [0x41] ExtData[1]->WorkLocal[14] = Work_Zone[5] (bits 26*-31*)
     0x0B58 [0x41] ExtData[1]->WorkLocal[0] = Work_Zone[6] (bits 0*-0*)
     0x0B61 [0x10] ExtData[1]->WorkLocal[0] <<= 6*
     0x0B66 [0x07] ExtData[1]->WorkLocal[14] += ExtData[1]->WorkLocal[0]
     0x0B6B [0x41] ExtData[1]->WorkLocal[15] = Work_Zone[6] (bits 1*-12*)
     0x0B74 [0x41] ExtData[1]->WorkLocal[16] = Work_Zone[6] (bits 13*-19*)
     0x0B7D [0x41] ExtData[1]->WorkLocal[17] = Work_Zone[6] (bits 20*-31*)
     0x0B86 [0x41] ExtData[1]->WorkLocal[18] = Work_Zone[7] (bits 0*-6*)
     0x0B8F [0x41] ExtData[1]->WorkLocal[19] = Work_Zone[7] (bits 7*-18*)
     0x0B98 [0x41] ExtData[1]->WorkLocal[20] = Work_Zone[7] (bits 19*-25*)
     0x0BA1 [0x41] ExtData[1]->WorkLocal[21] = Work_Zone[7] (bits 26*-31*)
     0x0BAA [0x41] ExtData[1]->WorkLocal[0] = Work_Zone[8] (bits 0*-5*)
     0x0BB3 [0x10] ExtData[1]->WorkLocal[0] <<= 6*
     0x0BB8 [0x07] ExtData[1]->WorkLocal[21] += ExtData[1]->WorkLocal[0]
     0x0BBD [0x41] ExtData[1]->WorkLocal[22] = Work_Zone[8] (bits 6*-12*)
     0x0BC6 [0x41] ExtData[1]->WorkLocal[23] = Work_Zone[8] (bits 13*-24*)
     0x0BCF [0x41] ExtData[1]->WorkLocal[24] = Work_Zone[8] (bits 25*-31*)
     0x0BD8 [0x1B] RETURN
```