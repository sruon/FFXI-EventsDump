# Event 20

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 2/4       |
| Offset          | 0x0001    |
| Data Size       | 433 bytes |
| Calculated Size | 433 bytes |
| Instructions    | 61        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000:    2F 00 48 60 0F 01 20  01 46 01 42 45 00 80 F0   /.H`.. .F.BE...
0010: FF FF 7F F0 FF FF 7F 66  64 6F 31 01 80 55 00 80  .......fdo1..U..
0020: F0 FF FF 7F F0 FF FF 7F  66 64 6F 31 5C 00 01 80  ........fdo1\...
0030: 5C 01 01 80 77 01 80 02  80 45 03 80 F0 FF FF 7F  \...w....E......
0040: F0 FF FF 7F 75 30 30 31  01 80 55 03 80 F0 FF FF  ....u001..U.....
0050: 7F F0 FF FF 7F 75 30 30  31 38 04 80 29 03 F0 FF  .....u0018..)...
0060: FF 7F 1C 4E 00 48 60 0F  01 80 48 60 0F 01 27 03  ...N.H`...H`..'.
0070: 48 60 0F 01 02 1A 91 01  45 03 80 F0 FF FF 7F F0  H`......E.......
0080: FF FF 7F 75 30 30 32 01  80 55 03 80 F0 FF FF 7F  ...u002..U......
0090: F0 FF FF 7F 75 30 30 32  2A 03 48 60 0F 01 1C 05  ....u002*.H`....
00A0: 80 45 03 80 F0 FF FF 7F  F0 FF FF 7F 75 30 30 35  .E..........u005
00B0: 01 80 55 03 80 F0 FF FF  7F F0 FF FF 7F 75 30 30  ..U..........u00
00C0: 35 29 04 48 60 0F 01 03  4A F0 FF FF 7F 48 60 0F  5).H`...J....H`.
00D0: 01 45 03 80 F0 FF FF 7F  F0 FF FF 7F 75 30 30 33  .E..........u003
00E0: 01 80 55 03 80 F0 FF FF  7F F0 FF FF 7F 75 30 30  ..U..........u00
00F0: 33 6F 76 F0 FF FF 7F 1C  05 80 2B 48 60 0F 01 06  3ov.......+H`...
0100: 80 23 06 01 10 42 24 07  80 01 80 01 80 25 02 00  .#...B$......%..
0110: 10 01 80 00 44 01 42 03  02 10 08 80 2B 48 60 0F  ....D.B.....+H`.
0120: 01 09 80 23 7B F0 FF FF  7F 7B 48 60 0F 01 27 03  ...#{....{H`..'.
0130: 48 60 0F 01 04 27 03 F0  FF FF 7F 1D 03 01 10 0A  H`...'..........
0140: 80 01 44 01 6C 48 60 0F  01 01 80 0B 80 92 01 48  ..D.lH`........H
0150: 60 0F 01 45 00 80 F0 FF  FF 7F F0 FF FF 7F 66 64  `..E..........fd
0160: 6F 32 01 80 55 00 80 F0  FF FF 7F F0 FF FF 7F 66  o2..U..........f
0170: 64 6F 32 78 5C 00 0C 80  5C 01 0C 80 46 00 45 00  do2x\...\...F.E.
0180: 80 F0 FF FF 7F F0 FF FF  7F 66 64 69 32 01 80 21  .........fdi2..!
0190: 00 45 03 80 F0 FF FF 7F  F0 FF FF 7F 75 30 30 34  .E..........u004
01A0: 01 80 55 03 80 F0 FF FF  7F F0 FF FF 7F 75 30 30  ..U..........u00
01B0: 34 1B                                             4.              
```

## Opcodes

```
  0: 0x0001 [0x2F] Borghertz (ID: 17784904/0x010F6048)->Render.Flags0 &= ~0x80000 // Bit 19
  1: 0x0007 [0x20] SET_CLI_EVENT_UC_FLAG: Lock player control
  2: 0x0009 [0x46] CAMERA_CONTROL: Disable user control
  3: 0x000B [0x42] SET_CLI_EVENT_CANCEL_DATA()
  4: 0x000C [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
  5: 0x001D [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=200*
  6: 0x002C [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 0*
  7: 0x0030 [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 0*
  8: 0x0034 [0x77] SET_EVENT_TIME_WEATHER(hour=0*, weather=6*)
  9: 0x0039 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "u001" with entities [LocalPlayer, LocalPlayer], work=[207*, 0*]
 10: 0x004A [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "u001" with entities [LocalPlayer, LocalPlayer], work=207*
 11: 0x0059 [0x38] SET_CLIENT_EVENT_MODE(mode=19*)
 12: 0x005C [0x29] REQ_SET_WAIT(priority=0x03, entity_id=LocalPlayer, tag_num=0x1C)
 13: 0x0063 [0x4E] SET_ENTITY_HIDE_FLAG: Show Borghertz (ID: 17784904/0x010F6048)
 14: 0x0069 [0x80] LOAD_WAIT(entity=Borghertz (ID: 17784904/0x010F6048))
 15: 0x006E [0x27] REQ_SET(priority=0x03, entity_id=Borghertz (ID: 17784904/0x010F6048), tag_num=0x02)
 16: 0x0075 [0x1A] CALL_SUBROUTINE(address=0x0191)
 17: 0x0078 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "u002" with entities [LocalPlayer, LocalPlayer], work=[207*, 0*]
 18: 0x0089 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "u002" with entities [LocalPlayer, LocalPlayer], work=207*
 19: 0x0098 [0x2A] GET_REQ_LEVEL(level=3, entity_id=Borghertz (ID: 17784904/0x010F6048))
 20: 0x009E [0x1C] WAIT(30* ticks)
 21: 0x00A1 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "u005" with entities [LocalPlayer, LocalPlayer], work=[207*, 0*]
 22: 0x00B2 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "u005" with entities [LocalPlayer, LocalPlayer], work=207*
 23: 0x00C1 [0x29] REQ_SET_WAIT(priority=0x04, entity_id=Borghertz (ID: 17784904/0x010F6048), tag_num=0x03)
 24: 0x00C8 [0x4A] LocalPlayer looks at Borghertz (ID: 17784904/0x010F6048)
 25: 0x00D1 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "u003" with entities [LocalPlayer, LocalPlayer], work=[207*, 0*]
 26: 0x00E2 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "u003" with entities [LocalPlayer, LocalPlayer], work=207*
 27: 0x00F1 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 28: 0x00F2 [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until LocalPlayer Render.Flags0 and Render.Flags3 conditions are met
 29: 0x00F7 [0x1C] WAIT(30* ticks)
 30: 0x00FA [0x2B] Borghertz (ID: 17784904/0x010F6048) [7313*]:
    → "You wish to consign an order with me?\u007F1\u0000\u0007"
 31: 0x0101 [0x23] WAIT_FOR_DIALOG_INTERACTION
 32: 0x0102 [0x06] Work_Zone[1] = 0
 33: 0x0105 [0x42] SET_CLI_EVENT_CANCEL_DATA()
 34: 0x0106 [0x24] CREATE_DIALOG(message_id=7314*, default_option=0*, option_flags=0*)
    → "Consign an order?\u0007\u000BYes.\u0007No, thanks.\u007F1\u0000\u0007"
 35: 0x010D [0x25] WAIT_DIALOG_SELECT()
 36: 0x010E [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x0144
 37: 0x0116 [0x42] SET_CLI_EVENT_CANCEL_DATA()
 38: 0x0117 [0x03] Work_Zone[2] = 211*
 39: 0x011C [0x2B] Borghertz (ID: 17784904/0x010F6048) [7315*]:
    → "Very well. Bring \u0001\u00056\u0002\u0000\u0000\u0000 from Castle Zvahl. Leave them and those gauntlets inside my toolbox, and I shall restore the gauntlets.\u007F1\u0000\u0007"
 40: 0x0123 [0x23] WAIT_FOR_DIALOG_INTERACTION
 41: 0x0124 [0x7B] LocalPlayer stops talking
 42: 0x0129 [0x7B] Borghertz (ID: 17784904/0x010F6048) stops talking
 43: 0x012E [0x27] REQ_SET(priority=0x03, entity_id=Borghertz (ID: 17784904/0x010F6048), tag_num=0x04)
 44: 0x0135 [0x27] REQ_SET(priority=0x03, entity_id=LocalPlayer, tag_num=0x1D)
 45: 0x013C [0x03] Work_Zone[1] = 1*
 46: 0x0141 [0x01] GOTO 0x0144

SUBROUTINE_0144:
 47: 0x0144 [0x6C] FADE_ENTITY_COLOR(entity_id=Borghertz (ID: 17784904/0x010F6048), end_alpha=0*, fade_time=128*)
 48: 0x014D [0x92] Borghertz (ID: 17784904/0x010F6048)->Render.Flags3 ^= 0x01
 49: 0x0153 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo2" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 50: 0x0164 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo2" with entities [LocalPlayer, LocalPlayer], work=200*
 51: 0x0173 [0x78] ENABLE_GAME_TIMER_RESET_WEATHER()
 52: 0x0174 [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 110*
 53: 0x0178 [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 110*
 54: 0x017C [0x46] CAMERA_CONTROL: Restore default settings
 55: 0x017E [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi2" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 56: 0x018F [0x21] END_EVENT
 57: 0x0190 [0x00] END_REQSTACK()

SUBROUTINE_0191:
 58: 0x0191 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "u004" with entities [LocalPlayer, LocalPlayer], work=[207*, 0*]
 59: 0x01A2 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "u004" with entities [LocalPlayer, LocalPlayer], work=207*
 60: 0x01B1 [0x1B] RETURN
```
