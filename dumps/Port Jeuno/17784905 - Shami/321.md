# Event 321

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 32/114    |
| Offset          | 0x04F5    |
| Data Size       | 409 bytes |
| Calculated Size | 409 bytes |
| Instructions    | 78        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
04F0:                42 1E F0  FF FF 7F 06 03 00 06 04       B..........
0500: 00 41 42 80 43 80 02 10  0A 00 02 0A 00 00 80 01  .AB.C...........
0510: 2A 05 0B 03 00 3C 04 00  00 80 44 80 03 05 00 0E  *....<....D.....
0520: 80 41 42 80 43 80 02 10  06 00 41 42 80 43 80 03  .AB.C.....AB.C..
0530: 10 0B 00 02 0B 00 00 80  01 53 05 0B 03 00 3C 04  .........S....<.
0540: 00 44 80 44 80 03 05 00  15 80 41 42 80 43 80 03  .D.D......AB.C..
0550: 10 06 00 41 42 80 43 80  04 10 0C 00 02 0C 00 00  ...AB.C.........
0560: 80 01 7C 05 0B 03 00 3C  04 00 45 80 44 80 03 05  ..|....<..E.D...
0570: 00 1F 80 41 42 80 43 80  04 10 06 00 41 42 80 43  ...AB.C.....AB.C
0580: 80 05 10 0D 00 02 0D 00  00 80 01 A5 05 0B 03 00  ................
0590: 3C 04 00 46 80 44 80 03  05 00 22 80 41 42 80 43  <..F.D....".AB.C
05A0: 80 05 10 06 00 41 42 80  43 80 06 10 0E 00 02 0E  .....AB.C.......
05B0: 00 00 80 01 CE 05 0B 03  00 3C 04 00 47 80 44 80  .........<..G.D.
05C0: 03 05 00 25 80 41 42 80  43 80 06 10 06 00 1D 29  ...%.AB.C......)
05D0: 80 23 02 03 00 44 80 00  EB 05 03 02 10 05 00 03  .#...D..........
05E0: 03 10 06 00 1D 48 80 23  01 8C 06 02 03 00 44 80  .....H.#......D.
05F0: 02 8C 06 1D 49 80 23 03  07 00 00 80 02 07 00 4A  ....I.#........J
0600: 80 03 88 06 3E 04 00 07  00 82 06 02 07 00 00 80  ....>...........
0610: 80 20 06 03 02 10 0E 80  03 03 10 0A 00 01 7E 06  . ............~.
0620: 02 07 00 44 80 80 35 06  03 02 10 15 80 03 03 10  ...D..5.........
0630: 0B 00 01 7E 06 02 07 00  45 80 80 4A 06 03 02 10  ...~....E..J....
0640: 1F 80 03 03 10 0C 00 01  7E 06 02 07 00 46 80 80  ........~....F..
0650: 5F 06 03 02 10 22 80 03  03 10 0D 00 01 7E 06 02  _....".......~..
0660: 07 00 47 80 80 74 06 03  02 10 25 80 03 03 10 0E  ..G..t....%.....
0670: 00 01 7E 06 03 02 10 44  80 03 03 10 4B 80 1D 4C  ..~....D....K..L
0680: 80 23 0B 07 00 01 FC 05  1D 4D 80 23 21 00        .#.......M.#!.  
```

## Opcodes

```
  0: 0x04F5 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x04F6 [0x1E] EventEntity looks at LocalPlayer and starts talking
  2: 0x04FB [0x06] ExtData[1]->WorkLocal[3] = 0
  3: 0x04FE [0x06] ExtData[1]->WorkLocal[4] = 0
  4: 0x0501 [0x41] ExtData[1]->WorkLocal[10] = Work_Zone[2] (bits 16*-31*)
  5: 0x050A [0x02] IF !(ExtData[1]->WorkLocal[10] == 0*) GOTO 0x052A
  6: 0x0512 [0x0B] ExtData[1]->WorkLocal[3]++
  7: 0x0515 [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=0x04, bit_index_work_offset=0x8000, condition_work_offset=0x8044)
  8: 0x051C [0x03] ExtData[1]->WorkLocal[5] = 1126*
  9: 0x0521 [0x41] ExtData[1]->WorkLocal[6] = Work_Zone[2] (bits 16*-31*)
 10: 0x052A [0x41] ExtData[1]->WorkLocal[11] = Work_Zone[3] (bits 16*-31*)
 11: 0x0533 [0x02] IF !(ExtData[1]->WorkLocal[11] == 0*) GOTO 0x0553
 12: 0x053B [0x0B] ExtData[1]->WorkLocal[3]++
 13: 0x053E [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=0x04, bit_index_work_offset=0x8044, condition_work_offset=0x8044)
 14: 0x0545 [0x03] ExtData[1]->WorkLocal[5] = 1127*
 15: 0x054A [0x41] ExtData[1]->WorkLocal[6] = Work_Zone[3] (bits 16*-31*)
 16: 0x0553 [0x41] ExtData[1]->WorkLocal[12] = Work_Zone[4] (bits 16*-31*)
 17: 0x055C [0x02] IF !(ExtData[1]->WorkLocal[12] == 0*) GOTO 0x057C
 18: 0x0564 [0x0B] ExtData[1]->WorkLocal[3]++
 19: 0x0567 [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=0x04, bit_index_work_offset=0x8045, condition_work_offset=0x8044)
 20: 0x056E [0x03] ExtData[1]->WorkLocal[5] = 2955*
 21: 0x0573 [0x41] ExtData[1]->WorkLocal[6] = Work_Zone[4] (bits 16*-31*)
 22: 0x057C [0x41] ExtData[1]->WorkLocal[13] = Work_Zone[5] (bits 16*-31*)
 23: 0x0585 [0x02] IF !(ExtData[1]->WorkLocal[13] == 0*) GOTO 0x05A5
 24: 0x058D [0x0B] ExtData[1]->WorkLocal[3]++
 25: 0x0590 [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=0x04, bit_index_work_offset=0x8046, condition_work_offset=0x8044)
 26: 0x0597 [0x03] ExtData[1]->WorkLocal[5] = 2956*
 27: 0x059C [0x41] ExtData[1]->WorkLocal[6] = Work_Zone[5] (bits 16*-31*)
 28: 0x05A5 [0x41] ExtData[1]->WorkLocal[14] = Work_Zone[6] (bits 16*-31*)
 29: 0x05AE [0x02] IF !(ExtData[1]->WorkLocal[14] == 0*) GOTO 0x05CE
 30: 0x05B6 [0x0B] ExtData[1]->WorkLocal[3]++
 31: 0x05B9 [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=0x04, bit_index_work_offset=0x8047, condition_work_offset=0x8044)
 32: 0x05C0 [0x03] ExtData[1]->WorkLocal[5] = 2957*
 33: 0x05C5 [0x41] ExtData[1]->WorkLocal[6] = Work_Zone[6] (bits 16*-31*)
 34: 0x05CE [0x1D] PRINT_EVENT_MESSAGE(message_id=7354*)
    → "All right, it's a deal. (Heh, what a sucker!)\u007F1\u0000\u0007"
 35: 0x05D1 [0x23] WAIT_FOR_DIALOG_INTERACTION
 36: 0x05D2 [0x02] IF !(ExtData[1]->WorkLocal[3] == 1*) GOTO 0x05EB
 37: 0x05DA [0x03] Work_Zone[2] = ExtData[1]->WorkLocal[5]
 38: 0x05DF [0x03] Work_Zone[3] = ExtData[1]->WorkLocal[6]
 39: 0x05E4 [0x1D] PRINT_EVENT_MESSAGE(message_id=7355*)
    → "Lemme see here... \u0008, is it? Here we go.\u0007As of last count, you've got a balance of 
\u0001 \u0001	)\u0002\u0001\u0000\u0000\u0002\u0000\u0000\u0000.\u007F1\u0000\u0007"
 40: 0x05E7 [0x23] WAIT_FOR_DIALOG_INTERACTION
 41: 0x05E8 [0x01] GOTO 0x068C
 42: 0x05EB [0x02] IF !(ExtData[1]->WorkLocal[3] <= 1*) GOTO 0x068C
 43: 0x05F3 [0x1D] PRINT_EVENT_MESSAGE(message_id=7356*)
    → "Let's see. When taken together with those you've already given me, I'm currently holding the following:\u007F1\u0000\u0007"
 44: 0x05F6 [0x23] WAIT_FOR_DIALOG_INTERACTION
 45: 0x05F7 [0x03] ExtData[1]->WorkLocal[7] = 0*

SUBROUTINE_05FC:
 46: 0x05FC [0x02] IF !(ExtData[1]->WorkLocal[7] >= 5*) GOTO 0x0688
 47: 0x0604 [0x3E] IF !(ExtData[1]->WorkLocal[4] bit ExtData[1]->WorkLocal[7]) GOTO 0x0682
 48: 0x060B [0x02] IF !(ExtData[1]->WorkLocal[7] == 0*) GOTO 0x0620
 49: 0x0613 [0x03] Work_Zone[2] = 1126*
 50: 0x0618 [0x03] Work_Zone[3] = ExtData[1]->WorkLocal[10]
 51: 0x061D [0x01] GOTO 0x067E
 52: 0x0620 [0x02] IF !(ExtData[1]->WorkLocal[7] == 1*) GOTO 0x0635
 53: 0x0628 [0x03] Work_Zone[2] = 1127*
 54: 0x062D [0x03] Work_Zone[3] = ExtData[1]->WorkLocal[11]
 55: 0x0632 [0x01] GOTO 0x067E
 56: 0x0635 [0x02] IF !(ExtData[1]->WorkLocal[7] == 2*) GOTO 0x064A
 57: 0x063D [0x03] Work_Zone[2] = 2955*
 58: 0x0642 [0x03] Work_Zone[3] = ExtData[1]->WorkLocal[12]
 59: 0x0647 [0x01] GOTO 0x067E
 60: 0x064A [0x02] IF !(ExtData[1]->WorkLocal[7] == 3*) GOTO 0x065F
 61: 0x0652 [0x03] Work_Zone[2] = 2956*
 62: 0x0657 [0x03] Work_Zone[3] = ExtData[1]->WorkLocal[13]
 63: 0x065C [0x01] GOTO 0x067E
 64: 0x065F [0x02] IF !(ExtData[1]->WorkLocal[7] == 4*) GOTO 0x0674
 65: 0x0667 [0x03] Work_Zone[2] = 2957*
 66: 0x066C [0x03] Work_Zone[3] = ExtData[1]->WorkLocal[14]
 67: 0x0671 [0x01] GOTO 0x067E
 68: 0x0674 [0x03] Work_Zone[2] = 1*
 69: 0x0679 [0x03] Work_Zone[3] = 4294967295*

SUBROUTINE_067E:
 70: 0x067E [0x1D] PRINT_EVENT_MESSAGE(message_id=7357*)
    → "
\u0001 \u0001	)\u0002\u0001\u0000\u0000\u0002\u0000\u0000\u0000.\u007F1\u0000\u0007"
 71: 0x0681 [0x23] WAIT_FOR_DIALOG_INTERACTION
 72: 0x0682 [0x0B] ExtData[1]->WorkLocal[7]++
 73: 0x0685 [0x01] GOTO 0x05FC
 74: 0x0688 [0x1D] PRINT_EVENT_MESSAGE(message_id=7358*)
    → "That should be about it. Lemme know if you need anything else.\u007F1\u0000\u0007"
 75: 0x068B [0x23] WAIT_FOR_DIALOG_INTERACTION

SUBROUTINE_068C:
 76: 0x068C [0x21] END_EVENT
 77: 0x068D [0x00] END_REQSTACK()
```
