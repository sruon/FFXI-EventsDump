# Event 23

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 2/114     |
| Offset          | 0x0001    |
| Data Size       | 342 bytes |
| Calculated Size | 342 bytes |
| Instructions    | 77        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000:    03 01 00 09 10 1E F0  FF FF 7F 6F 70 02 01 00   ..........op...
0010: 00 80 00 62 00 1D 01 80  23 5B 02 80 F8 FF FF 7F  ...b....#[......
0020: F8 FF FF 7F 70 61 73 30  53 F8 FF FF 7F F8 FF FF  ....pas0S.......
0030: 7F 70 61 73 30 1D 03 80  23 5B 02 80 F8 FF FF 7F  .pas0...#[......
0040: F8 FF FF 7F 74 68 6B 31  1D 04 80 23 5B 02 80 F8  ....thk1...#[...
0050: FF FF 7F F8 FF FF 7F 74  68 6B 32 1D 05 80 23 01  .......thk2...#.
0060: 75 00 5B 02 80 F8 FF FF  7F F8 FF FF 7F 74 6C 6B  u.[..........tlk
0070: 31 1D 06 80 23 1A A2 00  1D 07 80 23 1A C6 00 1D  1...#......#....
0080: 08 80 23 1A E0 00 1D 09  80 23 1A 09 01 1D 0A 80  ..#......#......
0090: 23 1A 23 01 1D 0B 80 23  1D 0C 80 23 1D 0D 80 23  #.#....#...#...#
00A0: 21 00 03 02 10 0E 80 03  03 10 0F 80 03 04 10 10  !...............
00B0: 80 03 05 10 11 80 03 06  10 12 80 03 07 10 13 80  ................
00C0: 03 08 10 14 80 1B 03 02  10 15 80 03 03 10 16 80  ................
00D0: 03 04 10 17 80 03 05 10  18 80 03 06 10 19 80 1B  ................
00E0: 03 02 10 0E 80 03 03 10  1A 80 03 04 10 1B 80 03  ................
00F0: 05 10 16 80 03 06 10 1C  80 03 07 10 1D 80 03 08  ................
0100: 10 1E 80 03 09 10 15 80  1B 03 02 10 1F 80 03 03  ................
0110: 10 16 80 03 04 10 20 80  03 05 10 12 80 03 06 10  ...... .........
0120: 21 80 1B 03 02 10 22 80  03 03 10 16 80 03 04 10  !.....".........
0130: 23 80 03 05 10 12 80 03  06 10 24 80 1B 03 02 10  #.........$.....
0140: 25 80 03 03 10 26 80 03  04 10 27 80 03 05 10 1A  %....&....'.....
0150: 80 03 06 10 28 80 1B                              ....(..         
```

## Opcodes

```
  0: 0x0001 [0x03] ExtData[1]->WorkLocal[1] = Work_Zone[9]
  1: 0x0006 [0x1E] EventEntity looks at LocalPlayer and starts talking
  2: 0x000B [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  3: 0x000C [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
  4: 0x000D [0x02] IF !(ExtData[1]->WorkLocal[1] == 0*) GOTO 0x0062
  5: 0x0015 [0x1D] PRINT_EVENT_MESSAGE(message_id=7332*)
    → "Hello there, \u007F\u0005[sir/madam]. I've got a very fine item. Would you like to have a look?\u007F1\u0000\u0007"
  6: 0x0018 [0x23] WAIT_FOR_DIALOG_INTERACTION
  7: 0x0019 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "pas0" with entities [EventEntity, EventEntity], work=65*
  8: 0x0028 [0x53] WAIT_SCHEDULER_TASK: Wait for scheduler "pas0" with entities [EventEntity, EventEntity]
  9: 0x0035 [0x1D] PRINT_EVENT_MESSAGE(message_id=7333*)
    → "It's no regular glass bead! Why, this particular item has a monster trapped inside!\u007F1\u0000\u0007"
 10: 0x0038 [0x23] WAIT_FOR_DIALOG_INTERACTION
 11: 0x0039 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "thk1" with entities [EventEntity, EventEntity], work=65*
 12: 0x0048 [0x1D] PRINT_EVENT_MESSAGE(message_id=7334*)
    → "Apparently, this monster has swallowed a treasure! And as long as it remains inside this ball, there's no way to get it out, right? Wrong!\u007F1\u0000\u0007"
 13: 0x004B [0x23] WAIT_FOR_DIALOG_INTERACTION
 14: 0x004C [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "thk2" with entities [EventEntity, EventEntity], work=65*
 15: 0x005B [0x1D] PRINT_EVENT_MESSAGE(message_id=7335*)
    → "I was told that the monster can be released by tossing it into burning circles and strange doorways located around Vana'diel.\u007F1\u0000\u0007"
 16: 0x005E [0x23] WAIT_FOR_DIALOG_INTERACTION
 17: 0x005F [0x01] GOTO 0x0075
 18: 0x0062 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tlk1" with entities [EventEntity, EventEntity], work=65*
 19: 0x0071 [0x1D] PRINT_EVENT_MESSAGE(message_id=7336*)
    → "What do you say? I've still got lots of them!\u007F1\u0000\u0007"
 20: 0x0074 [0x23] WAIT_FOR_DIALOG_INTERACTION
 21: 0x0075 [0x1A] CALL_SUBROUTINE(address=0x00A2)
 22: 0x0078 [0x1D] PRINT_EVENT_MESSAGE(message_id=7337*)
    → "Give me 
\u0002 \u0001\u0005%\u0002\u0000\u0000\u0000 and I'll give you \u0001\u0001\u0001 \u0001\u0005$\u0002\u0001\u0000\u0000. Give me 
\u0004 of them for \u0001\u0001\u0001 \u0001\u0005$\u0002\u0003\u0000\u0000. Or, give me 
\u0006, and I'll let you have one of these \u0001\u0005%\u0002\u0005\u0000\u0000. What a deal, huh?\u007F1\u0000\u0007"
 23: 0x007B [0x23] WAIT_FOR_DIALOG_INTERACTION
 24: 0x007C [0x1A] CALL_SUBROUTINE(address=0x00C6)
 25: 0x007F [0x1D] PRINT_EVENT_MESSAGE(message_id=7338*)
    → "For just 
\u0001 \u0001\u0005%\u0002\u0000\u0000\u0000, I'll trade you \u0001\u0001\u0001 \u0001\u0005$\u0002\u0002\u0000\u0000, \u0001\u0001\u0001 \u0001\u0005$\u0002\u0003\u0000\u0000, or \u0001\u0001\u0001 \u0001\u0005$\u0002\u0004\u0000\u0000. You'd be crazy to pass this offer up!\u007F1\u0000\u0007"
 26: 0x0082 [0x23] WAIT_FOR_DIALOG_INTERACTION
 27: 0x0083 [0x1A] CALL_SUBROUTINE(address=0x00E0)
 28: 0x0086 [0x1D] PRINT_EVENT_MESSAGE(message_id=7339*)
    → "And how about 
\u0001 \u0001\u0005%\u0002\u0000\u0000\u0000 for \u0001\u0001\u0001 \u0001\u0005$\u0002\u0002\u0000\u0000, 
\u0003 for \u0001\u0001\u0001 \u0001\u0005$\u0002\u0004\u0000\u0000, or 
\u0005 \u0001\u0005%\u0002\u0007\u0000\u0000 for \u0001\u0001\u0001 \u0001\u0005$\u0002\u0006\u0000\u0000?\u0007You won't be able to find a better price on goods like these anywhere in Vana'diel!\u007F1\u0000\u0007"
 29: 0x0089 [0x23] WAIT_FOR_DIALOG_INTERACTION
 30: 0x008A [0x1A] CALL_SUBROUTINE(address=0x0109)
 31: 0x008D [0x1D] PRINT_EVENT_MESSAGE(message_id=7340*)
    → "Oh ho, and what's this?\u0007\u007F\u0000\u0001\u0001\u0001\u0001 \u0001\u0005$\u0002\u0002\u0000\u0000 for 
\u0001 \u0001	)\u0002\u0001\u0000\u0000\u0002\u0000\u0000\u0000 or \u0001\u0001\u0001 \u0001\u0005$\u0002\u0004\u0000\u0000 for 
\u0003 of them.\u0007Why, these items are so brand-spankin' new, I didn't even know I had them!\u007F1\u0000\u0007"
 32: 0x0090 [0x23] WAIT_FOR_DIALOG_INTERACTION
 33: 0x0091 [0x1A] CALL_SUBROUTINE(address=0x0123)
 34: 0x0094 [0x1D] PRINT_EVENT_MESSAGE(message_id=7341*)
    → "Whoa there, friend! Walk away now and you'll miss the best part!\u0007Haha, that's right! This is a special offer for my favorite customer!\u007F1\u0000\u0007"
 35: 0x0097 [0x23] WAIT_FOR_DIALOG_INTERACTION
 36: 0x0098 [0x1D] PRINT_EVENT_MESSAGE(message_id=7342*)
    → "Let me lay it on the line for you--
\u0001 \u0001	)\u0002\u0001\u0000\u0000\u0002\u0000\u0000\u0000.\u0007That's all it'll take to get you this \u0001\u0005#\u0002\u0002\u0000\u0000.\u0007I'll say that again to make it sound even more impressive. \u007F\u0000\u0001\u0001\u0001\u0001 \u0001\u0005$\u0002\u0002\u0000\u0000!\u007F1\u0000\u0007"
 37: 0x009B [0x23] WAIT_FOR_DIALOG_INTERACTION
 38: 0x009C [0x1D] PRINT_EVENT_MESSAGE(message_id=7343*)
    → "Or if you're looking to really splurge, how about 
\u0003 of those crests for \u0001\u0001\u0001 \u0001\u0005$\u0002\u0004\u0000\u0000?\u0007This deal's so hot that if you don't take it, I just might buy it from myself!\u007F1\u0000\u0007"
 39: 0x009F [0x23] WAIT_FOR_DIALOG_INTERACTION
 40: 0x00A0 [0x21] END_EVENT
 41: 0x00A1 [0x00] END_REQSTACK()

SUBROUTINE_00A2:
 42: 0x00A2 [0x03] Work_Zone[2] = 1126*
 43: 0x00A7 [0x03] Work_Zone[3] = 1131*
 44: 0x00AC [0x03] Work_Zone[4] = 40*
 45: 0x00B1 [0x03] Work_Zone[5] = 1177*
 46: 0x00B6 [0x03] Work_Zone[6] = 50*
 47: 0x00BB [0x03] Work_Zone[7] = 1130*
 48: 0x00C0 [0x03] Work_Zone[8] = 60*
 49: 0x00C5 [0x1B] RETURN

SUBROUTINE_00C6:
 50: 0x00C6 [0x03] Work_Zone[2] = 1127*
 51: 0x00CB [0x03] Work_Zone[3] = 30*
 52: 0x00D0 [0x03] Work_Zone[4] = 1175*
 53: 0x00D5 [0x03] Work_Zone[5] = 1178*
 54: 0x00DA [0x03] Work_Zone[6] = 1180*
 55: 0x00DF [0x1B] RETURN

SUBROUTINE_00E0:
 56: 0x00E0 [0x03] Work_Zone[2] = 1126*
 57: 0x00E5 [0x03] Work_Zone[3] = 20*
 58: 0x00EA [0x03] Work_Zone[4] = 1551*
 59: 0x00EF [0x03] Work_Zone[5] = 30*
 60: 0x00F4 [0x03] Work_Zone[6] = 1552*
 61: 0x00F9 [0x03] Work_Zone[7] = 99*
 62: 0x00FE [0x03] Work_Zone[8] = 1553*
 63: 0x0103 [0x03] Work_Zone[9] = 1127*
 64: 0x0108 [0x1B] RETURN

SUBROUTINE_0109:
 65: 0x0109 [0x03] Work_Zone[2] = 2955*
 66: 0x010E [0x03] Work_Zone[3] = 30*
 67: 0x0113 [0x03] Work_Zone[4] = 3351*
 68: 0x0118 [0x03] Work_Zone[5] = 50*
 69: 0x011D [0x03] Work_Zone[6] = 3352*
 70: 0x0122 [0x1B] RETURN

SUBROUTINE_0123:
 71: 0x0123 [0x03] Work_Zone[2] = 2956*
 72: 0x0128 [0x03] Work_Zone[3] = 30*
 73: 0x012D [0x03] Work_Zone[4] = 3454*
 74: 0x0132 [0x03] Work_Zone[5] = 50*
 75: 0x0137 [0x03] Work_Zone[6] = 3455*
 76: 0x013C [0x1B] RETURN
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x013D [0x03] Work_Zone[2] = 2957*
     0x0142 [0x03] Work_Zone[3] = 10*
     0x0147 [0x03] Work_Zone[4] = 4062*
     0x014C [0x03] Work_Zone[5] = 20*
     0x0151 [0x03] Work_Zone[6] = 4063*
     0x0156 [0x1B] RETURN
```