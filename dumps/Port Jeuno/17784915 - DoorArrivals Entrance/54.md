# Event 54

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 2/2       |
| Offset          | 0x0001    |
| Data Size       | 290 bytes |
| Calculated Size | 290 bytes |
| Instructions    | 53        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000:    03 04 00 02 10 03 05  00 03 10 06 01 10 3B F0   .............;.
0010: FF FF 7F 01 00 02 00 03  00 02 02 00 00 80 03 35  ...............5
0020: 00 4A 0C 60 0F 01 F0 FF  FF 7F 2B 0C 60 0F 01 01  .J.`......+.`...
0030: 80 23 01 21 01 4A 0B 60  0F 01 F0 FF FF 7F 2B 0B  .#.!.J.`......+.
0040: 60 0F 01 02 80 23 24 03  80 04 80 05 80 25 02 00  `....#$......%..
0050: 10 05 80 00 21 01 03 01  10 04 80 42 46 01 4C 45  ....!......BF.LE
0060: 06 80 F0 FF FF 7F F0 FF  FF 7F 63 6D 35 31 05 80  ..........cm51..
0070: 02 04 00 04 80 00 E0 00  27 0A F0 FF FF 7F 13 1C  ........'.......
0080: 07 80 4A 0B 60 0F 01 F0  FF FF 7F 6F 76 0B 60 0F  ..J.`......ov.`.
0090: 01 2B 0B 60 0F 01 08 80  23 2A 0A F0 FF FF 7F 4A  .+.`....#*.....J
00A0: F0 FF FF 7F 0B 60 0F 01  6F 76 F0 FF FF 7F 66 09  .....`..ov....f.
00B0: 80 0B 60 0F 01 0B 60 0F  01 74 6C 6B 30 2B 0B 60  ..`...`..tlk0+.`
00C0: 0F 01 0A 80 23 2B 0B 60  0F 01 0B 80 23 6B 69 64  ....#+.`....#kid
00D0: 6C 30 0B 60 0F 01 29 0A  F0 FF FF 7F 14 01 F3 00  l0.`..).........
00E0: 29 0A F0 FF FF 7F 12 02  05 00 04 80 00 F3 00 48  )..............H
00F0: 0C 80 23 4D 1C 07 80 45  0D 80 F0 FF FF 7F F0 FF  ..#M...E........
0100: FF 7F 66 64 6F 30 05 80  1C 09 80 46 00 45 0D 80  ..fdo0.....F.E..
0110: F0 FF FF 7F F0 FF FF 7F  66 64 69 30 05 80 01 21  ........fdi0...!
0120: 01 21 00                                          .!.             
```

## Opcodes

```
  0: 0x0001 [0x03] ExtData[1]->WorkLocal[4] = Work_Zone[2]
  1: 0x0006 [0x03] ExtData[1]->WorkLocal[5] = Work_Zone[3]
  2: 0x000B [0x06] Work_Zone[1] = 0
  3: 0x000E [0x3B] GET_ENTITY_POSITION(entity=LocalPlayer, x_destination=ExtData[1]->WorkLocal[1], y_destination=ExtData[1]->WorkLocal[2], z_destination=ExtData[1]->WorkLocal[3])
  4: 0x0019 [0x02] IF !(ExtData[1]->WorkLocal[2] >= 57998*) GOTO 0x0035
  5: 0x0021 [0x4A] Roupatour (ID: 17784844/0x010F600C) looks at LocalPlayer
  6: 0x002A [0x2B] Roupatour (ID: 17784844/0x010F600C) [7091*]:
    → "This is the arrivals exit. The entrance to departures is next door.\u007F1\u0000\u0007"
  7: 0x0031 [0x23] WAIT_FOR_DIALOG_INTERACTION
  8: 0x0032 [0x01] GOTO 0x0121
  9: 0x0035 [0x4A] Haubijoux (ID: 17784843/0x010F600B) looks at LocalPlayer
 10: 0x003E [0x2B] Haubijoux (ID: 17784843/0x010F600B) [7092*]:
    → "Once you go through customs, you'll have to pay to come back on board. Is that all right?\u007F1\u0000\u0007"
 11: 0x0045 [0x23] WAIT_FOR_DIALOG_INTERACTION
 12: 0x0046 [0x24] CREATE_DIALOG(message_id=7093*, default_option=1*, option_flags=0*)
    → "Proceed to the air travel agency?\u0007\u000BYes.\u0007No.\u007F1\u0000\u0007"
 13: 0x004D [0x25] WAIT_DIALOG_SELECT()
 14: 0x004E [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x0121
 15: 0x0056 [0x03] Work_Zone[1] = 1*
 16: 0x005B [0x42] SET_CLI_EVENT_CANCEL_DATA()
 17: 0x005C [0x46] CAMERA_CONTROL: Disable user control
 18: 0x005E [0x4C] EventEntity->StatusEvent = 8 // Open door
 19: 0x005F [0x45] LOAD_SCHEDULED_TASK: Load scheduler "cm51" with entities [LocalPlayer, LocalPlayer], work=[146*, 0*]
 20: 0x0070 [0x02] IF !(ExtData[1]->WorkLocal[4] == 1*) GOTO 0x00E0
 21: 0x0078 [0x27] REQ_SET(priority=0x0A, entity_id=LocalPlayer, tag_num=0x13)
 22: 0x007F [0x1C] WAIT(60* ticks)
 23: 0x0082 [0x4A] Haubijoux (ID: 17784843/0x010F600B) looks at LocalPlayer
 24: 0x008B [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 25: 0x008C [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until Haubijoux (ID: 17784843/0x010F600B) Render.Flags0 and Render.Flags3 conditions are met
 26: 0x0091 [0x2B] Haubijoux (ID: 17784843/0x010F600B) [7103*]:
    → "Hey, stop right there!\u007F1\u0000\u0007"
 27: 0x0098 [0x23] WAIT_FOR_DIALOG_INTERACTION
 28: 0x0099 [0x2A] GET_REQ_LEVEL(level=10, entity_id=LocalPlayer)
 29: 0x009F [0x4A] LocalPlayer looks at Haubijoux (ID: 17784843/0x010F600B)
 30: 0x00A8 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 31: 0x00A9 [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until LocalPlayer Render.Flags0 and Render.Flags3 conditions are met
 32: 0x00AE [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [Haubijoux (ID: 17784843/0x010F600B), Haubijoux (ID: 17784843/0x010F600B)], work=30*
 33: 0x00BD [0x2B] Haubijoux (ID: 17784843/0x010F600B) [7104*]:
    → "You are in possession of contraband! I'm sorry, but you'll have to surrender all prohibited goods!\u007F1\u0000\u0007"
 34: 0x00C4 [0x23] WAIT_FOR_DIALOG_INTERACTION
 35: 0x00C5 [0x2B] Haubijoux (ID: 17784843/0x010F600B) [7105*]:
    → "Regulations also force me to temporarily revoke your airship privileges. Don't let this kind of thing happen again.\u007F1\u0000\u0007"
 36: 0x00CC [0x23] WAIT_FOR_DIALOG_INTERACTION
 37: 0x00CD [0x6B] STOP_AND_IDLE: Haubijoux (ID: 17784843/0x010F600B) stops current action and resets to idle (animation="idl0")
 38: 0x00D6 [0x29] REQ_SET_WAIT(priority=0x0A, entity_id=LocalPlayer, tag_num=0x14)
 39: 0x00DD [0x01] GOTO 0x00F3
 40: 0x00E0 [0x29] REQ_SET_WAIT(priority=0x0A, entity_id=LocalPlayer, tag_num=0x12)
 41: 0x00E7 [0x02] IF !(ExtData[1]->WorkLocal[5] == 1*) GOTO 0x00F3
 42: 0x00EF [0x48] [System] [7106*]:
    → "You have cleared customs.\u007F4\u0000\u007F1\u0000\u0007"
 43: 0x00F2 [0x23] WAIT_FOR_DIALOG_INTERACTION

SUBROUTINE_00F3:
 44: 0x00F3 [0x4D] EventEntity->StatusEvent = 9 // Close door
 45: 0x00F4 [0x1C] WAIT(60* ticks)
 46: 0x00F7 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo0" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 47: 0x0108 [0x1C] WAIT(30* ticks)
 48: 0x010B [0x46] CAMERA_CONTROL: Restore default settings
 49: 0x010D [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi0" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 50: 0x011E [0x01] GOTO 0x0121

SUBROUTINE_0121:
 51: 0x0121 [0x21] END_EVENT
 52: 0x0122 [0x00] END_REQSTACK()
```
