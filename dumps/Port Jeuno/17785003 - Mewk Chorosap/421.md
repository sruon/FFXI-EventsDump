# Event 421

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 14/28     |
| Offset          | 0x0D01    |
| Data Size       | 157 bytes |
| Calculated Size | 157 bytes |
| Instructions    | 41        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0D00:    4A F8 FF FF 7F F0 FF  FF 7F 6F 70 1D 9D 80 23   J........op...#
0D10: 66 36 80 F8 FF FF 7F F8  FF FF 7F 74 68 6B 31 1D  f6.........thk1.
0D20: 9E 80 23 66 36 80 F8 FF  FF 7F F8 FF FF 7F 74 68  ..#f6.........th
0D30: 6B 32 1D 9F 80 23 48 A0  80 23 24 A1 80 28 80 21  k2...#H..#$..(.!
0D40: 80 25 02 00 10 21 80 00  53 0D 03 01 10 28 80 42  .%...!..S....(.B
0D50: 01 5A 0D 03 01 10 24 80  21 00 6E F8 FF FF 7F 41  .Z....$.!.n....A
0D60: 80 99 F8 FF FF 7F 1D A2  80 23 1A F0 19 1C 72 80  .........#....r.
0D70: 1A CF 19 1C 52 80 66 0F  80 F8 FF FF 7F F8 FF FF  ....R.f.........
0D80: 7F 70 61 73 30 1D A3 80  23 02 04 10 3D 80 00 98  .pas0...#...=...
0D90: 0D 1D 4F 80 23 01 9C 0D  1D 27 80 23 21 00        ..O.#....'.#!.  
```

## Opcodes

```
  0: 0x0D01 [0x4A] EventEntity looks at LocalPlayer
  1: 0x0D0A [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  2: 0x0D0B [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
  3: 0x0D0C [0x1D] PRINT_EVENT_MESSAGE(message_id=9214*)
    → "Mwahaha. What can I do for you, my frrriend?\u007F1\u0000\u0007"
  4: 0x0D0F [0x23] WAIT_FOR_DIALOG_INTERACTION
  5: 0x0D10 [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=59*, entity1=EventEntity, entity2=EventEntity, action="thk1")
  6: 0x0D1F [0x1D] PRINT_EVENT_MESSAGE(message_id=9215*)
    → "Hmm... There's something wrrrong with this shield. I don't think it's capable of properly channelling your spirit.\u007F1\u0000\u0007"
  7: 0x0D22 [0x23] WAIT_FOR_DIALOG_INTERACTION
  8: 0x0D23 [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=59*, entity1=EventEntity, entity2=EventEntity, action="thk2")
  9: 0x0D32 [0x1D] PRINT_EVENT_MESSAGE(message_id=9216*)
    → "Although, it's still perrrfectly repairable, if you so desire.\u007F1\u0000\u0007"
 10: 0x0D35 [0x23] WAIT_FOR_DIALOG_INTERACTION
 11: 0x0D36 [0x48] [System] [9217*]:
    → "However, know that repairing the \u0001\u0005#\u0002\u0000\u0000\u0000 will reset the escutcheon's progress to when you first received the \u0001\u0005#\u0002\u0001\u0000\u0000.\u007F1\u0000\u0007"
 12: 0x0D39 [0x23] WAIT_FOR_DIALOG_INTERACTION
 13: 0x0D3A [0x24] CREATE_DIALOG(message_id=9218*, default_option=1*, option_flags=0*)
    → "Do you want to repair the shield?\u0007\u000BSure.\u0007No thanks.\u007F1\u0000\u0007"
 14: 0x0D41 [0x25] WAIT_DIALOG_SELECT()
 15: 0x0D42 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x0D53
 16: 0x0D4A [0x03] Work_Zone[1] = 1*
 17: 0x0D4F [0x42] SET_CLI_EVENT_CANCEL_DATA()
 18: 0x0D50 [0x01] GOTO 0x0D5A

SUBROUTINE_0D53:
 19: 0x0D53 [0x03] Work_Zone[1] = 1073741824*
 20: 0x0D58 [0x21] END_EVENT
 21: 0x0D59 [0x00] END_REQSTACK()

SUBROUTINE_0D5A:
 22: 0x0D5A [0x6E] EventEntity uses emote 6*
 23: 0x0D61 [0x99] Wait for EventEntity animation to complete
 24: 0x0D66 [0x1D] PRINT_EVENT_MESSAGE(message_id=9219*)
    → "Okay, I'll make the rrrepairs. Wait just a moment.\u007F1\u0000\u0007"
 25: 0x0D69 [0x23] WAIT_FOR_DIALOG_INTERACTION
 26: 0x0D6A [0x1A] CALL_SUBROUTINE(address=0x19F0)
 27: 0x0D6D [0x1C] WAIT(60* ticks)
 28: 0x0D70 [0x1A] CALL_SUBROUTINE(address=0x19CF)
 29: 0x0D73 [0x1C] WAIT(30* ticks)
 30: 0x0D76 [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=121*, entity1=EventEntity, entity2=EventEntity, action="pas0")
 31: 0x0D85 [0x1D] PRINT_EVENT_MESSAGE(message_id=9220*)
    → "That should do it.\u007F1\u0000\u0007"
 32: 0x0D88 [0x23] WAIT_FOR_DIALOG_INTERACTION
 33: 0x0D89 [0x02] IF !(Work_Zone[4] == 4*) GOTO 0x0D98
 34: 0x0D91 [0x1D] PRINT_EVENT_MESSAGE(message_id=9173*)
    → "Mwahahaha. In that case, good luck to you, my frrriend.\u007F1\u0000\u0007"
 35: 0x0D94 [0x23] WAIT_FOR_DIALOG_INTERACTION
 36: 0x0D95 [0x01] GOTO 0x0D9C

SUBROUTINE_0D98:
 37: 0x0D98 [0x1D] PRINT_EVENT_MESSAGE(message_id=9170*)
    → "When you're finished, you'll need to receive a sign on the shield from your guildmaster that it's finished. Then brrring it back to me. I'm counting on you. Mwahaha.\u007F1\u0000\u0007"
 38: 0x0D9B [0x23] WAIT_FOR_DIALOG_INTERACTION
 39: 0x0D9C [0x21] END_EVENT
 40: 0x0D9D [0x00] END_REQSTACK()
```
