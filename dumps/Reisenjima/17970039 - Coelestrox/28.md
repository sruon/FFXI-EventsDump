# Event 28

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 4/7       |
| Offset          | 0x0817    |
| Data Size       | 179 bytes |
| Calculated Size | 179 bytes |
| Instructions    | 45        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0810:                      42  03 07 00 02 10 03 00 00         B........
0820: 03 10 03 08 00 04 10 03  09 00 05 10 03 0A 00 06  ................
0830: 10 03 0B 00 07 10 03 01  00 08 10 03 06 00 09 10  ................
0840: 03 02 00 02 80 1E F0 FF  FF 7F 1C 00 80 1D 37 80  ..............7.
0850: 23 1D 38 80 23 3E 00 00  02 80 63 08 1D 39 80 23  #.8.#>....c..9.#
0860: 01 6A 08 3C 02 00 04 80  00 80 03 02 10 08 00 03  .j.<............
0870: 03 10 09 00 24 3A 80 02  80 02 00 25 02 00 10 02  ....$:.....%....
0880: 80 00 8C 08 03 01 10 02  80 01 C7 08 02 00 10 00  ................
0890: 80 00 A0 08 1D 3B 80 23  03 01 10 00 80 01 C7 08  .....;.#........
08A0: 02 00 10 04 80 00 C7 08  1D 3C 80 23 02 0A 00 04  .........<.#....
08B0: 80 00 BF 08 1A C5 0A 03  01 10 15 80 01 C4 08 03  ................
08C0: 01 10 04 80 01 C7 08 2E  21 00                    ........!.      
```

## Opcodes

```
  0: 0x0817 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x0818 [0x03] ExtData[1]->WorkLocal[7] = Work_Zone[2]
  2: 0x081D [0x03] ExtData[1]->WorkLocal[0] = Work_Zone[3]
  3: 0x0822 [0x03] ExtData[1]->WorkLocal[8] = Work_Zone[4]
  4: 0x0827 [0x03] ExtData[1]->WorkLocal[9] = Work_Zone[5]
  5: 0x082C [0x03] ExtData[1]->WorkLocal[10] = Work_Zone[6]
  6: 0x0831 [0x03] ExtData[1]->WorkLocal[11] = Work_Zone[7]
  7: 0x0836 [0x03] ExtData[1]->WorkLocal[1] = Work_Zone[8]
  8: 0x083B [0x03] ExtData[1]->WorkLocal[6] = Work_Zone[9]
  9: 0x0840 [0x03] ExtData[1]->WorkLocal[2] = 0*
 10: 0x0845 [0x1E] EventEntity looks at LocalPlayer and starts talking
 11: 0x084A [0x1C] WAIT(1* ticks)
 12: 0x084D [0x1D] PRINT_EVENT_MESSAGE(message_id=7980*)
    → "You bring what I ask for, so I put to good use.\u007F1\u0000\u0007"
 13: 0x0850 [0x23] WAIT_FOR_DIALOG_INTERACTION
 14: 0x0851 [0x1D] PRINT_EVENT_MESSAGE(message_id=7981*)
    → "I use escha beads for thing. May take time, but is good price.\u007F1\u0000\u0007"
 15: 0x0854 [0x23] WAIT_FOR_DIALOG_INTERACTION
 16: 0x0855 [0x3E] IF !(ExtData[1]->WorkLocal[0] bit 0*) GOTO 0x0863
 17: 0x085C [0x1D] PRINT_EVENT_MESSAGE(message_id=7982*)
    → "Many beads, so I finish right away.\u007F1\u0000\u0007"
 18: 0x085F [0x23] WAIT_FOR_DIALOG_INTERACTION
 19: 0x0860 [0x01] GOTO 0x086A
 20: 0x0863 [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=ExtData[1]->WorkLocal[2], bit_index_work_offset=2*, condition_work_offset=1*)

SUBROUTINE_086A:
 21: 0x086A [0x03] Work_Zone[2] = ExtData[1]->WorkLocal[8]
 22: 0x086F [0x03] Work_Zone[3] = ExtData[1]->WorkLocal[9]
 23: 0x0874 [0x24] CREATE_DIALOG(message_id=7983*, default_option=0*, option_flags=ExtData[1]->WorkLocal[2])
    → "What now? (
\u0006 bead\u007F\u0012\u0006[/s])\u0007\u000BI need time to think.\u0007Cheap: 
\u0000 bead\u007F\u0012\u0000[/s].\u0007Speedy: 
\u0001 bead\u007F\u0012\u0001[/s].\u007F1\u0000\u0007"
 24: 0x087B [0x25] WAIT_DIALOG_SELECT()
 25: 0x087C [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x088C
 26: 0x0884 [0x03] Work_Zone[1] = 0*
 27: 0x0889 [0x01] GOTO 0x08C7
 28: 0x088C [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x08A0
 29: 0x0894 [0x1D] PRINT_EVENT_MESSAGE(message_id=7984*)
    → "You got it, chief. Come back later.\u007F1\u0000\u0007"
 30: 0x0897 [0x23] WAIT_FOR_DIALOG_INTERACTION
 31: 0x0898 [0x03] Work_Zone[1] = 1*
 32: 0x089D [0x01] GOTO 0x08C7
 33: 0x08A0 [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x08C7
 34: 0x08A8 [0x1D] PRINT_EVENT_MESSAGE(message_id=7985*)
    → "You want right away? Then watch true master at work!\u007F1\u0000\u0007"
 35: 0x08AB [0x23] WAIT_FOR_DIALOG_INTERACTION
 36: 0x08AC [0x02] IF !(ExtData[1]->WorkLocal[10] == 2*) GOTO 0x08BF
 37: 0x08B4 [0x1A] CALL_SUBROUTINE(address=0x0AC5)
 38: 0x08B7 [0x03] Work_Zone[1] = 3*
 39: 0x08BC [0x01] GOTO 0x08C4
 40: 0x08BF [0x03] Work_Zone[1] = 2*

SUBROUTINE_08C4:
 41: 0x08C4 [0x01] GOTO 0x08C7

SUBROUTINE_08C7:
 42: 0x08C7 [0x2E] SET_CLI_EVENT_CANCEL_FLAGS()
 43: 0x08C8 [0x21] END_EVENT
 44: 0x08C9 [0x00] END_REQSTACK()
```
