# Event 130

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 2/7       |
| Offset          | 0x0001    |
| Data Size       | 750 bytes |
| Calculated Size | 750 bytes |
| Instructions    | 115       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000:    1E F0 FF FF 7F 1D 00  80 23 24 01 80 02 80 02   ........#$.....
0010: 80 25 02 00 10 02 80 00  92 02 1D 03 80 23 24 04  .%...........#$.
0020: 80 02 80 02 80 25 02 00  10 02 80 00 FF 00 46 01  .....%........F.
0030: 42 39 05 80 45 06 80 F0  FF FF 7F F0 FF FF 7F 66  B9..E..........f
0040: 64 6F 30 02 80 55 06 80  F0 FF FF 7F F0 FF FF 7F  do0..U..........
0050: 66 64 6F 30 45 06 80 F0  FF FF 7F F0 FF FF 7F 66  fdo0E..........f
0060: 64 69 30 02 80 45 07 80  F0 FF FF 7F F0 FF FF 7F  di0..E..........
0070: 73 30 30 39 02 80 6F 70  66 08 80 F8 FF FF 7F F8  s009..opf.......
0080: FF FF 7F 70 6F 69 31 1D  09 80 23 1D 0A 80 23 1D  ...poi1...#...#.
0090: 0B 80 23 55 07 80 F0 FF  FF 7F F0 FF FF 7F 73 30  ..#U..........s0
00A0: 30 39 45 07 80 F0 FF FF  7F F0 FF FF 7F 73 30 31  09E..........s01
00B0: 30 02 80 1D 0C 80 23 1D  0D 80 23 55 07 80 F0 FF  0.....#...#U....
00C0: FF 7F F0 FF FF 7F 73 30  31 30 45 07 80 F0 FF FF  ......s010E.....
00D0: 7F F0 FF FF 7F 73 30 31  31 02 80 1C 0E 80 1D 0F  .....s011.......
00E0: 80 23 1C 0E 80 1D 10 80  23 1D 11 80 23 55 07 80  .#......#...#U..
00F0: F0 FF FF 7F F0 FF FF 7F  73 30 31 31 01 8F 02 02  ........s011....
0100: 00 10 12 80 00 C5 01 46  01 42 39 13 80 45 06 80  .......F.B9..E..
0110: F0 FF FF 7F F0 FF FF 7F  66 64 6F 30 02 80 55 06  ........fdo0..U.
0120: 80 F0 FF FF 7F F0 FF FF  7F 66 64 6F 30 45 06 80  .........fdo0E..
0130: F0 FF FF 7F F0 FF FF 7F  66 64 69 30 02 80 45 07  ........fdi0..E.
0140: 80 F0 FF FF 7F F0 FF FF  7F 73 30 31 32 02 80 6F  .........s012..o
0150: 70 66 08 80 F8 FF FF 7F  F8 FF FF 7F 70 6F 69 31  pf..........poi1
0160: 1D 14 80 23 55 07 80 F0  FF FF 7F F0 FF FF 7F 73  ...#U..........s
0170: 30 31 32 45 07 80 F0 FF  FF 7F F0 FF FF 7F 73 30  012E..........s0
0180: 31 33 02 80 1C 0E 80 1D  15 80 23 55 07 80 F0 FF  13........#U....
0190: FF 7F F0 FF FF 7F 73 30  31 33 45 07 80 F0 FF FF  ......s013E.....
01A0: 7F F0 FF FF 7F 73 30 31  34 02 80 1D 16 80 23 1D  .....s014.....#.
01B0: 17 80 23 55 07 80 F0 FF  FF 7F F0 FF FF 7F 73 30  ..#U..........s0
01C0: 31 34 01 8F 02 02 00 10  18 80 00 8F 02 46 01 42  14...........F.B
01D0: 45 06 80 F0 FF FF 7F F0  FF FF 7F 66 64 6F 30 02  E..........fdo0.
01E0: 80 39 19 80 55 06 80 F0  FF FF 7F F0 FF FF 7F 66  .9..U..........f
01F0: 64 6F 30 45 06 80 F0 FF  FF 7F F0 FF FF 7F 66 64  do0E..........fd
0200: 69 30 02 80 45 07 80 F0  FF FF 7F F0 FF FF 7F 73  i0..E..........s
0210: 30 31 35 02 80 6F 70 66  08 80 F8 FF FF 7F F8 FF  015..opf........
0220: FF 7F 70 6F 69 31 1C 1A  80 1D 1B 80 23 1D 1C 80  ..poi1......#...
0230: 23 55 07 80 F0 FF FF 7F  F0 FF FF 7F 73 30 31 35  #U..........s015
0240: 45 07 80 F0 FF FF 7F F0  FF FF 7F 73 30 31 36 02  E..........s016.
0250: 80 1D 1D 80 23 55 07 80  F0 FF FF 7F F0 FF FF 7F  ....#U..........
0260: 73 30 31 36 45 07 80 F0  FF FF 7F F0 FF FF 7F 73  s016E..........s
0270: 30 31 37 02 80 1D 1E 80  23 1D 1F 80 23 55 07 80  017.....#...#U..
0280: F0 FF FF 7F F0 FF FF 7F  73 30 31 37 01 8F 02 01  ........s017....
0290: 9F 02 02 00 10 12 80 00  9F 02 21 00 01 9F 02 45  ..........!....E
02A0: 06 80 F0 FF FF 7F F0 FF  FF 7F 66 64 6F 30 02 80  ..........fdo0..
02B0: 55 06 80 F0 FF FF 7F F0  FF FF 7F 66 64 6F 30 46  U..........fdo0F
02C0: 00 66 08 80 F8 FF FF 7F  F8 FF FF 7F 70 6F 69 32  .f..........poi2
02D0: 1C 0E 80 45 06 80 F0 FF  FF 7F F0 FF FF 7F 66 64  ...E..........fd
02E0: 69 31 02 80 1E F0 FF FF  7F 1D 20 80 23 21 00     i1........ .#!. 
```

## Opcodes

```
  0: 0x0001 [0x1E] EventEntity looks at LocalPlayer and starts talking
  1: 0x0006 [0x1D] PRINT_EVENT_MESSAGE(message_id=7550*)
    → "Yes?\u0007Are you in need of assistance?\u007F1\u0000\u0007"
  2: 0x0009 [0x23] WAIT_FOR_DIALOG_INTERACTION
  3: 0x000A [0x24] CREATE_DIALOG(message_id=7551*, default_option=0*, option_flags=0*)
    → "Ask for directions?\u0007\u000BAsk.\u0007Don't ask.\u007F1\u0000\u0007"
  4: 0x0011 [0x25] WAIT_DIALOG_SELECT()
  5: 0x0012 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x0292
  6: 0x001A [0x1D] PRINT_EVENT_MESSAGE(message_id=7552*)
    → "Which area do you want to know about?\u007F1\u0000\u0007"
  7: 0x001D [0x23] WAIT_FOR_DIALOG_INTERACTION
  8: 0x001E [0x24] CREATE_DIALOG(message_id=7553*, default_option=0*, option_flags=0*)
    → "Which area do you want to know about?\u0007\u000BThe Mog House, Metalworks, and the port.\u0007The shops and the Mines District.\u0007The Kulatz Bridge and the West Gate.\u007F1\u0000\u0007"
  9: 0x0025 [0x25] WAIT_DIALOG_SELECT()
 10: 0x0026 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x00FF
 11: 0x002E [0x46] CAMERA_CONTROL: Disable user control
 12: 0x0030 [0x42] SET_CLI_EVENT_CANCEL_DATA()
 13: 0x0031 [0x39] SET_ENTITY_DIRECTION(direction=19.3°*)
 14: 0x0034 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo0" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 15: 0x0045 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo0" with entities [LocalPlayer, LocalPlayer], work=200*
 16: 0x0054 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi0" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 17: 0x0065 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s009" with entities [LocalPlayer, LocalPlayer], work=[135*, 0*]
 18: 0x0076 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 19: 0x0077 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
 20: 0x0078 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "poi1" with entities [EventEntity, EventEntity], work=10*
 21: 0x0087 [0x1D] PRINT_EVENT_MESSAGE(message_id=7554*)
    → "First, go north from here, then turn east and go down the steps to get to the entrance of the residential area.\u007F1\u0000\u0007"
 22: 0x008A [0x23] WAIT_FOR_DIALOG_INTERACTION
 23: 0x008B [0x1D] PRINT_EVENT_MESSAGE(message_id=7555*)
    → "You can put your inventory in order or change jobs in your Mog House there.\u007F1\u0000\u0007"
 24: 0x008E [0x23] WAIT_FOR_DIALOG_INTERACTION
 25: 0x008F [0x1D] PRINT_EVENT_MESSAGE(message_id=7556*)
    → "There is also another entrance to the residential area on the other side of that big building to the left.\u007F1\u0000\u0007"
 26: 0x0092 [0x23] WAIT_FOR_DIALOG_INTERACTION
 27: 0x0093 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "s009" with entities [LocalPlayer, LocalPlayer], work=135*
 28: 0x00A2 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s010" with entities [LocalPlayer, LocalPlayer], work=[135*, 0*]
 29: 0x00B3 [0x1D] PRINT_EVENT_MESSAGE(message_id=7557*)
    → "If you go north at the intersection instead, you'll come across the entrance to the Metalworks.\u007F1\u0000\u0007"
 30: 0x00B6 [0x23] WAIT_FOR_DIALOG_INTERACTION
 31: 0x00B7 [0x1D] PRINT_EVENT_MESSAGE(message_id=7558*)
    → "The Metalworks is Bastok's center. It's a complex of metal forges, the Blacksmiths' Guild, and all administrative buildings including the President's Office.\u007F1\u0000\u0007"
 32: 0x00BA [0x23] WAIT_FOR_DIALOG_INTERACTION
 33: 0x00BB [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "s010" with entities [LocalPlayer, LocalPlayer], work=135*
 34: 0x00CA [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s011" with entities [LocalPlayer, LocalPlayer], work=[135*, 0*]
 35: 0x00DB [0x1C] WAIT(60* ticks)
 36: 0x00DE [0x1D] PRINT_EVENT_MESSAGE(message_id=7559*)
    → "Walk further north, passing the other entrance to the residential area on your right, and go down the steps...\u007F1\u0000\u0007"
 37: 0x00E1 [0x23] WAIT_FOR_DIALOG_INTERACTION
 38: 0x00E2 [0x1C] WAIT(60* ticks)
 39: 0x00E5 [0x1D] PRINT_EVENT_MESSAGE(message_id=7560*)
    → "...through a small housing area where you'll find the magic shop, and you'll be at the entrance to the port.\u007F1\u0000\u0007"
 40: 0x00E8 [0x23] WAIT_FOR_DIALOG_INTERACTION
 41: 0x00E9 [0x1D] PRINT_EVENT_MESSAGE(message_id=7561*)
    → "The Port District is where you'll find the air travel agency, the tavern, the drawbridge, and the North Gate.\u007F1\u0000\u0007"
 42: 0x00EC [0x23] WAIT_FOR_DIALOG_INTERACTION
 43: 0x00ED [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "s011" with entities [LocalPlayer, LocalPlayer], work=135*
 44: 0x00FC [0x01] GOTO 0x028F

SUBROUTINE_00FF:
 45: 0x00FF [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x01C5
 46: 0x0107 [0x46] CAMERA_CONTROL: Disable user control
 47: 0x0109 [0x42] SET_CLI_EVENT_CANCEL_DATA()
 48: 0x010A [0x39] SET_ENTITY_DIRECTION(direction=21.3°*)
 49: 0x010D [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo0" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 50: 0x011E [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo0" with entities [LocalPlayer, LocalPlayer], work=200*
 51: 0x012D [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi0" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 52: 0x013E [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s012" with entities [LocalPlayer, LocalPlayer], work=[135*, 0*]
 53: 0x014F [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 54: 0x0150 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
 55: 0x0151 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "poi1" with entities [EventEntity, EventEntity], work=10*
 56: 0x0160 [0x1D] PRINT_EVENT_MESSAGE(message_id=7562*)
    → "From here you can see on the left, in order, the Goldsmiths' Guild and the jewelry store.\u0007Further back along the canal is a housing area.\u007F1\u0000\u0007"
 57: 0x0163 [0x23] WAIT_FOR_DIALOG_INTERACTION
 58: 0x0164 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "s012" with entities [LocalPlayer, LocalPlayer], work=135*
 59: 0x0173 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s013" with entities [LocalPlayer, LocalPlayer], work=[135*, 0*]
 60: 0x0184 [0x1C] WAIT(60* ticks)
 61: 0x0187 [0x1D] PRINT_EVENT_MESSAGE(message_id=7563*)
    → "On the right is the area where street vendors set up shop, and further down you'll find more houses and the music store.\u007F1\u0000\u0007"
 62: 0x018A [0x23] WAIT_FOR_DIALOG_INTERACTION
 63: 0x018B [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "s013" with entities [LocalPlayer, LocalPlayer], work=135*
 64: 0x019A [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s014" with entities [LocalPlayer, LocalPlayer], work=[135*, 0*]
 65: 0x01AB [0x1D] PRINT_EVENT_MESSAGE(message_id=7564*)
    → "If you go down the stairs and head south, you'll come to the entrance to the Mines District.\u007F1\u0000\u0007"
 66: 0x01AE [0x23] WAIT_FOR_DIALOG_INTERACTION
 67: 0x01AF [0x1D] PRINT_EVENT_MESSAGE(message_id=7565*)
    → "The Mines District is where you'll find the Zeruhn Mines, the Alchemists' Guild, and the South Gate.\u007F1\u0000\u0007"
 68: 0x01B2 [0x23] WAIT_FOR_DIALOG_INTERACTION
 69: 0x01B3 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "s014" with entities [LocalPlayer, LocalPlayer], work=135*
 70: 0x01C2 [0x01] GOTO 0x028F

SUBROUTINE_01C5:
 71: 0x01C5 [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x028F
 72: 0x01CD [0x46] CAMERA_CONTROL: Disable user control
 73: 0x01CF [0x42] SET_CLI_EVENT_CANCEL_DATA()
 74: 0x01D0 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo0" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 75: 0x01E1 [0x39] SET_ENTITY_DIRECTION(direction=11.1°*)
 76: 0x01E4 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo0" with entities [LocalPlayer, LocalPlayer], work=200*
 77: 0x01F3 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi0" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 78: 0x0204 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s015" with entities [LocalPlayer, LocalPlayer], work=[135*, 0*]
 79: 0x0215 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 80: 0x0216 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
 81: 0x0217 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "poi1" with entities [EventEntity, EventEntity], work=10*
 82: 0x0226 [0x1C] WAIT(30* ticks)
 83: 0x0229 [0x1D] PRINT_EVENT_MESSAGE(message_id=7566*)
    → "On the other side of this fountain is the auction house.\u0007You can bid for items or put your own items up for sale at the auctioneer's window.\u007F1\u0000\u0007"
 84: 0x022C [0x23] WAIT_FOR_DIALOG_INTERACTION
 85: 0x022D [0x1D] PRINT_EVENT_MESSAGE(message_id=7567*)
    → "The Galkan deliveryman there can also send items to people's houses as well as your own.\u007F1\u0000\u0007"
 86: 0x0230 [0x23] WAIT_FOR_DIALOG_INTERACTION
 87: 0x0231 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "s015" with entities [LocalPlayer, LocalPlayer], work=135*
 88: 0x0240 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s016" with entities [LocalPlayer, LocalPlayer], work=[135*, 0*]
 89: 0x0251 [0x1D] PRINT_EVENT_MESSAGE(message_id=7568*)
    → "To the south of the auction house is the Kulatz Bridge.\u0007The weapons, armor, and goods shops are there.\u007F1\u0000\u0007"
 90: 0x0254 [0x23] WAIT_FOR_DIALOG_INTERACTION
 91: 0x0255 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "s016" with entities [LocalPlayer, LocalPlayer], work=135*
 92: 0x0264 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s017" with entities [LocalPlayer, LocalPlayer], work=[135*, 0*]
 93: 0x0275 [0x1D] PRINT_EVENT_MESSAGE(message_id=7569*)
    → "If you cross the bridge, you'll come to the West Gate.\u0007Walk through the gate to go to South Gustaberg.\u007F1\u0000\u0007"
 94: 0x0278 [0x23] WAIT_FOR_DIALOG_INTERACTION
 95: 0x0279 [0x1D] PRINT_EVENT_MESSAGE(message_id=7570*)
    → "You should be able to find one of the guards in charge of assigning missions, and a high guard in charge of conquests, nearby.\u007F1\u0000\u0007"
 96: 0x027C [0x23] WAIT_FOR_DIALOG_INTERACTION
 97: 0x027D [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "s017" with entities [LocalPlayer, LocalPlayer], work=135*
 98: 0x028C [0x01] GOTO 0x028F

SUBROUTINE_028F:
 99: 0x028F [0x01] GOTO 0x029F

SUBROUTINE_0292:
100: 0x0292 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x029F
101: 0x029A [0x21] END_EVENT
102: 0x029B [0x00] END_REQSTACK()

SUBROUTINE_029F:
103: 0x029F [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo0" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
104: 0x02B0 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo0" with entities [LocalPlayer, LocalPlayer], work=200*
105: 0x02BF [0x46] CAMERA_CONTROL: Restore default settings
106: 0x02C1 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "poi2" with entities [EventEntity, EventEntity], work=10*
107: 0x02D0 [0x1C] WAIT(60* ticks)
108: 0x02D3 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
109: 0x02E4 [0x1E] EventEntity looks at LocalPlayer and starts talking
110: 0x02E9 [0x1D] PRINT_EVENT_MESSAGE(message_id=7571*)
    → "Come back and ask me again if you need further assistance.\u007F1\u0000\u0007"
111: 0x02EC [0x23] WAIT_FOR_DIALOG_INTERACTION
112: 0x02ED [0x21] END_EVENT
113: 0x02EE [0x00] END_REQSTACK()
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x029C [0x01] GOTO 0x029F
```