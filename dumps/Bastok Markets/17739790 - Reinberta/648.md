# Event 648

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 12/31     |
| Offset          | 0x0E51    |
| Data Size       | 235 bytes |
| Calculated Size | 235 bytes |
| Instructions    | 52        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0E50:    4A F8 FF FF 7F F0 FF  FF 7F 4A F0 FF FF 7F F8   J........J.....
0E60: FF FF 7F 6F 70 66 01 80  F8 FF FF 7F F8 FF FF 7F  ...opf..........
0E70: 74 68 6B 31 1D 8E 80 23  03 01 10 0B 80 43 00 43  thk1...#.....C.C
0E80: 01 02 09 10 03 80 03 8B  0E 21 00 03 13 00 02 10  .........!......
0E90: 03 14 00 03 10 03 1B 00  04 10 66 01 80 F8 FF FF  ..........f.....
0EA0: 7F F8 FF FF 7F 74 68 6B  32 1A 4C 16 1D 8F 80 23  .....thk2.L....#
0EB0: 24 90 80 03 80 03 80 25  02 00 10 03 80 00 CE 0E  $......%........
0EC0: 1D 91 80 23 03 01 10 92  80 21 00 01 CE 0E 66 01  ...#.....!....f.
0ED0: 80 F8 FF FF 7F F8 FF FF  7F 74 68 6B 31 1D 93 80  .........thk1...
0EE0: 23 66 01 80 F8 FF FF 7F  F8 FF FF 7F 74 68 6B 32  #f..........thk2
0EF0: 24 94 80 03 80 03 80 25  02 00 10 03 80 00 0E 0F  $......%........
0F00: 1D 91 80 23 03 01 10 92  80 21 00 01 0E 0F 42 66  ...#.....!....Bf
0F10: 01 80 F8 FF FF 7F F8 FF  FF 7F 74 6C 6B 30 1D 95  ..........tlk0..
0F20: 80 23 1D 96 80 23 66 01  80 F8 FF FF 7F F8 FF FF  .#...#f.........
0F30: 7F 74 6C 6B 31 03 01 10  0B 80 21 00              .tlk1.....!.    
```

## Opcodes

```
  0: 0x0E51 [0x4A] EventEntity looks at LocalPlayer
  1: 0x0E5A [0x4A] LocalPlayer looks at EventEntity
  2: 0x0E63 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  3: 0x0E64 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
  4: 0x0E65 [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=10*, entity1=EventEntity, entity2=EventEntity, action="thk1")
  5: 0x0E74 [0x1D] PRINT_EVENT_MESSAGE(message_id=15066*)
    → "Let's see... The current task assigned to you is...\u007F1\u0000\u0007"
  6: 0x0E77 [0x23] WAIT_FOR_DIALOG_INTERACTION
  7: 0x0E78 [0x03] Work_Zone[1] = 1*
  8: 0x0E7D [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
  9: 0x0E7F [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
 10: 0x0E81 [0x02] IF !(Work_Zone[9] >= 0*) GOTO 0x0E8B
 11: 0x0E89 [0x21] END_EVENT
 12: 0x0E8A [0x00] END_REQSTACK()

SUBROUTINE_0E8B:
 13: 0x0E8B [0x03] ExtData[1]->WorkLocal[19] = Work_Zone[2]
 14: 0x0E90 [0x03] ExtData[1]->WorkLocal[20] = Work_Zone[3]
 15: 0x0E95 [0x03] ExtData[1]->WorkLocal[27] = Work_Zone[4]
 16: 0x0E9A [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=10*, entity1=EventEntity, entity2=EventEntity, action="thk2")
 17: 0x0EA9 [0x1A] CALL_SUBROUTINE(address=0x164C)
 18: 0x0EAC [0x1D] PRINT_EVENT_MESSAGE(message_id=15067*)
    → "So, how is the delivery going?\u007F1\u0000\u0007"
 19: 0x0EAF [0x23] WAIT_FOR_DIALOG_INTERACTION
 20: 0x0EB0 [0x24] CREATE_DIALOG(message_id=15068*, default_option=0*, option_flags=0*)
    → "Everything okay?\u0007\u000BEverything's great!\u0007It could be better...\u007F1\u0000\u0007"
 21: 0x0EB7 [0x25] WAIT_DIALOG_SELECT()
 22: 0x0EB8 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x0ECE
 23: 0x0EC0 [0x1D] PRINT_EVENT_MESSAGE(message_id=15069*)
    → "That's a relief. Please keep up the good work.\u007F1\u0000\u0007"
 24: 0x0EC3 [0x23] WAIT_FOR_DIALOG_INTERACTION
 25: 0x0EC4 [0x03] Work_Zone[1] = 1073741824*
 26: 0x0EC9 [0x21] END_EVENT
 27: 0x0ECA [0x00] END_REQSTACK()

SUBROUTINE_0ECE:
 28: 0x0ECE [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=10*, entity1=EventEntity, entity2=EventEntity, action="thk1")
 29: 0x0EDD [0x1D] PRINT_EVENT_MESSAGE(message_id=15070*)
    → "What's that? You want to abandon this task?\u007F1\u0000\u0007"
 30: 0x0EE0 [0x23] WAIT_FOR_DIALOG_INTERACTION
 31: 0x0EE1 [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=10*, entity1=EventEntity, entity2=EventEntity, action="thk2")
 32: 0x0EF0 [0x24] CREATE_DIALOG(message_id=15071*, default_option=0*, option_flags=0*)
    → "Will you see this through?\u0007\u000BI'll do my best.\u0007I've had enough.\u007F1\u0000\u0007"
 33: 0x0EF7 [0x25] WAIT_DIALOG_SELECT()
 34: 0x0EF8 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x0F0E
 35: 0x0F00 [0x1D] PRINT_EVENT_MESSAGE(message_id=15069*)
    → "That's a relief. Please keep up the good work.\u007F1\u0000\u0007"
 36: 0x0F03 [0x23] WAIT_FOR_DIALOG_INTERACTION
 37: 0x0F04 [0x03] Work_Zone[1] = 1073741824*
 38: 0x0F09 [0x21] END_EVENT
 39: 0x0F0A [0x00] END_REQSTACK()

SUBROUTINE_0F0E:
 40: 0x0F0E [0x42] SET_CLI_EVENT_CANCEL_DATA()
 41: 0x0F0F [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=10*, entity1=EventEntity, entity2=EventEntity, action="tlk0")
 42: 0x0F1E [0x1D] PRINT_EVENT_MESSAGE(message_id=15072*)
    → "That's unfortunate. Although, it's for the best if you can't give it your all. I guess I'll have to find another craftsman to help me with this customer.\u007F1\u0000\u0007"
 43: 0x0F21 [0x23] WAIT_FOR_DIALOG_INTERACTION
 44: 0x0F22 [0x1D] PRINT_EVENT_MESSAGE(message_id=15073*)
    → "Please try to get some rest. There'll be more work for you when you come back.\u007F1\u0000\u0007"
 45: 0x0F25 [0x23] WAIT_FOR_DIALOG_INTERACTION
 46: 0x0F26 [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=10*, entity1=EventEntity, entity2=EventEntity, action="tlk1")
 47: 0x0F35 [0x03] Work_Zone[1] = 1*
 48: 0x0F3A [0x21] END_EVENT
 49: 0x0F3B [0x00] END_REQSTACK()
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x0ECB [0x01] GOTO 0x0ECE
# Dead code (unreachable instructions):
     0x0F0B [0x01] GOTO 0x0F0E
```