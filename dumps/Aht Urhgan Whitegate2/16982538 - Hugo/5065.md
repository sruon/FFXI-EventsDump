# Event 5065

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 2/3       |
| Offset          | 0x0001    |
| Data Size       | 349 bytes |
| Calculated Size | 349 bytes |
| Instructions    | 41        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000:    20 01 1E F0 FF FF 7F  1D 00 80 23 03 02 10 01    .........#....
0010: 80 1D 02 80 23 24 03 80  04 80 05 80 25 02 00 10  ....#$......%...
0020: 05 80 00 5C 01 03 02 10  01 80 1D 06 80 23 1C 07  ...\.........#..
0030: 80 B9 00 08 80 05 80 04  80 B9 00 08 80 05 80 09  ................
0040: 80 B9 00 08 80 05 80 0A  80 B9 00 08 80 05 80 0B  ................
0050: 80 B9 00 08 80 05 80 0C  80 B9 00 08 80 05 80 0D  ................
0060: 80 B9 00 08 80 05 80 0E  80 1C 07 80 8D 08 80 05  ................
0070: 80 1C 07 80 B8 08 80 05  80 04 80 0F 80 10 80 4D  ...............M
0080: 65 6C 6F 64 79 5F 4D 69  6E 73 74 72 65 6C 00 1D  elody_Minstrel..
0090: 11 80 23 1C 07 80 B8 08  80 05 80 09 80 12 80 13  ..#.............
00A0: 80 54 72 61 76 65 6C 69  6E 67 5F 42 61 72 64 00  .Traveling_Bard.
00B0: 00 1D 14 80 23 1C 07 80  B8 08 80 05 80 0A 80 15  ....#...........
00C0: 80 16 80 50 75 72 73 75  69 76 61 6E 74 00 00 00  ...Pursuivant...
00D0: 00 00 00 1D 17 80 23 1C  07 80 B8 08 80 05 80 0C  ......#.........
00E0: 80 18 80 19 80 41 72 6D  6F 72 44 65 70 6F 73 69  .....ArmorDeposi
00F0: 74 6F 72 79 00 1D 1A 80  23 1C 07 80 B8 08 80 05  tory....#.......
0100: 80 0D 80 1B 80 1C 80 57  65 61 74 68 65 72 5F 52  .......Weather_R
0110: 65 70 6F 72 74 00 00 1D  1D 80 23 1C 07 80 B8 08  eport.....#.....
0120: 80 05 80 0E 80 1E 80 1F  80 49 74 65 6D 44 65 70  .........ItemDep
0130: 6F 73 69 74 6F 72 79 00  00 1D 20 80 23 1C 07 80  ository... .#...
0140: 8A 1C 07 80 03 02 10 01  80 1D 21 80 23 1D 22 80  ..........!.#.".
0150: 23 1D 23 80 23 1D 24 80  23 01 5C 01 21 00        #.#.#.$.#.\.!.  
```

## Opcodes

```
  0: 0x0001 [0x20] SET_CLI_EVENT_UC_FLAG: Lock player control
  1: 0x0003 [0x1E] EventEntity looks at LocalPlayer and starts talking
  2: 0x0008 [0x1D] PRINT_EVENT_MESSAGE(message_id=14340*)
    → "Good day! I'm a Merry Map Marker, and I'd be emphatically ecstatic if you'd allow me to mark your magical map!\u007F1\u0000\u0007"
  3: 0x000B [0x23] WAIT_FOR_DIALOG_INTERACTION
  4: 0x000C [0x03] Work_Zone[2] = 1856*
  5: 0x0011 [0x1D] PRINT_EVENT_MESSAGE(message_id=14341*)
    → "A markless \u0001\u00053\u0002\u0000\u0000\u0000 is like a motherless maiden, meandering through a miasmatic mire of misery.\u007F1\u0000\u0007"
  6: 0x0014 [0x23] WAIT_FOR_DIALOG_INTERACTION
  7: 0x0015 [0x24] CREATE_DIALOG(message_id=14342*, default_option=1*, option_flags=0*)
    → "Embark on a map-marking mission?\u0007\u000BMark me up!\u0007Keep your mitts off my map!\u007F1\u0000\u0007"
  8: 0x001C [0x25] WAIT_DIALOG_SELECT()
  9: 0x001D [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x015C
 10: 0x0025 [0x03] Work_Zone[2] = 1856*
 11: 0x002A [0x1D] PRINT_EVENT_MESSAGE(message_id=14343*)
    → "Marvelous! Now allow me a minute to make all my marks.\u007F1\u0000\u0007"
 12: 0x002D [0x23] WAIT_FOR_DIALOG_INTERACTION
 13: 0x002E [0x1C] WAIT(30* ticks)
 14: 0x0031 [0xB9] MAP_EDIT_MARKER_FROM_BUFFER(map_flag=0x00, zone=0x8008, submap=0x8005, marker_id=0x00008004)
 15: 0x0039 [0xB9] MAP_EDIT_MARKER_FROM_BUFFER(map_flag=0x00, zone=0x8008, submap=0x8005, marker_id=0x00008009)
 16: 0x0041 [0xB9] MAP_EDIT_MARKER_FROM_BUFFER(map_flag=0x00, zone=0x8008, submap=0x8005, marker_id=0x0000800A)
 17: 0x0049 [0xB9] MAP_EDIT_MARKER_FROM_BUFFER(map_flag=0x00, zone=0x8008, submap=0x8005, marker_id=0x0000800B)
 18: 0x0051 [0xB9] MAP_EDIT_MARKER_FROM_BUFFER(map_flag=0x00, zone=0x8008, submap=0x8005, marker_id=0x0000800C)
 19: 0x0059 [0xB9] MAP_EDIT_MARKER_FROM_BUFFER(map_flag=0x00, zone=0x8008, submap=0x8005, marker_id=0x0000800D)
 20: 0x0061 [0xB9] MAP_EDIT_MARKER_FROM_BUFFER(map_flag=0x00, zone=0x8008, submap=0x8005, marker_id=0x0000800E)
 21: 0x0069 [0x1C] WAIT(30* ticks)
 22: 0x006C [0x8D] OPEN_MAP_WITH_PROPERTIES(map_id=50*, properties=0*)
 23: 0x0071 [0x1C] WAIT(30* ticks)
 24: 0x0074 [0xB8] MAP_ADD_MARKER_WITH_NAME(zone=50*, submap=0*, marker_id=1*, x_pos=-143.038*, y_pos=9.959*, marker_name=0x)
 25: 0x007F [0x4D] EventEntity->StatusEvent = 9 // Close door
 26: 0x0080 [0x65] CALCULATE_3D_DISTANCE(result=0x6F6C, entity1=Unknown NPC (ID: 1298102628/0x4D5F7964), entity2=Unknown NPC (ID: 1953721961/0x74736E69))
 27: 0x008B [0x72] LOAD_EVENT_WEATHER: Unknown mode 101, weather_id=0x6C
 28: 0x008F [0x1D] PRINT_EVENT_MESSAGE(message_id=14351*)
    → "Our local \u001E\u0005minstrel of melodies\u001E\u0001 can be found here. His mirthful musicalities may help you recall misplaced memories.\u007F1\u0000\u0007"
 29: 0x0092 [0x23] WAIT_FOR_DIALOG_INTERACTION
 30: 0x0093 [0x1C] WAIT(30* ticks)
 31: 0x0096 [0xB8] MAP_ADD_MARKER_WITH_NAME(zone=50*, submap=0*, marker_id=2*, x_pos=-131.724*, y_pos=-21.579*, marker_name=0x)
 32: 0x00A1 [0x54] WAIT_MAP_SCHEDULER: Wait for scheduler "_Bar" with entities [Unknown NPC (ID: 1702257010/0x65766172), Unknown NPC (ID: 1735289196/0x676E696C)]
 33: 0x00AE [0x64] CALCULATE_DISTANCE: ExtData[1]->WorkLocal[0] = distance between point1(0x141D, 0x2380) and point2(0x071C, 0xB880)
 34: 0x00B9 [0x08] 0x0580 -= 0x0A80
 35: 0x00BE [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2148958229/0x80168015))
 36: 0x00C3 [0x50] END_SCHEDULER_TASK: End scheduler "t" with entities [0x7275, 0x7669], work=[30067, 28257]
 37: 0x00D0 [0x00] END_REQSTACK()

 38: 0x015C [0x21] END_EVENT
 39: 0x015D [0x00] END_REQSTACK()
```

## Data or dead code:

```
# Data Section: 0x00D1 (139 bytes)
     0x00D1: 00 00 1D 17 80 23 1C 07 80 B8 08 80 05 80 0C 80
     0x00E1: 18 80 19 80 41 72 6D 6F 72 44 65 70 6F 73 69 74
     0x00F1: 6F 72 79 00 1D 1A 80 23 1C 07 80 B8 08 80 05 80
     0x0101: 0D 80 1B 80 1C 80 57 65 61 74 68 65 72 5F 52 65
     0x0111: 70 6F 72 74 00 00 1D 1D 80 23 1C 07 80 B8 08 80
     0x0121: 05 80 0E 80 1E 80 1F 80 49 74 65 6D 44 65 70 6F
     0x0131: 73 69 74 6F 72 79 00 00 1D 20 80 23 1C 07 80 8A
     0x0141: 1C 07 80 03 02 10 01 80 1D 21 80 23 1D 22 80 23
     0x0151: 1D 23 80 23 1D 24 80 23 01 5C 01
```