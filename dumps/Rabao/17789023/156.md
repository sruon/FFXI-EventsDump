# Event 156

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 4/7       |
| Offset          | 0x100F    |
| Data Size       | 562 bytes |
| Calculated Size | 562 bytes |
| Instructions    | 76        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
1000:                                               42                 B
1010: 45 08 80 F0 FF FF 7F F0  FF FF 7F 66 64 6F 31 00  E..........fdo1.
1020: 80 55 08 80 F0 FF FF 7F  F0 FF FF 7F 66 64 6F 31  .U..........fdo1
1030: 46 01 38 09 80 BA F0 FF  FF 7F 0A 80 0B 80 0C 80  F.8.............
1040: 0D 80 2F 00 60 70 0F 01  4E 00 60 70 0F 01 94 01  ../.`p..N.`p....
1050: 60 70 0F 01 BA F0 FF FF  7F 0A 80 0B 80 0C 80 0D  `p..............
1060: 80 27 10 60 70 0F 01 06  29 10 60 70 0F 01 05 BA  .'.`p...).`p....
1070: 60 70 0F 01 0E 80 0F 80  10 80 11 80 80 60 70 0F  `p...........`p.
1080: 01 59 01 60 70 0F 01 12  80 1C 13 80 80 03 70 0F  .Y.`p.........p.
1090: 01 80 2F 70 0F 01 80 10  70 0F 01 80 38 70 0F 01  ../p....p...8p..
10A0: 5C 00 14 80 5C 01 14 80  9A 27 10 F0 FF FF 7F 22  \...\....'....."
10B0: 02 87 7F 16 80 80 CC 10  45 15 80 F8 FF FF 7F F8  ........E.......
10C0: FF FF 7F 73 74 31 37 00  80 01 15 11 02 87 7F 17  ...st17.........
10D0: 80 80 E8 10 45 15 80 F8  FF FF 7F F8 FF FF 7F 73  ....E..........s
10E0: 74 31 37 00 80 01 15 11  02 87 7F 18 80 80 04 11  t17.............
10F0: 45 15 80 F8 FF FF 7F F8  FF FF 7F 73 67 31 37 00  E..........sg17.
1100: 80 01 15 11 45 15 80 F8  FF FF 7F F8 FF FF 7F 73  ....E..........s
1110: 30 31 37 00 80 45 08 80  F0 FF FF 7F F0 FF FF 7F  017..E..........
1120: 66 64 69 31 00 80 1C 19  80 29 10 60 70 0F 01 07  fdi1.....).`p...
1130: 2A 10 60 70 0F 01 29 10  60 70 0F 01 08 1C 1A 80  *.`p..).`p......
1140: 4A 60 70 0F 01 F0 FF FF  7F 6F 76 60 70 0F 01 1C  J`p......ov`p...
1150: 16 80 66 1C 80 60 70 0F  01 60 70 0F 01 74 6C 6B  ..f..`p..`p..tlk
1160: 30 B0 00 5E 70 0F 01 60  70 0F 01 4F 80 23 B0 00  0..^p..`p..O.#..
1170: 5E 70 0F 01 60 70 0F 01  50 80 1C 13 80 23 66 1C  ^p..`p..P....#f.
1180: 80 60 70 0F 01 60 70 0F  01 74 6C 6B 31 43 00 43  .`p..`p..tlk1C.C
1190: 01 48 51 80 23 48 52 80  52 15 80 F8 FF FF 7F F8  .HQ.#HR.R.......
11A0: FF FF 7F 73 30 30 37 45  15 80 F8 FF FF 7F F8 FF  ...s007E........
11B0: FF 7F 73 30 31 33 00 80  66 31 80 60 70 0F 01 60  ..s013..f1.`p..`
11C0: 70 0F 01 74 6C 6B 30 03  02 10 30 80 B0 00 5E 70  p..tlk0...0...^p
11D0: 0F 01 60 70 0F 01 53 80  1C 1A 80 23 66 31 80 60  ..`p..S....#f1.`
11E0: 70 0F 01 60 70 0F 01 74  6C 6B 31 45 08 80 F0 FF  p..`p..tlk1E....
11F0: FF 7F F0 FF FF 7F 66 64  6F 31 00 80 55 08 80 F0  ......fdo1..U...
1200: FF FF 7F F0 FF FF 7F 66  64 6F 31 52 15 80 F8 FF  .......fdo1R....
1210: FF 7F F8 FF FF 7F 73 30  31 33 5C 00 4D 80 5C 01  ......s013\.M.\.
1220: 4D 80 1C 4E 80 AB 11 00  80 1C 26 80 46 00 45 08  M..N......&.F.E.
1230: 80 F0 FF FF 7F F0 FF FF  7F 66 64 69 31 00 80 21  .........fdi1..!
1240: 00                                                .               
```

## Opcodes

```
  0: 0x100F [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x1010 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
  2: 0x1021 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=200*
  3: 0x1030 [0x46] CAMERA_CONTROL: Disable user control
  4: 0x1032 [0x38] SET_CLIENT_EVENT_MODE(mode=19*)
  5: 0x1035 [0xBA] SET_ENTITY_POSITION(entity_id=LocalPlayer, pos_x=-36.150*, pos_z=30.610*, pos_y=8.000*, direction=377476179.9°*)
  6: 0x1042 [0x2F] Unnamed NPC (ID: 17789024/0x010F7060)->Render.Flags0 &= ~0x80000 // Bit 19
  7: 0x1048 [0x4E] SET_ENTITY_HIDE_FLAG: Show Unnamed NPC (ID: 17789024/0x010F7060)
  8: 0x104E [0x94] Unnamed NPC (ID: 17789024/0x010F7060)->Render.Flags3 ^= 0x01
  9: 0x1054 [0xBA] SET_ENTITY_POSITION(entity_id=LocalPlayer, pos_x=-36.150*, pos_z=30.610*, pos_y=8.000*, direction=377476179.9°*)
 10: 0x1061 [0x27] REQ_SET(priority=0x10, entity_id=Unnamed NPC (ID: 17789024/0x010F7060), tag_num=0x06)
 11: 0x1068 [0x29] REQ_SET_WAIT(priority=0x10, entity_id=Unnamed NPC (ID: 17789024/0x010F7060), tag_num=0x05)
 12: 0x106F [0xBA] SET_ENTITY_POSITION(entity_id=Unnamed NPC (ID: 17789024/0x010F7060), pos_x=-27.100*, pos_z=36.000*, pos_y=8.440*, direction=326.9°*)
 13: 0x107C [0x80] LOAD_WAIT(entity=Unnamed NPC (ID: 17789024/0x010F7060))
 14: 0x1081 [0x59] UPDATE_ENTITY_DATA: Set Unnamed NPC (ID: 17789024/0x010F7060) turn speed = 50*
 15: 0x1089 [0x1C] WAIT(60* ticks)
 16: 0x108C [0x80] LOAD_WAIT(entity=Maryoh Comyujah (ID: 17788931/0x010F7003))
 17: 0x1091 [0x80] LOAD_WAIT(entity=Datta (ID: 17788975/0x010F702F))
 18: 0x1096 [0x80] LOAD_WAIT(entity=Brave Wolf (ID: 17788944/0x010F7010))
 19: 0x109B [0x80] LOAD_WAIT(entity=Generoit (ID: 17788984/0x010F7038))
 20: 0x10A0 [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 129*
 21: 0x10A4 [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 129*
 22: 0x10A8 [0x9A] WAIT_MUSIC_SERVER()
 23: 0x10A9 [0x27] REQ_SET(priority=0x10, entity_id=LocalPlayer, tag_num=0x22)
 24: 0x10B0 [0x02] IF !(LocalPlayer->Race == 5*) GOTO 0x10CC
 25: 0x10B8 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "st17" with entities [EventEntity, EventEntity], work=[644*, 0*]
 26: 0x10C9 [0x01] GOTO 0x1115

SUBROUTINE_10CC:
 27: 0x10CC [0x02] IF !(LocalPlayer->Race == 6*) GOTO 0x10E8
 28: 0x10D4 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "st17" with entities [EventEntity, EventEntity], work=[644*, 0*]
 29: 0x10E5 [0x01] GOTO 0x1115

SUBROUTINE_10E8:
 30: 0x10E8 [0x02] IF !(LocalPlayer->Race == 8*) GOTO 0x1104
 31: 0x10F0 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "sg17" with entities [EventEntity, EventEntity], work=[644*, 0*]
 32: 0x1101 [0x01] GOTO 0x1115

SUBROUTINE_1104:
 33: 0x1104 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s017" with entities [EventEntity, EventEntity], work=[644*, 0*]
 34: 0x1115 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 35: 0x1126 [0x1C] WAIT(180* ticks)
 36: 0x1129 [0x29] REQ_SET_WAIT(priority=0x10, entity_id=Unnamed NPC (ID: 17789024/0x010F7060), tag_num=0x07)
 37: 0x1130 [0x2A] GET_REQ_LEVEL(level=16, entity_id=Unnamed NPC (ID: 17789024/0x010F7060))
 38: 0x1136 [0x29] REQ_SET_WAIT(priority=0x10, entity_id=Unnamed NPC (ID: 17789024/0x010F7060), tag_num=0x08)
 39: 0x113D [0x1C] WAIT(120* ticks)
 40: 0x1140 [0x4A] Unnamed NPC (ID: 17789024/0x010F7060) looks at LocalPlayer
 41: 0x1149 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 42: 0x114A [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until Unnamed NPC (ID: 17789024/0x010F7060) Render.Flags0 and Render.Flags3 conditions are met
 43: 0x114F [0x1C] WAIT(5* ticks)
 44: 0x1152 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [Unnamed NPC (ID: 17789024/0x010F7060), Unnamed NPC (ID: 17789024/0x010F7060)], work=29*
 45: 0x1161 [0xB0] PRINT_EVENT_MESSAGE(unknown1=0x00, speaker_id=0x010F705E, listener_id=0x010F7060, message_offset=0x804F)
 46: 0x116D [0x23] WAIT_FOR_DIALOG_INTERACTION
 47: 0x116E [0xB0] PRINT_EVENT_MESSAGE(unknown1=0x00, speaker_id=0x010F705E, listener_id=0x010F7060, message_offset=0x8050)
 48: 0x117A [0x1C] WAIT(60* ticks)
 49: 0x117D [0x23] WAIT_FOR_DIALOG_INTERACTION
 50: 0x117E [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk1" with entities [Unnamed NPC (ID: 17789024/0x010F7060), Unnamed NPC (ID: 17789024/0x010F7060)], work=29*
 51: 0x118D [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
 52: 0x118F [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
 53: 0x1191 [0x48] [System] [11923*]:
    → "Fished in designated regions: 
\u0001/
\u0000\u000C\u0002[./ (complete.)]\u007F1\u0000\u0007"
 54: 0x1194 [0x23] WAIT_FOR_DIALOG_INTERACTION
 55: 0x1195 [0x48] [System] [6869*]:
    → "\u0001@\u0001@ \u007F4\u0001\u0000\u0007"
 56: 0x1198 [0x52] END_LOAD_SCHEDULER: End scheduler "s007" with entities [EventEntity, EventEntity], work=644*
 57: 0x11A7 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s013" with entities [EventEntity, EventEntity], work=[644*, 0*]
 58: 0x11B8 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [Unnamed NPC (ID: 17789024/0x010F7060), Unnamed NPC (ID: 17789024/0x010F7060)], work=169*
 59: 0x11C7 [0x03] Work_Zone[2] = 17386*
 60: 0x11CC [0xB0] PRINT_EVENT_MESSAGE(unknown1=0x00, speaker_id=0x010F705E, listener_id=0x010F7060, message_offset=0x8053)
 61: 0x11D8 [0x1C] WAIT(120* ticks)
 62: 0x11DB [0x23] WAIT_FOR_DIALOG_INTERACTION
 63: 0x11DC [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk1" with entities [Unnamed NPC (ID: 17789024/0x010F7060), Unnamed NPC (ID: 17789024/0x010F7060)], work=169*
 64: 0x11EB [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 65: 0x11FC [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=200*
 66: 0x120B [0x52] END_LOAD_SCHEDULER: End scheduler "s013" with entities [EventEntity, EventEntity], work=644*
 67: 0x121A [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 208*
 68: 0x121E [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 208*
 69: 0x1222 [0x1C] WAIT(15* ticks)
 70: 0x1225 [0xAB] EventEntity->DespawnValue = 0* // Set despawn value
 71: 0x1229 [0x1C] WAIT(1* ticks)
 72: 0x122C [0x46] CAMERA_CONTROL: Restore default settings
 73: 0x122E [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 74: 0x123F [0x21] END_EVENT
 75: 0x1240 [0x00] END_REQSTACK()
```
