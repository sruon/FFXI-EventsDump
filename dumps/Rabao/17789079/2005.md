# Event 2005

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 9/12      |
| Offset          | 0x1F6E    |
| Data Size       | 418 bytes |
| Calculated Size | 418 bytes |
| Instructions    | 65        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
1F60:                                            03 01                ..
1F70: 00 02 10 03 02 00 03 10  03 05 00 06 10 03 07 00  ................
1F80: 08 10 1A 27 22 4A 98 70  0F 01 F0 FF FF 7F 1C 00  ...'"J.p........
1F90: 80 03 02 10 02 00 2B 98  70 0F 01 A9 80 23 03 42  ......+.p....#.B
1FA0: 00 03 80 02 07 00 03 80  00 AE 1F 01 82 20 03 02  ............. ..
1FB0: 10 02 00 2B 98 70 0F 01  AA 80 23 40 3B 80 3C 80  ...+.p....#@;.<.
1FC0: 01 10 03 80 43 00 43 01  03 09 00 02 10 03 0A 00  ....C.C.........
1FD0: 03 10 03 0B 00 04 10 03  15 00 05 10 D4 05 03 80  ................
1FE0: 15 00 09 00 0A 00 0B 00  40 3B 80 3C 80 01 10 07  ........@;.<....
1FF0: 80 43 00 43 01 03 0C 00  02 10 03 0D 00 03 10 03  .C.C............
2000: 0E 00 04 10 D4 05 07 80  15 00 0C 00 0D 00 0E 00  ................
2010: 40 3B 80 3C 80 01 10 17  80 43 00 43 01 03 0F 00  @;.<.....C.C....
2020: 02 10 03 10 00 03 10 03  11 00 04 10 D4 05 17 80  ................
2030: 15 00 0F 00 10 00 11 00  40 3B 80 3C 80 01 10 30  ........@;.<...0
2040: 80 43 00 43 01 03 12 00  02 10 03 13 00 03 10 03  .C.C............
2050: 14 00 04 10 D4 05 30 80  15 00 12 00 13 00 14 00  ......0.........
2060: 48 4D 80 23 D4 02 54 80  03 80 03 80 25 02 00 10  HM.#..T.....%...
2070: 35 80 00 7D 20 03 42 00  00 10 01 82 20 03 42 00  5..} .B..... .B.
2080: 00 10 02 42 00 30 80 05  0A 21 41 08 80 4B 80 01  ...B.0...!A..K..
2090: 00 02 17 02 02 17 05 00  04 A0 20 03 02 17 05 00  .......... .....
20A0: 48 50 80 23 71 10 07 80  71 11 31 00 02 31 00 03  HP.#q...q.1..1..
20B0: 80 00 B7 20 01 0A 21 02  31 00 02 17 05 05 21 03  ... ..!.1.....!.
20C0: 02 10 02 00 03 03 10 31  00 2B 98 70 0F 01 AB 80  .......1.+.p....
20D0: 23 24 AC 80 07 80 03 80  25 02 00 10 03 80 00 F7  #$......%.......
20E0: 20 42 40 03 80 08 80 01  10 42 00 40 3D 80 40 80   B@......B.@=.@.
20F0: 01 10 31 00 01 02 21 02  00 10 07 80 00 02 21 01  ..1...!.......!.
2100: 02 21 01 0A 21 03 31 00  03 80 1A 98 22 2E 21 00  .!..!.1.....".!.
```

## Opcodes

```
  0: 0x1F6E [0x03] ExtData[1]->WorkLocal[1] = Work_Zone[2]
  1: 0x1F73 [0x03] ExtData[1]->WorkLocal[2] = Work_Zone[3]
  2: 0x1F78 [0x03] ExtData[1]->WorkLocal[5] = Work_Zone[6]
  3: 0x1F7D [0x03] ExtData[1]->WorkLocal[7] = Work_Zone[8]
  4: 0x1F82 [0x1A] CALL_SUBROUTINE(address=0x2227)
  5: 0x1F85 [0x4A] Pilgrimage Moogle (ID: 17789080/0x010F7098) looks at LocalPlayer
  6: 0x1F8E [0x1C] WAIT(60* ticks)
  7: 0x1F91 [0x03] Work_Zone[2] = ExtData[1]->WorkLocal[2]
  8: 0x1F96 [0x2B] Pilgrimage Moogle (ID: 17789080/0x010F7098) [12269*]:
    → "Augment the \u0001\u0005#\u0002\u0000\u0000\u0000?\u0000\u0007"
  9: 0x1F9D [0x23] WAIT_FOR_DIALOG_INTERACTION
 10: 0x1F9E [0x03] ExtData[1]->WorkLocal[66] = 0*
 11: 0x1FA3 [0x02] IF !(ExtData[1]->WorkLocal[7] == 0*) GOTO 0x1FAE
 12: 0x1FAB [0x01] GOTO 0x2082

SUBROUTINE_1FAE:
 13: 0x1FAE [0x03] Work_Zone[2] = ExtData[1]->WorkLocal[2]
 14: 0x1FB3 [0x2B] Pilgrimage Moogle (ID: 17789080/0x010F7098) [12276*]:
    → "You can select which type of \u0001\u0005#\u0002\u0000\u0000\u0000 you would like. You cannot change your mind later, kupo!\u007F1\u0000\u0007"
 15: 0x1FBA [0x23] WAIT_FOR_DIALOG_INTERACTION
 16: 0x1FBB [0x40] SET_BIT_WORK_RANGE(start_bit=8*, end_bit=15*, target=Work_Zone[1], source=0*)
 17: 0x1FC4 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
 18: 0x1FC6 [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
 19: 0x1FC8 [0x03] ExtData[1]->WorkLocal[9] = Work_Zone[2]
 20: 0x1FCD [0x03] ExtData[1]->WorkLocal[10] = Work_Zone[3]
 21: 0x1FD2 [0x03] ExtData[1]->WorkLocal[11] = Work_Zone[4]
 22: 0x1FD7 [0x03] ExtData[1]->WorkLocal[21] = Work_Zone[5]
 23: 0x1FDC [0xD4] MAP_QUERY_WINDOW: Prepare buffer configuration B (buffer=[03 80 15 00 09 00 0A 00...])
 24: 0x1FFA [0x03] ExtData[1]->WorkLocal[13] = Work_Zone[3]
 25: 0x1FFF [0x03] ExtData[1]->WorkLocal[14] = Work_Zone[4]
 26: 0x2004 [0xD4] MAP_QUERY_WINDOW: Prepare buffer configuration B (buffer=[07 80 15 00 0C 00 0D 00...])
 27: 0x2022 [0x03] ExtData[1]->WorkLocal[16] = Work_Zone[3]
 28: 0x2027 [0x03] ExtData[1]->WorkLocal[17] = Work_Zone[4]
 29: 0x202C [0xD4] MAP_QUERY_WINDOW: Prepare buffer configuration B (buffer=[17 80 15 00 0F 00 10 00...])
 30: 0x204A [0x03] ExtData[1]->WorkLocal[19] = Work_Zone[3]
 31: 0x204F [0x03] ExtData[1]->WorkLocal[20] = Work_Zone[4]
 32: 0x2054 [0xD4] MAP_QUERY_WINDOW: Prepare buffer configuration B (buffer=[30 80 15 00 12 00 13 00...])
 33: 0x2072 [0x00] END_REQSTACK()

 34: 0x2082 [0x02] IF !(ExtData[1]->WorkLocal[66] > 3*) GOTO 0x210A
 35: 0x208A [0x41] GET_BIT_WORK_RANGE(start_bit=7*, end_bit=22*, source=ExtData[1]->WorkLocal[1], result=Work_Zone_1700[2])
 36: 0x2093 [0x02] IF !(Work_Zone_1700[2] < ExtData[1]->WorkLocal[5]) GOTO 0x20A0
 37: 0x209B [0x03] Work_Zone_1700[2] = ExtData[1]->WorkLocal[5]
 38: 0x20A0 [0x48] [System] [12204*]:
    → "You may purchase up to 

.\u0000\u0007"
 39: 0x20A3 [0x23] WAIT_FOR_DIALOG_INTERACTION
 40: 0x20A4 [0x71] USER_INPUT_HANDLER: Open numerical input dialog (work=1*)
 41: 0x20A8 [0x71] USER_INPUT_HANDLER: Process numerical input A (work=ExtData[1]->WorkLocal[49])
 42: 0x20AC [0x02] IF !(ExtData[1]->WorkLocal[49] == 0*) GOTO 0x20B7
 43: 0x20B4 [0x01] GOTO 0x210A

SUBROUTINE_20B7:
 44: 0x20B7 [0x02] IF !(ExtData[1]->WorkLocal[49] > Work_Zone_1700[2]) GOTO 0x2105
 45: 0x20BF [0x03] Work_Zone[2] = ExtData[1]->WorkLocal[2]
 46: 0x20C4 [0x03] Work_Zone[3] = ExtData[1]->WorkLocal[49]
 47: 0x20C9 [0x2B] Pilgrimage Moogle (ID: 17789080/0x010F7098) [12270*]:
    → "Augment the \u0001\u0005#\u0002\u0000\u0000\u0000 with 
\u0001 RP?\u007F1\u0000\u0007"
 48: 0x20D0 [0x23] WAIT_FOR_DIALOG_INTERACTION
 49: 0x20D1 [0x24] CREATE_DIALOG(message_id=12271*, default_option=1*, option_flags=0*)
    → "Augment the item?\u0007\u000BYes.\u0007No.\u007F1\u0000\u0007"
 50: 0x20D8 [0x25] WAIT_DIALOG_SELECT()
 51: 0x20D9 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x20F7
 52: 0x20E1 [0x42] SET_CLI_EVENT_CANCEL_DATA()
 53: 0x20E2 [0x40] SET_BIT_WORK_RANGE(start_bit=0*, end_bit=7*, target=Work_Zone[1], source=ExtData[1]->WorkLocal[66])
 54: 0x20EB [0x40] SET_BIT_WORK_RANGE(start_bit=16*, end_bit=31*, target=Work_Zone[1], source=ExtData[1]->WorkLocal[49])
 55: 0x20F4 [0x01] GOTO 0x2102

SUBROUTINE_20F7:
 56: 0x20F7 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x2102
 57: 0x20FF [0x01] GOTO 0x2102

SUBROUTINE_2102:
 58: 0x2102 [0x01] GOTO 0x210A

SUBROUTINE_2105:
 59: 0x2105 [0x03] ExtData[1]->WorkLocal[49] = 0*
 60: 0x210A [0x1A] CALL_SUBROUTINE(address=0x2298)
 61: 0x210D [0x2E] SET_CLI_EVENT_CANCEL_FLAGS()
 62: 0x210E [0x21] END_EVENT
 63: 0x210F [0x00] END_REQSTACK()
```

## Data or dead code:

```
# Data Section: 0x2073 (15 bytes)
     0x2073: 7D 20 03 42 00 00 10 01 82 20 03 42 00 00 10
```