# 17788936 - Edigey

## Common Data

| Field            | Value           |
|------------------|-----------------|
| Zone             | Rabao (ID: 247) |
| Block Size       | 592 bytes       |
| Total Events     | 6               |
| References Count | 29              |

## List of Events

| Event ID              | Entrypoint   |   Size |   Instructions |
|-----------------------|--------------|--------|----------------|
| [65535](#event-65535) | 0x0000       |      1 |              1 |
| [50](#event-50)       | 0x0001       |     16 |              8 |
| [2](#event-2)         | 0x0011       |    118 |             34 |
| [3](#event-3)         | 0x0087       |      9 |              5 |
| [4](#event-4)         | 0x0090       |     59 |             16 |
| [5](#event-5)         | 0x00CB       |    231 |             36 |

## DAT References (imed_data)

|   Index | Hex Value   |   Dec Value |
|---------|-------------|-------------|
|       0 | 0x2714      |       10004 |
|       1 | 0x2715      |       10005 |
|       2 | 0x0001      |           1 |
|       3 | 0x271D      |       10013 |
|       4 | 0x2716      |       10006 |
|       5 | 0x0005      |           5 |
|       6 | 0x2717      |       10007 |
|       7 | 0x2718      |       10008 |
|       8 | 0x2719      |       10009 |
|       9 | 0x271A      |       10010 |
|      10 | 0x0000      |           0 |
|      11 | 0x271B      |       10011 |
|      12 | 0x271C      |       10012 |
|      13 | 0x271E      |       10014 |
|      14 | 0x2721      |       10017 |
|      15 | 0x0002      |           2 |
|      16 | 0x271F      |       10015 |
|      17 | 0x2720      |       10016 |
|      18 | 0x00C9      |         201 |
|      19 | 0x2724      |       10020 |
|      20 | 0x000A      |          10 |
|      21 | 0x0014      |          20 |
|      22 | 0x001E      |          30 |
|      23 | 0x0028      |          40 |
|      24 | 0x0032      |          50 |
|      25 | 0x003C      |          60 |
|      26 | 0x0050      |          80 |
|      27 | 0x00EE      |         238 |
|      28 | 0x0236      |         566 |

## String References

- **10004**: The desert is crossed by all sorts of people, not just you adventurers. Like us caravan merchants, for instance.
- **10005**: Sometimes we gotta dump our goods and run like hell when we get attacked by monsters out there. Your life is the most valuable thing ya got, pal.
- **10006**: Some of the more nasty critters out there are those huge scorpions. They gotta be more'n twice my height, and naturally the sting in the tail'll shoot ya full of poison.
- **10007**: Those scorpions are a real pain in the backside, if ya get my meaning. It's fine if ya happen to be best friends with a white mage, but out here you'll find more bruisers than healers. If ya don't got a good stock of antidotes, you're a dead man.
- **10008**: 'Course, the main ingredient for that antidote just happens to be $1.
- **10009**: An adventurer like yourself should see where I'm going with this. I want ya to go out and get me $1.
- **10010**: Are ya up for it? [Leave it to me./Are ya crazy?]
- **10011**: Oh, I really thought ya would've helped us out... Well, sorry for taking up ya time.
- **10012**: Thanks, pal, you're a lifesaver! Now get out there, whack some of them scorpions, and bring me $1. I'll have ya reward waiting for ya.
- **10013**: Oh, you again. I won't bore ya with a long speech. If ya feel up to getting us some $1, I'll be standing right here.
- **10014**: Got me $1 yet? I took ya to be a competent adventurer, but don't go getting yourself killed out there.
- **10015**: Ya got the $1! Now I can make me some antidote. Thanks, pal. Here's your reward, like I promised.
- **10016**: If ya come across any more of the stuff, bring it to me, and I'll buy it off ya.
- **10017**: Ya got me another $1! Can't have enough of this stuff. Take this for ya troubles.
- **10020**: Oh, you again. If ya come across any more $1, bring 'em to me and I'll buy 'em off ya.

## Events

### Event 65535

#### Metadata

| Field        | Value   |
|--------------|---------|
| Entrypoint   | 0x0000  |
| Data Size    | 1 bytes |
| Instructions | 1       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000: 00                                                .               
```

#### Opcodes

```
  0: 0x0000 [0x00] END_REQSTACK()
```

### Event 50

#### Metadata

| Field        | Value    |
|--------------|----------|
| Entrypoint   | 0x0001   |
| Data Size    | 16 bytes |
| Instructions | 8        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000:    1A D4 00 1A 62 01 1D  00 80 23 1D 01 80 23 21   ....b....#...#!
0010: 00                                                .               
```

#### Opcodes

```
  0: 0x0001 [0x1A] CALL_SUBROUTINE(address=0x00D4)
  1: 0x0004 [0x1A] CALL_SUBROUTINE(address=0x0162)
  2: 0x0007 [0x1D] PRINT_EVENT_MESSAGE(message_id=10004*)
    → "The desert is crossed by all sorts of people, not just you adventurers. Like us caravan merchants, for instance."
  3: 0x000A [0x23] WAIT_FOR_DIALOG_INTERACTION
  4: 0x000B [0x1D] PRINT_EVENT_MESSAGE(message_id=10005*)
    → "Sometimes we gotta dump our goods and run like hell when we get attacked by monsters out there. Your life is the most valuable thing ya got, pal."
  5: 0x000E [0x23] WAIT_FOR_DIALOG_INTERACTION
  6: 0x000F [0x21] END_EVENT
  7: 0x0010 [0x00] END_REQSTACK()
```

### Event 2

#### Metadata

| Field        | Value     |
|--------------|-----------|
| Entrypoint   | 0x0011    |
| Data Size    | 118 bytes |
| Instructions | 33        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0010:    1A D4 00 1A 62 01 02  04 10 02 80 00 26 00 1D   ....b.......&..
0020: 03 80 23 01 5C 00 1D 00  80 23 1D 01 80 23 1D 04  ..#.\....#...#..
0030: 80 23 5B 05 80 F8 FF FF  7F F8 FF FF 7F 74 68 6B  .#[..........thk
0040: 31 1D 06 80 23 1D 07 80  23 5B 05 80 F8 FF FF 7F  1...#...#[......
0050: F8 FF FF 7F 74 68 6B 32  1D 08 80 23 24 09 80 0A  ....thk2...#$...
0060: 80 0A 80 25 02 00 10 02  80 00 76 00 1D 0B 80 23  ...%......v....#
0070: 01 85 00 01 76 00 42 5E  69 64 6C 30 03 01 10 02  ....v.B^idl0....
0080: 80 1D 0C 80 23 21 00                              ....#!.         
```

#### Opcodes

```
  0: 0x0011 [0x1A] CALL_SUBROUTINE(address=0x00D4)
  1: 0x0014 [0x1A] CALL_SUBROUTINE(address=0x0162)
  2: 0x0017 [0x02] IF !(Work_Zone[4] == 1*) GOTO 0x0026
  3: 0x001F [0x1D] PRINT_EVENT_MESSAGE(message_id=10013*)
    → "Oh, you again. I won't bore ya with a long speech. If ya feel up to getting us some $1, I'll be standing right here."
  4: 0x0022 [0x23] WAIT_FOR_DIALOG_INTERACTION
  5: 0x0023 [0x01] GOTO 0x005C
  6: 0x0026 [0x1D] PRINT_EVENT_MESSAGE(message_id=10004*)
    → "The desert is crossed by all sorts of people, not just you adventurers. Like us caravan merchants, for instance."
  7: 0x0029 [0x23] WAIT_FOR_DIALOG_INTERACTION
  8: 0x002A [0x1D] PRINT_EVENT_MESSAGE(message_id=10005*)
    → "Sometimes we gotta dump our goods and run like hell when we get attacked by monsters out there. Your life is the most valuable thing ya got, pal."
  9: 0x002D [0x23] WAIT_FOR_DIALOG_INTERACTION
 10: 0x002E [0x1D] PRINT_EVENT_MESSAGE(message_id=10006*)
    → "Some of the more nasty critters out there are those huge scorpions. They gotta be more'n twice my height, and naturally the sting in the tail'll shoot ya full of poison."
 11: 0x0031 [0x23] WAIT_FOR_DIALOG_INTERACTION
 12: 0x0032 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "thk1" with entities [EventEntity, EventEntity], work=5*
 13: 0x0041 [0x1D] PRINT_EVENT_MESSAGE(message_id=10007*)
    → "Those scorpions are a real pain in the backside, if ya get my meaning. It's fine if ya happen to be best friends with a white mage, but out here you'll find more bruisers than healers. If ya don't got a good stock of antidotes, you're a dead man."
 14: 0x0044 [0x23] WAIT_FOR_DIALOG_INTERACTION
 15: 0x0045 [0x1D] PRINT_EVENT_MESSAGE(message_id=10008*)
    → "'Course, the main ingredient for that antidote just happens to be $1."
 16: 0x0048 [0x23] WAIT_FOR_DIALOG_INTERACTION
 17: 0x0049 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "thk2" with entities [EventEntity, EventEntity], work=5*
 18: 0x0058 [0x1D] PRINT_EVENT_MESSAGE(message_id=10009*)
    → "An adventurer like yourself should see where I'm going with this. I want ya to go out and get me $1."
 19: 0x005B [0x23] WAIT_FOR_DIALOG_INTERACTION

SUBROUTINE_005C:
 20: 0x005C [0x24] CREATE_DIALOG(message_id=10010*, default_option=0*, option_flags=0*)
    → "Are ya up for it? [Leave it to me./Are ya crazy?]"
 21: 0x0063 [0x25] WAIT_DIALOG_SELECT()
 22: 0x0064 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x0076
 23: 0x006C [0x1D] PRINT_EVENT_MESSAGE(message_id=10011*)
    → "Oh, I really thought ya would've helped us out... Well, sorry for taking up ya time."
 24: 0x006F [0x23] WAIT_FOR_DIALOG_INTERACTION
 25: 0x0070 [0x01] GOTO 0x0085

SUBROUTINE_0076:
 26: 0x0076 [0x42] SET_CLI_EVENT_CANCEL_DATA()
 27: 0x0077 [0x5E] EventEntity goes idle (kills current action) (animation: "idl0")
 28: 0x007C [0x03] Work_Zone[1] = 1*
 29: 0x0081 [0x1D] PRINT_EVENT_MESSAGE(message_id=10012*)
    → "Thanks, pal, you're a lifesaver! Now get out there, whack some of them scorpions, and bring me $1. I'll have ya reward waiting for ya."
 30: 0x0084 [0x23] WAIT_FOR_DIALOG_INTERACTION

SUBROUTINE_0085:
 31: 0x0085 [0x21] END_EVENT
 32: 0x0086 [0x00] END_REQSTACK()
```

#### Data or dead code:

```
# Dead code (unreachable instructions):
     0x0073 [0x01] GOTO 0x0076
```

### Event 3

#### Metadata

| Field        | Value   |
|--------------|---------|
| Entrypoint   | 0x0087  |
| Data Size    | 9 bytes |
| Instructions | 5       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0080:                      1A  D4 00 1D 0D 80 23 21 00         ......#!.
```

#### Opcodes

```
  0: 0x0087 [0x1A] CALL_SUBROUTINE(address=0x00D4)
  1: 0x008A [0x1D] PRINT_EVENT_MESSAGE(message_id=10014*)
    → "Got me $1 yet? I took ya to be a competent adventurer, but don't go getting yourself killed out there."
  2: 0x008D [0x23] WAIT_FOR_DIALOG_INTERACTION
  3: 0x008E [0x21] END_EVENT
  4: 0x008F [0x00] END_REQSTACK()
```

### Event 4

#### Metadata

| Field        | Value    |
|--------------|----------|
| Entrypoint   | 0x0090   |
| Data Size    | 59 bytes |
| Instructions | 16       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0090: 42 1A D4 00 02 04 10 02  80 00 A8 00 1D 0E 80 23  B..............#
00A0: 03 01 10 0F 80 01 B8 00  1A 62 01 1D 10 80 23 1D  .........b....#.
00B0: 11 80 23 03 01 10 02 80  45 12 80 F0 FF FF 7F F0  ..#.....E.......
00C0: FF FF 7F 71 73 74 63 0A  80 21 00                 ...qstc..!.     
```

#### Opcodes

```
  0: 0x0090 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x0091 [0x1A] CALL_SUBROUTINE(address=0x00D4)
  2: 0x0094 [0x02] IF !(Work_Zone[4] == 1*) GOTO 0x00A8
  3: 0x009C [0x1D] PRINT_EVENT_MESSAGE(message_id=10017*)
    → "Ya got me another $1! Can't have enough of this stuff. Take this for ya troubles."
  4: 0x009F [0x23] WAIT_FOR_DIALOG_INTERACTION
  5: 0x00A0 [0x03] Work_Zone[1] = 2*
  6: 0x00A5 [0x01] GOTO 0x00B8
  7: 0x00A8 [0x1A] CALL_SUBROUTINE(address=0x0162)
  8: 0x00AB [0x1D] PRINT_EVENT_MESSAGE(message_id=10015*)
    → "Ya got the $1! Now I can make me some antidote. Thanks, pal. Here's your reward, like I promised."
  9: 0x00AE [0x23] WAIT_FOR_DIALOG_INTERACTION
 10: 0x00AF [0x1D] PRINT_EVENT_MESSAGE(message_id=10016*)
    → "If ya come across any more of the stuff, bring it to me, and I'll buy it off ya."
 11: 0x00B2 [0x23] WAIT_FOR_DIALOG_INTERACTION
 12: 0x00B3 [0x03] Work_Zone[1] = 1*

SUBROUTINE_00B8:
 13: 0x00B8 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "qstc" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
 14: 0x00C9 [0x21] END_EVENT
 15: 0x00CA [0x00] END_REQSTACK()
```

### Event 5

#### Metadata

| Field        | Value     |
|--------------|-----------|
| Entrypoint   | 0x00CB    |
| Data Size    | 231 bytes |
| Instructions | 10        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
00C0:                                   1A D4 00 1D 13             .....
00D0: 80 23 21 00 86 00 F8 FF  FF 7F 1E F0 FF FF 7F 6F  .#!............o
00E0: 70 1B 66 0A 80 F8 FF FF  7F F8 FF FF 7F 74 6C 6B  p.f..........tlk
00F0: 30 1B 66 0A 80 F8 FF FF  7F F8 FF FF 7F 74 6C 6B  0.f..........tlk
0100: 31 1B 66 14 80 F8 FF FF  7F F8 FF FF 7F 74 6C 6B  1.f..........tlk
0110: 30 1B 66 15 80 F8 FF FF  7F F8 FF FF 7F 74 6C 6B  0.f..........tlk
0120: 30 1B 66 16 80 F8 FF FF  7F F8 FF FF 7F 74 6C 6B  0.f..........tlk
0130: 30 1B 66 17 80 F8 FF FF  7F F8 FF FF 7F 74 6C 6B  0.f..........tlk
0140: 30 1B 66 18 80 F8 FF FF  7F F8 FF FF 7F 74 6C 6B  0.f..........tlk
0150: 30 1B 66 19 80 F8 FF FF  7F F8 FF FF 7F 74 6C 6B  0.f..........tlk
0160: 30 1B 5B 05 80 F8 FF FF  7F F8 FF FF 7F 74 6C 6B  0.[..........tlk
0170: 30 1B 5B 1A 80 F8 FF FF  7F F8 FF FF 7F 74 6C 6B  0.[..........tlk
0180: 30 1B 5B 1B 80 F8 FF FF  7F F8 FF FF 7F 74 6C 6B  0.[..........tlk
0190: 30 1B 5B 1C 80 F8 FF FF  7F F8 FF FF 7F 74 6C 6B  0.[..........tlk
01A0: 30 1B 5B 19 80 F8 FF FF  7F F8 FF FF 7F 74 6C 62  0.[..........tlb
01B0: 30 1B                                             0.              
```

#### Opcodes

```
  0: 0x00CB [0x1A] CALL_SUBROUTINE(address=0x00D4)
  1: 0x00CE [0x1D] PRINT_EVENT_MESSAGE(message_id=10020*)
    → "Oh, you again. If ya come across any more $1, bring 'em to me and I'll buy 'em off ya."
  2: 0x00D1 [0x23] WAIT_FOR_DIALOG_INTERACTION
  3: 0x00D2 [0x21] END_EVENT
  4: 0x00D3 [0x00] END_REQSTACK()

SUBROUTINE_00D4:
  5: 0x00D4 [0x86] EventEntity->Render.Flags3 = Flags3  // No change (flag=0)
  6: 0x00DA [0x1E] EventEntity looks at LocalPlayer and starts talking
  7: 0x00DF [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  8: 0x00E0 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
  9: 0x00E1 [0x1B] RETURN
```

#### Data or dead code:

```
# Dead code (unreachable instructions):
     0x00E2 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=0*
     0x00F1 [0x1B] RETURN
     0x00F2 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk1" with entities [EventEntity, EventEntity], work=0*
     0x0101 [0x1B] RETURN
     0x0102 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=10*
     0x0111 [0x1B] RETURN
     0x0112 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=20*
     0x0121 [0x1B] RETURN
     0x0122 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=30*
     0x0131 [0x1B] RETURN
     0x0132 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=40*
     0x0141 [0x1B] RETURN
     0x0142 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=50*
     0x0151 [0x1B] RETURN
     0x0152 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=60*
     0x0161 [0x1B] RETURN
     0x0162 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=5*
     0x0171 [0x1B] RETURN
     0x0172 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=80*
     0x0181 [0x1B] RETURN
     0x0182 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=238*
     0x0191 [0x1B] RETURN
     0x0192 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=566*
     0x01A1 [0x1B] RETURN
     0x01A2 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tlb0" with entities [EventEntity, EventEntity], work=60*
     0x01B1 [0x1B] RETURN
```
