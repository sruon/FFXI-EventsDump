# Event 107

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 4/8       |
| Offset          | 0x1688    |
| Data Size       | 869 bytes |
| Calculated Size | 869 bytes |
| Instructions    | 179       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
1680:                          42 03 00 00 02 10 48 8F          B.....H.
1690: 80 23 48 90 80 23 13 02  00 91 80 02 00 00 00 80  .#H..#..........
16A0: 80 A9 16 1A DB 16 01 C5  16 02 00 00 5D 80 80 B7  ............]...
16B0: 16 1A E1 17 01 C5 16 02  00 00 91 80 80 C5 16 1A  ................
16C0: E7 18 01 C5 16 02 01 10  91 80 00 D0 16 01 D9 16  ................
16D0: 03 02 10 03 00 48 92 80  23 21 00 02 02 00 00 80  .....H..#!......
16E0: 80 32 17 24 93 80 00 80  00 80 25 02 00 10 00 80  .2.$......%.....
16F0: 00 00 17 03 01 10 5D 80  03 03 00 00 80 01 2F 17  ......]......./.
1700: 02 00 10 5D 80 00 15 17  03 01 10 00 80 03 03 00  ...]............
1710: 5D 80 01 2F 17 02 00 10  91 80 00 2A 17 03 01 10  ]../.......*....
1720: 00 80 03 03 00 91 80 01  2F 17 03 01 10 91 80 01  ......../.......
1730: E0 17 02 02 00 5D 80 80  89 17 24 94 80 00 80 00  .....]....$.....
1740: 80 25 02 00 10 00 80 00  57 17 03 01 10 00 80 03  .%......W.......
1750: 03 00 91 80 01 86 17 02  00 10 5D 80 00 6C 17 03  ..........]..l..
1760: 01 10 5D 80 03 03 00 00  80 01 86 17 02 00 10 91  ..].............
1770: 80 00 81 17 03 01 10 00  80 03 03 00 5D 80 01 86  ............]...
1780: 17 03 01 10 91 80 01 E0  17 02 02 00 91 80 80 E0  ................
1790: 17 24 95 80 00 80 00 80  25 02 00 10 00 80 00 AE  .$......%.......
17A0: 17 03 01 10 00 80 03 03  00 5D 80 01 DD 17 02 00  .........]......
17B0: 10 5D 80 00 C3 17 03 01  10 00 80 03 03 00 91 80  .]..............
17C0: 01 DD 17 02 00 10 91 80  00 D8 17 03 01 10 5D 80  ..............].
17D0: 03 03 00 00 80 01 DD 17  03 01 10 91 80 01 E0 17  ................
17E0: 1B 02 02 00 00 80 80 38  18 24 93 80 00 80 00 80  .......8.$......
17F0: 25 02 00 10 00 80 00 06  18 03 01 10 00 80 03 03  %...............
1800: 00 00 80 01 35 18 02 00  10 5D 80 00 1B 18 03 01  ....5....]......
1810: 10 5D 80 03 03 00 5D 80  01 35 18 02 00 10 91 80  .]....]..5......
1820: 00 30 18 03 01 10 00 80  03 03 00 91 80 01 35 18  .0............5.
1830: 03 01 10 91 80 01 E6 18  02 02 00 5D 80 80 8F 18  ...........]....
1840: 24 94 80 00 80 00 80 25  02 00 10 00 80 00 5D 18  $......%......].
1850: 03 01 10 00 80 03 03 00  91 80 01 8C 18 02 00 10  ................
1860: 5D 80 00 72 18 03 01 10  00 80 03 03 00 00 80 01  ]..r............
1870: 8C 18 02 00 10 91 80 00  87 18 03 01 10 5D 80 03  .............]..
1880: 03 00 5D 80 01 8C 18 03  01 10 91 80 01 E6 18 02  ..].............
1890: 02 00 91 80 80 E6 18 24  95 80 00 80 00 80 25 02  .......$......%.
18A0: 00 10 00 80 00 B4 18 03  01 10 5D 80 03 03 00 5D  ..........]....]
18B0: 80 01 E3 18 02 00 10 5D  80 00 C9 18 03 01 10 00  .......]........
18C0: 80 03 03 00 91 80 01 E3  18 02 00 10 91 80 00 DE  ................
18D0: 18 03 01 10 00 80 03 03  00 00 80 01 E3 18 03 01  ................
18E0: 10 91 80 01 E6 18 1B 02  02 00 00 80 80 3E 19 24  .............>.$
18F0: 93 80 00 80 00 80 25 02  00 10 00 80 00 0C 19 03  ......%.........
1900: 01 10 00 80 03 03 00 00  80 01 3B 19 02 00 10 5D  ..........;....]
1910: 80 00 21 19 03 01 10 00  80 03 03 00 5D 80 01 3B  ..!.........]..;
1920: 19 02 00 10 91 80 00 36  19 03 01 10 5D 80 03 03  .......6....]...
1930: 00 91 80 01 3B 19 03 01  10 91 80 01 EC 19 02 02  ....;...........
1940: 00 5D 80 80 95 19 24 94  80 00 80 00 80 25 02 00  .]....$......%..
1950: 10 00 80 00 63 19 03 01  10 5D 80 03 03 00 91 80  ....c....]......
1960: 01 92 19 02 00 10 5D 80  00 78 19 03 01 10 00 80  ......]..x......
1970: 03 03 00 00 80 01 92 19  02 00 10 91 80 00 8D 19  ................
1980: 03 01 10 00 80 03 03 00  5D 80 01 92 19 03 01 10  ........].......
1990: 91 80 01 EC 19 02 02 00  91 80 80 EC 19 24 95 80  .............$..
19A0: 00 80 00 80 25 02 00 10  00 80 00 BA 19 03 01 10  ....%...........
19B0: 00 80 03 03 00 5D 80 01  E9 19 02 00 10 5D 80 00  .....].......]..
19C0: CF 19 03 01 10 5D 80 03  03 00 91 80 01 E9 19 02  .....]..........
19D0: 00 10 91 80 00 E4 19 03  01 10 00 80 03 03 00 00  ................
19E0: 80 01 E9 19 03 01 10 91  80 01 EC 19 1B           .............   
```

## Opcodes

```
  0: 0x1688 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x1689 [0x03] ExtData[1]->WorkLocal[0] = Work_Zone[2]
  2: 0x168E [0x48] [System] [7931*]:
    → "You see many different colors of herbs here.\u007F1\u0000\u0007"
  3: 0x1691 [0x23] WAIT_FOR_DIALOG_INTERACTION
  4: 0x1692 [0x48] [System] [7932*]:
    → "The current time period is \u000C\u0000[00:00\u0001`07:59/08:00\u0001`15:59/16:00\u0001`23:59].\u0007Which color herb will you gather?\u007F1\u0000\u0007"
  5: 0x1695 [0x23] WAIT_FOR_DIALOG_INTERACTION
  6: 0x1696 [0x13] ExtData[1]->WorkLocal[2] = rand() % 2*
  7: 0x169B [0x02] IF !(ExtData[1]->WorkLocal[0] == 0*) GOTO 0x16A9
  8: 0x16A3 [0x1A] CALL_SUBROUTINE(address=0x16DB)
  9: 0x16A6 [0x01] GOTO 0x16C5
 10: 0x16A9 [0x02] IF !(ExtData[1]->WorkLocal[0] == 1*) GOTO 0x16B7
 11: 0x16B1 [0x1A] CALL_SUBROUTINE(address=0x17E1)
 12: 0x16B4 [0x01] GOTO 0x16C5
 13: 0x16B7 [0x02] IF !(ExtData[1]->WorkLocal[0] == 2*) GOTO 0x16C5
 14: 0x16BF [0x1A] CALL_SUBROUTINE(address=0x18E7)
 15: 0x16C2 [0x01] GOTO 0x16C5

SUBROUTINE_16C5:
 16: 0x16C5 [0x02] IF !(Work_Zone[1] == 2*) GOTO 0x16D0
 17: 0x16CD [0x01] GOTO 0x16D9
 18: 0x16D0 [0x03] Work_Zone[2] = ExtData[1]->WorkLocal[3]
 19: 0x16D5 [0x48] [System] [7936*]:
    → "You gather a \u000C\u0000[red herb/blue herb/green herb]!\u007F1\u0000\u0007"
 20: 0x16D8 [0x23] WAIT_FOR_DIALOG_INTERACTION

SUBROUTINE_16D9:
 21: 0x16D9 [0x21] END_EVENT
 22: 0x16DA [0x00] END_REQSTACK()

SUBROUTINE_16DB:
 23: 0x16DB [0x02] IF !(ExtData[1]->WorkLocal[2] == 0*) GOTO 0x1732
 24: 0x16E3 [0x24] CREATE_DIALOG(message_id=7933*, default_option=0*, option_flags=0*)
    → "Gather which color herb?\u0007\u000BRed herb.\u0007Blue herb.\u0007Green herb.\u0007Do not gather.\u007F1\u0000\u0007"
 25: 0x16EA [0x25] WAIT_DIALOG_SELECT()
 26: 0x16EB [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x1700
 27: 0x16F3 [0x03] Work_Zone[1] = 1*
 28: 0x16F8 [0x03] ExtData[1]->WorkLocal[3] = 0*
 29: 0x16FD [0x01] GOTO 0x172F
 30: 0x1700 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x1715
 31: 0x1708 [0x03] Work_Zone[1] = 0*
 32: 0x170D [0x03] ExtData[1]->WorkLocal[3] = 1*
 33: 0x1712 [0x01] GOTO 0x172F
 34: 0x1715 [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x172A
 35: 0x171D [0x03] Work_Zone[1] = 0*
 36: 0x1722 [0x03] ExtData[1]->WorkLocal[3] = 2*
 37: 0x1727 [0x01] GOTO 0x172F
 38: 0x172A [0x03] Work_Zone[1] = 2*

SUBROUTINE_172F:
 39: 0x172F [0x01] GOTO 0x17E0
 40: 0x1732 [0x02] IF !(ExtData[1]->WorkLocal[2] == 1*) GOTO 0x1789
 41: 0x173A [0x24] CREATE_DIALOG(message_id=7934*, default_option=0*, option_flags=0*)
    → "Gather which color herb?\u0007\u000BGreen herb.\u0007Red herb.\u0007Blue herb.\u0007Do not gather.\u007F1\u0000\u0007"
 42: 0x1741 [0x25] WAIT_DIALOG_SELECT()
 43: 0x1742 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x1757
 44: 0x174A [0x03] Work_Zone[1] = 0*
 45: 0x174F [0x03] ExtData[1]->WorkLocal[3] = 2*
 46: 0x1754 [0x01] GOTO 0x1786
 47: 0x1757 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x176C
 48: 0x175F [0x03] Work_Zone[1] = 1*
 49: 0x1764 [0x03] ExtData[1]->WorkLocal[3] = 0*
 50: 0x1769 [0x01] GOTO 0x1786
 51: 0x176C [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x1781
 52: 0x1774 [0x03] Work_Zone[1] = 0*
 53: 0x1779 [0x03] ExtData[1]->WorkLocal[3] = 1*
 54: 0x177E [0x01] GOTO 0x1786
 55: 0x1781 [0x03] Work_Zone[1] = 2*

SUBROUTINE_1786:
 56: 0x1786 [0x01] GOTO 0x17E0
 57: 0x1789 [0x02] IF !(ExtData[1]->WorkLocal[2] == 2*) GOTO 0x17E0
 58: 0x1791 [0x24] CREATE_DIALOG(message_id=7935*, default_option=0*, option_flags=0*)
    → "Gather which color herb?\u0007\u000BBlue herb.\u0007Green herb.\u0007Red herb.\u0007Do not gather.\u007F1\u0000\u0007"
 59: 0x1798 [0x25] WAIT_DIALOG_SELECT()
 60: 0x1799 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x17AE
 61: 0x17A1 [0x03] Work_Zone[1] = 0*
 62: 0x17A6 [0x03] ExtData[1]->WorkLocal[3] = 1*
 63: 0x17AB [0x01] GOTO 0x17DD
 64: 0x17AE [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x17C3
 65: 0x17B6 [0x03] Work_Zone[1] = 0*
 66: 0x17BB [0x03] ExtData[1]->WorkLocal[3] = 2*
 67: 0x17C0 [0x01] GOTO 0x17DD
 68: 0x17C3 [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x17D8
 69: 0x17CB [0x03] Work_Zone[1] = 1*
 70: 0x17D0 [0x03] ExtData[1]->WorkLocal[3] = 0*
 71: 0x17D5 [0x01] GOTO 0x17DD
 72: 0x17D8 [0x03] Work_Zone[1] = 2*

SUBROUTINE_17DD:
 73: 0x17DD [0x01] GOTO 0x17E0

SUBROUTINE_17E0:
 74: 0x17E0 [0x1B] RETURN

SUBROUTINE_17E1:
 75: 0x17E1 [0x02] IF !(ExtData[1]->WorkLocal[2] == 0*) GOTO 0x1838
 76: 0x17E9 [0x24] CREATE_DIALOG(message_id=7933*, default_option=0*, option_flags=0*)
    → "Gather which color herb?\u0007\u000BRed herb.\u0007Blue herb.\u0007Green herb.\u0007Do not gather.\u007F1\u0000\u0007"
 77: 0x17F0 [0x25] WAIT_DIALOG_SELECT()
 78: 0x17F1 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x1806
 79: 0x17F9 [0x03] Work_Zone[1] = 0*
 80: 0x17FE [0x03] ExtData[1]->WorkLocal[3] = 0*
 81: 0x1803 [0x01] GOTO 0x1835
 82: 0x1806 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x181B
 83: 0x180E [0x03] Work_Zone[1] = 1*
 84: 0x1813 [0x03] ExtData[1]->WorkLocal[3] = 1*
 85: 0x1818 [0x01] GOTO 0x1835
 86: 0x181B [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x1830
 87: 0x1823 [0x03] Work_Zone[1] = 0*
 88: 0x1828 [0x03] ExtData[1]->WorkLocal[3] = 2*
 89: 0x182D [0x01] GOTO 0x1835
 90: 0x1830 [0x03] Work_Zone[1] = 2*

SUBROUTINE_1835:
 91: 0x1835 [0x01] GOTO 0x18E6
 92: 0x1838 [0x02] IF !(ExtData[1]->WorkLocal[2] == 1*) GOTO 0x188F
 93: 0x1840 [0x24] CREATE_DIALOG(message_id=7934*, default_option=0*, option_flags=0*)
    → "Gather which color herb?\u0007\u000BGreen herb.\u0007Red herb.\u0007Blue herb.\u0007Do not gather.\u007F1\u0000\u0007"
 94: 0x1847 [0x25] WAIT_DIALOG_SELECT()
 95: 0x1848 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x185D
 96: 0x1850 [0x03] Work_Zone[1] = 0*
 97: 0x1855 [0x03] ExtData[1]->WorkLocal[3] = 2*
 98: 0x185A [0x01] GOTO 0x188C
 99: 0x185D [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x1872
100: 0x1865 [0x03] Work_Zone[1] = 0*
101: 0x186A [0x03] ExtData[1]->WorkLocal[3] = 0*
102: 0x186F [0x01] GOTO 0x188C
103: 0x1872 [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x1887
104: 0x187A [0x03] Work_Zone[1] = 1*
105: 0x187F [0x03] ExtData[1]->WorkLocal[3] = 1*
106: 0x1884 [0x01] GOTO 0x188C
107: 0x1887 [0x03] Work_Zone[1] = 2*

SUBROUTINE_188C:
108: 0x188C [0x01] GOTO 0x18E6
109: 0x188F [0x02] IF !(ExtData[1]->WorkLocal[2] == 2*) GOTO 0x18E6
110: 0x1897 [0x24] CREATE_DIALOG(message_id=7935*, default_option=0*, option_flags=0*)
    → "Gather which color herb?\u0007\u000BBlue herb.\u0007Green herb.\u0007Red herb.\u0007Do not gather.\u007F1\u0000\u0007"
111: 0x189E [0x25] WAIT_DIALOG_SELECT()
112: 0x189F [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x18B4
113: 0x18A7 [0x03] Work_Zone[1] = 1*
114: 0x18AC [0x03] ExtData[1]->WorkLocal[3] = 1*
115: 0x18B1 [0x01] GOTO 0x18E3
116: 0x18B4 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x18C9
117: 0x18BC [0x03] Work_Zone[1] = 0*
118: 0x18C1 [0x03] ExtData[1]->WorkLocal[3] = 2*
119: 0x18C6 [0x01] GOTO 0x18E3
120: 0x18C9 [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x18DE
121: 0x18D1 [0x03] Work_Zone[1] = 0*
122: 0x18D6 [0x03] ExtData[1]->WorkLocal[3] = 0*
123: 0x18DB [0x01] GOTO 0x18E3
124: 0x18DE [0x03] Work_Zone[1] = 2*

SUBROUTINE_18E3:
125: 0x18E3 [0x01] GOTO 0x18E6

SUBROUTINE_18E6:
126: 0x18E6 [0x1B] RETURN

SUBROUTINE_18E7:
127: 0x18E7 [0x02] IF !(ExtData[1]->WorkLocal[2] == 0*) GOTO 0x193E
128: 0x18EF [0x24] CREATE_DIALOG(message_id=7933*, default_option=0*, option_flags=0*)
    → "Gather which color herb?\u0007\u000BRed herb.\u0007Blue herb.\u0007Green herb.\u0007Do not gather.\u007F1\u0000\u0007"
129: 0x18F6 [0x25] WAIT_DIALOG_SELECT()
130: 0x18F7 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x190C
131: 0x18FF [0x03] Work_Zone[1] = 0*
132: 0x1904 [0x03] ExtData[1]->WorkLocal[3] = 0*
133: 0x1909 [0x01] GOTO 0x193B
134: 0x190C [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x1921
135: 0x1914 [0x03] Work_Zone[1] = 0*
136: 0x1919 [0x03] ExtData[1]->WorkLocal[3] = 1*
137: 0x191E [0x01] GOTO 0x193B
138: 0x1921 [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x1936
139: 0x1929 [0x03] Work_Zone[1] = 1*
140: 0x192E [0x03] ExtData[1]->WorkLocal[3] = 2*
141: 0x1933 [0x01] GOTO 0x193B
142: 0x1936 [0x03] Work_Zone[1] = 2*

SUBROUTINE_193B:
143: 0x193B [0x01] GOTO 0x19EC
144: 0x193E [0x02] IF !(ExtData[1]->WorkLocal[2] == 1*) GOTO 0x1995
145: 0x1946 [0x24] CREATE_DIALOG(message_id=7934*, default_option=0*, option_flags=0*)
    → "Gather which color herb?\u0007\u000BGreen herb.\u0007Red herb.\u0007Blue herb.\u0007Do not gather.\u007F1\u0000\u0007"
146: 0x194D [0x25] WAIT_DIALOG_SELECT()
147: 0x194E [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x1963
148: 0x1956 [0x03] Work_Zone[1] = 1*
149: 0x195B [0x03] ExtData[1]->WorkLocal[3] = 2*
150: 0x1960 [0x01] GOTO 0x1992
151: 0x1963 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x1978
152: 0x196B [0x03] Work_Zone[1] = 0*
153: 0x1970 [0x03] ExtData[1]->WorkLocal[3] = 0*
154: 0x1975 [0x01] GOTO 0x1992
155: 0x1978 [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x198D
156: 0x1980 [0x03] Work_Zone[1] = 0*
157: 0x1985 [0x03] ExtData[1]->WorkLocal[3] = 1*
158: 0x198A [0x01] GOTO 0x1992
159: 0x198D [0x03] Work_Zone[1] = 2*

SUBROUTINE_1992:
160: 0x1992 [0x01] GOTO 0x19EC
161: 0x1995 [0x02] IF !(ExtData[1]->WorkLocal[2] == 2*) GOTO 0x19EC
162: 0x199D [0x24] CREATE_DIALOG(message_id=7935*, default_option=0*, option_flags=0*)
    → "Gather which color herb?\u0007\u000BBlue herb.\u0007Green herb.\u0007Red herb.\u0007Do not gather.\u007F1\u0000\u0007"
163: 0x19A4 [0x25] WAIT_DIALOG_SELECT()
164: 0x19A5 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x19BA
165: 0x19AD [0x03] Work_Zone[1] = 0*
166: 0x19B2 [0x03] ExtData[1]->WorkLocal[3] = 1*
167: 0x19B7 [0x01] GOTO 0x19E9
168: 0x19BA [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x19CF
169: 0x19C2 [0x03] Work_Zone[1] = 1*
170: 0x19C7 [0x03] ExtData[1]->WorkLocal[3] = 2*
171: 0x19CC [0x01] GOTO 0x19E9
172: 0x19CF [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x19E4
173: 0x19D7 [0x03] Work_Zone[1] = 0*
174: 0x19DC [0x03] ExtData[1]->WorkLocal[3] = 0*
175: 0x19E1 [0x01] GOTO 0x19E9
176: 0x19E4 [0x03] Work_Zone[1] = 2*

SUBROUTINE_19E9:
177: 0x19E9 [0x01] GOTO 0x19EC

SUBROUTINE_19EC:
178: 0x19EC [0x1B] RETURN
```
