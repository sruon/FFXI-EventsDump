# 17743889 - Trilok

## Common Data

| Field            | Value                 |
|------------------|-----------------------|
| Zone             | Port Bastok (ID: 236) |
| Block Size       | 380 bytes             |
| Total Events     | 11                    |
| References Count | 25                    |

## List of Events

| Event ID                 | Entrypoint   |   Size |   Instructions |
|--------------------------|--------------|--------|----------------|
| [65535](#event-65535)    | 0x0000       |      1 |              1 |
| [44](#event-44)          | 0x0001       |     11 |              5 |
| [1](#event-1)            | 0x000C       |     10 |              2 |
| [65535.1](#event-655351) | 0x0016       |     24 |              6 |
| [291](#event-291)        | 0x002E       |     53 |             13 |
| [292](#event-292)        | 0x0063       |     50 |             17 |
| [293](#event-293)        | 0x0095       |     46 |              8 |
| [294](#event-294)        | 0x00C3       |     11 |              5 |
| [465](#event-465)        | 0x00CE       |      7 |              2 |
| [65535.2](#event-655352) | 0x00D5       |      4 |              2 |
| [65535.3](#event-655353) | 0x00D9       |      2 |              2 |

## DAT References (imed_data)

|   Index | Hex Value   |   Dec Value |
|---------|-------------|-------------|
|       0 | 0x1D39      |        7481 |
|       1 | 0xFFFE59B1  |  4294859185 |
|       2 | 0x086C      |        2156 |
|       3 | 0xFFFFF7CB  |  4294965195 |
|       4 | 0x055F      |        1375 |
|       5 | 0x000D      |          13 |
|       6 | 0xFFFE9A48  |  4294875720 |
|       7 | 0x2BD0      |       11216 |
|       8 | 0xFFFEF2F9  |  4294898425 |
|       9 | 0x3348      |       13128 |
|      10 | 0x2295      |        8853 |
|      11 | 0x0000      |           0 |
|      12 | 0x2296      |        8854 |
|      13 | 0x2297      |        8855 |
|      14 | 0x2298      |        8856 |
|      15 | 0x2299      |        8857 |
|      16 | 0x229A      |        8858 |
|      17 | 0x229B      |        8859 |
|      18 | 0x0001      |           1 |
|      19 | 0x229C      |        8860 |
|      20 | 0x40000000  |  1073741824 |
|      21 | 0x000A      |          10 |
|      22 | 0x229D      |        8861 |
|      23 | 0x00C9      |         201 |
|      24 | 0x229E      |        8862 |

## String References

- **7481**: Hey, you a rookie? If I were you, I'd go hunt lizards. They're worth the trouble--take my word for it.
- **8853**: Hey, I know you. You're that adventurer that everybody's been talking about. I've got a proposition for you, if you're interested.
- **8854**: There's this lady, Olavia, who wants somebody to guide her through the Crawlers' Nest. She says that she's an adventurer as well, but thinks that she can't make it that deep on her own.
- **8855**: She said she'll be waiting at the entrance of the nest, but she didn't say what day or what time. Just meeting up with her might be the biggest challenge of this job, ha ha ha.
- **8856**: Yeah, I know it sounds like a pain, but word has it that she's paying well. What have you got to lose?
- **8857**: That Olavia said she'll be waiting at the entrance of the Crawlers' Nest, but she didn't say what day or what time. Just meeting up with her might be the biggest challenge of this job.
- **8858**: Wait a minute... Don't tell me that you're backing out.
- **8859**: Back out of the deal? [Right now./Not just yet.]
- **8860**: Well, I guess I'll just have to find somebody else. Good thing this town is crawling with adventurers.
- **8861**: Oh, <Player>! I heard you met up with Olavia and helped her out. Here's your reward.
- **8862**: Hmmm... I'm sorry, but there just isn't any good work these days. If I get anything, I'll hold on to it for you, though. Don't be a stranger!

## Events

### Event 65535

#### Metadata

| Field        | Value   |
|--------------|---------|
| Entrypoint   | 0x0000  |
| Data Size    | 1 bytes |
| Instructions | 1       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000: 00                                                .               
```

#### Opcodes

```
  0: 0x0000 [0x00] END_REQSTACK()
```

### Event 44

#### Metadata

| Field        | Value    |
|--------------|----------|
| Entrypoint   | 0x0001   |
| Data Size    | 11 bytes |
| Instructions | 5        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000:    1E F0 FF FF 7F 1D 00  80 23 21 00               ........#!.    
```

#### Opcodes

```
  0: 0x0001 [0x1E] EventEntity looks at LocalPlayer and starts talking
  1: 0x0006 [0x1D] PRINT_EVENT_MESSAGE(message_id=7481*)
    → "Hey, you a rookie? If I were you, I'd go hunt lizards. They're worth the trouble--take my word for it."
  2: 0x0009 [0x23] WAIT_FOR_DIALOG_INTERACTION
  3: 0x000A [0x21] END_EVENT
  4: 0x000B [0x00] END_REQSTACK()
```

### Event 1

#### Metadata

| Field        | Value    |
|--------------|----------|
| Entrypoint   | 0x000C   |
| Data Size    | 10 bytes |
| Instructions | 2        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000:                                      37 01 80 02              7...
0010: 80 03 80 04 80 00                                 ......          
```

#### Opcodes

```
  0: 0x000C [0x37] UPDATE_EVENT_POSITION_AND_DIR: x=-108.111*, z=2.156*, y=-2.101*, direction=120.8°*
  1: 0x0015 [0x00] END_REQSTACK()
```

### Event 65535.1

#### Metadata

| Field        | Value    |
|--------------|----------|
| Entrypoint   | 0x0016   |
| Data Size    | 24 bytes |
| Instructions | 6        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0010:                   32 05  80 1F 00 06 80 07 80 03        2.........
0020: 80 1F 01 1F 00 08 80 09  80 03 80 1F 01 00        ..............  
```

#### Opcodes

```
  0: 0x0016 [0x32] ExtData[1]->MainSpeed = 13* * 0.1
  1: 0x0019 [0x1F] MOVE_ENTITY: EventEntity moves to X=-91.576*, Z=11.216*, Y=-2.101*
  2: 0x0021 [0x1F] MOVE_ENTITY: Update entity position (mode=1)
  3: 0x0023 [0x1F] MOVE_ENTITY: EventEntity moves to X=-68.871*, Z=13.128*, Y=-2.101*
  4: 0x002B [0x1F] MOVE_ENTITY: Update entity position (mode=1)
  5: 0x002D [0x00] END_REQSTACK()
```

### Event 291

#### Metadata

| Field        | Value    |
|--------------|----------|
| Entrypoint   | 0x002E   |
| Data Size    | 53 bytes |
| Instructions | 13       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0020:                                            1E F0                ..
0030: FF FF 7F 1D 0A 80 23 66  0B 80 F8 FF FF 7F F8 FF  ......#f........
0040: FF 7F 74 6C 6B 30 1D 0C  80 23 1D 0D 80 23 66 0B  ..tlk0...#...#f.
0050: 80 F8 FF FF 7F F8 FF FF  7F 74 65 6E 30 1D 0E 80  .........ten0...
0060: 23 21 00                                          #!.             
```

#### Opcodes

```
  0: 0x002E [0x1E] EventEntity looks at LocalPlayer and starts talking
  1: 0x0033 [0x1D] PRINT_EVENT_MESSAGE(message_id=8853*)
    → "Hey, I know you. You're that adventurer that everybody's been talking about. I've got a proposition for you, if you're interested."
  2: 0x0036 [0x23] WAIT_FOR_DIALOG_INTERACTION
  3: 0x0037 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=0*
  4: 0x0046 [0x1D] PRINT_EVENT_MESSAGE(message_id=8854*)
    → "There's this lady, Olavia, who wants somebody to guide her through the Crawlers' Nest. She says that she's an adventurer as well, but thinks that she can't make it that deep on her own."
  5: 0x0049 [0x23] WAIT_FOR_DIALOG_INTERACTION
  6: 0x004A [0x1D] PRINT_EVENT_MESSAGE(message_id=8855*)
    → "She said she'll be waiting at the entrance of the nest, but she didn't say what day or what time. Just meeting up with her might be the biggest challenge of this job, ha ha ha."
  7: 0x004D [0x23] WAIT_FOR_DIALOG_INTERACTION
  8: 0x004E [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "ten0" with entities [EventEntity, EventEntity], work=0*
  9: 0x005D [0x1D] PRINT_EVENT_MESSAGE(message_id=8856*)
    → "Yeah, I know it sounds like a pain, but word has it that she's paying well. What have you got to lose?"
 10: 0x0060 [0x23] WAIT_FOR_DIALOG_INTERACTION
 11: 0x0061 [0x21] END_EVENT
 12: 0x0062 [0x00] END_REQSTACK()
```

### Event 292

#### Metadata

| Field        | Value    |
|--------------|----------|
| Entrypoint   | 0x0063   |
| Data Size    | 50 bytes |
| Instructions | 16       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0060:          1E F0 FF FF 7F  1D 0F 80 23 1D 10 80 23     ........#...#
0070: 24 11 80 12 80 0B 80 25  02 00 10 0B 80 00 8E 00  $......%........
0080: 1D 13 80 23 03 01 10 0B  80 21 00 01 8E 00 03 01  ...#.....!......
0090: 10 14 80 21 00                                    ...!.           
```

#### Opcodes

```
  0: 0x0063 [0x1E] EventEntity looks at LocalPlayer and starts talking
  1: 0x0068 [0x1D] PRINT_EVENT_MESSAGE(message_id=8857*)
    → "That Olavia said she'll be waiting at the entrance of the Crawlers' Nest, but she didn't say what day or what time. Just meeting up with her might be the biggest challenge of this job."
  2: 0x006B [0x23] WAIT_FOR_DIALOG_INTERACTION
  3: 0x006C [0x1D] PRINT_EVENT_MESSAGE(message_id=8858*)
    → "Wait a minute... Don't tell me that you're backing out."
  4: 0x006F [0x23] WAIT_FOR_DIALOG_INTERACTION
  5: 0x0070 [0x24] CREATE_DIALOG(message_id=8859*, default_option=1*, option_flags=0*)
    → "Back out of the deal? [Right now./Not just yet.]"
  6: 0x0077 [0x25] WAIT_DIALOG_SELECT()
  7: 0x0078 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x008E
  8: 0x0080 [0x1D] PRINT_EVENT_MESSAGE(message_id=8860*)
    → "Well, I guess I'll just have to find somebody else. Good thing this town is crawling with adventurers."
  9: 0x0083 [0x23] WAIT_FOR_DIALOG_INTERACTION
 10: 0x0084 [0x03] Work_Zone[1] = 0*
 11: 0x0089 [0x21] END_EVENT
 12: 0x008A [0x00] END_REQSTACK()

SUBROUTINE_008E:
 13: 0x008E [0x03] Work_Zone[1] = 1073741824*
 14: 0x0093 [0x21] END_EVENT
 15: 0x0094 [0x00] END_REQSTACK()
```

#### Data or dead code:

```
# Dead code (unreachable instructions):
     0x008B [0x01] GOTO 0x008E
```

### Event 293

#### Metadata

| Field        | Value    |
|--------------|----------|
| Entrypoint   | 0x0095   |
| Data Size    | 46 bytes |
| Instructions | 8        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0090:                1E F0 FF  FF 7F 1C 15 80 66 0B 80       ........f..
00A0: F8 FF FF 7F F8 FF FF 7F  70 61 73 30 1D 16 80 23  ........pas0...#
00B0: 45 17 80 F0 FF FF 7F F0  FF FF 7F 71 73 74 63 0B  E..........qstc.
00C0: 80 21 00                                          .!.             
```

#### Opcodes

```
  0: 0x0095 [0x1E] EventEntity looks at LocalPlayer and starts talking
  1: 0x009A [0x1C] WAIT(10* ticks)
  2: 0x009D [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "pas0" with entities [EventEntity, EventEntity], work=0*
  3: 0x00AC [0x1D] PRINT_EVENT_MESSAGE(message_id=8861*)
    → "Oh, <Player>! I heard you met up with Olavia and helped her out. Here's your reward."
  4: 0x00AF [0x23] WAIT_FOR_DIALOG_INTERACTION
  5: 0x00B0 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "qstc" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
  6: 0x00C1 [0x21] END_EVENT
  7: 0x00C2 [0x00] END_REQSTACK()
```

### Event 294

#### Metadata

| Field        | Value    |
|--------------|----------|
| Entrypoint   | 0x00C3   |
| Data Size    | 11 bytes |
| Instructions | 5        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
00C0:          1E F0 FF FF 7F  1D 18 80 23 21 00           ........#!.  
```

#### Opcodes

```
  0: 0x00C3 [0x1E] EventEntity looks at LocalPlayer and starts talking
  1: 0x00C8 [0x1D] PRINT_EVENT_MESSAGE(message_id=8862*)
    → "Hmmm... I'm sorry, but there just isn't any good work these days. If I get anything, I'll hold on to it for you, though. Don't be a stranger!"
  2: 0x00CB [0x23] WAIT_FOR_DIALOG_INTERACTION
  3: 0x00CC [0x21] END_EVENT
  4: 0x00CD [0x00] END_REQSTACK()
```

### Event 465

#### Metadata

| Field        | Value   |
|--------------|---------|
| Entrypoint   | 0x00CE  |
| Data Size    | 7 bytes |
| Instructions | 2       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
00C0:                                            92 01                ..
00D0: F8 FF FF 7F 00                                    .....           
```

#### Opcodes

```
  0: 0x00CE [0x92] EventEntity->Render.Flags3 ^= 0x01
  1: 0x00D4 [0x00] END_REQSTACK()
```

### Event 65535.2

#### Metadata

| Field        | Value   |
|--------------|---------|
| Entrypoint   | 0x00D5  |
| Data Size    | 4 bytes |
| Instructions | 2       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
00D0:                95 0B 80  00                            ....       
```

#### Opcodes

```
  0: 0x00D5 [0x95] SETUP_EVENT_NPC: Prepare NPC for event (Render.Flags3 = 0*)
  1: 0x00D8 [0x00] END_REQSTACK()
```

### Event 65535.3

#### Metadata

| Field        | Value   |
|--------------|---------|
| Entrypoint   | 0x00D9  |
| Data Size    | 2 bytes |
| Instructions | 2       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
00D0:                             96 00                          ..     
```

#### Opcodes

```
  0: 0x00D9 [0x96] UNSET_EVENT_NPC: Restore NPC after event (removes event NPC status)
  1: 0x00DA [0x00] END_REQSTACK()
```
