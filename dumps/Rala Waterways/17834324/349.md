# Event 349

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 9/13      |
| Offset          | 0x1F34    |
| Data Size       | 828 bytes |
| Calculated Size | 828 bytes |
| Instructions    | 55        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
1F30:             03 03 00 02  10 03 04 00 09 10 03 09      ............
1F40: 00 03 10 42 1A 64 00 46  01 5C 00 2F 80 5C 01 2F  ...B.d.F.\./.\./
1F50: 80 5C 02 01 80 5C 03 01  80 9A 38 08 80 27 10 56  .\...\....8..'.V
1F60: 21 10 01 04 92 01 56 21  10 01 94 01 56 21 10 01  !.....V!....V!..
1F70: 29 10 56 21 10 01 10 BA  F0 FF FF 7F 2C 80 2D 80  ).V!........,.-.
1F80: 2A 80 2E 80 02 04 00 03  80 00 CF 1F BA 56 21 10  *............V!.
1F90: 01 28 80 29 80 2A 80 2B  80 4A 56 21 10 01 F0 FF  .(.).*.+.JV!....
1FA0: FF 7F 4A F0 FF FF 7F 56  21 10 01 80 F0 FF FF 7F  ..J....V!.......
1FB0: 80 56 21 10 01 45 30 80  F0 FF FF 7F F0 FF FF 7F  .V!..E0.........
1FC0: 73 30 37 35 01 80 1A 43  00 01 86 20 01 13 20 BA  s075...C... .. .
1FD0: 56 21 10 01 B5 80 B6 80  B7 80 B8 80 4A 56 21 10  V!..........JV!.
1FE0: 01 F0 FF FF 7F 4A F0 FF  FF 7F 56 21 10 01 80 F0  .....J....V!....
1FF0: FF FF 7F 80 56 21 10 01  27 10 56 21 10 01 12 45  ....V!..'.V!...E
2000: 30 80 F0 FF FF 7F F0 FF  FF 7F 73 30 37 34 01 80  0.........s074..
2010: 1A 43 00 1C 71 80 93 94  80 4A F0 FF FF 7F 56 21  .C..q....J....V!
2020: 10 01 03 02 10 94 80 03  03 10 B0 80 2B 56 21 10  ............+V!.
2030: 01 B9 80 23 93 01 80 1C  06 80 03 03 10 B0 80 03  ...#............
2040: 04 10 03 00 06 01 10 24  BA 80 01 80 01 80 25 02  .......$......%.
2050: 00 10 01 80 00 D9 21 52  30 80 F0 FF FF 7F F0 FF  ......!R0.......
2060: FF 7F 73 30 37 34 05 01  10 43 00 43 01 02 09 10  ..s074...C.C....
2070: BB 80 00 9E 21 45 30 80  F0 FF FF 7F F0 FF FF 7F  ....!E0.........
2080: 73 30 37 35 01 80 66 6E  80 56 21 10 01 56 21 10  s075..fn.V!..V!.
2090: 01 70 61 73 30 1C 06 80  03 02 10 94 80 2B 56 21  .pas0........+V!
20A0: 10 01 BC 80 23 2B 56 21  10 01 BD 80 23 1C BE 80  ....#+V!....#...
20B0: 52 30 80 F0 FF FF 7F F0  FF FF 7F 73 30 37 35 1A  R0.........s075.
20C0: B2 29 02 02 00 03 80 00  DE 20 45 30 80 F0 FF FF  .)....... E0....
20D0: 7F F0 FF FF 7F 73 30 37  37 01 80 01 EF 20 45 30  .....s077.... E0
20E0: 80 F0 FF FF 7F F0 FF FF  7F 73 30 37 36 01 80 6E  .........s076..n
20F0: F0 FF FF 7F 3A 80 99 F0  FF FF 7F 1C BE 80 52 30  ....:.........R0
2100: 80 F0 FF FF 7F F0 FF FF  7F 73 30 37 37 52 30 80  .........s077R0.
2110: F0 FF FF 7F F0 FF FF 7F  73 30 37 36 1A B2 29 02  ........s076..).
2120: 02 00 03 80 00 3B 21 45  30 80 F0 FF FF 7F F0 FF  .....;!E0.......
2130: FF 7F 73 30 37 39 01 80  01 4C 21 45 30 80 F0 FF  ..s079...L!E0...
2140: FF 7F F0 FF FF 7F 73 30  37 38 01 80 66 56 80 56  ......s078..fV.V
2150: 21 10 01 56 21 10 01 74  6C 6B 30 2B 56 21 10 01  !..V!..tlk0+V!..
2160: BF 80 23 2B 56 21 10 01  C0 80 23 66 56 80 56 21  ..#+V!....#fV.V!
2170: 10 01 56 21 10 01 74 6C  6B 31 1C 06 80 52 30 80  ..V!..tlk1...R0.
2180: F0 FF FF 7F F0 FF FF 7F  73 30 37 39 52 30 80 F0  ........s079R0..
2190: FF FF 7F F0 FF FF 7F 73  30 37 38 01 D6 21 45 30  .......s078..!E0
21A0: 80 F0 FF FF 7F F0 FF FF  7F 73 30 38 30 01 80 02  .........s080...
21B0: 09 10 05 80 00 CB 21 03  01 10 05 80 48 C1 80 23  ......!.....H..#
21C0: 2B 56 21 10 01 C2 80 23  01 D3 21 2B 56 21 10 01  +V!....#..!+V!..
21D0: C3 80 23 01 29 22 01 26  22 02 00 10 03 80 00 26  ..#.)".&"......&
21E0: 22 52 30 80 F0 FF FF 7F  F0 FF FF 7F 73 30 37 34  "R0.........s074
21F0: 45 30 80 F0 FF FF 7F F0  FF FF 7F 73 30 38 30 01  E0.........s080.
2200: 80 6E 56 21 10 01 62 80  99 56 21 10 01 2B 56 21  .nV!..b..V!..+V!
2210: 10 01 C4 80 23 1C 06 80  2B 56 21 10 01 C2 80 23  ....#...+V!....#
2220: 01 29 22 01 26 22 1A F8  28 1A 64 00 1C 06 80 52  .)".&"..(.d....R
2230: 30 80 F0 FF FF 7F F0 FF  FF 7F 73 30 38 30 5C 00  0.........s080\.
2240: 23 80 5C 01 23 80 5C 02  24 80 5C 03 24 80 9A 1C  #.\.#.\.$.\.$...
2250: 25 80 AB 11 01 80 1C 03  80 AB 0A 46 00 45 00 80  %..........F.E..
2260: F0 FF FF 7F F0 FF FF 7F  66 64 69 32 01 80 21 00  ........fdi2..!.
```

## Opcodes

```
  0: 0x1F34 [0x03] ExtData[1]->WorkLocal[3] = Work_Zone[2]
  1: 0x1F39 [0x03] ExtData[1]->WorkLocal[4] = Work_Zone[9]
  2: 0x1F3E [0x03] ExtData[1]->WorkLocal[9] = Work_Zone[3]
  3: 0x1F43 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  4: 0x1F44 [0x1A] CALL_SUBROUTINE(address=0x0064)
  5: 0x1F47 [0x46] CAMERA_CONTROL: Disable user control
  6: 0x1F49 [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 104*
  7: 0x1F4D [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 104*
  8: 0x1F51 [0x5C] MUSIC_CONTROL: Set Combat (Solo) music to song 0*
  9: 0x1F55 [0x5C] MUSIC_CONTROL: Set Combat (Party) music to song 0*
 10: 0x1F59 [0x9A] WAIT_MUSIC_SERVER()
 11: 0x1F5A [0x38] SET_CLIENT_EVENT_MODE(mode=19*)
 12: 0x1F5D [0x27] REQ_SET(priority=0x10, entity_id=Unnamed NPC (ID: 17834326/0x01102156), tag_num=0x04)
 13: 0x1F64 [0x92] Unnamed NPC (ID: 17834326/0x01102156)->Render.Flags3 ^= 0x01
 14: 0x1F6A [0x94] Unnamed NPC (ID: 17834326/0x01102156)->Render.Flags3 ^= 0x01
 15: 0x1F70 [0x29] REQ_SET_WAIT(priority=0x10, entity_id=Unnamed NPC (ID: 17834326/0x01102156), tag_num=0x10)
 16: 0x1F77 [0xBA] SET_ENTITY_POSITION(entity_id=LocalPlayer, pos_x=-347.063*, pos_z=-300.751*, pos_y=-5.765*, direction=270.1°*)
 17: 0x1F84 [0x02] IF !(ExtData[1]->WorkLocal[4] == 1*) GOTO 0x1FCF
 18: 0x1F8C [0xBA] SET_ENTITY_POSITION(entity_id=Unnamed NPC (ID: 17834326/0x01102156), pos_x=-346.707*, pos_z=-298.554*, pos_y=-5.765*, direction=89.9°*)
 19: 0x1F99 [0x4A] Unnamed NPC (ID: 17834326/0x01102156) looks at LocalPlayer
 20: 0x1FA2 [0x4A] LocalPlayer looks at Unnamed NPC (ID: 17834326/0x01102156)
 21: 0x1FAB [0x80] LOAD_WAIT(entity=LocalPlayer)
 22: 0x1FB0 [0x80] LOAD_WAIT(entity=Unnamed NPC (ID: 17834326/0x01102156))
 23: 0x1FB5 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s075" with entities [LocalPlayer, LocalPlayer], work=[612*, 0*]
 24: 0x1FC6 [0x1A] CALL_SUBROUTINE(address=0x0043)
 25: 0x1FC9 [0x01] GOTO 0x2086

SUBROUTINE_21D6:
 26: 0x21D6 [0x01] GOTO 0x2226
 27: 0x21D9 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x2226
 28: 0x21E1 [0x52] END_LOAD_SCHEDULER: End scheduler "s074" with entities [LocalPlayer, LocalPlayer], work=612*
 29: 0x21F0 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s080" with entities [LocalPlayer, LocalPlayer], work=[612*, 0*]
 30: 0x2201 [0x6E] Unnamed NPC (ID: 17834326/0x01102156) uses emote 35*
 31: 0x2208 [0x99] Wait for Unnamed NPC (ID: 17834326/0x01102156) animation to complete
 32: 0x220D [0x2B] Unnamed NPC (ID: 17834326/0x01102156) [8645*]:
    → "I'll just put it on rrreserve for you, then.\u007F1\u0000\u0007"
 33: 0x2214 [0x23] WAIT_FOR_DIALOG_INTERACTION
 34: 0x2215 [0x1C] WAIT(30* ticks)
 35: 0x2218 [0x2B] Unnamed NPC (ID: 17834326/0x01102156) [8646*]:
    → "Don't wait too long, though! I can't promise I won't get tomato all over this one, too.\u007F1\u0000\u0007"
 36: 0x221F [0x23] WAIT_FOR_DIALOG_INTERACTION
 37: 0x2220 [0x01] GOTO 0x2229

SUBROUTINE_2226:
 38: 0x2226 [0x1A] CALL_SUBROUTINE(address=0x28F8)
 39: 0x2229 [0x1A] CALL_SUBROUTINE(address=0x0064)
 40: 0x222C [0x1C] WAIT(30* ticks)
 41: 0x222F [0x52] END_LOAD_SCHEDULER: End scheduler "s080" with entities [LocalPlayer, LocalPlayer], work=612*
 42: 0x223E [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 61*
 43: 0x2242 [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 61*
 44: 0x2246 [0x5C] MUSIC_CONTROL: Set Combat (Solo) music to song 57*
 45: 0x224A [0x5C] MUSIC_CONTROL: Set Combat (Party) music to song 57*
 46: 0x224E [0x9A] WAIT_MUSIC_SERVER()
 47: 0x224F [0x1C] WAIT(15* ticks)
 48: 0x2252 [0xAB] EventEntity->DespawnValue = 0* // Set despawn value
 49: 0x2256 [0x1C] WAIT(1* ticks)
 50: 0x2259 [0xAB] EventEntity->UnknownFlag = 0 // Disable unknown flag
 51: 0x225B [0x46] CAMERA_CONTROL: Restore default settings
 52: 0x225D [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi2" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 53: 0x226E [0x21] END_EVENT
 54: 0x226F [0x00] END_REQSTACK()
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x1FCC [0x01] GOTO 0x2013
# Dead code (unreachable instructions):
     0x2223 [0x01] GOTO 0x2226
```