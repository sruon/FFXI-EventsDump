# Event 349

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 9/13      |
| Offset          | 0x1F34    |
| Data Size       | 828 bytes |
| Calculated Size | 828 bytes |
| Instructions    | 121       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
1F30:             03 03 00 02  10 03 04 00 09 10 03 09      ............
1F40: 00 03 10 42 1A 64 00 46  01 5C 00 2F 80 5C 01 2F  ...B.d.F.\./.\./
1F50: 80 5C 02 01 80 5C 03 01  80 9A 38 08 80 27 10 56  .\...\....8..'.V
1F60: 21 10 01 04 92 01 56 21  10 01 94 01 56 21 10 01  !.....V!....V!..
1F70: 29 10 56 21 10 01 10 BA  F0 FF FF 7F 2C 80 2D 80  ).V!........,.-.
1F80: 2A 80 2E 80 02 04 00 03  80 00 CF 1F BA 56 21 10  *............V!.
1F90: 01 28 80 29 80 2A 80 2B  80 4A 56 21 10 01 F0 FF  .(.).*.+.JV!....
1FA0: FF 7F 4A F0 FF FF 7F 56  21 10 01 80 F0 FF FF 7F  ..J....V!.......
1FB0: 80 56 21 10 01 45 30 80  F0 FF FF 7F F0 FF FF 7F  .V!..E0.........
1FC0: 73 30 37 35 01 80 1A 43  00 01 86 20 01 13 20 BA  s075...C... .. .
1FD0: 56 21 10 01 B5 80 B6 80  B7 80 B8 80 4A 56 21 10  V!..........JV!.
1FE0: 01 F0 FF FF 7F 4A F0 FF  FF 7F 56 21 10 01 80 F0  .....J....V!....
1FF0: FF FF 7F 80 56 21 10 01  27 10 56 21 10 01 12 45  ....V!..'.V!...E
2000: 30 80 F0 FF FF 7F F0 FF  FF 7F 73 30 37 34 01 80  0.........s074..
2010: 1A 43 00 1C 71 80 93 94  80 4A F0 FF FF 7F 56 21  .C..q....J....V!
2020: 10 01 03 02 10 94 80 03  03 10 B0 80 2B 56 21 10  ............+V!.
2030: 01 B9 80 23 93 01 80 1C  06 80 03 03 10 B0 80 03  ...#............
2040: 04 10 03 00 06 01 10 24  BA 80 01 80 01 80 25 02  .......$......%.
2050: 00 10 01 80 00 D9 21 52  30 80 F0 FF FF 7F F0 FF  ......!R0.......
2060: FF 7F 73 30 37 34 05 01  10 43 00 43 01 02 09 10  ..s074...C.C....
2070: BB 80 00 9E 21 45 30 80  F0 FF FF 7F F0 FF FF 7F  ....!E0.........
2080: 73 30 37 35 01 80 66 6E  80 56 21 10 01 56 21 10  s075..fn.V!..V!.
2090: 01 70 61 73 30 1C 06 80  03 02 10 94 80 2B 56 21  .pas0........+V!
20A0: 10 01 BC 80 23 2B 56 21  10 01 BD 80 23 1C BE 80  ....#+V!....#...
20B0: 52 30 80 F0 FF FF 7F F0  FF FF 7F 73 30 37 35 1A  R0.........s075.
20C0: B2 29 02 02 00 03 80 00  DE 20 45 30 80 F0 FF FF  .)....... E0....
20D0: 7F F0 FF FF 7F 73 30 37  37 01 80 01 EF 20 45 30  .....s077.... E0
20E0: 80 F0 FF FF 7F F0 FF FF  7F 73 30 37 36 01 80 6E  .........s076..n
20F0: F0 FF FF 7F 3A 80 99 F0  FF FF 7F 1C BE 80 52 30  ....:.........R0
2100: 80 F0 FF FF 7F F0 FF FF  7F 73 30 37 37 52 30 80  .........s077R0.
2110: F0 FF FF 7F F0 FF FF 7F  73 30 37 36 1A B2 29 02  ........s076..).
2120: 02 00 03 80 00 3B 21 45  30 80 F0 FF FF 7F F0 FF  .....;!E0.......
2130: FF 7F 73 30 37 39 01 80  01 4C 21 45 30 80 F0 FF  ..s079...L!E0...
2140: FF 7F F0 FF FF 7F 73 30  37 38 01 80 66 56 80 56  ......s078..fV.V
2150: 21 10 01 56 21 10 01 74  6C 6B 30 2B 56 21 10 01  !..V!..tlk0+V!..
2160: BF 80 23 2B 56 21 10 01  C0 80 23 66 56 80 56 21  ..#+V!....#fV.V!
2170: 10 01 56 21 10 01 74 6C  6B 31 1C 06 80 52 30 80  ..V!..tlk1...R0.
2180: F0 FF FF 7F F0 FF FF 7F  73 30 37 39 52 30 80 F0  ........s079R0..
2190: FF FF 7F F0 FF FF 7F 73  30 37 38 01 D6 21 45 30  .......s078..!E0
21A0: 80 F0 FF FF 7F F0 FF FF  7F 73 30 38 30 01 80 02  .........s080...
21B0: 09 10 05 80 00 CB 21 03  01 10 05 80 48 C1 80 23  ......!.....H..#
21C0: 2B 56 21 10 01 C2 80 23  01 D3 21 2B 56 21 10 01  +V!....#..!+V!..
21D0: C3 80 23 01 29 22 01 26  22 02 00 10 03 80 00 26  ..#.)".&"......&
21E0: 22 52 30 80 F0 FF FF 7F  F0 FF FF 7F 73 30 37 34  "R0.........s074
21F0: 45 30 80 F0 FF FF 7F F0  FF FF 7F 73 30 38 30 01  E0.........s080.
2200: 80 6E 56 21 10 01 62 80  99 56 21 10 01 2B 56 21  .nV!..b..V!..+V!
2210: 10 01 C4 80 23 1C 06 80  2B 56 21 10 01 C2 80 23  ....#...+V!....#
2220: 01 29 22 01 26 22 1A F8  28 1A 64 00 1C 06 80 52  .)".&"..(.d....R
2230: 30 80 F0 FF FF 7F F0 FF  FF 7F 73 30 38 30 5C 00  0.........s080\.
2240: 23 80 5C 01 23 80 5C 02  24 80 5C 03 24 80 9A 1C  #.\.#.\.$.\.$...
2250: 25 80 AB 11 01 80 1C 03  80 AB 0A 46 00 45 00 80  %..........F.E..
2260: F0 FF FF 7F F0 FF FF 7F  66 64 69 32 01 80 21 00  ........fdi2..!.
```

## Opcodes

```
  0: 0x1F34 [0x03] ExtData[1]->WorkLocal[3] = Work_Zone[2]
  1: 0x1F39 [0x03] ExtData[1]->WorkLocal[4] = Work_Zone[9]
  2: 0x1F3E [0x03] ExtData[1]->WorkLocal[9] = Work_Zone[3]
  3: 0x1F43 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  4: 0x1F44 [0x1A] CALL_SUBROUTINE(address=0x0064)
  5: 0x1F47 [0x46] CAMERA_CONTROL: Disable user control
  6: 0x1F49 [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 104*
  7: 0x1F4D [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 104*
  8: 0x1F51 [0x5C] MUSIC_CONTROL: Set Combat (Solo) music to song 0*
  9: 0x1F55 [0x5C] MUSIC_CONTROL: Set Combat (Party) music to song 0*
 10: 0x1F59 [0x9A] WAIT_MUSIC_SERVER()
 11: 0x1F5A [0x38] SET_CLIENT_EVENT_MODE(mode=19*)
 12: 0x1F5D [0x27] REQ_SET(priority=0x10, entity_id=Unnamed NPC (ID: 17834326/0x01102156), tag_num=0x04)
 13: 0x1F64 [0x92] Unnamed NPC (ID: 17834326/0x01102156)->Render.Flags3 ^= 0x01
 14: 0x1F6A [0x94] Unnamed NPC (ID: 17834326/0x01102156)->Render.Flags3 ^= 0x01
 15: 0x1F70 [0x29] REQ_SET_WAIT(priority=0x10, entity_id=Unnamed NPC (ID: 17834326/0x01102156), tag_num=0x10)
 16: 0x1F77 [0xBA] SET_ENTITY_POSITION(entity_id=LocalPlayer, pos_x=-347.063*, pos_z=-300.751*, pos_y=-5.765*, direction=270.1°*)
 17: 0x1F84 [0x02] IF !(ExtData[1]->WorkLocal[4] == 1*) GOTO 0x1FCF
 18: 0x1F8C [0xBA] SET_ENTITY_POSITION(entity_id=Unnamed NPC (ID: 17834326/0x01102156), pos_x=-346.707*, pos_z=-298.554*, pos_y=-5.765*, direction=89.9°*)
 19: 0x1F99 [0x4A] Unnamed NPC (ID: 17834326/0x01102156) looks at LocalPlayer
 20: 0x1FA2 [0x4A] LocalPlayer looks at Unnamed NPC (ID: 17834326/0x01102156)
 21: 0x1FAB [0x80] LOAD_WAIT(entity=LocalPlayer)
 22: 0x1FB0 [0x80] LOAD_WAIT(entity=Unnamed NPC (ID: 17834326/0x01102156))
 23: 0x1FB5 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s075" with entities [LocalPlayer, LocalPlayer], work=[612*, 0*]
 24: 0x1FC6 [0x1A] CALL_SUBROUTINE(address=0x0043)
 25: 0x1FC9 [0x01] GOTO 0x2086

SUBROUTINE_2013:
 26: 0x2013 [0x1C] WAIT(60* ticks)
 27: 0x2016 [0x93] DISPLAY_ITEM_INFO(item_id=27787*)
 28: 0x2019 [0x4A] LocalPlayer looks at Unnamed NPC (ID: 17834326/0x01102156)
 29: 0x2022 [0x03] Work_Zone[2] = 27787*
 30: 0x2027 [0x03] Work_Zone[3] = 12500*
 31: 0x202C [0x2B] Unnamed NPC (ID: 17834326/0x01102156) [8643*]:
    → "Look what I have for you! \u007F\u0000\u0001\u0001\u0005#\u0002\u0000\u0000\u0000! That'll be 
\u0001 bayld.\u007F1\u0000\u0007"
 32: 0x2033 [0x23] WAIT_FOR_DIALOG_INTERACTION
 33: 0x2034 [0x93] DISPLAY_ITEM_INFO(item_id=0*)
 34: 0x2037 [0x1C] WAIT(30* ticks)
 35: 0x203A [0x03] Work_Zone[3] = 12500*
 36: 0x203F [0x03] Work_Zone[4] = ExtData[1]->WorkLocal[3]
 37: 0x2044 [0x06] Work_Zone[1] = 0
 38: 0x2047 [0x24] CREATE_DIALOG(message_id=8644*, default_option=0*, option_flags=0*)
    → "Accept it? (Bayld: 
\u0002)\u0007\u000BYes, I'll pay the 
\u0001 bayld.\u0007Not yet.\u007F1\u0000\u0007"
 39: 0x204E [0x25] WAIT_DIALOG_SELECT()
 40: 0x204F [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x21D9
 41: 0x2057 [0x52] END_LOAD_SCHEDULER: End scheduler "s074" with entities [LocalPlayer, LocalPlayer], work=612*
 42: 0x2066 [0x05] Work_Zone[1] = 1
 43: 0x2069 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
 44: 0x206B [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
 45: 0x206D [0x02] IF !(Work_Zone[9] == 99*) GOTO 0x219E
 46: 0x2075 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s075" with entities [LocalPlayer, LocalPlayer], work=[612*, 0*]

SUBROUTINE_2086:
 47: 0x2086 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "pas0" with entities [Unnamed NPC (ID: 17834326/0x01102156), Unnamed NPC (ID: 17834326/0x01102156)], work=127*
 48: 0x2095 [0x1C] WAIT(30* ticks)
 49: 0x2098 [0x03] Work_Zone[2] = 27787*
 50: 0x209D [0x2B] Unnamed NPC (ID: 17834326/0x01102156) [8649*]:
    → "Here, eat it while it's hot!\u0007Wait, don't do that! You'll get violently ill. I know because I've trrried before.\u007F1\u0000\u0007"
 51: 0x20A4 [0x23] WAIT_FOR_DIALOG_INTERACTION
 52: 0x20A5 [0x2B] Unnamed NPC (ID: 17834326/0x01102156) [8650*]:
    → "Did you know this bandeau is temperrred with poison?\u007F1\u0000\u0007"
 53: 0x20AC [0x23] WAIT_FOR_DIALOG_INTERACTION
 54: 0x20AD [0x1C] WAIT(55* ticks)
 55: 0x20B0 [0x52] END_LOAD_SCHEDULER: End scheduler "s075" with entities [LocalPlayer, LocalPlayer], work=612*
 56: 0x20BF [0x1A] CALL_SUBROUTINE(address=0x29B2)
 57: 0x20C2 [0x02] IF !(ExtData[1]->WorkLocal[2] == 1*) GOTO 0x20DE
 58: 0x20CA [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s077" with entities [LocalPlayer, LocalPlayer], work=[612*, 0*]
 59: 0x20DB [0x01] GOTO 0x20EF
 60: 0x20DE [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s076" with entities [LocalPlayer, LocalPlayer], work=[612*, 0*]

SUBROUTINE_20EF:
 61: 0x20EF [0x6E] LocalPlayer uses emote 29*
 62: 0x20F6 [0x99] Wait for LocalPlayer animation to complete
 63: 0x20FB [0x1C] WAIT(55* ticks)
 64: 0x20FE [0x52] END_LOAD_SCHEDULER: End scheduler "s077" with entities [LocalPlayer, LocalPlayer], work=612*
 65: 0x210D [0x52] END_LOAD_SCHEDULER: End scheduler "s076" with entities [LocalPlayer, LocalPlayer], work=612*
 66: 0x211C [0x1A] CALL_SUBROUTINE(address=0x29B2)
 67: 0x211F [0x02] IF !(ExtData[1]->WorkLocal[2] == 1*) GOTO 0x213B
 68: 0x2127 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s079" with entities [LocalPlayer, LocalPlayer], work=[612*, 0*]
 69: 0x2138 [0x01] GOTO 0x214C
 70: 0x213B [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s078" with entities [LocalPlayer, LocalPlayer], work=[612*, 0*]

SUBROUTINE_214C:
 71: 0x214C [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [Unnamed NPC (ID: 17834326/0x01102156), Unnamed NPC (ID: 17834326/0x01102156)], work=199*
 72: 0x215B [0x2B] Unnamed NPC (ID: 17834326/0x01102156) [8651*]:
    → "Don't get your fur all in a clump over nothing! It doesn't pose any thrrreat.\u007F1\u0000\u0007"
 73: 0x2162 [0x23] WAIT_FOR_DIALOG_INTERACTION
 74: 0x2163 [0x2B] Unnamed NPC (ID: 17834326/0x01102156) [8652*]:
    → "In fact, it actually heightens your concentrrration.\u007F1\u0000\u0007"
 75: 0x216A [0x23] WAIT_FOR_DIALOG_INTERACTION
 76: 0x216B [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk1" with entities [Unnamed NPC (ID: 17834326/0x01102156), Unnamed NPC (ID: 17834326/0x01102156)], work=199*
 77: 0x217A [0x1C] WAIT(30* ticks)
 78: 0x217D [0x52] END_LOAD_SCHEDULER: End scheduler "s079" with entities [LocalPlayer, LocalPlayer], work=612*
 79: 0x218C [0x52] END_LOAD_SCHEDULER: End scheduler "s078" with entities [LocalPlayer, LocalPlayer], work=612*
 80: 0x219B [0x01] GOTO 0x21D6
 81: 0x219E [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s080" with entities [LocalPlayer, LocalPlayer], work=[612*, 0*]
 82: 0x21AF [0x02] IF !(Work_Zone[9] == 2*) GOTO 0x21CB
 83: 0x21B7 [0x03] Work_Zone[1] = 2*
 84: 0x21BC [0x48] [System] [8648*]:
    → "Your bag is already bursting at the seams...\u007F1\u0000\u0007"
 85: 0x21BF [0x23] WAIT_FOR_DIALOG_INTERACTION
 86: 0x21C0 [0x2B] Unnamed NPC (ID: 17834326/0x01102156) [8646*]:
    → "Don't wait too long, though! I can't promise I won't get tomato all over this one, too.\u007F1\u0000\u0007"
 87: 0x21C7 [0x23] WAIT_FOR_DIALOG_INTERACTION
 88: 0x21C8 [0x01] GOTO 0x21D3
 89: 0x21CB [0x2B] Unnamed NPC (ID: 17834326/0x01102156) [8647*]:
    → "Hey, that's not enough bayld. Are you trying to make the Inventors' Coalition go brrroke?\u007F1\u0000\u0007"
 90: 0x21D2 [0x23] WAIT_FOR_DIALOG_INTERACTION

SUBROUTINE_21D3:
 91: 0x21D3 [0x01] GOTO 0x2229

SUBROUTINE_21D6:
 92: 0x21D6 [0x01] GOTO 0x2226
 93: 0x21D9 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x2226
 94: 0x21E1 [0x52] END_LOAD_SCHEDULER: End scheduler "s074" with entities [LocalPlayer, LocalPlayer], work=612*
 95: 0x21F0 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s080" with entities [LocalPlayer, LocalPlayer], work=[612*, 0*]
 96: 0x2201 [0x6E] Unnamed NPC (ID: 17834326/0x01102156) uses emote 35*
 97: 0x2208 [0x99] Wait for Unnamed NPC (ID: 17834326/0x01102156) animation to complete
 98: 0x220D [0x2B] Unnamed NPC (ID: 17834326/0x01102156) [8645*]:
    → "I'll just put it on rrreserve for you, then.\u007F1\u0000\u0007"
 99: 0x2214 [0x23] WAIT_FOR_DIALOG_INTERACTION
100: 0x2215 [0x1C] WAIT(30* ticks)
101: 0x2218 [0x2B] Unnamed NPC (ID: 17834326/0x01102156) [8646*]:
    → "Don't wait too long, though! I can't promise I won't get tomato all over this one, too.\u007F1\u0000\u0007"
102: 0x221F [0x23] WAIT_FOR_DIALOG_INTERACTION
103: 0x2220 [0x01] GOTO 0x2229

SUBROUTINE_2226:
104: 0x2226 [0x1A] CALL_SUBROUTINE(address=0x28F8)

SUBROUTINE_2229:
105: 0x2229 [0x1A] CALL_SUBROUTINE(address=0x0064)
106: 0x222C [0x1C] WAIT(30* ticks)
107: 0x222F [0x52] END_LOAD_SCHEDULER: End scheduler "s080" with entities [LocalPlayer, LocalPlayer], work=612*
108: 0x223E [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 61*
109: 0x2242 [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 61*
110: 0x2246 [0x5C] MUSIC_CONTROL: Set Combat (Solo) music to song 57*
111: 0x224A [0x5C] MUSIC_CONTROL: Set Combat (Party) music to song 57*
112: 0x224E [0x9A] WAIT_MUSIC_SERVER()
113: 0x224F [0x1C] WAIT(15* ticks)
114: 0x2252 [0xAB] EventEntity->DespawnValue = 0* // Set despawn value
115: 0x2256 [0x1C] WAIT(1* ticks)
116: 0x2259 [0xAB] EventEntity->UnknownFlag = 0 // Disable unknown flag
117: 0x225B [0x46] CAMERA_CONTROL: Restore default settings
118: 0x225D [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi2" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
119: 0x226E [0x21] END_EVENT
120: 0x226F [0x00] END_REQSTACK()
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x1FCC [0x01] GOTO 0x2013
# Dead code (unreachable instructions):
     0x2223 [0x01] GOTO 0x2226
```