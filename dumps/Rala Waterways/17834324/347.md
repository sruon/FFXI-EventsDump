# Event 347

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 7/13      |
| Offset          | 0x1D1B    |
| Data Size       | 474 bytes |
| Calculated Size | 474 bytes |
| Instructions    | 80        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
1D10:                                   03 0A 00 04 10             .....
1D20: 42 1A 64 00 46 01 5C 00  2F 80 5C 01 2F 80 5C 02  B.d.F.\./.\./.\.
1D30: 01 80 5C 03 01 80 9A 38  08 80 27 10 56 21 10 01  ..\....8..'.V!..
1D40: 04 92 01 56 21 10 01 94  01 56 21 10 01 29 10 56  ...V!....V!..).V
1D50: 21 10 01 10 BA 56 21 10  01 28 80 29 80 2A 80 2B  !....V!..(.).*.+
1D60: 80 BA F0 FF FF 7F 2C 80  2D 80 2A 80 2E 80 4A 56  ......,.-.*...JV
1D70: 21 10 01 F0 FF FF 7F 4A  F0 FF FF 7F 56 21 10 01  !......J....V!..
1D80: 80 F0 FF FF 7F 80 56 21  10 01 1A B2 29 02 02 00  ......V!....)...
1D90: 03 80 00 A9 1D 45 30 80  F0 FF FF 7F F0 FF FF 7F  .....E0.........
1DA0: 73 30 37 30 01 80 01 BA  1D 45 30 80 F0 FF FF 7F  s070.....E0.....
1DB0: F0 FF FF 7F 73 30 37 33  01 80 1A 43 00 06 01 10  ....s073...C....
1DC0: 29 10 F0 FF FF 7F 26 1C  71 80 6E 56 21 10 01 78  ).....&.q.nV!..x
1DD0: 80 99 56 21 10 01 1C 04  80 2B 56 21 10 01 AD 80  ..V!.....+V!....
1DE0: 23 2B 56 21 10 01 AE 80  23 52 30 80 F0 FF FF 7F  #+V!....#R0.....
1DF0: F0 FF FF 7F 73 30 37 30  52 30 80 F0 FF FF 7F F0  ....s070R0......
1E00: FF FF 7F 73 30 37 33 45  30 80 F0 FF FF 7F F0 FF  ...s073E0.......
1E10: FF 7F 73 30 37 31 01 80  6E 56 21 10 01 61 80 99  ..s071..nV!..a..
1E20: 56 21 10 01 1C 3F 80 2B  56 21 10 01 AF 80 23 02  V!...?.+V!....#.
1E30: 0A 00 03 80 80 44 1E 03  01 10 03 80 03 02 10 B0  .....D..........
1E40: 80 01 6E 1E 02 0A 00 05  80 80 59 1E 03 01 10 05  ..n.......Y.....
1E50: 80 03 02 10 B1 80 01 6E  1E 02 0A 00 1C 80 80 6E  .......n.......n
1E60: 1E 03 01 10 1C 80 03 02  10 B1 80 01 6E 1E 1C 16  ............n...
1E70: 80 52 30 80 F0 FF FF 7F  F0 FF FF 7F 73 30 37 31  .R0.........s071
1E80: 45 30 80 F0 FF FF 7F F0  FF FF 7F 73 30 37 32 01  E0.........s072.
1E90: 80 66 6E 80 56 21 10 01  56 21 10 01 70 61 73 30  .fn.V!..V!..pas0
1EA0: 1C 06 80 2B 56 21 10 01  B2 80 23 1C 3B 80 1A 64  ...+V!....#.;..d
1EB0: 00 1C 06 80 52 30 80 F0  FF FF 7F F0 FF FF 7F 73  ....R0.........s
1EC0: 30 37 32 5C 00 23 80 5C  01 23 80 5C 02 24 80 5C  072\.#.\.#.\.$.\
1ED0: 03 24 80 9A 1C 25 80 AB  11 01 80 1C 03 80 AB 0A  .$...%..........
1EE0: 46 00 45 00 80 F0 FF FF  7F F0 FF FF 7F 66 64 69  F.E..........fdi
1EF0: 32 01 80 21 00                                    2..!.           
```

## Opcodes

```
  0: 0x1D1B [0x03] ExtData[1]->WorkLocal[10] = Work_Zone[4]
  1: 0x1D20 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  2: 0x1D21 [0x1A] CALL_SUBROUTINE(address=0x0064)
  3: 0x1D24 [0x46] CAMERA_CONTROL: Disable user control
  4: 0x1D26 [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 104*
  5: 0x1D2A [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 104*
  6: 0x1D2E [0x5C] MUSIC_CONTROL: Set Combat (Solo) music to song 0*
  7: 0x1D32 [0x5C] MUSIC_CONTROL: Set Combat (Party) music to song 0*
  8: 0x1D36 [0x9A] WAIT_MUSIC_SERVER()
  9: 0x1D37 [0x38] SET_CLIENT_EVENT_MODE(mode=19*)
 10: 0x1D3A [0x27] REQ_SET(priority=0x10, entity_id=Unnamed NPC (ID: 17834326/0x01102156), tag_num=0x04)
 11: 0x1D41 [0x92] Unnamed NPC (ID: 17834326/0x01102156)->Render.Flags3 ^= 0x01
 12: 0x1D47 [0x94] Unnamed NPC (ID: 17834326/0x01102156)->Render.Flags3 ^= 0x01
 13: 0x1D4D [0x29] REQ_SET_WAIT(priority=0x10, entity_id=Unnamed NPC (ID: 17834326/0x01102156), tag_num=0x10)
 14: 0x1D54 [0xBA] SET_ENTITY_POSITION(entity_id=Unnamed NPC (ID: 17834326/0x01102156), pos_x=-346.707*, pos_z=-298.554*, pos_y=-5.765*, direction=89.9°*)
 15: 0x1D61 [0xBA] SET_ENTITY_POSITION(entity_id=LocalPlayer, pos_x=-347.063*, pos_z=-300.751*, pos_y=-5.765*, direction=270.1°*)
 16: 0x1D6E [0x4A] Unnamed NPC (ID: 17834326/0x01102156) looks at LocalPlayer
 17: 0x1D77 [0x4A] LocalPlayer looks at Unnamed NPC (ID: 17834326/0x01102156)
 18: 0x1D80 [0x80] LOAD_WAIT(entity=LocalPlayer)
 19: 0x1D85 [0x80] LOAD_WAIT(entity=Unnamed NPC (ID: 17834326/0x01102156))
 20: 0x1D8A [0x1A] CALL_SUBROUTINE(address=0x29B2)
 21: 0x1D8D [0x02] IF !(ExtData[1]->WorkLocal[2] == 1*) GOTO 0x1DA9
 22: 0x1D95 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s070" with entities [LocalPlayer, LocalPlayer], work=[612*, 0*]
 23: 0x1DA6 [0x01] GOTO 0x1DBA
 24: 0x1DA9 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s073" with entities [LocalPlayer, LocalPlayer], work=[612*, 0*]
 25: 0x1DBA [0x1A] CALL_SUBROUTINE(address=0x0043)
 26: 0x1DBD [0x06] Work_Zone[1] = 0
 27: 0x1DC0 [0x29] REQ_SET_WAIT(priority=0x10, entity_id=LocalPlayer, tag_num=0x26)
 28: 0x1DC7 [0x1C] WAIT(60* ticks)
 29: 0x1DCA [0x6E] Unnamed NPC (ID: 17834326/0x01102156) uses emote 14*
 30: 0x1DD1 [0x99] Wait for Unnamed NPC (ID: 17834326/0x01102156) animation to complete
 31: 0x1DD6 [0x1C] WAIT(45* ticks)
 32: 0x1DD9 [0x2B] Unnamed NPC (ID: 17834326/0x01102156) [8637*]:
    → "Purrrfect!\u007F1\u0000\u0007"
 33: 0x1DE0 [0x23] WAIT_FOR_DIALOG_INTERACTION
 34: 0x1DE1 [0x2B] Unnamed NPC (ID: 17834326/0x01102156) [8638*]:
    → "You've brrrought me everything I asked for!\u007F1\u0000\u0007"
 35: 0x1DE8 [0x23] WAIT_FOR_DIALOG_INTERACTION
 36: 0x1DE9 [0x52] END_LOAD_SCHEDULER: End scheduler "s070" with entities [LocalPlayer, LocalPlayer], work=612*
 37: 0x1DF8 [0x52] END_LOAD_SCHEDULER: End scheduler "s073" with entities [LocalPlayer, LocalPlayer], work=612*
 38: 0x1E07 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s071" with entities [LocalPlayer, LocalPlayer], work=[612*, 0*]
 39: 0x1E18 [0x6E] Unnamed NPC (ID: 17834326/0x01102156) uses emote 7*
 40: 0x1E1F [0x99] Wait for Unnamed NPC (ID: 17834326/0x01102156) animation to complete
 41: 0x1E24 [0x1C] WAIT(50* ticks)
 42: 0x1E27 [0x2B] Unnamed NPC (ID: 17834326/0x01102156) [8639*]:
    → "Now to fulfill my part of the bargain and prrrepare some equipment! I'll even get Yesty to help.\u007F1\u0000\u0007"
 43: 0x1E2E [0x23] WAIT_FOR_DIALOG_INTERACTION
 44: 0x1E2F [0x02] IF !(ExtData[1]->WorkLocal[10] == 1*) GOTO 0x1E44
 45: 0x1E37 [0x03] Work_Zone[1] = 1*
 46: 0x1E3C [0x03] Work_Zone[2] = 12500*
 47: 0x1E41 [0x01] GOTO 0x1E6E
 48: 0x1E44 [0x02] IF !(ExtData[1]->WorkLocal[10] == 2*) GOTO 0x1E59
 49: 0x1E4C [0x03] Work_Zone[1] = 2*
 50: 0x1E51 [0x03] Work_Zone[2] = 10000*
 51: 0x1E56 [0x01] GOTO 0x1E6E
 52: 0x1E59 [0x02] IF !(ExtData[1]->WorkLocal[10] == 3*) GOTO 0x1E6E
 53: 0x1E61 [0x03] Work_Zone[1] = 3*
 54: 0x1E66 [0x03] Work_Zone[2] = 10000*
 55: 0x1E6B [0x01] GOTO 0x1E6E

SUBROUTINE_1E6E:
 56: 0x1E6E [0x1C] WAIT(40* ticks)
 57: 0x1E71 [0x52] END_LOAD_SCHEDULER: End scheduler "s071" with entities [LocalPlayer, LocalPlayer], work=612*
 58: 0x1E80 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s072" with entities [LocalPlayer, LocalPlayer], work=[612*, 0*]
 59: 0x1E91 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "pas0" with entities [Unnamed NPC (ID: 17834326/0x01102156), Unnamed NPC (ID: 17834326/0x01102156)], work=127*
 60: 0x1EA0 [0x1C] WAIT(30* ticks)
 61: 0x1EA3 [0x2B] Unnamed NPC (ID: 17834326/0x01102156) [8640*]:
    → "Here's what Yesty calls a \u00072prrroof of order.\u00073 He won't let me give you anything I make without one, so don't lose it!\u007F1\u0000\u0007"
 62: 0x1EAA [0x23] WAIT_FOR_DIALOG_INTERACTION
 63: 0x1EAB [0x1C] WAIT(70* ticks)
 64: 0x1EAE [0x1A] CALL_SUBROUTINE(address=0x0064)
 65: 0x1EB1 [0x1C] WAIT(30* ticks)
 66: 0x1EB4 [0x52] END_LOAD_SCHEDULER: End scheduler "s072" with entities [LocalPlayer, LocalPlayer], work=612*
 67: 0x1EC3 [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 61*
 68: 0x1EC7 [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 61*
 69: 0x1ECB [0x5C] MUSIC_CONTROL: Set Combat (Solo) music to song 57*
 70: 0x1ECF [0x5C] MUSIC_CONTROL: Set Combat (Party) music to song 57*
 71: 0x1ED3 [0x9A] WAIT_MUSIC_SERVER()
 72: 0x1ED4 [0x1C] WAIT(15* ticks)
 73: 0x1ED7 [0xAB] EventEntity->DespawnValue = 0* // Set despawn value
 74: 0x1EDB [0x1C] WAIT(1* ticks)
 75: 0x1EDE [0xAB] EventEntity->UnknownFlag = 0 // Disable unknown flag
 76: 0x1EE0 [0x46] CAMERA_CONTROL: Restore default settings
 77: 0x1EE2 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi2" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 78: 0x1EF3 [0x21] END_EVENT
 79: 0x1EF4 [0x00] END_REQSTACK()
```
