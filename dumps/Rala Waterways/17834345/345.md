# Event 345

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 8/19      |
| Offset          | 0x4423    |
| Data Size       | 802 bytes |
| Calculated Size | 802 bytes |
| Instructions    | 101       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
4420:          42 1A 64 00 46  01 38 08 80 22 00 92 01     B.d.F.8.."...
4430: 40 21 10 01 94 01 F0 FF  FF 7F 94 01 40 21 10 01  @!..........@!..
4440: BA F0 FF FF 7F 6F 81 70  81 71 81 72 81 37 73 81  .....o.p.q.r.7s.
4450: 74 81 75 81 76 81 80 F0  FF FF 7F 80 40 21 10 01  t.u.v.......@!..
4460: 80 F8 FF FF 7F 4A F0 FF  FF 7F 40 21 10 01 4A 40  .....J....@!..J@
4470: 21 10 01 F0 FF FF 7F 45  FB 80 F0 FF FF 7F F0 FF  !......E........
4480: FF 7F 73 31 30 36 01 80  1A 43 00 66 5D 80 40 21  ..s106...C.f].@!
4490: 10 01 40 21 10 01 74 6C  6B 30 03 02 10 87 81 2B  ..@!..tlk0.....+
44A0: 40 21 10 01 9F 81 23 66  5D 80 40 21 10 01 40 21  @!....#f].@!..@!
44B0: 10 01 74 6C 6B 31 7B 40  21 10 01 52 FB 80 F0 FF  ..tlk1{@!..R....
44C0: FF 7F F0 FF FF 7F 73 31  30 36 02 87 7F 61 80 80  ......s106...a..
44D0: E6 44 45 FB 80 F0 FF FF  7F F0 FF FF 7F 73 31 31  .DE..........s11
44E0: 37 01 80 01 13 45 02 87  7F 2E 81 80 02 45 45 FB  7....E.......EE.
44F0: 80 F0 FF FF 7F F0 FF FF  7F 73 31 31 37 01 80 01  .........s117...
4500: 13 45 45 FB 80 F0 FF FF  7F F0 FF FF 7F 73 31 31  .EE..........s11
4510: 36 01 80 24 99 81 01 80  01 80 25 02 00 10 01 80  6..$......%.....
4520: 00 AC 46 52 FB 80 F0 FF  FF 7F F0 FF FF 7F 73 31  ..FR..........s1
4530: 31 36 52 FB 80 F0 FF FF  7F F0 FF FF 7F 73 31 31  16R..........s11
4540: 37 45 FB 80 F0 FF FF 7F  F0 FF FF 7F 73 31 31 38  7E..........s118
4550: 01 80 6E 40 21 10 01 D1  80 99 40 21 10 01 2B 40  ..n@!.....@!..+@
4560: 21 10 01 9A 81 1C 14 80  23 1A 64 00 1C 06 80 52  !.......#.d....R
4570: FB 80 F0 FF FF 7F F0 FF  FF 7F 73 31 31 38 27 10  ..........s118'.
4580: 73 21 10 01 04 94 01 73  21 10 01 3B 40 21 10 01  s!.....s!..;@!..
4590: 04 00 05 00 06 00 3A 40  21 10 01 07 00 BA 73 21  ......:@!.....s!
45A0: 10 01 04 00 05 00 06 00  07 00 29 10 73 21 10 01  ..........).s!..
45B0: 0D 80 73 21 10 01 7B 40  21 10 01 02 87 7F 61 80  ..s!..{@!.....a.
45C0: 80 E4 45 5B 9B 81 40 21  10 01 40 21 10 01 74 6D  ..E[..@!..@!..tm
45D0: 61 31 5B 9C 81 73 21 10  01 73 21 10 01 74 61 72  a1[..s!..s!..tar
45E0: 31 01 2B 46 02 87 7F 2E  81 80 0D 46 5B 9B 81 40  1.+F.......F[..@
45F0: 21 10 01 40 21 10 01 74  6D 61 31 5B 9C 81 73 21  !..@!..tma1[..s!
4600: 10 01 73 21 10 01 74 61  72 31 01 2B 46 5B 9B 81  ..s!..tar1.+F[..
4610: 40 21 10 01 40 21 10 01  74 6D 61 30 5B 9C 81 73  @!..@!..tma0[..s
4620: 21 10 01 73 21 10 01 74  61 72 30 48 6A 81 23 45  !..s!..tar0Hj.#E
4630: FB 80 F0 FF FF 7F F0 FF  FF 7F 73 31 31 39 01 80  ..........s119..
4640: 1A 43 00 1C 13 80 52 FB  80 F0 FF FF 7F F0 FF FF  .C....R.........
4650: 7F 73 31 31 39 02 87 7F  61 80 80 71 46 45 FB 80  .s119...a..qFE..
4660: F0 FF FF 7F F0 FF FF 7F  73 31 39 33 01 80 01 9E  ........s193....
4670: 46 02 87 7F 2E 81 80 8D  46 45 FB 80 F0 FF FF 7F  F.......FE......
4680: F0 FF FF 7F 73 31 39 33  01 80 01 9E 46 45 FB 80  ....s193....FE..
4690: F0 FF FF 7F F0 FF FF 7F  73 31 39 32 01 80 2B 40  ........s192..+@
46A0: 21 10 01 9D 81 23 05 01  10 01 00 47 02 00 10 03  !....#.....G....
46B0: 80 00 00 47 52 FB 80 F0  FF FF 7F F0 FF FF 7F 73  ...GR..........s
46C0: 31 31 36 52 FB 80 F0 FF  FF 7F F0 FF FF 7F 73 31  116R..........s1
46D0: 31 37 45 FB 80 F0 FF FF  7F F0 FF FF 7F 73 31 31  17E..........s11
46E0: 38 01 80 66 5D 80 40 21  10 01 40 21 10 01 64 69  8..f].@!..@!..di
46F0: 73 30 2B 40 21 10 01 9E  81 23 06 01 10 01 00 47  s0+@!....#.....G
4700: 1A 64 00 1C 06 80 52 FB  80 F0 FF FF 7F F0 FF FF  .d....R.........
4710: 7F 73 31 31 38 52 FB 80  F0 FF FF 7F F0 FF FF 7F  .s118R..........
4720: 73 31 31 39 1C 0C 80 AB  11 01 80 1C 03 80 AB 0A  s119............
4730: 46 00 45 00 80 F0 FF FF  7F F0 FF FF 7F 66 64 69  F.E..........fdi
4740: 32 01 80 21 00                                    2..!.           
```

## Opcodes

```
  0: 0x4423 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x4424 [0x1A] CALL_SUBROUTINE(address=0x0064)
  2: 0x4427 [0x46] CAMERA_CONTROL: Disable user control
  3: 0x4429 [0x38] SET_CLIENT_EVENT_MODE(mode=19*)
  4: 0x442C [0x22] ENTITY_HIDE_FLAG(enabled=0x00)
  5: 0x442E [0x92] Chalvava (ID: 17834304/0x01102140)->Render.Flags3 ^= 0x01
  6: 0x4434 [0x94] LocalPlayer->Render.Flags3 ^= 0x01
  7: 0x443A [0x94] Chalvava (ID: 17834304/0x01102140)->Render.Flags3 ^= 0x01
  8: 0x4440 [0xBA] SET_ENTITY_POSITION(entity_id=LocalPlayer, pos_x=-317.755*, pos_z=-320.430*, pos_y=-1.050*, direction=283.1°*)
  9: 0x444D [0x37] UPDATE_EVENT_POSITION_AND_DIR: x=-315.281*, z=-315.722*, y=-1.001*, direction=254.8°*
 10: 0x4456 [0x80] LOAD_WAIT(entity=LocalPlayer)
 11: 0x445B [0x80] LOAD_WAIT(entity=Chalvava (ID: 17834304/0x01102140))
 12: 0x4460 [0x80] LOAD_WAIT(entity=EventEntity)
 13: 0x4465 [0x4A] LocalPlayer looks at Chalvava (ID: 17834304/0x01102140)
 14: 0x446E [0x4A] Chalvava (ID: 17834304/0x01102140) looks at LocalPlayer
 15: 0x4477 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s106" with entities [LocalPlayer, LocalPlayer], work=[622*, 0*]
 16: 0x4488 [0x1A] CALL_SUBROUTINE(address=0x0043)
 17: 0x448B [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [Chalvava (ID: 17834304/0x01102140), Chalvava (ID: 17834304/0x01102140)], work=40*
 18: 0x449A [0x03] Work_Zone[2] = 2389*
 19: 0x449F [0x2B] Chalvava (ID: 17834304/0x01102140) [8523*]:
    → "Welcome back!\u0007You feel like carrying-warrying this \u0001\u00053\u0002\u0000\u0000\u0000 to Arciela now?\u007F1\u0000\u0007"
 20: 0x44A6 [0x23] WAIT_FOR_DIALOG_INTERACTION
 21: 0x44A7 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk1" with entities [Chalvava (ID: 17834304/0x01102140), Chalvava (ID: 17834304/0x01102140)], work=40*
 22: 0x44B6 [0x7B] Chalvava (ID: 17834304/0x01102140) stops talking
 23: 0x44BB [0x52] END_LOAD_SCHEDULER: End scheduler "s106" with entities [LocalPlayer, LocalPlayer], work=622*
 24: 0x44CA [0x02] IF !(LocalPlayer->Race == 5*) GOTO 0x44E6
 25: 0x44D2 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s117" with entities [LocalPlayer, LocalPlayer], work=[622*, 0*]
 26: 0x44E3 [0x01] GOTO 0x4513
 27: 0x44E6 [0x02] IF !(LocalPlayer->Race == 6*) GOTO 0x4502
 28: 0x44EE [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s117" with entities [LocalPlayer, LocalPlayer], work=[622*, 0*]
 29: 0x44FF [0x01] GOTO 0x4513
 30: 0x4502 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s116" with entities [LocalPlayer, LocalPlayer], work=[622*, 0*]
 31: 0x4513 [0x24] CREATE_DIALOG(message_id=8521*, default_option=0*, option_flags=0*)
    → "What will you do?\u0007\u000BDeliver the goods!\u0007Chalvavacate the premises.\u007F1\u0000\u0007"
 32: 0x451A [0x25] WAIT_DIALOG_SELECT()
 33: 0x451B [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x46AC
 34: 0x4523 [0x52] END_LOAD_SCHEDULER: End scheduler "s116" with entities [LocalPlayer, LocalPlayer], work=622*
 35: 0x4532 [0x52] END_LOAD_SCHEDULER: End scheduler "s117" with entities [LocalPlayer, LocalPlayer], work=622*
 36: 0x4541 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s118" with entities [LocalPlayer, LocalPlayer], work=[622*, 0*]
 37: 0x4552 [0x6E] Chalvava (ID: 17834304/0x01102140) uses emote 10*
 38: 0x4559 [0x99] Wait for Chalvava (ID: 17834304/0x01102140) animation to complete
 39: 0x455E [0x2B] Chalvava (ID: 17834304/0x01102140) [8524*]:
    → "Thank you!\u0007You're an invaluable-waluable help!\u007F1\u0000\u0007"
 40: 0x4565 [0x1C] WAIT(180* ticks)
 41: 0x4568 [0x23] WAIT_FOR_DIALOG_INTERACTION
 42: 0x4569 [0x1A] CALL_SUBROUTINE(address=0x0064)
 43: 0x456C [0x1C] WAIT(30* ticks)
 44: 0x456F [0x52] END_LOAD_SCHEDULER: End scheduler "s118" with entities [LocalPlayer, LocalPlayer], work=622*
 45: 0x457E [0x27] REQ_SET(priority=0x10, entity_id=Unnamed NPC (ID: 17834355/0x01102173), tag_num=0x04)
 46: 0x4585 [0x94] Unnamed NPC (ID: 17834355/0x01102173)->Render.Flags3 ^= 0x01
 47: 0x458B [0x3B] GET_ENTITY_POSITION(entity=Chalvava (ID: 17834304/0x01102140), x_destination=ExtData[1]->WorkLocal[4], y_destination=ExtData[1]->WorkLocal[5], z_destination=ExtData[1]->WorkLocal[6])
 48: 0x4596 [0x3A] CONVERT_YAW_TO_BYTE(entity=Chalvava (ID: 17834304/0x01102140), result_destination=ExtData[1]->WorkLocal[7])
 49: 0x459D [0xBA] SET_ENTITY_POSITION(entity_id=Unnamed NPC (ID: 17834355/0x01102173), pos_x=ExtData[1]->WorkLocal[4], pos_z=ExtData[1]->WorkLocal[5], pos_y=ExtData[1]->WorkLocal[6], direction=ExtData[1]->WorkLocal[7])
 50: 0x45AA [0x29] REQ_SET_WAIT(priority=0x10, entity_id=Unnamed NPC (ID: 17834355/0x01102173), tag_num=0x0D)
 51: 0x45B1 [0x80] LOAD_WAIT(entity=Unnamed NPC (ID: 17834355/0x01102173))
 52: 0x45B6 [0x7B] Chalvava (ID: 17834304/0x01102140) stops talking
 53: 0x45BB [0x02] IF !(LocalPlayer->Race == 5*) GOTO 0x45E4
 54: 0x45C3 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tma1" with entities [Chalvava (ID: 17834304/0x01102140), Chalvava (ID: 17834304/0x01102140)], work=2878*
 55: 0x45D2 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tar1" with entities [Unnamed NPC (ID: 17834355/0x01102173), Unnamed NPC (ID: 17834355/0x01102173)], work=3245*
 56: 0x45E1 [0x01] GOTO 0x462B
 57: 0x45E4 [0x02] IF !(LocalPlayer->Race == 6*) GOTO 0x460D
 58: 0x45EC [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tma1" with entities [Chalvava (ID: 17834304/0x01102140), Chalvava (ID: 17834304/0x01102140)], work=2878*
 59: 0x45FB [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tar1" with entities [Unnamed NPC (ID: 17834355/0x01102173), Unnamed NPC (ID: 17834355/0x01102173)], work=3245*
 60: 0x460A [0x01] GOTO 0x462B
 61: 0x460D [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tma0" with entities [Chalvava (ID: 17834304/0x01102140), Chalvava (ID: 17834304/0x01102140)], work=2878*
 62: 0x461C [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tar0" with entities [Unnamed NPC (ID: 17834355/0x01102173), Unnamed NPC (ID: 17834355/0x01102173)], work=3245*
 63: 0x462B [0x48] [System] [7897*]:
    → "\u007F4\u0001\u0000\u0007"
 64: 0x462E [0x23] WAIT_FOR_DIALOG_INTERACTION
 65: 0x462F [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s119" with entities [LocalPlayer, LocalPlayer], work=[622*, 0*]
 66: 0x4640 [0x1A] CALL_SUBROUTINE(address=0x0043)
 67: 0x4643 [0x1C] WAIT(120* ticks)
 68: 0x4646 [0x52] END_LOAD_SCHEDULER: End scheduler "s119" with entities [LocalPlayer, LocalPlayer], work=622*
 69: 0x4655 [0x02] IF !(LocalPlayer->Race == 5*) GOTO 0x4671
 70: 0x465D [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s193" with entities [LocalPlayer, LocalPlayer], work=[622*, 0*]
 71: 0x466E [0x01] GOTO 0x469E
 72: 0x4671 [0x02] IF !(LocalPlayer->Race == 6*) GOTO 0x468D
 73: 0x4679 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s193" with entities [LocalPlayer, LocalPlayer], work=[622*, 0*]
 74: 0x468A [0x01] GOTO 0x469E
 75: 0x468D [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s192" with entities [LocalPlayer, LocalPlayer], work=[622*, 0*]
 76: 0x469E [0x2B] Chalvava (ID: 17834304/0x01102140) [8525*]:
    → "Here you go.\u0007Don't you dare drop these, or the ghosts of us crestfallen researchers will hauntaru you even into the afterlife!\u007F1\u0000\u0007"
 77: 0x46A5 [0x23] WAIT_FOR_DIALOG_INTERACTION
 78: 0x46A6 [0x05] Work_Zone[1] = 1
 79: 0x46A9 [0x01] GOTO 0x4700
 80: 0x46AC [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x4700
 81: 0x46B4 [0x52] END_LOAD_SCHEDULER: End scheduler "s116" with entities [LocalPlayer, LocalPlayer], work=622*
 82: 0x46C3 [0x52] END_LOAD_SCHEDULER: End scheduler "s117" with entities [LocalPlayer, LocalPlayer], work=622*
 83: 0x46D2 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s118" with entities [LocalPlayer, LocalPlayer], work=[622*, 0*]
 84: 0x46E3 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "dis0" with entities [Chalvava (ID: 17834304/0x01102140), Chalvava (ID: 17834304/0x01102140)], work=40*
 85: 0x46F2 [0x2B] Chalvava (ID: 17834304/0x01102140) [8522*]:
    → "Aw, come on. It'd be the perfectaru chance to meet the princess.\u007F1\u0000\u0007"
 86: 0x46F9 [0x23] WAIT_FOR_DIALOG_INTERACTION
 87: 0x46FA [0x06] Work_Zone[1] = 0
 88: 0x46FD [0x01] GOTO 0x4700

SUBROUTINE_4700:
 89: 0x4700 [0x1A] CALL_SUBROUTINE(address=0x0064)
 90: 0x4703 [0x1C] WAIT(30* ticks)
 91: 0x4706 [0x52] END_LOAD_SCHEDULER: End scheduler "s118" with entities [LocalPlayer, LocalPlayer], work=622*
 92: 0x4715 [0x52] END_LOAD_SCHEDULER: End scheduler "s119" with entities [LocalPlayer, LocalPlayer], work=622*
 93: 0x4724 [0x1C] WAIT(15* ticks)
 94: 0x4727 [0xAB] EventEntity->DespawnValue = 0* // Set despawn value
 95: 0x472B [0x1C] WAIT(1* ticks)
 96: 0x472E [0xAB] EventEntity->UnknownFlag = 0 // Disable unknown flag
 97: 0x4730 [0x46] CAMERA_CONTROL: Restore default settings
 98: 0x4732 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi2" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 99: 0x4743 [0x21] END_EVENT
100: 0x4744 [0x00] END_REQSTACK()
```
