# 17662743 - Lame Deer

## Common Data

| Field            | Value                         |
|------------------|-------------------------------|
| Zone             | Abyssea - Misareaux (ID: 216) |
| Block Size       | 632 bytes                     |
| Total Events     | 11                            |
| References Count | 32                            |

## List of Events

| Event ID                 | Entrypoint   |   Size |   Instructions |
|--------------------------|--------------|--------|----------------|
| [65535](#event-65535)    | 0x0000       |      1 |              1 |
| [65535.1](#event-655351) | 0x0001       |     18 |              4 |
| [65535.2](#event-655352) | 0x0013       |     10 |              2 |
| [65535.3](#event-655353) | 0x001D       |      9 |              3 |
| [65535.4](#event-655354) | 0x0026       |      9 |              3 |
| [65535.5](#event-655355) | 0x002F       |     10 |              2 |
| [65535.6](#event-655356) | 0x0039       |     10 |              2 |
| [263](#event-263)        | 0x0043       |     47 |             11 |
| [262](#event-262)        | 0x0072       |    328 |             53 |
| [236](#event-236)        | 0x01BA       |      1 |              1 |

## DAT References (imed_data)

|   Index | Hex Value   |   Dec Value |
|---------|-------------|-------------|
|       0 | 0x0000      |           0 |
|       1 | 0x0001      |           1 |
|       2 | 0x0080      |         128 |
|       3 | 0x0045      |          69 |
|       4 | 0x1FC1      |        8129 |
|       5 | 0x1FC2      |        8130 |
|       6 | 0x1FC3      |        8131 |
|       7 | 0x0014      |          20 |
|       8 | 0x1FC4      |        8132 |
|       9 | 0x1FC5      |        8133 |
|      10 | 0x1FC6      |        8134 |
|      11 | 0xFFFFFFF6  |  4294967286 |
|      12 | 0x2F38      |       12088 |
|      13 | 0x2F39      |       12089 |
|      14 | 0x2F3A      |       12090 |
|      15 | 0x2F3B      |       12091 |
|      16 | 0x2F3C      |       12092 |
|      17 | 0x2F3D      |       12093 |
|      18 | 0x2F3E      |       12094 |
|      19 | 0x2F3F      |       12095 |
|      20 | 0x2F40      |       12096 |
|      21 | 0x2F41      |       12097 |
|      22 | 0x2F42      |       12098 |
|      23 | 0x2F43      |       12099 |
|      24 | 0x2F44      |       12100 |
|      25 | 0x2F45      |       12101 |
|      26 | 0x2F46      |       12102 |
|      27 | 0x2F47      |       12103 |
|      28 | 0x2F48      |       12104 |
|      29 | 0x2F49      |       12105 |
|      30 | 0x2F4A      |       12106 |
|      31 | 0x2F4B      |       12107 |

## String References

- **8129**: I've been charged with looking after the equipment of heroes and heroines past.
- **8130**: I'll even let you have one...if you bring me three pieces of unneeded footwear.
- **8131**: What do you want?
- **8132**: What do you want? [Nothing./$1./$2./$3./$4./$5./$6./$7./$8./$9./$10./$11./$12./$13./$14./$15./$16./$17./$18./$19./$20.]
- **8133**: Are you fine with this?
- **8134**: Well, are you? [Yes./No.]

## Events

### Event 65535

#### Metadata

| Field        | Value   |
|--------------|---------|
| Entrypoint   | 0x0000  |
| Data Size    | 1 bytes |
| Instructions | 1       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000: 00                                                .               
```

#### Opcodes

```
  0: 0x0000 [0x00] END_REQSTACK()
```

### Event 65535.1

#### Metadata

| Field        | Value    |
|--------------|----------|
| Entrypoint   | 0x0001   |
| Data Size    | 18 bytes |
| Instructions | 4        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000:    22 00 2F 00 F8 FF FF  7F 6C F8 FF FF 7F 00 80   "./.....l......
0010: 01 80 00                                          ...             
```

#### Opcodes

```
  0: 0x0001 [0x22] ENTITY_HIDE_FLAG(enabled=0x00)
  1: 0x0003 [0x2F] EventEntity->Render.Flags0 &= ~0x80000 // Bit 19
  2: 0x0009 [0x6C] FADE_ENTITY_COLOR(entity_id=EventEntity, end_alpha=0*, fade_time=1*)
  3: 0x0012 [0x00] END_REQSTACK()
```

### Event 65535.2

#### Metadata

| Field        | Value    |
|--------------|----------|
| Entrypoint   | 0x0013   |
| Data Size    | 10 bytes |
| Instructions | 2        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0010:          6C F8 FF FF 7F  02 80 01 80 00              l.........   
```

#### Opcodes

```
  0: 0x0013 [0x6C] FADE_ENTITY_COLOR(entity_id=EventEntity, end_alpha=128*, fade_time=1*)
  1: 0x001C [0x00] END_REQSTACK()
```

### Event 65535.3

#### Metadata

| Field        | Value   |
|--------------|---------|
| Entrypoint   | 0x001D  |
| Data Size    | 9 bytes |
| Instructions | 3       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0010:                                         22 00 2F               "./
0020: 00 F8 FF FF 7F 00                                 ......          
```

#### Opcodes

```
  0: 0x001D [0x22] ENTITY_HIDE_FLAG(enabled=0x00)
  1: 0x001F [0x2F] EventEntity->Render.Flags0 &= ~0x80000 // Bit 19
  2: 0x0025 [0x00] END_REQSTACK()
```

### Event 65535.4

#### Metadata

| Field        | Value   |
|--------------|---------|
| Entrypoint   | 0x0026  |
| Data Size    | 9 bytes |
| Instructions | 3       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0020:                   22 01  2F 01 F8 FF FF 7F 00           "./...... 
```

#### Opcodes

```
  0: 0x0026 [0x22] ENTITY_HIDE_FLAG(enabled=0x01)
  1: 0x0028 [0x2F] EventEntity->Render.Flags0 |= 0x80000 // Bit 19
  2: 0x002E [0x00] END_REQSTACK()
```

### Event 65535.5

#### Metadata

| Field        | Value    |
|--------------|----------|
| Entrypoint   | 0x002F   |
| Data Size    | 10 bytes |
| Instructions | 2        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0020:                                               6C                 l
0030: F8 FF FF 7F 00 80 01 80  00                       .........       
```

#### Opcodes

```
  0: 0x002F [0x6C] FADE_ENTITY_COLOR(entity_id=EventEntity, end_alpha=0*, fade_time=1*)
  1: 0x0038 [0x00] END_REQSTACK()
```

### Event 65535.6

#### Metadata

| Field        | Value    |
|--------------|----------|
| Entrypoint   | 0x0039   |
| Data Size    | 10 bytes |
| Instructions | 2        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0030:                             6C F8 FF FF 7F 02 80           l......
0040: 01 80 00                                          ...             
```

#### Opcodes

```
  0: 0x0039 [0x6C] FADE_ENTITY_COLOR(entity_id=EventEntity, end_alpha=128*, fade_time=1*)
  1: 0x0042 [0x00] END_REQSTACK()
```

### Event 263

#### Metadata

| Field        | Value    |
|--------------|----------|
| Entrypoint   | 0x0043   |
| Data Size    | 47 bytes |
| Instructions | 11       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0040:          1E F0 FF FF 7F  6F 70 66 03 80 F8 FF FF     .....opf.....
0050: 7F F8 FF FF 7F 74 6C 6B  30 1D 04 80 23 1D 05 80  .....tlk0...#...
0060: 23 66 03 80 F8 FF FF 7F  F8 FF FF 7F 74 6C 6B 31  #f..........tlk1
0070: 21 00                                             !.              
```

#### Opcodes

```
  0: 0x0043 [0x1E] EventEntity looks at LocalPlayer and starts talking
  1: 0x0048 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  2: 0x0049 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
  3: 0x004A [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=69*
  4: 0x0059 [0x1D] PRINT_EVENT_MESSAGE(message_id=8129*)
    → "I've been charged with looking after the equipment of heroes and heroines past."
  5: 0x005C [0x23] WAIT_FOR_DIALOG_INTERACTION
  6: 0x005D [0x1D] PRINT_EVENT_MESSAGE(message_id=8130*)
    → "I'll even let you have one...if you bring me three pieces of unneeded footwear."
  7: 0x0060 [0x23] WAIT_FOR_DIALOG_INTERACTION
  8: 0x0061 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk1" with entities [EventEntity, EventEntity], work=69*
  9: 0x0070 [0x21] END_EVENT
 10: 0x0071 [0x00] END_REQSTACK()
```

### Event 262

#### Metadata

| Field        | Value     |
|--------------|-----------|
| Entrypoint   | 0x0072    |
| Data Size    | 328 bytes |
| Instructions | 49        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0070:       42 1E F0 FF FF 7F  6F 70 03 05 00 03 10 03    B.....op......
0080: 06 00 04 10 03 07 00 05  10 06 00 00 06 02 00 1D  ................
0090: 06 80 23 02 02 00 00 80  00 58 01 02 00 00 07 80  ..#......X......
00A0: 05 E6 00 9D 00 5A 01 01  00 00 00 9D 05 8A 01 01  .....Z..........
00B0: 00 00 00 0B 00 00 02 05  00 01 00 00 C5 00 3C 03  ..............<.
00C0: 00 00 00 01 80 02 06 00  01 00 00 D4 00 3C 03 00  .............<..
00D0: 00 00 01 80 02 07 00 01  00 00 E3 00 3C 03 00 00  ............<...
00E0: 00 01 80 01 9B 00 24 08  80 00 80 03 00 25 02 00  ......$......%..
00F0: 10 00 80 00 F9 00 01 F9  00 03 04 00 00 10 02 04  ................
0100: 00 01 80 04 4B 01 0C 04  00 9D 00 5A 01 01 00 04  ....K......Z....
0110: 00 93 01 00 03 02 10 00  80 1D 09 80 23 93 00 80  ............#...
0120: 24 0A 80 01 80 00 80 25  02 00 10 00 80 00 3D 01  $......%......=.
0130: 0B 04 00 03 01 10 04 00  21 00 01 48 01 02 00 10  ........!..H....
0140: 01 80 00 48 01 01 48 01  01 55 01 03 02 00 01 80  ...H..H..U......
0150: 03 01 10 0B 80 01 93 00  21 00 0C 80 0D 80 0E 80  ........!.......
0160: 0F 80 10 80 11 80 12 80  13 80 14 80 15 80 16 80  ................
0170: 17 80 18 80 19 80 1A 80  1B 80 1C 80 1D 80 1E 80  ................
0180: 1F 80 00 80 00 80 00 80  00 80 03 10 04 10 05 10  ................
0190: 06 10 07 10 08 10 09 10  00 17 01 17 02 17 03 17  ................
01A0: 04 17 05 17 06 17 07 17  08 17 09 17 0A 17 0B 17  ................
01B0: 0C 17 00 80 00 80 00 80  00 80                    ..........      
```

#### Opcodes

```
  0: 0x0072 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x0073 [0x1E] EventEntity looks at LocalPlayer and starts talking
  2: 0x0078 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  3: 0x0079 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
  4: 0x007A [0x03] ExtData[1]->WorkLocal[5] = Work_Zone[3]
  5: 0x007F [0x03] ExtData[1]->WorkLocal[6] = Work_Zone[4]
  6: 0x0084 [0x03] ExtData[1]->WorkLocal[7] = Work_Zone[5]
  7: 0x0089 [0x06] ExtData[1]->WorkLocal[0] = 0
  8: 0x008C [0x06] ExtData[1]->WorkLocal[2] = 0
  9: 0x008F [0x1D] PRINT_EVENT_MESSAGE(message_id=8131*)
    → "What do you want?"
 10: 0x0092 [0x23] WAIT_FOR_DIALOG_INTERACTION
 11: 0x0093 [0x02] IF !(ExtData[1]->WorkLocal[2] == 0*) GOTO 0x0158
 12: 0x009B [0x02] IF !(ExtData[1]->WorkLocal[0] > 20*) GOTO 0x00E6
 13: 0x00A3 [0x9D] ExtData[1]->WorkLocal[1] = 0x015A[ExtData[1]->WorkLocal[0]] // Read WORD
 14: 0x00AB [0x9D] 0x018A[ExtData[1]->WorkLocal[0] * 2] = ExtData[1]->WorkLocal[1] // Write WORD
 15: 0x00B3 [0x0B] ExtData[1]->WorkLocal[0]++
 16: 0x00B6 [0x02] IF !(ExtData[1]->WorkLocal[5] == ExtData[1]->WorkLocal[1]) GOTO 0x00C5
 17: 0x00BE [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=ExtData[1]->WorkLocal[3], bit_index_work_offset=ExtData[1]->WorkLocal[0], condition_work_offset=1*)
 18: 0x00C5 [0x02] IF !(ExtData[1]->WorkLocal[6] == ExtData[1]->WorkLocal[1]) GOTO 0x00D4
 19: 0x00CD [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=ExtData[1]->WorkLocal[3], bit_index_work_offset=ExtData[1]->WorkLocal[0], condition_work_offset=1*)
 20: 0x00D4 [0x02] IF !(ExtData[1]->WorkLocal[7] == ExtData[1]->WorkLocal[1]) GOTO 0x00E3
 21: 0x00DC [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=ExtData[1]->WorkLocal[3], bit_index_work_offset=ExtData[1]->WorkLocal[0], condition_work_offset=1*)
 22: 0x00E3 [0x01] GOTO 0x009B
 23: 0x00E6 [0x24] CREATE_DIALOG(message_id=8132*, default_option=0*, option_flags=ExtData[1]->WorkLocal[3])
    → "What do you want? [Nothing./$1./$2./$3./$4./$5./$6./$7./$8./$9./$10./$11./$12./$13./$14./$15./$16./$17./$18./$19./$20.]"
 24: 0x00ED [0x25] WAIT_DIALOG_SELECT()
 25: 0x00EE [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x00F9
 26: 0x00F6 [0x01] GOTO 0x00F9

SUBROUTINE_00F9:
 27: 0x00F9 [0x03] ExtData[1]->WorkLocal[4] = Work_Zone[0]
 28: 0x00FE [0x02] IF !(ExtData[1]->WorkLocal[4] < 1*) GOTO 0x014B
 29: 0x0106 [0x0C] ExtData[1]->WorkLocal[4]--
 30: 0x0109 [0x9D] ExtData[1]->WorkLocal[1] = 0x015A[ExtData[1]->WorkLocal[4]] // Read WORD
 31: 0x0111 [0x93] DISPLAY_ITEM_INFO(item_id=ExtData[1]->WorkLocal[1])
 32: 0x0114 [0x03] Work_Zone[2] = 0*
 33: 0x0119 [0x1D] PRINT_EVENT_MESSAGE(message_id=8133*)
    → "Are you fine with this?"
 34: 0x011C [0x23] WAIT_FOR_DIALOG_INTERACTION
 35: 0x011D [0x93] DISPLAY_ITEM_INFO(item_id=0*)
 36: 0x0120 [0x24] CREATE_DIALOG(message_id=8134*, default_option=1*, option_flags=0*)
    → "Well, are you? [Yes./No.]"
 37: 0x0127 [0x25] WAIT_DIALOG_SELECT()
 38: 0x0128 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x013D
 39: 0x0130 [0x0B] ExtData[1]->WorkLocal[4]++
 40: 0x0133 [0x03] Work_Zone[1] = ExtData[1]->WorkLocal[4]
 41: 0x0138 [0x21] END_EVENT
 42: 0x0139 [0x00] END_REQSTACK()

SUBROUTINE_0148:
 43: 0x0148 [0x01] GOTO 0x0155
 44: 0x014B [0x03] ExtData[1]->WorkLocal[2] = 1*
 45: 0x0150 [0x03] Work_Zone[1] = 4294967286*

SUBROUTINE_0155:
 46: 0x0155 [0x01] GOTO 0x0093
 47: 0x0158 [0x21] END_EVENT
 48: 0x0159 [0x00] END_REQSTACK()
```

#### Data or dead code:

```
# Data Section: 0x015A (96 bytes)
     0x015A: 0C 80 0D 80 0E 80 0F 80 10 80 11 80 12 80 13 80
     0x016A: 14 80 15 80 16 80 17 80 18 80 19 80 1A 80 1B 80
     0x017A: 1C 80 1D 80 1E 80 1F 80 00 80 00 80 00 80 00 80
     0x018A: 03 10 04 10 05 10 06 10 07 10 08 10 09 10 00 17
     0x019A: 01 17 02 17 03 17 04 17 05 17 06 17 07 17 08 17
     0x01AA: 09 17 0A 17 0B 17 0C 17 00 80 00 80 00 80 00 80
# Dead code (unreachable instructions):
     0x013A [0x01] GOTO 0x0148
```

### Event 236

#### Metadata

| Field        | Value   |
|--------------|---------|
| Entrypoint   | 0x01BA  |
| Data Size    | 1 bytes |
| Instructions | 1       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
01B0:                                00                           .     
```

#### Opcodes

```
  0: 0x01BA [0x00] END_REQSTACK()
```
