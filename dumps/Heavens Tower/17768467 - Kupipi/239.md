# Event 239

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 80/194    |
| Offset          | 0x0D55    |
| Data Size       | 569 bytes |
| Calculated Size | 569 bytes |
| Instructions    | 81        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0D50:                42 03 07  00 07 80 03 06 00 08 10       B..........
0D60: 03 05 00 09 10 1E F0 FF  FF 7F 6F 70 29 08 13 20  ..........op).. 
0D70: 0F 01 01 29 0B 13 20 0F  01 51 29 0B 13 20 0F 01  ...).. ..Q).. ..
0D80: 52 29 08 13 20 0F 01 36  02 05 00 07 80 00 98 0D  R).. ..6........
0D90: 03 06 10 07 80 1A 9C 0D  20 00 21 00 27 08 1B 20  ........ .!.'.. 
0DA0: 0F 01 02 45 1B 80 F0 FF  FF 7F F0 FF FF 7F 66 64  ...E..........fd
0DB0: 6F 31 10 80 55 1B 80 F0  FF FF 7F F0 FF FF 7F 66  o1..U..........f
0DC0: 64 6F 31 46 01 38 4F 80  1C 01 80 4E 00 16 20 0F  do1F.8O....N.. .
0DD0: 01 4E 00 F0 FF FF 7F BA  F0 FF FF 7F 50 80 51 80  .N..........P.Q.
0DE0: 10 80 26 80 80 F0 FF FF  7F 80 16 20 0F 01 45 1F  ..&........ ..E.
0DF0: 80 F8 FF FF 7F F8 FF FF  7F 73 30 30 31 10 80 45  .........s001..E
0E00: 1B 80 F0 FF FF 7F F0 FF  FF 7F 66 64 69 31 10 80  ..........fdi1..
0E10: 55 1B 80 F0 FF FF 7F F0  FF FF 7F 66 64 69 31 4A  U..........fdi1J
0E20: F0 FF FF 7F 16 20 0F 01  4A 13 20 0F 01 16 20 0F  ..... ..J. ... .
0E30: 01 6F 76 13 20 0F 01 2A  08 1B 20 0F 01 27 0B 16  .ov. ..*.. ..'..
0E40: 20 0F 01 29 1C 08 80 2A  0B 16 20 0F 01 52 1F 80   ..)...*.. ..R..
0E50: F8 FF FF 7F F8 FF FF 7F  73 30 30 31 45 1F 80 F8  ........s001E...
0E60: FF FF 7F F8 FF FF 7F 73  30 30 32 10 80 27 0B 16  .......s002..'..
0E70: 20 0F 01 2A 29 0D F0 FF  FF 7F 24 2A 0B 16 20 0F   ..*).....$*.. .
0E80: 01 4A 13 20 0F 01 16 20  0F 01 6F 76 13 20 0F 01  .J. ... ..ov. ..
0E90: 52 1F 80 F8 FF FF 7F F8  FF FF 7F 73 30 30 32 02  R..........s002.
0EA0: 08 10 20 80 00 BB 0E 45  1F 80 F8 FF FF 7F F8 FF  .. ....E........
0EB0: FF 7F 73 31 30 31 10 80  01 CC 0E 45 1F 80 F8 FF  ..s101.....E....
0EC0: FF 7F F8 FF FF 7F 73 30  38 37 10 80 4A 16 20 0F  ......s087..J. .
0ED0: 01 F0 FF FF 7F 6F 76 16  20 0F 01 79 00 16 20 0F  .....ov. ..y.. .
0EE0: 01 F0 FF FF 7F 1C 01 80  03 02 10 2B 80 03 06 10  ...........+....
0EF0: 11 80 2B 16 20 0F 01 2C  80 23 02 06 00 10 80 00  ..+. ..,.#......
0F00: 0F 0F 03 02 10 07 00 2B  16 20 0F 01 2D 80 23 29  .......+. ..-.#)
0F10: 0B 16 20 0F 01 33 45 1F  80 F8 FF FF 7F F8 FF FF  .. ..3E.........
0F20: 7F 73 30 38 38 10 80 7B  16 20 0F 01 29 0B 16 20  .s088..{. ..).. 
0F30: 0F 01 2D 4A 13 20 0F 01  F0 FF FF 7F 6F 76 13 20  ..-J. ......ov. 
0F40: 0F 01 45 1B 80 F0 FF FF  7F F0 FF FF 7F 66 64 6F  ..E..........fdo
0F50: 31 10 80 55 1B 80 F0 FF  FF 7F F0 FF FF 7F 66 64  1..U..........fd
0F60: 6F 31 52 1F 80 F8 FF FF  7F F8 FF FF 7F 73 30 38  o1R..........s08
0F70: 38 1C 31 80 AB 11 10 80  AB 0A 46 00 45 1B 80 F0  8.1.......F.E...
0F80: FF FF 7F F0 FF FF 7F 66  64 69 32 10 80 1B        .......fdi2...  
```

## Opcodes

```
  0: 0x0D55 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x0D56 [0x03] ExtData[1]->WorkLocal[7] = 1*
  2: 0x0D5B [0x03] ExtData[1]->WorkLocal[6] = Work_Zone[8]
  3: 0x0D60 [0x03] ExtData[1]->WorkLocal[5] = Work_Zone[9]
  4: 0x0D65 [0x1E] EventEntity looks at LocalPlayer and starts talking
  5: 0x0D6A [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  6: 0x0D6B [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
  7: 0x0D6C [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Kupipi (ID: 17768467/0x010F2013), tag_num=0x01)
  8: 0x0D73 [0x29] REQ_SET_WAIT(priority=0x0B, entity_id=Kupipi (ID: 17768467/0x010F2013), tag_num=0x51)
  9: 0x0D7A [0x29] REQ_SET_WAIT(priority=0x0B, entity_id=Kupipi (ID: 17768467/0x010F2013), tag_num=0x52)
 10: 0x0D81 [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Kupipi (ID: 17768467/0x010F2013), tag_num=0x36)
 11: 0x0D88 [0x02] IF !(ExtData[1]->WorkLocal[5] == 1*) GOTO 0x0D98
 12: 0x0D90 [0x03] Work_Zone[6] = 1*
 13: 0x0D95 [0x1A] CALL_SUBROUTINE(address=0x0D9C)
 14: 0x0D98 [0x20] SET_CLI_EVENT_UC_FLAG: Unlock player control
 15: 0x0D9A [0x21] END_EVENT
 16: 0x0D9B [0x00] END_REQSTACK()

SUBROUTINE_0D9C:
 17: 0x0D9C [0x27] REQ_SET(priority=0x08, entity_id=Door:Starway Stairway (ID: 17768475/0x010F201B), tag_num=0x02)
 18: 0x0DA3 [0x45] LOAD_SCHEDULED_TASK(work_offset1=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdo1", work_offset2=0*)
 19: 0x0DB4 [0x55] WAIT_LOAD_SCHEDULER(work_offset=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdo1")
 20: 0x0DC3 [0x46] CAMERA_CONTROL: Disable user control
 21: 0x0DC5 [0x38] SET_CLIENT_EVENT_MODE(mode=147*)
 22: 0x0DC8 [0x1C] WAIT(30* ticks)
 23: 0x0DCB [0x4E] SET_ENTITY_HIDE_FLAG: Show Semih Lafihna (ID: 17768470/0x010F2016)
 24: 0x0DD1 [0x4E] SET_ENTITY_HIDE_FLAG: Show LocalPlayer
 25: 0x0DD7 [0xBA] SET_ENTITY_POSITION(entity_id=LocalPlayer, pos_x=2.059*, pos_z=29.933*, pos_y=0.000*, direction=261.6°*)
 26: 0x0DE4 [0x80] LOAD_WAIT(entity=LocalPlayer)
 27: 0x0DE9 [0x80] LOAD_WAIT(entity=Semih Lafihna (ID: 17768470/0x010F2016))
 28: 0x0DEE [0x45] LOAD_SCHEDULED_TASK(work_offset1=142*, entity1=EventEntity, entity2=EventEntity, scheduler_id="s001", work_offset2=0*)
 29: 0x0DFF [0x45] LOAD_SCHEDULED_TASK(work_offset1=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdi1", work_offset2=0*)
 30: 0x0E10 [0x55] WAIT_LOAD_SCHEDULER(work_offset=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdi1")
 31: 0x0E1F [0x4A] LocalPlayer looks at Semih Lafihna (ID: 17768470/0x010F2016)
 32: 0x0E28 [0x4A] Kupipi (ID: 17768467/0x010F2013) looks at Semih Lafihna (ID: 17768470/0x010F2016)
 33: 0x0E31 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 34: 0x0E32 [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until Kupipi (ID: 17768467/0x010F2013) Render.Flags0 and Render.Flags3 conditions are met
 35: 0x0E37 [0x2A] GET_REQ_LEVEL(level=8, entity_id=Door:Starway Stairway (ID: 17768475/0x010F201B))
 36: 0x0E3D [0x27] REQ_SET(priority=0x0B, entity_id=Semih Lafihna (ID: 17768470/0x010F2016), tag_num=0x29)
 37: 0x0E44 [0x1C] WAIT(100* ticks)
 38: 0x0E47 [0x2A] GET_REQ_LEVEL(level=11, entity_id=Semih Lafihna (ID: 17768470/0x010F2016))
 39: 0x0E4D [0x52] END_LOAD_SCHEDULER: End scheduler "s001" with entities [EventEntity, EventEntity], work=142*
 40: 0x0E5C [0x45] LOAD_SCHEDULED_TASK(work_offset1=142*, entity1=EventEntity, entity2=EventEntity, scheduler_id="s002", work_offset2=0*)
 41: 0x0E6D [0x27] REQ_SET(priority=0x0B, entity_id=Semih Lafihna (ID: 17768470/0x010F2016), tag_num=0x2A)
 42: 0x0E74 [0x29] REQ_SET_WAIT(priority=0x0D, entity_id=LocalPlayer, tag_num=0x24)
 43: 0x0E7B [0x2A] GET_REQ_LEVEL(level=11, entity_id=Semih Lafihna (ID: 17768470/0x010F2016))
 44: 0x0E81 [0x4A] Kupipi (ID: 17768467/0x010F2013) looks at Semih Lafihna (ID: 17768470/0x010F2016)
 45: 0x0E8A [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 46: 0x0E8B [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until Kupipi (ID: 17768467/0x010F2013) Render.Flags0 and Render.Flags3 conditions are met
 47: 0x0E90 [0x52] END_LOAD_SCHEDULER: End scheduler "s002" with entities [EventEntity, EventEntity], work=142*
 48: 0x0E9F [0x02] IF !(Work_Zone[8] == 8*) GOTO 0x0EBB
 49: 0x0EA7 [0x45] LOAD_SCHEDULED_TASK(work_offset1=142*, entity1=EventEntity, entity2=EventEntity, scheduler_id="s101", work_offset2=0*)
 50: 0x0EB8 [0x01] GOTO 0x0ECC

SUBROUTINE_0EBB:
 51: 0x0EBB [0x45] LOAD_SCHEDULED_TASK(work_offset1=142*, entity1=EventEntity, entity2=EventEntity, scheduler_id="s087", work_offset2=0*)
 52: 0x0ECC [0x4A] Semih Lafihna (ID: 17768470/0x010F2016) looks at LocalPlayer
 53: 0x0ED5 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 54: 0x0ED6 [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until Semih Lafihna (ID: 17768470/0x010F2016) Render.Flags0 and Render.Flags3 conditions are met
 55: 0x0EDB [0x79] Semih Lafihna (ID: 17768470/0x010F2016) looks at LocalPlayer (Basic look)
 56: 0x0EE5 [0x1C] WAIT(30* ticks)
 57: 0x0EE8 [0x03] Work_Zone[2] = 10157*
 58: 0x0EED [0x03] Work_Zone[6] = 2*
 59: 0x0EF2 [0x2B] Semih Lafihna (ID: 17768470/0x010F2016) [9303*]:
    → "\u000C\u0004[If you're going to Giddeus, I'll/If you're going to Giddeus, I'll/You'll be fine. I'll] give you this \u0001\u0005#\u0002\u0000\u0000\u0000 just in case.\u007F1\u0000\u0007"
 60: 0x0EF9 [0x23] WAIT_FOR_DIALOG_INTERACTION
 61: 0x0EFA [0x02] IF !(ExtData[1]->WorkLocal[6] == 0*) GOTO 0x0F0F
 62: 0x0F02 [0x03] Work_Zone[2] = ExtData[1]->WorkLocal[7]
 63: 0x0F07 [0x2B] Semih Lafihna (ID: 17768470/0x010F2016) [9304*]:
    → "If you're not surrre what to do with it, visit one of the Jeuno Institute of Magical Studies representatives located in \u000C\u0000[Southern San d'Oria/Port Bastok/Windurst Woods]. They can get you started.\u007F1\u0000\u0007"
 64: 0x0F0E [0x23] WAIT_FOR_DIALOG_INTERACTION
 65: 0x0F0F [0x29] REQ_SET_WAIT(priority=0x0B, entity_id=Semih Lafihna (ID: 17768470/0x010F2016), tag_num=0x33)
 66: 0x0F16 [0x45] LOAD_SCHEDULED_TASK(work_offset1=142*, entity1=EventEntity, entity2=EventEntity, scheduler_id="s088", work_offset2=0*)
 67: 0x0F27 [0x7B] Semih Lafihna (ID: 17768470/0x010F2016) stops talking
 68: 0x0F2C [0x29] REQ_SET_WAIT(priority=0x0B, entity_id=Semih Lafihna (ID: 17768470/0x010F2016), tag_num=0x2D)
 69: 0x0F33 [0x4A] Kupipi (ID: 17768467/0x010F2013) looks at LocalPlayer
 70: 0x0F3C [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 71: 0x0F3D [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until Kupipi (ID: 17768467/0x010F2013) Render.Flags0 and Render.Flags3 conditions are met
 72: 0x0F42 [0x45] LOAD_SCHEDULED_TASK(work_offset1=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdo1", work_offset2=0*)
 73: 0x0F53 [0x55] WAIT_LOAD_SCHEDULER(work_offset=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdo1")
 74: 0x0F62 [0x52] END_LOAD_SCHEDULER: End scheduler "s088" with entities [EventEntity, EventEntity], work=142*
 75: 0x0F71 [0x1C] WAIT(15* ticks)
 76: 0x0F74 [0xAB] EventEntity->DespawnValue = 0* // Set despawn value
 77: 0x0F78 [0xAB] EventEntity->UnknownFlag = 0 // Disable unknown flag
 78: 0x0F7A [0x46] CAMERA_CONTROL: Restore default settings
 79: 0x0F7C [0x45] LOAD_SCHEDULED_TASK(work_offset1=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdi2", work_offset2=0*)
 80: 0x0F8D [0x1B] RETURN
```
