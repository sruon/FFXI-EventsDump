# Event 4

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 3/3       |
| Offset          | 0x01DD    |
| Data Size       | 821 bytes |
| Calculated Size | 821 bytes |
| Instructions    | 63        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
01D0:                                         1E F0 FF               ...
01E0: FF 7F 1D 12 80 23 24 13  80 00 80 00 80 25 02 00  .....#$......%..
01F0: 10 00 80 00 FB 01 21 00  01 6B 02 02 00 10 01 80  ......!..k......
0200: 00 0B 02 03 04 00 14 80  01 6B 02 02 00 10 05 80  .........k......
0210: 00 1B 02 03 04 00 15 80  01 6B 02 02 00 10 07 80  .........k......
0220: 00 2B 02 03 04 00 16 80  01 6B 02 02 00 10 09 80  .+.......k......
0230: 00 3B 02 03 04 00 17 80  01 6B 02 02 00 10 0B 80  .;.......k......
0240: 00 4B 02 03 04 00 18 80  01 6B 02 02 00 10 0D 80  .K.......k......
0250: 00 5B 02 03 04 00 19 80  01 6B 02 02 00 10 0E 80  .[.......k......
0260: 00 6B 02 03 04 00 1A 80  01 6B 02 1A 4C 04 21 00  .k.......k..L.!.
0270: 24 1B 80 00 80 00 00 25  02 00 10 00 80 00 85 02  $......%........
0280: 21 00 01 45 04 02 00 10  01 80 00 95 02 03 04 00  !..E............
0290: 1C 80 01 45 04 02 00 10  05 80 00 A5 02 03 04 00  ...E............
02A0: 1D 80 01 45 04 02 00 10  07 80 00 B5 02 03 04 00  ...E............
02B0: 1E 80 01 45 04 02 00 10  09 80 00 C5 02 03 04 00  ...E............
02C0: 1F 80 01 45 04 02 00 10  0B 80 00 D5 02 03 04 00  ...E............
02D0: 20 80 01 45 04 02 00 10  0D 80 00 E5 02 03 04 00   ..E............
02E0: 21 80 01 45 04 02 00 10  0E 80 00 F5 02 03 04 00  !..E............
02F0: 22 80 01 45 04 02 00 10  10 80 00 05 03 03 04 00  "..E............
0300: 23 80 01 45 04 02 00 10  24 80 00 15 03 03 04 00  #..E....$.......
0310: 25 80 01 45 04 02 00 10  26 80 00 25 03 03 04 00  %..E....&..%....
0320: 27 80 01 45 04 02 00 10  28 80 00 35 03 03 04 00  '..E....(..5....
0330: 29 80 01 45 04 02 00 10  2A 80 00 45 03 03 04 00  )..E....*..E....
0340: 2B 80 01 45 04 02 00 10  2C 80 00 55 03 03 04 00  +..E....,..U....
0350: 2D 80 01 45 04 02 00 10  2E 80 00 65 03 03 04 00  -..E.......e....
0360: 2F 80 01 45 04 02 00 10  30 80 00 75 03 03 04 00  /..E....0..u....
0370: 31 80 01 45 04 02 00 10  32 80 00 85 03 03 04 00  1..E....2.......
0380: 33 80 01 45 04 02 00 10  34 80 00 95 03 03 04 00  3..E....4.......
0390: 35 80 01 45 04 02 00 10  36 80 00 A5 03 03 04 00  5..E....6.......
03A0: 37 80 01 45 04 02 00 10  06 80 00 B5 03 03 04 00  7..E............
03B0: 38 80 01 45 04 02 00 10  08 80 00 C5 03 03 04 00  8..E............
03C0: 39 80 01 45 04 02 00 10  3A 80 00 D5 03 03 04 00  9..E....:.......
03D0: 3B 80 01 45 04 02 00 10  3C 80 00 E5 03 03 04 00  ;..E....<.......
03E0: 3D 80 01 45 04 02 00 10  3E 80 00 F5 03 03 04 00  =..E....>.......
03F0: 3F 80 01 45 04 02 00 10  40 80 00 05 04 03 04 00  ?..E....@.......
0400: 41 80 01 45 04 02 00 10  42 80 00 15 04 03 04 00  A..E....B.......
0410: 43 80 01 45 04 02 00 10  44 80 00 25 04 03 04 00  C..E....D..%....
0420: 0B 80 01 45 04 02 00 10  45 80 00 35 04 03 04 00  ...E....E..5....
0430: 40 80 01 45 04 02 00 10  46 80 00 45 04 03 04 00  @..E....F..E....
0440: 47 80 01 45 04 1A 4C 04  21 00 21 00 03 03 00 09  G..E..L.!.!.....
0450: 10 15 03 00 48 80 72 00  04 00 72 01 04 00 03 00  ....H.r...r.....
0460: 02 03 10 49 80 00 7E 04  02 04 10 49 80 00 77 04  ...I..~....I..w.
0470: 1D 4A 80 23 01 7B 04 1D  4B 80 23 01 91 04 02 04  .J.#.{..K.#.....
0480: 10 49 80 00 8D 04 1D 4C  80 23 01 91 04 1D 4D 80  .I.....L.#....M.
0490: 23 0B 03 00 72 00 04 00  72 01 04 00 03 00 02 03  #...r...r.......
04A0: 10 49 80 00 BC 04 02 04  10 49 80 00 B5 04 1D 4E  .I.......I.....N
04B0: 80 23 01 B9 04 1D 4F 80  23 01 CF 04 02 04 10 49  .#....O.#......I
04C0: 80 00 CB 04 1D 50 80 23  01 CF 04 1D 51 80 23 0B  .....P.#....Q.#.
04D0: 03 00 72 00 04 00 72 01  04 00 03 00 02 03 10 49  ..r...r........I
04E0: 80 00 FA 04 02 04 10 49  80 00 F3 04 1D 52 80 23  .......I.....R.#
04F0: 01 F7 04 1D 53 80 23 01  0D 05 02 04 10 49 80 00  ....S.#......I..
0500: 09 05 1D 54 80 23 01 0D  05 1D 55 80 23 1D 56 80  ...T.#....U.#.V.
0510: 23 1B                                             #.              
```

## Opcodes

```
  0: 0x01DD [0x1E] EventEntity looks at LocalPlayer and starts talking
  1: 0x01E2 [0x1D] PRINT_EVENT_MESSAGE(message_id=13405*)
    → "Your fate rides on the changing winds of Vana'diel.\u0007I can give you insight on the local weather.\u007F1\u0000\u0007"
  2: 0x01E5 [0x23] WAIT_FOR_DIALOG_INTERACTION
  3: 0x01E6 [0x24] CREATE_DIALOG(message_id=13421*, default_option=0*, option_flags=0*)
    → "What area's weather do you wish to know?\u0007\u000BNowhere.\u0007Ceizak Battlegrounds.\u0007Yahse Hunting Grounds.\u0007Foret de Hennetiel.\u0007Morimar Basalt Fields.\u0007Yorcia Weald.\u0007Marjami Ravine.\u0007Kamihr Drifts.\u007F1\u0000\u0007"
  4: 0x01ED [0x25] WAIT_DIALOG_SELECT()
  5: 0x01EE [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x01FB
  6: 0x01F6 [0x21] END_EVENT
  7: 0x01F7 [0x00] END_REQSTACK()

SUBROUTINE_026B:
  8: 0x026B [0x1A] CALL_SUBROUTINE(address=0x044C)
  9: 0x026E [0x21] END_EVENT
 10: 0x026F [0x00] END_REQSTACK()

SUBROUTINE_044C:
 11: 0x044C [0x03] ExtData[1]->WorkLocal[3] = Work_Zone[9]
 12: 0x0451 [0x15] ExtData[1]->WorkLocal[3] /= 3456*
 13: 0x0456 [0x72] LOAD_EVENT_WEATHER: Request weather file 7033, weather_id=ExtData[1]->WorkLocal[4], param1=0x0172, param2=0x00030004
 14: 0x0460 [0x02] IF !(Work_Zone[3] == 255*) GOTO 0x047E
 15: 0x0468 [0x02] IF !(Work_Zone[4] == 255*) GOTO 0x0477
 16: 0x0470 [0x1D] PRINT_EVENT_MESSAGE(message_id=13416*)
    → "The weather in that area today will be \u0001\u0005\u0017\u0002\u0000\u0000\u0000.\u007F1\u0000\u0007"
 17: 0x0473 [0x23] WAIT_FOR_DIALOG_INTERACTION
 18: 0x0474 [0x01] GOTO 0x047B
 19: 0x0477 [0x1D] PRINT_EVENT_MESSAGE(message_id=13413*)
    → "Today, the weather in that area will be \u0001\u0005\u0017\u0002\u0000\u0000\u0000. There is also the possibility of \u0001\u0005\u0018\u0002\u0002\u0000\u0000, so caution is advised.\u007F1\u0000\u0007"
 20: 0x047A [0x23] WAIT_FOR_DIALOG_INTERACTION

SUBROUTINE_047B:
 21: 0x047B [0x01] GOTO 0x0491
 22: 0x047E [0x02] IF !(Work_Zone[4] == 255*) GOTO 0x048D
 23: 0x0486 [0x1D] PRINT_EVENT_MESSAGE(message_id=13410*)
    → "Today, that area's weather will be \u0001\u0005\u0017\u0002\u0000\u0000\u0000 with a chance of \u0001\u0005\u0018\u0002\u0001\u0000\u0000.\u007F1\u0000\u0007"
 24: 0x0489 [0x23] WAIT_FOR_DIALOG_INTERACTION
 25: 0x048A [0x01] GOTO 0x0491
 26: 0x048D [0x1D] PRINT_EVENT_MESSAGE(message_id=13407*)
    → "That area's forecast for today is for \u0001\u0005\u0018\u0002\u0000\u0000\u0000 with occasional \u0001\u0005\u0018\u0002\u0001\u0000\u0000. There is also a slight chance of \u0001\u0005\u0018\u0002\u0002\u0000\u0000, so caution is advised.\u007F1\u0000\u0007"
 27: 0x0490 [0x23] WAIT_FOR_DIALOG_INTERACTION

SUBROUTINE_0491:
 28: 0x0491 [0x0B] ExtData[1]->WorkLocal[3]++
 29: 0x0494 [0x72] LOAD_EVENT_WEATHER: Request weather file 7033, weather_id=ExtData[1]->WorkLocal[4], param1=0x0172, param2=0x00030004
 30: 0x049E [0x02] IF !(Work_Zone[3] == 255*) GOTO 0x04BC
 31: 0x04A6 [0x02] IF !(Work_Zone[4] == 255*) GOTO 0x04B5
 32: 0x04AE [0x1D] PRINT_EVENT_MESSAGE(message_id=13417*)
    → "The weather tomorrow will be \u0001\u0005\u0017\u0002\u0000\u0000\u0000.\u007F1\u0000\u0007"
 33: 0x04B1 [0x23] WAIT_FOR_DIALOG_INTERACTION
 34: 0x04B2 [0x01] GOTO 0x04B9
 35: 0x04B5 [0x1D] PRINT_EVENT_MESSAGE(message_id=13414*)
    → "Tomorrow, the weather will be \u0001\u0005\u0017\u0002\u0000\u0000\u0000. There is also the possibility of \u0001\u0005\u0018\u0002\u0002\u0000\u0000, so caution is advised.\u007F1\u0000\u0007"
 36: 0x04B8 [0x23] WAIT_FOR_DIALOG_INTERACTION

SUBROUTINE_04B9:
 37: 0x04B9 [0x01] GOTO 0x04CF
 38: 0x04BC [0x02] IF !(Work_Zone[4] == 255*) GOTO 0x04CB
 39: 0x04C4 [0x1D] PRINT_EVENT_MESSAGE(message_id=13411*)
    → "Tomorrow, the weather will be \u0001\u0005\u0017\u0002\u0000\u0000\u0000 with a chance of \u0001\u0005\u0018\u0002\u0001\u0000\u0000.\u007F1\u0000\u0007"
 40: 0x04C7 [0x23] WAIT_FOR_DIALOG_INTERACTION
 41: 0x04C8 [0x01] GOTO 0x04CF
 42: 0x04CB [0x1D] PRINT_EVENT_MESSAGE(message_id=13408*)
    → "The forecast for tomorrow is for \u0001\u0005\u0018\u0002\u0000\u0000\u0000 with occasional \u0001\u0005\u0018\u0002\u0001\u0000\u0000. There is also a slight chance of \u0001\u0005\u0018\u0002\u0002\u0000\u0000, so caution is advised.\u007F1\u0000\u0007"
 43: 0x04CE [0x23] WAIT_FOR_DIALOG_INTERACTION

SUBROUTINE_04CF:
 44: 0x04CF [0x0B] ExtData[1]->WorkLocal[3]++
 45: 0x04D2 [0x72] LOAD_EVENT_WEATHER: Request weather file 7033, weather_id=ExtData[1]->WorkLocal[4], param1=0x0172, param2=0x00030004
 46: 0x04DC [0x02] IF !(Work_Zone[3] == 255*) GOTO 0x04FA
 47: 0x04E4 [0x02] IF !(Work_Zone[4] == 255*) GOTO 0x04F3
 48: 0x04EC [0x1D] PRINT_EVENT_MESSAGE(message_id=13418*)
    → "The weather the day after tomorrow will be \u0001\u0005\u0017\u0002\u0000\u0000\u0000.\u007F1\u0000\u0007"
 49: 0x04EF [0x23] WAIT_FOR_DIALOG_INTERACTION
 50: 0x04F0 [0x01] GOTO 0x04F7
 51: 0x04F3 [0x1D] PRINT_EVENT_MESSAGE(message_id=13415*)
    → "And, the day after tomorrow, the weather will be \u0001\u0005\u0017\u0002\u0000\u0000\u0000. There is also the possibility of \u0001\u0005\u0018\u0002\u0002\u0000\u0000, so caution is advised.\u007F1\u0000\u0007"
 52: 0x04F6 [0x23] WAIT_FOR_DIALOG_INTERACTION

SUBROUTINE_04F7:
 53: 0x04F7 [0x01] GOTO 0x050D
 54: 0x04FA [0x02] IF !(Work_Zone[4] == 255*) GOTO 0x0509
 55: 0x0502 [0x1D] PRINT_EVENT_MESSAGE(message_id=13412*)
    → "And, the day after tomorrow, the weather will be \u0001\u0005\u0017\u0002\u0000\u0000\u0000 with a chance of \u0001\u0005\u0018\u0002\u0001\u0000\u0000.\u007F1\u0000\u0007"
 56: 0x0505 [0x23] WAIT_FOR_DIALOG_INTERACTION
 57: 0x0506 [0x01] GOTO 0x050D
 58: 0x0509 [0x1D] PRINT_EVENT_MESSAGE(message_id=13409*)
    → "And, the forecast for the day after tomorrow is for \u0001\u0005\u0018\u0002\u0000\u0000\u0000 with occasional \u0001\u0005\u0018\u0002\u0001\u0000\u0000. There is also a slight chance of \u0001\u0005\u0018\u0002\u0002\u0000\u0000, so caution is advised.\u007F1\u0000\u0007"
 59: 0x050C [0x23] WAIT_FOR_DIALOG_INTERACTION

SUBROUTINE_050D:
 60: 0x050D [0x1D] PRINT_EVENT_MESSAGE(message_id=13419*)
    → "And that's the report, straight from Vana'diel's official weather linkshell.\u007F1\u0000\u0007"
 61: 0x0510 [0x23] WAIT_FOR_DIALOG_INTERACTION
 62: 0x0511 [0x1B] RETURN
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x01F8 [0x01] GOTO 0x026B
# Dead code (unreachable instructions):
     0x0270 [0x24] CREATE_DIALOG(message_id=13406*, default_option=0*, option_flags=ExtData[1]->WorkLocal[0])
    → "What area's weather do you wish to know?\u0007\u000BNowhere.\u0007Ronfaure.\u0007La Theine Plateau.\u0007Valkurm Dunes.\u0007Jugner Forest.\u0007Batallia Downs.\u0007Gustaberg.\u0007Konschtat Highlands.\u0007Pashhow Marshlands.\u0007Rolanberry Fields.\u0007Beaucedine Glacier.\u0007Xarcabard.\u0007Cape Teriggan.\u0007Altepa Desert.\u0007Sarutabaruta.\u0007Tahrongi Canyon.\u0007Buburimu Peninsula.\u0007Meriphataud Mountains.\u0007Sauromugue Champaign.\u0007The Sanctuary of Zi'Tah.\u0007Yuhtunga & Yhoator Jungles.\u0007Qufim Island.\u0007Tu'Lia.\u0007Ferry.\u0007Airship.\u0007Jeuno.\u0007Uleguerand Range.\u0007Tavnazian Archipelago.\u0007Riverne - Sites #A01 & #B01.\u007F1\u0000\u0007"
     0x0277 [0x25] WAIT_DIALOG_SELECT()
     0x0278 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x0285
     0x0280 [0x21] END_EVENT
     0x0281 [0x00] END_REQSTACK()
     0x0282 [0x01] GOTO 0x0445
     0x0285 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x0295
     0x028D [0x03] ExtData[1]->WorkLocal[4] = 100*
     0x0292 [0x01] GOTO 0x0445
     0x0295 [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x02A5
     0x029D [0x03] ExtData[1]->WorkLocal[4] = 102*
     0x02A2 [0x01] GOTO 0x0445
     0x02A5 [0x02] IF !(Work_Zone[0] == 3*) GOTO 0x02B5
     0x02AD [0x03] ExtData[1]->WorkLocal[4] = 103*
     0x02B2 [0x01] GOTO 0x0445
     0x02B5 [0x02] IF !(Work_Zone[0] == 4*) GOTO 0x02C5
     0x02BD [0x03] ExtData[1]->WorkLocal[4] = 104*
     0x02C2 [0x01] GOTO 0x0445
     0x02C5 [0x02] IF !(Work_Zone[0] == 5*) GOTO 0x02D5
     0x02CD [0x03] ExtData[1]->WorkLocal[4] = 105*
     0x02D2 [0x01] GOTO 0x0445
     0x02D5 [0x02] IF !(Work_Zone[0] == 6*) GOTO 0x02E5
     0x02DD [0x03] ExtData[1]->WorkLocal[4] = 106*
     0x02E2 [0x01] GOTO 0x0445
     0x02E5 [0x02] IF !(Work_Zone[0] == 7*) GOTO 0x02F5
     0x02ED [0x03] ExtData[1]->WorkLocal[4] = 108*
     0x02F2 [0x01] GOTO 0x0445
     0x02F5 [0x02] IF !(Work_Zone[0] == 8*) GOTO 0x0305
     0x02FD [0x03] ExtData[1]->WorkLocal[4] = 109*
     0x0302 [0x01] GOTO 0x0445
     0x0305 [0x02] IF !(Work_Zone[0] == 9*) GOTO 0x0315
     0x030D [0x03] ExtData[1]->WorkLocal[4] = 110*
     0x0312 [0x01] GOTO 0x0445
     0x0315 [0x02] IF !(Work_Zone[0] == 10*) GOTO 0x0325
     0x031D [0x03] ExtData[1]->WorkLocal[4] = 111*
     0x0322 [0x01] GOTO 0x0445
     0x0325 [0x02] IF !(Work_Zone[0] == 11*) GOTO 0x0335
     0x032D [0x03] ExtData[1]->WorkLocal[4] = 112*
     0x0332 [0x01] GOTO 0x0445
     0x0335 [0x02] IF !(Work_Zone[0] == 12*) GOTO 0x0345
     0x033D [0x03] ExtData[1]->WorkLocal[4] = 113*
     0x0342 [0x01] GOTO 0x0445
     0x0345 [0x02] IF !(Work_Zone[0] == 13*) GOTO 0x0355
     0x034D [0x03] ExtData[1]->WorkLocal[4] = 114*
     0x0352 [0x01] GOTO 0x0445
     0x0355 [0x02] IF !(Work_Zone[0] == 14*) GOTO 0x0365
     0x035D [0x03] ExtData[1]->WorkLocal[4] = 115*
     0x0362 [0x01] GOTO 0x0445
     0x0365 [0x02] IF !(Work_Zone[0] == 15*) GOTO 0x0375
     0x036D [0x03] ExtData[1]->WorkLocal[4] = 117*
     0x0372 [0x01] GOTO 0x0445
     0x0375 [0x02] IF !(Work_Zone[0] == 16*) GOTO 0x0385
     0x037D [0x03] ExtData[1]->WorkLocal[4] = 118*
     0x0382 [0x01] GOTO 0x0445
     0x0385 [0x02] IF !(Work_Zone[0] == 17*) GOTO 0x0395
     0x038D [0x03] ExtData[1]->WorkLocal[4] = 119*
     0x0392 [0x01] GOTO 0x0445
     0x0395 [0x02] IF !(Work_Zone[0] == 18*) GOTO 0x03A5
     0x039D [0x03] ExtData[1]->WorkLocal[4] = 120*
     0x03A2 [0x01] GOTO 0x0445
     0x03A5 [0x02] IF !(Work_Zone[0] == 19*) GOTO 0x03B5
     0x03AD [0x03] ExtData[1]->WorkLocal[4] = 121*
     0x03B2 [0x01] GOTO 0x0445
     0x03B5 [0x02] IF !(Work_Zone[0] == 20*) GOTO 0x03C5
     0x03BD [0x03] ExtData[1]->WorkLocal[4] = 123*
     0x03C2 [0x01] GOTO 0x0445
     0x03C5 [0x02] IF !(Work_Zone[0] == 21*) GOTO 0x03D5
     0x03CD [0x03] ExtData[1]->WorkLocal[4] = 126*
     0x03D2 [0x01] GOTO 0x0445
     0x03D5 [0x02] IF !(Work_Zone[0] == 22*) GOTO 0x03E5
     0x03DD [0x03] ExtData[1]->WorkLocal[4] = 130*
     0x03E2 [0x01] GOTO 0x0445
     0x03E5 [0x02] IF !(Work_Zone[0] == 23*) GOTO 0x03F5
     0x03ED [0x03] ExtData[1]->WorkLocal[4] = 220*
     0x03F2 [0x01] GOTO 0x0445
     0x03F5 [0x02] IF !(Work_Zone[0] == 24*) GOTO 0x0405
     0x03FD [0x03] ExtData[1]->WorkLocal[4] = 223*
     0x0402 [0x01] GOTO 0x0445
     0x0405 [0x02] IF !(Work_Zone[0] == 25*) GOTO 0x0415
     0x040D [0x03] ExtData[1]->WorkLocal[4] = 243*
     0x0412 [0x01] GOTO 0x0445
     0x0415 [0x02] IF !(Work_Zone[0] == 26*) GOTO 0x0425
     0x041D [0x03] ExtData[1]->WorkLocal[4] = 5*
     0x0422 [0x01] GOTO 0x0445
     0x0425 [0x02] IF !(Work_Zone[0] == 27*) GOTO 0x0435
     0x042D [0x03] ExtData[1]->WorkLocal[4] = 24*
     0x0432 [0x01] GOTO 0x0445
     0x0435 [0x02] IF !(Work_Zone[0] == 28*) GOTO 0x0445
     0x043D [0x03] ExtData[1]->WorkLocal[4] = 29*
     0x0442 [0x01] GOTO 0x0445
     0x0445 [0x1A] CALL_SUBROUTINE(address=0x044C)
     0x0448 [0x21] END_EVENT
     0x0449 [0x00] END_REQSTACK()
     0x044A [0x21] END_EVENT
     0x044B [0x00] END_REQSTACK()
```