# Event 5227

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 14/14     |
| Offset          | 0x0207    |
| Data Size       | 549 bytes |
| Calculated Size | 549 bytes |
| Instructions    | 87        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0200:                      42  1E F0 FF FF 7F 6F 70 4A         B.....opJ
0210: F0 FF FF 7F F8 FF FF 7F  6F 76 F0 FF FF 7F CC 20  ........ov..... 
0220: 16 80 1D 17 80 23 CC 20  00 80 27 08 F0 FF FF 7F  .....#. ..'.....
0230: 10 1C 18 80 45 19 80 F0  FF FF 7F F0 FF FF 7F 66  ....E..........f
0240: 64 6F 31 00 80 55 19 80  F0 FF FF 7F F0 FF FF 7F  do1..U..........
0250: 66 64 6F 31 1C 1A 80 45  19 80 F0 FF FF 7F F0 FF  fdo1...E........
0260: FF 7F 66 64 69 31 00 80  1C 01 80 27 08 F0 FF FF  ..fdi1.....'....
0270: 7F 11 03 02 10 16 80 1D  1B 80 1C 10 80 5F 06 00  ............._..
0280: 80 F8 FF FF 7F F8 FF FF  7F 74 68 6B 31 1C 80 23  .........thk1..#
0290: 1D 1D 80 23 1D 1E 80 5F  07 F8 FF FF 7F F8 FF FF  ...#..._........
02A0: 7F 74 68 6B 31 23 5F 06  00 80 F8 FF FF 7F F8 FF  .thk1#_.........
02B0: FF 7F 74 68 6B 32 1C 80  1D 1F 80 5F 07 F8 FF FF  ..thk2....._....
02C0: 7F F8 FF FF 7F 74 68 6B  32 23 5F 06 00 80 F8 FF  .....thk2#_.....
02D0: FF 7F F8 FF FF 7F 74 6C  6B 31 1C 80 1D 20 80 23  ......tlk1... .#
02E0: 1D 21 80 5F 07 F8 FF FF  7F F8 FF FF 7F 74 6C 6B  .!._.........tlk
02F0: 31 23 5F 06 00 80 F8 FF  FF 7F F8 FF FF 7F 74 65  1#_...........te
0300: 6E 31 1C 80 1D 22 80 5F  07 F8 FF FF 7F F8 FF FF  n1..."._........
0310: 7F 74 65 6E 31 23 06 00  17 24 23 80 00 80 00 80  .ten1#...$#.....
0320: 25 02 00 10 00 80 00 65  03 02 00 17 24 80 00 5B  %......e....$..[
0330: 03 5F 06 25 80 F8 FF FF  7F F8 FF FF 7F 74 6C 64  ._.%.........tld
0340: 31 1C 80 1D 26 80 5F 07  F8 FF FF 7F F8 FF FF 7F  1...&._.........
0350: 74 6C 64 31 23 06 00 17  01 62 03 1D 26 80 1C 1C  tld1#....b..&...
0360: 80 23 01 A9 03 02 00 10  24 80 00 A9 03 02 00 17  .#......$.......
0370: 24 80 00 7C 03 1D 27 80  23 01 A3 03 05 00 17 5F  $..|..'.#......_
0380: 06 25 80 F8 FF FF 7F F8  FF FF 7F 74 6C 64 30 1C  .%.........tld0.
0390: 80 1D 27 80 5F 07 F8 FF  FF 7F F8 FF FF 7F 74 6C  ..'._.........tl
03A0: 64 30 23 01 19 03 01 A9  03 5F 06 28 80 F8 FF FF  d0#......_.(....
03B0: 7F F8 FF FF 7F 74 6C 62  30 1C 80 1D 29 80 23 1D  .....tlb0...).#.
03C0: 2A 80 5F 07 F8 FF FF 7F  F8 FF FF 7F 74 6C 62 30  *._.........tlb0
03D0: 23 5F 06 28 80 F8 FF FF  7F F8 FF FF 7F 74 6C 62  #_.(.........tlb
03E0: 31 1C 80 1D 2B 80 5F 07  F8 FF FF 7F F8 FF FF 7F  1...+._.........
03F0: 74 6C 62 31 23 5F 06 00  80 F8 FF FF 7F F8 FF FF  tlb1#_..........
0400: 7F 70 61 73 30 2C 80 1D  2D 80 5F 07 F8 FF FF 7F  .pas0,..-._.....
0410: F8 FF FF 7F 70 61 73 30  23 45 2E 80 F0 FF FF 7F  ....pas0#E......
0420: F0 FF FF 7F 71 73 74 63  00 80 21 00              ....qstc..!.    
```

## Opcodes

```
  0: 0x0207 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x0208 [0x1E] EventEntity looks at LocalPlayer and starts talking
  2: 0x020D [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  3: 0x020E [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
  4: 0x020F [0x4A] LocalPlayer looks at EventEntity
  5: 0x0218 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  6: 0x0219 [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until LocalPlayer Render.Flags0 and Render.Flags3 conditions are met
  7: 0x021E [0xCC] ITEM_INFO_WINDOW_HANDLER(case=0x20 - Event item window create/destroy, window_action=2842*)
  8: 0x0222 [0x1D] PRINT_EVENT_MESSAGE(message_id=11655*)
    → "Wh-where on Vana'diel did you stumble across that hat?\u007F1\u0000\u0007"
  9: 0x0225 [0x23] WAIT_FOR_DIALOG_INTERACTION
 10: 0x0226 [0xCC] ITEM_INFO_WINDOW_HANDLER(case=0x20 - Event item window create/destroy, window_action=0*)
 11: 0x022A [0x27] REQ_SET(priority=0x08, entity_id=LocalPlayer, tag_num=0x10)
 12: 0x0231 [0x1C] WAIT(40* ticks)
 13: 0x0234 [0x45] LOAD_SCHEDULED_TASK(work_offset1=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdo1", work_offset2=0*)
 14: 0x0245 [0x55] WAIT_LOAD_SCHEDULER(work_offset=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdo1")
 15: 0x0254 [0x1C] WAIT(80* ticks)
 16: 0x0257 [0x45] LOAD_SCHEDULED_TASK(work_offset1=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdi1", work_offset2=0*)
 17: 0x0268 [0x1C] WAIT(30* ticks)
 18: 0x026B [0x27] REQ_SET(priority=0x08, entity_id=LocalPlayer, tag_num=0x11)
 19: 0x0272 [0x03] Work_Zone[2] = 2842*
 20: 0x0277 [0x1D] PRINT_EVENT_MESSAGE(message_id=11656*)
    → "What a terrible situation. I'd recognize that brim anywhere--that hat almost certainly belonged to Cedricaste.\u007F1\u0000\u0007"
 21: 0x027A [0x1C] WAIT(60* ticks)
 22: 0x027D [0x5F] MULTI_HANDLER_COMPLEX(mode=0x06 - Load ext scheduler with flag (OpCode 0x5B mode 1, flag 1), ref=References[0], entity1=EventEntity, entity2=EventEntity, string="thk1", extra=References[28])
 23: 0x028F [0x23] WAIT_FOR_DIALOG_INTERACTION
 24: 0x0290 [0x1D] PRINT_EVENT_MESSAGE(message_id=11657*)
    → "He was a damn fine man, and a mentor to Margret in her younger years.\u007F1\u0000\u0007"
 25: 0x0293 [0x23] WAIT_FOR_DIALOG_INTERACTION
 26: 0x0294 [0x1D] PRINT_EVENT_MESSAGE(message_id=11658*)
    → "How does the saying go? \u00072A person like him only appears once a century\u00073? The coalition is lucky that we had two--Cedricaste and Margret.\u007F1\u0000\u0007"
 27: 0x0297 [0x5F] MULTI_HANDLER_COMPLEX(mode=0x07 - Wait scheduler task (OpCode 0x53))
 28: 0x02A5 [0x23] WAIT_FOR_DIALOG_INTERACTION
 29: 0x02A6 [0x5F] MULTI_HANDLER_COMPLEX(mode=0x06 - Load ext scheduler with flag (OpCode 0x5B mode 1, flag 1), ref=References[0], entity1=EventEntity, entity2=EventEntity, string="thk2", extra=References[28])
 30: 0x02B8 [0x1D] PRINT_EVENT_MESSAGE(message_id=11659*)
    → "Margret held him in the highest regard--we all did--and to think he met such an ignoble end in the hinterlands...\u007F1\u0000\u0007"
 31: 0x02BB [0x5F] MULTI_HANDLER_COMPLEX(mode=0x07 - Wait scheduler task (OpCode 0x53))
 32: 0x02C9 [0x23] WAIT_FOR_DIALOG_INTERACTION
 33: 0x02CA [0x5F] MULTI_HANDLER_COMPLEX(mode=0x06 - Load ext scheduler with flag (OpCode 0x5B mode 1, flag 1), ref=References[0], entity1=EventEntity, entity2=EventEntity, string="tlk1", extra=References[28])
 34: 0x02DC [0x1D] PRINT_EVENT_MESSAGE(message_id=11660*)
    → "Perhaps you think this morbid, but...would you mind if I had that hat? I promise to treat it with the utmost care.\u007F1\u0000\u0007"
 35: 0x02DF [0x23] WAIT_FOR_DIALOG_INTERACTION
 36: 0x02E0 [0x1D] PRINT_EVENT_MESSAGE(message_id=11661*)
    → "As talented as Margret is, she is young of age and should be looking toward the future, not beholden to the past.\u007F1\u0000\u0007"
 37: 0x02E3 [0x5F] MULTI_HANDLER_COMPLEX(mode=0x07 - Wait scheduler task (OpCode 0x53))
 38: 0x02F1 [0x23] WAIT_FOR_DIALOG_INTERACTION
 39: 0x02F2 [0x5F] MULTI_HANDLER_COMPLEX(mode=0x06 - Load ext scheduler with flag (OpCode 0x5B mode 1, flag 1), ref=References[0], entity1=EventEntity, entity2=EventEntity, string="ten1", extra=References[28])
 40: 0x0304 [0x1D] PRINT_EVENT_MESSAGE(message_id=11662*)
    → "When the time is right, I'll tell her the truth.\u007F1\u0000\u0007"
 41: 0x0307 [0x5F] MULTI_HANDLER_COMPLEX(mode=0x07 - Wait scheduler task (OpCode 0x53))
 42: 0x0315 [0x23] WAIT_FOR_DIALOG_INTERACTION
 43: 0x0316 [0x06] Work_Zone_1700[0] = 0
 44: 0x0319 [0x24] CREATE_DIALOG(message_id=11663*, default_option=0*, option_flags=0*)
    → "What do you do?\u0007\u000BHand over the hat.\u0007Keep it for yourself.\u007F1\u0000\u0007"
 45: 0x0320 [0x25] WAIT_DIALOG_SELECT()
 46: 0x0321 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x0365
 47: 0x0329 [0x02] IF !(Work_Zone_1700[0] == 1*) GOTO 0x035B
 48: 0x0331 [0x5F] MULTI_HANDLER_COMPLEX(mode=0x06 - Load ext scheduler with flag (OpCode 0x5B mode 1, flag 1), ref=References[37], entity1=EventEntity, entity2=EventEntity, string="tld1", extra=References[28])
 49: 0x0343 [0x1D] PRINT_EVENT_MESSAGE(message_id=11665*)
    → "You have my sincerest thanks.\u007F1\u0000\u0007"
 50: 0x0346 [0x5F] MULTI_HANDLER_COMPLEX(mode=0x07 - Wait scheduler task (OpCode 0x53))
 51: 0x0354 [0x23] WAIT_FOR_DIALOG_INTERACTION
 52: 0x0355 [0x06] Work_Zone_1700[0] = 0
 53: 0x0358 [0x01] GOTO 0x0362

SUBROUTINE_035B:
 54: 0x035B [0x1D] PRINT_EVENT_MESSAGE(message_id=11665*)
    → "You have my sincerest thanks.\u007F1\u0000\u0007"
 55: 0x035E [0x1C] WAIT(100* ticks)
 56: 0x0361 [0x23] WAIT_FOR_DIALOG_INTERACTION
 57: 0x0362 [0x01] GOTO 0x03A9

SUBROUTINE_0365:
 58: 0x0365 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x03A9
 59: 0x036D [0x02] IF !(Work_Zone_1700[0] == 1*) GOTO 0x037C
 60: 0x0375 [0x1D] PRINT_EVENT_MESSAGE(message_id=11664*)
    → "I beg you to reconsider. This article means a lot to the coalition.\u007F1\u0000\u0007"
 61: 0x0378 [0x23] WAIT_FOR_DIALOG_INTERACTION
 62: 0x0379 [0x01] GOTO 0x03A3

SUBROUTINE_037C:
 63: 0x037C [0x05] Work_Zone_1700[0] = 1
 64: 0x037F [0x5F] MULTI_HANDLER_COMPLEX(mode=0x06 - Load ext scheduler with flag (OpCode 0x5B mode 1, flag 1), ref=References[37], entity1=EventEntity, entity2=EventEntity, string="tld0", extra=References[28])
 65: 0x0391 [0x1D] PRINT_EVENT_MESSAGE(message_id=11664*)
    → "I beg you to reconsider. This article means a lot to the coalition.\u007F1\u0000\u0007"
 66: 0x0394 [0x5F] MULTI_HANDLER_COMPLEX(mode=0x07 - Wait scheduler task (OpCode 0x53))
 67: 0x03A2 [0x23] WAIT_FOR_DIALOG_INTERACTION
 68: 0x03A3 [0x01] GOTO 0x0319

SUBROUTINE_03A9:
 69: 0x03A9 [0x5F] MULTI_HANDLER_COMPLEX(mode=0x06 - Load ext scheduler with flag (OpCode 0x5B mode 1, flag 1), ref=References[40], entity1=EventEntity, entity2=EventEntity, string="tlb0", extra=References[28])
 70: 0x03BB [0x1D] PRINT_EVENT_MESSAGE(message_id=11666*)
    → "Cedricaste taught me that although the eyes may be deceived, the mind can always find the truth.\u007F1\u0000\u0007"
 71: 0x03BE [0x23] WAIT_FOR_DIALOG_INTERACTION
 72: 0x03BF [0x1D] PRINT_EVENT_MESSAGE(message_id=11667*)
    → "That's why all forms of information are valuable.\u007F1\u0000\u0007"
 73: 0x03C2 [0x5F] MULTI_HANDLER_COMPLEX(mode=0x07 - Wait scheduler task (OpCode 0x53))
 74: 0x03D0 [0x23] WAIT_FOR_DIALOG_INTERACTION
 75: 0x03D1 [0x5F] MULTI_HANDLER_COMPLEX(mode=0x06 - Load ext scheduler with flag (OpCode 0x5B mode 1, flag 1), ref=References[40], entity1=EventEntity, entity2=EventEntity, string="tlb1", extra=References[28])
 76: 0x03E3 [0x1D] PRINT_EVENT_MESSAGE(message_id=11668*)
    → "Margret doesn't need to know of our little arrangement.\u007F1\u0000\u0007"
 77: 0x03E6 [0x5F] MULTI_HANDLER_COMPLEX(mode=0x07 - Wait scheduler task (OpCode 0x53))
 78: 0x03F4 [0x23] WAIT_FOR_DIALOG_INTERACTION
 79: 0x03F5 [0x5F] MULTI_HANDLER_COMPLEX(mode=0x06 - Load ext scheduler with flag (OpCode 0x5B mode 1, flag 1), ref=References[0], entity1=EventEntity, entity2=EventEntity, string="pas0", extra=References[44])
 80: 0x0407 [0x1D] PRINT_EVENT_MESSAGE(message_id=11669*)
    → "Consider this not as hush money, but as payment for finding an invaluable artifact of the coalition.\u007F1\u0000\u0007"
 81: 0x040A [0x5F] MULTI_HANDLER_COMPLEX(mode=0x07 - Wait scheduler task (OpCode 0x53))
 82: 0x0418 [0x23] WAIT_FOR_DIALOG_INTERACTION
 83: 0x0419 [0x45] LOAD_SCHEDULED_TASK(work_offset1=201*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="qstc", work_offset2=0*)
 84: 0x042A [0x21] END_EVENT
 85: 0x042B [0x00] END_REQSTACK()
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x03A6 [0x01] GOTO 0x03A9
```