# Event 5118

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 97/101    |
| Offset          | 0x0AE7    |
| Data Size       | 612 bytes |
| Calculated Size | 612 bytes |
| Instructions    | 40        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0AE0:                      03  00 00 03 10 0F 00 00 82         .........
0AF0: 80 1E F0 FF FF 7F 6F 70  4A F0 FF FF 7F F8 FF FF  ......opJ.......
0B00: 7F 6F 76 F0 FF FF 7F 66  02 80 F8 FF FF 7F F8 FF  .ov....f........
0B10: FF 7F 75 74 6C 30 1C 04  80 1D 83 80 23 53 F8 FF  ..utl0......#S..
0B20: FF 7F F8 FF FF 7F 75 74  6C 30 66 02 80 F8 FF FF  ......utl0f.....
0B30: 7F F8 FF FF 7F 75 74 6C  31 2E 06 01 10 03 00 17  .....utl1.......
0B40: 84 80 03 01 17 85 80 03  02 17 86 80 03 03 17 87  ................
0B50: 80 03 04 17 69 80 03 05  17 88 80 03 06 17 89 80  ....i...........
0B60: 03 07 17 8A 80 03 08 17  8B 80 03 09 17 8C 80 03  ................
0B70: 0A 17 8D 80 03 0B 17 8E  80 03 0C 17 8F 80 24 90  ..............$.
0B80: 80 12 80 00 00 25 02 00  10 12 80 00 94 0B 1C 10  .....%..........
0B90: 80 01 49 0D 02 00 10 56  80 00 A6 0B 1D 91 80 23  ..I....V.......#
0BA0: 01 39 0B 01 49 0D 02 00  10 6E 80 00 D0 0B 42 1D  .9..I....n....B.
0BB0: 92 80 23 1D 93 80 23 03  01 10 6E 80 43 00 43 01  ..#...#...n.C.C.
0BC0: 03 00 00 03 10 0F 00 00  82 80 01 39 0B 01 49 0D  ...........9..I.
0BD0: 02 00 10 6F 80 00 E6 0B  1D 94 80 23 1D 95 80 23  ...o.......#...#
0BE0: 01 39 0B 01 49 0D 02 00  10 70 80 00 F8 0B 1D 96  .9..I....p......
0BF0: 80 23 01 39 0B 01 49 0D  02 00 10 71 80 00 4A 0C  .#.9..I....q..J.
0C00: 42 1D 97 80 23 66 02 80  F8 FF FF 7F F8 FF FF 7F  B...#f..........
0C10: 75 74 6C 30 1C 04 80 5D  12 80 12 80 1D 98 80 23  utl0...].......#
0C20: 5D 99 80 0A 80 53 F8 FF  FF 7F F8 FF FF 7F 75 74  ]....S........ut
0C30: 6C 30 66 02 80 F8 FF FF  7F F8 FF FF 7F 75 74 6C  l0f..........utl
0C40: 31 1C 04 80 01 39 0B 01  49 0D 02 00 10 72 80 00  1....9..I....r..
0C50: 60 0C 1D 9A 80 23 1D 9B  80 23 01 39 0B 01 49 0D  `....#...#.9..I.
0C60: 02 00 10 73 80 00 76 0C  1D 9C 80 23 1D 9D 80 23  ...s..v....#...#
0C70: 01 39 0B 01 49 0D 02 00  10 74 80 00 8C 0C 1D 9E  .9..I....t......
0C80: 80 23 1D 9F 80 23 01 39  0B 01 49 0D 02 00 10 A0  .#...#.9..I.....
0C90: 80 00 A2 0C 1D A1 80 23  1D A2 80 23 01 39 0B 01  .......#...#.9..
0CA0: 49 0D 02 00 10 00 80 00  BD 0C 1D A3 80 23 03 02  I............#..
0CB0: 10 A4 80 1D A5 80 23 01  39 0B 01 49 0D 02 00 10  ......#.9..I....
0CC0: 02 80 00 D3 0C 1D A6 80  23 1D A7 80 23 01 39 0B  ........#...#.9.
0CD0: 01 49 0D 02 00 10 03 80  00 33 0D 42 66 02 80 F8  .I.......3.Bf...
0CE0: FF FF 7F F8 FF FF 7F 6E  74 6C 30 1D A8 80 23 1D  .......ntl0...#.
0CF0: A9 80 23 1D AA 80 23 53  F8 FF FF 7F F8 FF FF 7F  ..#...#S........
0D00: 6E 74 6C 30 66 02 80 F8  FF FF 7F F8 FF FF 7F 6E  ntl0f..........n
0D10: 74 6C 31 1D AB 80 23 1C  10 80 03 01 10 56 80 43  tl1...#......V.C
0D20: 00 43 01 03 00 00 03 10  0F 00 00 82 80 01 39 0B  .C............9.
0D30: 01 49 0D 02 00 10 01 80  00 49 0D 1D AC 80 23 1D  .I.......I....#.
0D40: AD 80 23 01 39 0B 01 49  0D 21 00                 ..#.9..I.!.     
```

## Opcodes

```
  0: 0x0AE7 [0x03] ExtData[1]->WorkLocal[0] = Work_Zone[3]
  1: 0x0AEC [0x0F] ExtData[1]->WorkLocal[0] ^= 16382*
  2: 0x0AF1 [0x1E] EventEntity looks at LocalPlayer and starts talking
  3: 0x0AF6 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  4: 0x0AF7 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
  5: 0x0AF8 [0x4A] LocalPlayer looks at EventEntity
  6: 0x0B01 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  7: 0x0B02 [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until LocalPlayer Render.Flags0 and Render.Flags3 conditions are met
  8: 0x0B07 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "utl0" with entities [EventEntity, EventEntity], work=11*
  9: 0x0B16 [0x1C] WAIT(60* ticks)
 10: 0x0B19 [0x1D] PRINT_EVENT_MESSAGE(message_id=11083*)
    → "It looks like you've collected a lot of m-m-materials, but I bet you don't know squat about them. What do you need me to enlighten you on?\u007F1\u0000\u0007"
 11: 0x0B1C [0x23] WAIT_FOR_DIALOG_INTERACTION
 12: 0x0B1D [0x53] WAIT_SCHEDULER_TASK: Wait for scheduler "utl0" with entities [EventEntity, EventEntity]
 13: 0x0B2A [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "utl1" with entities [EventEntity, EventEntity], work=11*
 14: 0x0B39 [0x2E] SET_CLI_EVENT_CANCEL_FLAGS()
 15: 0x0B3A [0x06] Work_Zone[1] = 0
 16: 0x0B3D [0x03] Work_Zone_1700[0] = 2580*
 17: 0x0B42 [0x03] Work_Zone_1700[1] = 2581*
 18: 0x0B47 [0x03] Work_Zone_1700[2] = 2582*
 19: 0x0B4C [0x03] Work_Zone_1700[3] = 2583*
 20: 0x0B51 [0x03] Work_Zone_1700[4] = 2269*
 21: 0x0B56 [0x03] Work_Zone_1700[5] = 2584*
 22: 0x0B5B [0x03] Work_Zone_1700[6] = 2585*
 23: 0x0B60 [0x03] Work_Zone_1700[7] = 2586*
 24: 0x0B65 [0x03] Work_Zone_1700[8] = 2587*
 25: 0x0B6A [0x03] Work_Zone_1700[9] = 2588*
 26: 0x0B6F [0x03] Work_Zone_1700[10] = 2589*
 27: 0x0B74 [0x03] Work_Zone_1700[11] = 2590*
 28: 0x0B79 [0x03] Work_Zone_1700[12] = 2591*
 29: 0x0B7E [0x24] CREATE_DIALOG(message_id=11084*, default_option=0*, option_flags=0x00)
    → "Show her what?\u0007\u000BNothing.\u0007\u007F\u0000\u0001\u0001\u00053\u0002\u0008\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u00053\u0002	\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u00053\u0002
\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u00053\u0002\u000B\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u00053\u0002\u000C\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u00053\u0002\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u00053\u0002\u000E\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u00053\u0002\u000F\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u00053\u0002\u0010\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u00053\u0002\u0011\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u00053\u0002\u0012\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u00053\u0002\u0013\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u00053\u0002\u0014\u0000\u0000.\u007F1\u0000\u0007"
 30: 0x0B85 [0x25] WAIT_DIALOG_SELECT()
 31: 0x0B86 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x0B94
 32: 0x0B8E [0x1C] WAIT(30* ticks)
 33: 0x0B91 [0x01] GOTO 0x0D49
 34: 0x0B94 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x0BA6
 35: 0x0B9C [0x1D] PRINT_EVENT_MESSAGE(message_id=11085*)
    → "This looks to be a record concerning the rash of landshivers that assaulted the continent around three hundred years ago. Interesting... That's the same time that colonization was really starting to gain steam.\u007F1\u0000\u0007"
 36: 0x0B9F [0x23] WAIT_FOR_DIALOG_INTERACTION
 37: 0x0BA0 [0x01] GOTO 0x0B39

SUBROUTINE_0D49:
 38: 0x0D49 [0x21] END_EVENT
 39: 0x0D4A [0x00] END_REQSTACK()
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x0BA3 [0x01] GOTO 0x0D49
     0x0BCD [0x01] GOTO 0x0D49
     0x0BE3 [0x01] GOTO 0x0D49
     0x0BF5 [0x01] GOTO 0x0D49
     0x0C47 [0x01] GOTO 0x0D49
     0x0C5D [0x01] GOTO 0x0D49
     0x0C73 [0x01] GOTO 0x0D49
     0x0C89 [0x01] GOTO 0x0D49
     0x0C9F [0x01] GOTO 0x0D49
     0x0CBA [0x01] GOTO 0x0D49
     0x0CD0 [0x01] GOTO 0x0D49
     0x0D30 [0x01] GOTO 0x0D49
     0x0D46 [0x01] GOTO 0x0D49
```