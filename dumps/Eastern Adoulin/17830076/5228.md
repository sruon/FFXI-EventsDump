# Event 5228

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 20/22     |
| Offset          | 0x4E76    |
| Data Size       | 817 bytes |
| Calculated Size | 817 bytes |
| Instructions    | 101       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
4E70:                   42 03  00 00 02 10 03 01 00 03        B.........
4E80: 10 03 02 00 04 10 03 01  10 01 80 45 00 80 F0 FF  ...........E....
4E90: FF 7F F0 FF FF 7F 66 64  6F 31 01 80 55 00 80 F0  ......fdo1..U...
4EA0: FF FF 7F F0 FF FF 7F 66  64 6F 31 46 01 38 9E 81  .......fdo1F.8..
4EB0: 92 01 F3 10 10 01 94 01  F3 10 10 01 94 01 F0 FF  ................
4EC0: FF 7F BA F0 FF FF 7F 8C  80 8D 80 8A 80 8E 80 80  ................
4ED0: F0 FF FF 7F 80 F3 10 10  01 4A F0 FF FF 7F F3 10  .........J......
4EE0: 10 01 4A F3 10 10 01 F0  FF FF 7F 1C 17 80 45 9F  ..J...........E.
4EF0: 81 F8 FF FF 7F F8 FF FF  7F 73 31 33 34 01 80 1C  .........s134...
4F00: 13 80 45 00 80 F0 FF FF  7F F0 FF FF 7F 66 64 69  ..E..........fdi
4F10: 31 01 80 66 01 80 F3 10  10 01 F3 10 10 01 74 6C  1..f..........tl
4F20: 6B 30 02 00 00 01 80 00  E3 4F 2B F3 10 10 01 A0  k0.......O+.....
4F30: 81 23 03 02 10 A1 81 2B  F3 10 10 01 A2 81 23 52  .#.....+......#R
4F40: 9F 81 F8 FF FF 7F F8 FF  FF 7F 73 31 33 34 45 9F  ..........s134E.
4F50: 81 F8 FF FF 7F F8 FF FF  7F 73 31 33 35 01 80 2B  .........s135..+
4F60: F3 10 10 01 A3 81 23 2B  F3 10 10 01 A4 81 23 66  ......#+......#f
4F70: 01 80 F3 10 10 01 F3 10  10 01 74 65 6E 31 27 05  ..........ten1'.
4F80: F0 FF FF 7F 10 1C 7C 80  27 05 F0 FF FF 7F 11 1C  ......|.'.......
4F90: 7D 80 52 9F 81 F8 FF FF  7F F8 FF FF 7F 73 31 33  }.R..........s13
4FA0: 35 45 9F 81 F8 FF FF 7F  F8 FF FF 7F 73 31 33 36  5E..........s136
4FB0: 01 80 2B F3 10 10 01 A5  81 23 66 01 80 F3 10 10  ..+......#f.....
4FC0: 01 F3 10 10 01 64 69 73  30 2B F3 10 10 01 A6 81  .....dis0+......
4FD0: 23 52 9F 81 F8 FF FF 7F  F8 FF FF 7F 73 31 33 36  #R..........s136
4FE0: 01 16 50 03 02 10 A1 81  2B F3 10 10 01 A7 81 23  ..P.....+......#
4FF0: 2B F3 10 10 01 A8 81 23  66 01 80 F3 10 10 01 F3  +......#f.......
5000: 10 10 01 74 65 6E 31 52  9F 81 F8 FF FF 7F F8 FF  ...ten1R........
5010: FF 7F 73 31 33 34 45 9F  81 F8 FF FF 7F F8 FF FF  ..s134E.........
5020: 7F 73 31 33 37 01 80 03  03 10 01 00 24 A9 81 03  .s137.......$...
5030: 80 01 80 25 02 00 10 01  80 00 03 51 03 01 10 03  ...%.......Q....
5040: 80 43 00 43 01 02 02 00  01 80 00 50 50 01 55 50  .C.C.......PP.UP
5050: 03 02 10 02 00 02 02 10  03 80 00 C4 50 52 9F 81  ............PR..
5060: F8 FF FF 7F F8 FF FF 7F  73 31 33 37 45 9F 81 F8  ........s137E...
5070: FF FF 7F F8 FF FF 7F 73  31 34 30 01 80 2B F3 10  .......s140..+..
5080: 10 01 AA 81 23 52 9F 81  F8 FF FF 7F F8 FF FF 7F  ....#R..........
5090: 73 31 34 30 45 9F 81 F8  FF FF 7F F8 FF FF 7F 73  s140E..........s
50A0: 31 34 31 01 80 66 01 80  F3 10 10 01 F3 10 10 01  141..f..........
50B0: 70 61 73 30 03 02 10 A1  81 2B F3 10 10 01 AB 81  pas0.....+......
50C0: 23 01 00 51 52 9F 81 F8  FF FF 7F F8 FF FF 7F 73  #..QR..........s
50D0: 31 33 37 45 9F 81 F8 FF  FF 7F F8 FF FF 7F 73 31  137E..........s1
50E0: 33 39 01 80 66 01 80 F3  10 10 01 F3 10 10 01 64  39..f..........d
50F0: 69 73 30 2B F3 10 10 01  AC 81 23 03 01 10 01 80  is0+......#.....
5100: 01 45 51 02 00 10 03 80  00 45 51 52 9F 81 F8 FF  .EQ......EQR....
5110: FF 7F F8 FF FF 7F 73 31  33 37 45 9F 81 F8 FF FF  ......s137E.....
5120: 7F F8 FF FF 7F 73 31 33  38 01 80 66 01 80 F3 10  .....s138..f....
5130: 10 01 F3 10 10 01 74 6C  6B 30 2B F3 10 10 01 AD  ......tlk0+.....
5140: 81 23 01 45 51 45 00 80  F0 FF FF 7F F0 FF FF 7F  .#.EQE..........
5150: 66 64 6F 31 01 80 55 00  80 F0 FF FF 7F F0 FF FF  fdo1..U.........
5160: 7F 66 64 6F 31 52 9F 81  F8 FF FF 7F F8 FF FF 7F  .fdo1R..........
5170: 73 31 33 38 52 9F 81 F8  FF FF 7F F8 FF FF 7F 73  s138R..........s
5180: 31 33 39 52 9F 81 F8 FF  FF 7F F8 FF FF 7F 73 31  139R..........s1
5190: 34 31 46 00 45 00 80 F0  FF FF 7F F0 FF FF 7F 66  41F.E..........f
51A0: 64 69 32 01 80 21 00                              di2..!.         
```

## Opcodes

```
  0: 0x4E76 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x4E77 [0x03] ExtData[1]->WorkLocal[0] = Work_Zone[2]
  2: 0x4E7C [0x03] ExtData[1]->WorkLocal[1] = Work_Zone[3]
  3: 0x4E81 [0x03] ExtData[1]->WorkLocal[2] = Work_Zone[4]
  4: 0x4E86 [0x03] Work_Zone[1] = 0*
  5: 0x4E8B [0x45] LOAD_SCHEDULED_TASK(work_offset1=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdo1", work_offset2=0*)
  6: 0x4E9C [0x55] WAIT_LOAD_SCHEDULER(work_offset=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdo1")
  7: 0x4EAB [0x46] CAMERA_CONTROL: Disable user control
  8: 0x4EAD [0x38] SET_CLIENT_EVENT_MODE(mode=27*)
  9: 0x4EB0 [0x92] Zaffeld (ID: 17830131/0x011010F3)->Render.Flags3 ^= 0x01
 10: 0x4EB6 [0x94] Zaffeld (ID: 17830131/0x011010F3)->Render.Flags3 ^= 0x01
 11: 0x4EBC [0x94] LocalPlayer->Render.Flags3 ^= 0x01
 12: 0x4EC2 [0xBA] SET_ENTITY_POSITION(entity_id=LocalPlayer, pos_x=68.486*, pos_z=-11.765*, pos_y=-40.000*, direction=10.2°*)
 13: 0x4ECF [0x80] LOAD_WAIT(entity=LocalPlayer)
 14: 0x4ED4 [0x80] LOAD_WAIT(entity=Zaffeld (ID: 17830131/0x011010F3))
 15: 0x4ED9 [0x4A] LocalPlayer looks at Zaffeld (ID: 17830131/0x011010F3)
 16: 0x4EE2 [0x4A] Zaffeld (ID: 17830131/0x011010F3) looks at LocalPlayer
 17: 0x4EEB [0x1C] WAIT(30* ticks)
 18: 0x4EEE [0x45] LOAD_SCHEDULED_TASK(work_offset1=759*, entity1=EventEntity, entity2=EventEntity, scheduler_id="s134", work_offset2=0*)
 19: 0x4EFF [0x1C] WAIT(15* ticks)
 20: 0x4F02 [0x45] LOAD_SCHEDULED_TASK(work_offset1=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdi1", work_offset2=0*)
 21: 0x4F13 [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=0*, entity1=Zaffeld (ID: 17830131/0x011010F3), entity2=Zaffeld (ID: 17830131/0x011010F3), action="tlk0")
 22: 0x4F22 [0x02] IF !(ExtData[1]->WorkLocal[0] == 0*) GOTO 0x4FE3
 23: 0x4F2A [0x2B] Zaffeld (ID: 17830131/0x011010F3) [10313*]:
    → "Hail, \u0008! You've come at just the right time.\u007F1\u0000\u0007"
 24: 0x4F31 [0x23] WAIT_FOR_DIALOG_INTERACTION
 25: 0x4F32 [0x03] Work_Zone[2] = 27526*
 26: 0x4F37 [0x2B] Zaffeld (ID: 17830131/0x011010F3) [10314*]:
    → "Nashu said that if I ever saw you, I should give you this \u0001\u0005#\u0002\u0000\u0000\u0000. He said he found it somewhere.\u007F1\u0000\u0007"
 27: 0x4F3E [0x23] WAIT_FOR_DIALOG_INTERACTION
 28: 0x4F3F [0x52] END_LOAD_SCHEDULER: End scheduler "s134" with entities [EventEntity, EventEntity], work=759*
 29: 0x4F4E [0x45] LOAD_SCHEDULED_TASK(work_offset1=759*, entity1=EventEntity, entity2=EventEntity, scheduler_id="s135", work_offset2=0*)
 30: 0x4F5F [0x2B] Zaffeld (ID: 17830131/0x011010F3) [10315*]:
    → "That guy... He snuck out to bring it here right in the middle of his meditation retreat. Breaking retreat is a zero-tolerance offense here at the priory. He's now confined to his quarters for who knows how long.\u007F1\u0000\u0007"
 31: 0x4F66 [0x23] WAIT_FOR_DIALOG_INTERACTION
 32: 0x4F67 [0x2B] Zaffeld (ID: 17830131/0x011010F3) [10316*]:
    → "I guess he hasn't changed that much after all. Still, I can't help but feel a little sorry for him.\u007F1\u0000\u0007"
 33: 0x4F6E [0x23] WAIT_FOR_DIALOG_INTERACTION
 34: 0x4F6F [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=0*, entity1=Zaffeld (ID: 17830131/0x011010F3), entity2=Zaffeld (ID: 17830131/0x011010F3), action="ten1")
 35: 0x4F7E [0x27] REQ_SET(priority=0x05, entity_id=LocalPlayer, tag_num=0x10)
 36: 0x4F85 [0x1C] WAIT(80* ticks)
 37: 0x4F88 [0x27] REQ_SET(priority=0x05, entity_id=LocalPlayer, tag_num=0x11)
 38: 0x4F8F [0x1C] WAIT(40* ticks)
 39: 0x4F92 [0x52] END_LOAD_SCHEDULER: End scheduler "s135" with entities [EventEntity, EventEntity], work=759*
 40: 0x4FA1 [0x45] LOAD_SCHEDULED_TASK(work_offset1=759*, entity1=EventEntity, entity2=EventEntity, scheduler_id="s136", work_offset2=0*)
 41: 0x4FB2 [0x2B] Zaffeld (ID: 17830131/0x011010F3) [10317*]:
    → "What? You want to get him out of confinement?\u007F1\u0000\u0007"
 42: 0x4FB9 [0x23] WAIT_FOR_DIALOG_INTERACTION
 43: 0x4FBA [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=0*, entity1=Zaffeld (ID: 17830131/0x011010F3), entity2=Zaffeld (ID: 17830131/0x011010F3), action="dis0")
 44: 0x4FC9 [0x2B] Zaffeld (ID: 17830131/0x011010F3) [10318*]:
    → "Well...I don't think it'd be impossible with the right...incentive.\u007F1\u0000\u0007"
 45: 0x4FD0 [0x23] WAIT_FOR_DIALOG_INTERACTION
 46: 0x4FD1 [0x52] END_LOAD_SCHEDULER: End scheduler "s136" with entities [EventEntity, EventEntity], work=759*
 47: 0x4FE0 [0x01] GOTO 0x5016

SUBROUTINE_4FE3:
 48: 0x4FE3 [0x03] Work_Zone[2] = 27526*
 49: 0x4FE8 [0x2B] Zaffeld (ID: 17830131/0x011010F3) [10324*]:
    → "Nashu is confined to quarters for sneaking out during meditation with the \u0001\u0005#\u0002\u0000\u0000\u0000 he found.\u007F1\u0000\u0007"
 50: 0x4FEF [0x23] WAIT_FOR_DIALOG_INTERACTION
 51: 0x4FF0 [0x2B] Zaffeld (ID: 17830131/0x011010F3) [10325*]:
    → "With a little...incentive, I might be able to get him out of there.\u007F1\u0000\u0007"
 52: 0x4FF7 [0x23] WAIT_FOR_DIALOG_INTERACTION
 53: 0x4FF8 [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=0*, entity1=Zaffeld (ID: 17830131/0x011010F3), entity2=Zaffeld (ID: 17830131/0x011010F3), action="ten1")
 54: 0x5007 [0x52] END_LOAD_SCHEDULER: End scheduler "s134" with entities [EventEntity, EventEntity], work=759*
 55: 0x5016 [0x45] LOAD_SCHEDULED_TASK(work_offset1=759*, entity1=EventEntity, entity2=EventEntity, scheduler_id="s137", work_offset2=0*)
 56: 0x5027 [0x03] Work_Zone[3] = ExtData[1]->WorkLocal[1]
 57: 0x502C [0x24] CREATE_DIALOG(message_id=10319*, default_option=1*, option_flags=0*)
    → "What do you say? (current bayld: 
\u0001)\u0007\u000BHow does 10,000 bayld sound?\u0007That's too bad.\u007F1\u0000\u0007"
 58: 0x5033 [0x25] WAIT_DIALOG_SELECT()
 59: 0x5034 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x5103
 60: 0x503C [0x03] Work_Zone[1] = 1*
 61: 0x5041 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
 62: 0x5043 [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
 63: 0x5045 [0x02] IF !(ExtData[1]->WorkLocal[2] == 0*) GOTO 0x5050
 64: 0x504D [0x01] GOTO 0x5055

SUBROUTINE_5050:
 65: 0x5050 [0x03] Work_Zone[2] = ExtData[1]->WorkLocal[2]
 66: 0x5055 [0x02] IF !(Work_Zone[2] == 1*) GOTO 0x50C4
 67: 0x505D [0x52] END_LOAD_SCHEDULER: End scheduler "s137" with entities [EventEntity, EventEntity], work=759*
 68: 0x506C [0x45] LOAD_SCHEDULED_TASK(work_offset1=759*, entity1=EventEntity, entity2=EventEntity, scheduler_id="s140", work_offset2=0*)
 69: 0x507D [0x2B] Zaffeld (ID: 17830131/0x011010F3) [10320*]:
    → "Whoa, there! This certainly changes things. With such a generous contribution, I'm sure Nashu will be back in retreat in no time.\u007F1\u0000\u0007"
 70: 0x5084 [0x23] WAIT_FOR_DIALOG_INTERACTION
 71: 0x5085 [0x52] END_LOAD_SCHEDULER: End scheduler "s140" with entities [EventEntity, EventEntity], work=759*
 72: 0x5094 [0x45] LOAD_SCHEDULED_TASK(work_offset1=759*, entity1=EventEntity, entity2=EventEntity, scheduler_id="s141", work_offset2=0*)
 73: 0x50A5 [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=0*, entity1=Zaffeld (ID: 17830131/0x011010F3), entity2=Zaffeld (ID: 17830131/0x011010F3), action="pas0")
 74: 0x50B4 [0x03] Work_Zone[2] = 27526*
 75: 0x50B9 [0x2B] Zaffeld (ID: 17830131/0x011010F3) [10321*]:
    → "Ah! I almost forgot, here's that \u0001\u0005#\u0002\u0000\u0000\u0000 I kept for you. Hang on to it.\u007F1\u0000\u0007"
 76: 0x50C0 [0x23] WAIT_FOR_DIALOG_INTERACTION
 77: 0x50C1 [0x01] GOTO 0x5100

SUBROUTINE_50C4:
 78: 0x50C4 [0x52] END_LOAD_SCHEDULER: End scheduler "s137" with entities [EventEntity, EventEntity], work=759*
 79: 0x50D3 [0x45] LOAD_SCHEDULED_TASK(work_offset1=759*, entity1=EventEntity, entity2=EventEntity, scheduler_id="s139", work_offset2=0*)
 80: 0x50E4 [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=0*, entity1=Zaffeld (ID: 17830131/0x011010F3), entity2=Zaffeld (ID: 17830131/0x011010F3), action="dis0")
 81: 0x50F3 [0x2B] Zaffeld (ID: 17830131/0x011010F3) [10322*]:
    → "Whoa! With this sum I'm sure...wait, this isn't 10,000. Hah! You almost had me there, \u0008!\u007F1\u0000\u0007"
 82: 0x50FA [0x23] WAIT_FOR_DIALOG_INTERACTION
 83: 0x50FB [0x03] Work_Zone[1] = 0*
 84: 0x5100 [0x01] GOTO 0x5145

SUBROUTINE_5103:
 85: 0x5103 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x5145
 86: 0x510B [0x52] END_LOAD_SCHEDULER: End scheduler "s137" with entities [EventEntity, EventEntity], work=759*
 87: 0x511A [0x45] LOAD_SCHEDULED_TASK(work_offset1=759*, entity1=EventEntity, entity2=EventEntity, scheduler_id="s138", work_offset2=0*)
 88: 0x512B [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=0*, entity1=Zaffeld (ID: 17830131/0x011010F3), entity2=Zaffeld (ID: 17830131/0x011010F3), action="tlk0")
 89: 0x513A [0x2B] Zaffeld (ID: 17830131/0x011010F3) [10323*]:
    → "It is indeed. Don't get me wrong though, I'd like to help him out if I could. It's just that these sorts of negotiations can be...expensive, you know.\u007F1\u0000\u0007"
 90: 0x5141 [0x23] WAIT_FOR_DIALOG_INTERACTION
 91: 0x5142 [0x01] GOTO 0x5145

SUBROUTINE_5145:
 92: 0x5145 [0x45] LOAD_SCHEDULED_TASK(work_offset1=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdo1", work_offset2=0*)
 93: 0x5156 [0x55] WAIT_LOAD_SCHEDULER(work_offset=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdo1")
 94: 0x5165 [0x52] END_LOAD_SCHEDULER: End scheduler "s138" with entities [EventEntity, EventEntity], work=759*
 95: 0x5174 [0x52] END_LOAD_SCHEDULER: End scheduler "s139" with entities [EventEntity, EventEntity], work=759*
 96: 0x5183 [0x52] END_LOAD_SCHEDULER: End scheduler "s141" with entities [EventEntity, EventEntity], work=759*
 97: 0x5192 [0x46] CAMERA_CONTROL: Restore default settings
 98: 0x5194 [0x45] LOAD_SCHEDULED_TASK(work_offset1=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdi2", work_offset2=0*)
 99: 0x51A5 [0x21] END_EVENT
100: 0x51A6 [0x00] END_REQSTACK()
```
