# Event 220

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 14/128    |
| Offset          | 0x0282    |
| Data Size       | 111 bytes |
| Calculated Size | 111 bytes |
| Instructions    | 30        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0280:       1E F0 FF FF 7F 6F  70 03 02 10 1B 80 1D 1C    .....op.......
0290: 80 23 66 00 80 F8 FF FF  7F F8 FF FF 7F 74 6C 6B  .#f..........tlk
02A0: 30 1D 1D 80 23 1D 1E 80  23 66 00 80 F8 FF FF 7F  0...#...#f......
02B0: F8 FF FF 7F 74 6C 6B 32  42 24 1F 80 20 80 21 80  ....tlk2B$.. .!.
02C0: 25 02 00 10 21 80 00 E0  02 43 00 43 01 02 02 10  %...!....C.C....
02D0: 20 80 00 DD 02 1D 22 80  23 1D 23 80 23 01 EF 02   .....".#.#.#...
02E0: 02 00 10 20 80 00 EF 02  1D 24 80 23 01 EF 02 21  ... .....$.#...!
02F0: 00                                                .               
```

## Opcodes

```
  0: 0x0282 [0x1E] EventEntity looks at LocalPlayer and starts talking
  1: 0x0287 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  2: 0x0288 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
  3: 0x0289 [0x03] Work_Zone[2] = 1000*
  4: 0x028E [0x1D] PRINT_EVENT_MESSAGE(message_id=8009*)
    → "What? A toolbox that won't open? Oh, yeah... A long time ago I took a strange box from one of Brugaire's warehouses.\u007F1\u0000\u0007"
  5: 0x0291 [0x23] WAIT_FOR_DIALOG_INTERACTION
  6: 0x0292 [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=50*, entity1=EventEntity, entity2=EventEntity, action="tlk0")
  7: 0x02A1 [0x1D] PRINT_EVENT_MESSAGE(message_id=8010*)
    → "The box was old and filthy, but I couldn't wait to pry it open and see the treasure inside. But it simply wouldn't open!\u007F1\u0000\u0007"
  8: 0x02A4 [0x23] WAIT_FOR_DIALOG_INTERACTION
  9: 0x02A5 [0x1D] PRINT_EVENT_MESSAGE(message_id=8011*)
    → "Wait, are you looking for that box? Hmm... I'll sell it to you for 
\u0000 gil.\u007F1\u0000\u0007"
 10: 0x02A8 [0x23] WAIT_FOR_DIALOG_INTERACTION
 11: 0x02A9 [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=50*, entity1=EventEntity, entity2=EventEntity, action="tlk2")
 12: 0x02B8 [0x42] SET_CLI_EVENT_CANCEL_DATA()
 13: 0x02B9 [0x24] CREATE_DIALOG(message_id=8012*, default_option=1*, option_flags=0*)
    → "Well?\u0007\u000BFine, I'll take it.\u0007No, thanks.\u007F1\u0000\u0007"
 14: 0x02C0 [0x25] WAIT_DIALOG_SELECT()
 15: 0x02C1 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x02E0
 16: 0x02C9 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
 17: 0x02CB [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
 18: 0x02CD [0x02] IF !(Work_Zone[2] == 1*) GOTO 0x02DD
 19: 0x02D5 [0x1D] PRINT_EVENT_MESSAGE(message_id=8014*)
    → "That's the spirit, my fine customer!\u007F1\u0000\u0007"
 20: 0x02D8 [0x23] WAIT_FOR_DIALOG_INTERACTION
 21: 0x02D9 [0x1D] PRINT_EVENT_MESSAGE(message_id=8015*)
    → "I left the toolbox on top of a crate outside the Duty-Free shop in Port Jeuno. Till just now I had completely forgotten it!\u007F1\u0000\u0007"
 22: 0x02DC [0x23] WAIT_FOR_DIALOG_INTERACTION
 23: 0x02DD [0x01] GOTO 0x02EF

SUBROUTINE_02E0:
 24: 0x02E0 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x02EF
 25: 0x02E8 [0x1D] PRINT_EVENT_MESSAGE(message_id=8013*)
    → "Oh, yeah? Well, I'm not telling you where it is, then!\u007F1\u0000\u0007"
 26: 0x02EB [0x23] WAIT_FOR_DIALOG_INTERACTION
 27: 0x02EC [0x01] GOTO 0x02EF

SUBROUTINE_02EF:
 28: 0x02EF [0x21] END_EVENT
 29: 0x02F0 [0x00] END_REQSTACK()
```
