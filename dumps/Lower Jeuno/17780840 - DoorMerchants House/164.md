# Event 164

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 5/20      |
| Offset          | 0x03C4    |
| Data Size       | 428 bytes |
| Calculated Size | 428 bytes |
| Instructions    | 75        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
03C0:             20 01 46 01  42 45 00 80 F0 FF FF 7F       .F.BE......
03D0: F0 FF FF 7F 66 64 6F 31  01 80 55 00 80 F0 FF FF  ....fdo1..U.....
03E0: 7F F0 FF FF 7F 66 64 6F  31 75 00 02 80 75 01 5C  .....fdo1u...u.\
03F0: 00 07 80 5C 01 07 80 38  03 80 45 04 80 F8 FF FF  ...\...8..E.....
0400: 7F F8 FF FF 7F 63 6D 36  35 01 80 55 04 80 F8 FF  .....cm65..U....
0410: FF 7F F8 FF FF 7F 63 6D  36 35 29 03 F0 FF FF 7F  ......cm65).....
0420: 1C 29 03 0F 50 0F 01 0E  4E 00 0F 50 0F 01 4C 45  .)..P...N..P..LE
0430: 00 80 F0 FF FF 7F F0 FF  FF 7F 66 64 69 31 01 80  ..........fdi1..
0440: 55 00 80 F0 FF FF 7F F0  FF FF 7F 66 64 69 31 29  U..........fdi1)
0450: 03 0F 50 0F 01 0F 27 04  0F 50 0F 01 16 2B 0F 50  ..P...'..P...+.P
0460: 0F 01 15 80 23 2B 0F 50  0F 01 16 80 23 29 05 0F  ....#+.P....#)..
0470: 50 0F 01 17 27 03 0F 50  0F 01 14 2B 0F 50 0F 01  P...'..P...+.P..
0480: 17 80 23 2B 0F 50 0F 01  18 80 23 29 04 0F 50 0F  ..#+.P....#)..P.
0490: 01 15 24 19 80 1A 80 01  80 25 02 00 10 01 80 00  ..$......%......
04A0: E6 04 2B 0F 50 0F 01 1B  80 23 2B 10 50 0F 01 1C  ..+.P....#+.P...
04B0: 80 23 4B 0F 50 0F 01 1D  80 6F 76 0F 50 0F 01 2B  .#K.P....ov.P..+
04C0: 0F 50 0F 01 1E 80 23 4A  0F 50 0F 01 F0 FF FF 7F  .P....#J.P......
04D0: 6F 76 0F 50 0F 01 2B 0F  50 0F 01 1F 80 23 03 01  ov.P..+.P....#..
04E0: 10 01 80 01 1B 05 02 00  10 1A 80 00 1B 05 2B 0F  ..............+.
04F0: 50 0F 01 20 80 23 2B 10  50 0F 01 1C 80 23 4B 0F  P.. .#+.P....#K.
0500: 50 0F 01 1D 80 6F 76 0F  50 0F 01 2B 0F 50 0F 01  P....ov.P..+.P..
0510: 1E 80 23 03 01 10 1A 80  01 1B 05 27 03 0F 50 0F  ..#........'..P.
0520: 01 12 27 04 0F 50 0F 01  10 1C 06 80 4D 45 00 80  ..'..P......ME..
0530: F0 FF FF 7F F0 FF FF 7F  66 64 6F 31 01 80 55 00  ........fdo1..U.
0540: 80 F0 FF FF 7F F0 FF FF  7F 66 64 6F 31 5C 00 12  .........fdo1\..
0550: 80 5C 01 12 80 4E 01 0F  50 0F 01 46 00 45 00 80  .\...N..P..F.E..
0560: F0 FF FF 7F F0 FF FF 7F  66 64 69 31 01 80 21 00  ........fdi1..!.
```

## Opcodes

```
  0: 0x03C4 [0x20] SET_CLI_EVENT_UC_FLAG: Lock player control
  1: 0x03C6 [0x46] CAMERA_CONTROL: Disable user control
  2: 0x03C8 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  3: 0x03C9 [0x45] LOAD_SCHEDULED_TASK(work_offset1=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdo1", work_offset2=0*)
  4: 0x03DA [0x55] WAIT_LOAD_SCHEDULER(work_offset=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdo1")
  5: 0x03E9 [0x75] LOAD_ROOM(Load indoor room, room=466*)
  6: 0x03ED [0x75] LOAD_ROOM(No action)
  7: 0x03EF [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 160*
  8: 0x03F3 [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 160*
  9: 0x03F7 [0x38] SET_CLIENT_EVENT_MODE(mode=3*)
 10: 0x03FA [0x45] LOAD_SCHEDULED_TASK(work_offset1=145*, entity1=EventEntity, entity2=EventEntity, scheduler_id="cm65", work_offset2=0*)
 11: 0x040B [0x55] WAIT_LOAD_SCHEDULER(work_offset=145*, entity1=EventEntity, entity2=EventEntity, scheduler_id="cm65")
 12: 0x041A [0x29] REQ_SET_WAIT(priority=0x03, entity_id=LocalPlayer, tag_num=0x1C)
 13: 0x0421 [0x29] REQ_SET_WAIT(priority=0x03, entity_id=Dietmund (ID: 17780751/0x010F500F), tag_num=0x0E)
 14: 0x0428 [0x4E] SET_ENTITY_HIDE_FLAG: Show Dietmund (ID: 17780751/0x010F500F)
 15: 0x042E [0x4C] EventEntity->StatusEvent = 8 // Open door
 16: 0x042F [0x45] LOAD_SCHEDULED_TASK(work_offset1=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdi1", work_offset2=0*)
 17: 0x0440 [0x55] WAIT_LOAD_SCHEDULER(work_offset=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdi1")
 18: 0x044F [0x29] REQ_SET_WAIT(priority=0x03, entity_id=Dietmund (ID: 17780751/0x010F500F), tag_num=0x0F)
 19: 0x0456 [0x27] REQ_SET(priority=0x04, entity_id=Dietmund (ID: 17780751/0x010F500F), tag_num=0x16)
 20: 0x045D [0x2B] Dietmund (ID: 17780751/0x010F500F) [7399*]:
    → "Who the... Oh, it's you. My kid's down with an awful fever.\u007F1\u0000\u0007"
 21: 0x0464 [0x23] WAIT_FOR_DIALOG_INTERACTION
 22: 0x0465 [0x2B] Dietmund (ID: 17780751/0x010F500F) [7400*]:
    → "The doc said an herb from Qufim should bring the fever down, but I have to stay here and watch over him.\u007F1\u0000\u0007"
 23: 0x046C [0x23] WAIT_FOR_DIALOG_INTERACTION
 24: 0x046D [0x29] REQ_SET_WAIT(priority=0x05, entity_id=Dietmund (ID: 17780751/0x010F500F), tag_num=0x17)
 25: 0x0474 [0x27] REQ_SET(priority=0x03, entity_id=Dietmund (ID: 17780751/0x010F500F), tag_num=0x14)
 26: 0x047B [0x2B] Dietmund (ID: 17780751/0x010F500F) [7401*]:
    → "I feel bad sayin' this, but could you go find some for me?\u007F1\u0000\u0007"
 27: 0x0482 [0x23] WAIT_FOR_DIALOG_INTERACTION
 28: 0x0483 [0x2B] Dietmund (ID: 17780751/0x010F500F) [7402*]:
    → "I was gonna head out once he started feeling better, but I don't have much time! Please!\u007F1\u0000\u0007"
 29: 0x048A [0x23] WAIT_FOR_DIALOG_INTERACTION
 30: 0x048B [0x29] REQ_SET_WAIT(priority=0x04, entity_id=Dietmund (ID: 17780751/0x010F500F), tag_num=0x15)
 31: 0x0492 [0x24] CREATE_DIALOG(message_id=7403*, default_option=1*, option_flags=0*)
    → "Will you bring me the herb?\u0007\u000BYes, I'll go.\u0007No way.\u007F1\u0000\u0007"
 32: 0x0499 [0x25] WAIT_DIALOG_SELECT()
 33: 0x049A [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x04E6
 34: 0x04A2 [0x2B] Dietmund (ID: 17780751/0x010F500F) [7404*]:
    → "Thanks. I won't forget it!\u007F1\u0000\u0007"
 35: 0x04A9 [0x23] WAIT_FOR_DIALOG_INTERACTION
 36: 0x04AA [0x2B] Domingart (ID: 17780752/0x010F5010) [7405*]:
    → "Aauhh... Daddy...\u007F1\u0000\u0007"
 37: 0x04B1 [0x23] WAIT_FOR_DIALOG_INTERACTION
 38: 0x04B2 [0x4B] UPDATE_ENTITY_YAW(entity=Dietmund (ID: 17780751/0x010F500F), yaw=1.05°*)
 39: 0x04B9 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 40: 0x04BA [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until Dietmund (ID: 17780751/0x010F500F) Render.Flags0 and Render.Flags3 conditions are met
 41: 0x04BF [0x2B] Dietmund (ID: 17780751/0x010F500F) [7406*]:
    → "It's okay... Hang in there!\u007F1\u0000\u0007"
 42: 0x04C6 [0x23] WAIT_FOR_DIALOG_INTERACTION
 43: 0x04C7 [0x4A] Dietmund (ID: 17780751/0x010F500F) looks at LocalPlayer
 44: 0x04D0 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 45: 0x04D1 [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until Dietmund (ID: 17780751/0x010F500F) Render.Flags0 and Render.Flags3 conditions are met
 46: 0x04D6 [0x2B] Dietmund (ID: 17780751/0x010F500F) [7407*]:
    → "There's a special flower on Qufim that only blooms at night. The doc said its roots should bring down his fever. Please, hurry!\u007F1\u0000\u0007"
 47: 0x04DD [0x23] WAIT_FOR_DIALOG_INTERACTION
 48: 0x04DE [0x03] Work_Zone[1] = 0*
 49: 0x04E3 [0x01] GOTO 0x051B

SUBROUTINE_04E6:
 50: 0x04E6 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x051B
 51: 0x04EE [0x2B] Dietmund (ID: 17780751/0x010F500F) [7408*]:
    → "Heh, typical... But come back if you ever change your mind. I don't care who helps me now.\u007F1\u0000\u0007"
 52: 0x04F5 [0x23] WAIT_FOR_DIALOG_INTERACTION
 53: 0x04F6 [0x2B] Domingart (ID: 17780752/0x010F5010) [7405*]:
    → "Aauhh... Daddy...\u007F1\u0000\u0007"
 54: 0x04FD [0x23] WAIT_FOR_DIALOG_INTERACTION
 55: 0x04FE [0x4B] UPDATE_ENTITY_YAW(entity=Dietmund (ID: 17780751/0x010F500F), yaw=1.05°*)
 56: 0x0505 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 57: 0x0506 [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until Dietmund (ID: 17780751/0x010F500F) Render.Flags0 and Render.Flags3 conditions are met
 58: 0x050B [0x2B] Dietmund (ID: 17780751/0x010F500F) [7406*]:
    → "It's okay... Hang in there!\u007F1\u0000\u0007"
 59: 0x0512 [0x23] WAIT_FOR_DIALOG_INTERACTION
 60: 0x0513 [0x03] Work_Zone[1] = 1*
 61: 0x0518 [0x01] GOTO 0x051B

SUBROUTINE_051B:
 62: 0x051B [0x27] REQ_SET(priority=0x03, entity_id=Dietmund (ID: 17780751/0x010F500F), tag_num=0x12)
 63: 0x0522 [0x27] REQ_SET(priority=0x04, entity_id=Dietmund (ID: 17780751/0x010F500F), tag_num=0x10)
 64: 0x0529 [0x1C] WAIT(60* ticks)
 65: 0x052C [0x4D] EventEntity->StatusEvent = 9 // Close door
 66: 0x052D [0x45] LOAD_SCHEDULED_TASK(work_offset1=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdo1", work_offset2=0*)
 67: 0x053E [0x55] WAIT_LOAD_SCHEDULER(work_offset=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdo1")
 68: 0x054D [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 110*
 69: 0x0551 [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 110*
 70: 0x0555 [0x4E] SET_ENTITY_HIDE_FLAG: Hide Dietmund (ID: 17780751/0x010F500F)
 71: 0x055B [0x46] CAMERA_CONTROL: Restore default settings
 72: 0x055D [0x45] LOAD_SCHEDULED_TASK(work_offset1=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdi1", work_offset2=0*)
 73: 0x056E [0x21] END_EVENT
 74: 0x056F [0x00] END_REQSTACK()
```
