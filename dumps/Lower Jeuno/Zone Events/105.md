# Event 105

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 19/140    |
| Offset          | 0x23D0    |
| Data Size       | 298 bytes |
| Calculated Size | 298 bytes |
| Instructions    | 42        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
23D0: 20 01 42 06 00 00 82 65  36 74 30 E2 23 03 00 00   .B....e6t0.#...
23E0: 07 80 82 65 36 74 31 EE  23 03 00 00 DE 80 02 00  ...e6t1.#.......
23F0: 00 03 80 00 F9 23 01 F8  24 46 01 45 06 80 F0 FF  .....#..$F.E....
2400: FF 7F F0 FF FF 7F 66 64  6F 31 03 80 55 06 80 F0  ......fdo1..U...
2410: FF FF 7F F0 FF FF 7F 66  64 6F 31 02 00 00 07 80  .......fdo1.....
2420: 80 3B 24 47 00 DF 80 E0  80 4B 80 E1 80 47 01 37  .;$G.....K...G.7
2430: E2 80 E3 80 13 80 E4 80  01 5B 24 02 00 00 DE 80  .........[$.....
2440: 80 5B 24 47 00 E5 80 E6  80 13 80 E7 80 47 01 37  .[$G.........G.7
2450: E8 80 E9 80 4B 80 EA 80  01 5B 24 45 06 80 F0 FF  ....K....[$E....
2460: FF 7F F0 FF FF 7F 66 64  69 31 03 80 55 06 80 F0  ......fdi1..U...
2470: FF FF 7F F0 FF FF 7F 66  64 69 31 27 03 60 50 0F  .......fdi1'.`P.
2480: 01 06 1C 08 80 02 00 00  07 80 80 9A 24 1F 00 DF  ............$...
2490: 80 E0 80 4B 80 1F 01 01  AF 24 02 00 00 DE 80 80  ...K.....$......
24A0: AF 24 1F 00 E5 80 E6 80  13 80 1F 01 01 AF 24 27  .$............$'
24B0: 03 60 50 0F 01 07 45 06  80 F0 FF FF 7F F0 FF FF  .`P...E.........
24C0: 7F 66 64 6F 31 03 80 55  06 80 F0 FF FF 7F F0 FF  .fdo1..U........
24D0: FF 7F 66 64 6F 31 46 00  45 06 80 F0 FF FF 7F F0  ..fdo1F.E.......
24E0: FF FF 7F 66 64 69 31 03  80 55 06 80 F0 FF FF 7F  ...fdi1..U......
24F0: F0 FF FF 7F 66 64 69 31  21 00                    ....fdi1!.      
```

## Opcodes

```
  0: 0x23D0 [0x20] SET_CLI_EVENT_UC_FLAG: Lock player control
  1: 0x23D2 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  2: 0x23D3 [0x06] ExtData[1]->WorkLocal[0] = 0
  3: 0x23D6 [0x82] RECT_HIT_TEST_BRANCH: If EventEntity is NOT in rectangle 0x30743665, GOTO 0x23E2
  4: 0x23DD [0x03] ExtData[1]->WorkLocal[0] = 1*
  5: 0x23E2 [0x82] RECT_HIT_TEST_BRANCH: If EventEntity is NOT in rectangle 0x31743665, GOTO 0x23EE
  6: 0x23E9 [0x03] ExtData[1]->WorkLocal[0] = 2*
  7: 0x23EE [0x02] IF !(ExtData[1]->WorkLocal[0] == 0*) GOTO 0x23F9
  8: 0x23F6 [0x01] GOTO 0x24F8
  9: 0x23F9 [0x46] CAMERA_CONTROL: Disable user control
 10: 0x23FB [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 11: 0x240C [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=200*
 12: 0x241B [0x02] IF !(ExtData[1]->WorkLocal[0] == 1*) GOTO 0x243B
 13: 0x2423 [0x47] UPDATE_PLAYER_POS(40.216*, -17.911*, -0.099*, yaw=37.4째*)
 14: 0x242D [0x47] WAIT_PLAYER_POS_UPDATE
 15: 0x242F [0x37] UPDATE_EVENT_POSITION_AND_DIR: x=36.718*, z=-15.856*, y=-0.111*, direction=18.7째*
 16: 0x2438 [0x01] GOTO 0x245B
 17: 0x243B [0x02] IF !(ExtData[1]->WorkLocal[0] == 2*) GOTO 0x245B
 18: 0x2443 [0x47] UPDATE_PLAYER_POS(36.191*, -15.618*, -0.111*, yaw=204.8째*)
 19: 0x244D [0x47] WAIT_PLAYER_POS_UPDATE
 20: 0x244F [0x37] UPDATE_EVENT_POSITION_AND_DIR: x=39.514*, z=-17.421*, y=-0.099*, direction=202.7째*
 21: 0x2458 [0x01] GOTO 0x245B

SUBROUTINE_245B:
 22: 0x245B [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 23: 0x246C [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=200*
 24: 0x247B [0x27] REQ_SET(priority=0x03, entity_id=Door:"Neptune's Spire" (ID: 17780832/0x010F5060), tag_num=0x06)
 25: 0x2482 [0x1C] WAIT(90* ticks)
 26: 0x2485 [0x02] IF !(ExtData[1]->WorkLocal[0] == 1*) GOTO 0x249A
 27: 0x248D [0x1F] MOVE_ENTITY: EventEntity moves to X=40.216*, Z=-17.911*, Y=-0.099*
 28: 0x2495 [0x1F] MOVE_ENTITY: Update entity position (mode=1)
 29: 0x2497 [0x01] GOTO 0x24AF
 30: 0x249A [0x02] IF !(ExtData[1]->WorkLocal[0] == 2*) GOTO 0x24AF
 31: 0x24A2 [0x1F] MOVE_ENTITY: EventEntity moves to X=36.191*, Z=-15.618*, Y=-0.111*
 32: 0x24AA [0x1F] MOVE_ENTITY: Update entity position (mode=1)
 33: 0x24AC [0x01] GOTO 0x24AF

SUBROUTINE_24AF:
 34: 0x24AF [0x27] REQ_SET(priority=0x03, entity_id=Door:"Neptune's Spire" (ID: 17780832/0x010F5060), tag_num=0x07)
 35: 0x24B6 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 36: 0x24C7 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=200*
 37: 0x24D6 [0x46] CAMERA_CONTROL: Restore default settings
 38: 0x24D8 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 39: 0x24E9 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=200*
 40: 0x24F8 [0x21] END_EVENT
 41: 0x24F9 [0x00] END_REQSTACK()
```
