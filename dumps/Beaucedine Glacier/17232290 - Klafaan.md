# 17232290 - Klafaan

## Common Data

| Field            | Value                        |
|------------------|------------------------------|
| Zone             | Beaucedine Glacier (ID: 111) |
| Block Size       | 196 bytes                    |
| Total Events     | 8                            |
| References Count | 17                           |

## List of Events

| Event ID                 | Entrypoint   |   Size |   Instructions |
|--------------------------|--------------|--------|----------------|
| [65535](#event-65535)    | 0x0000       |      1 |              1 |
| [152](#event-152)        | 0x0001       |      1 |              1 |
| [65535.1](#event-655351) | 0x0002       |     21 |              4 |
| [65535.2](#event-655352) | 0x0017       |     25 |              6 |
| [65535.3](#event-655353) | 0x0030       |     14 |              4 |
| [65535.4](#event-655354) | 0x003E       |      4 |              2 |
| [65535.5](#event-655355) | 0x0042       |      2 |              2 |
| [65535.6](#event-655356) | 0x0044       |     10 |              2 |

## DAT References (imed_data)

|   Index | Hex Value   |   Dec Value |
|---------|-------------|-------------|
|       0 | 0x0000      |           0 |
|       1 | 0x003C      |          60 |
|       2 | 0x3B533     |      242995 |
|       3 | 0x387D7     |      231383 |
|       4 | 0x00E5      |         229 |
|       5 | 0x01AC      |         428 |
|       6 | 0x0050      |          80 |
|       7 | 0x0078      |         120 |
|       8 | 0x000D      |          13 |
|       9 | 0x3C9D0     |      248272 |
|      10 | 0x377EB     |      227307 |
|      11 | 0x02CF      |         719 |
|      12 | 0x3C046     |      245830 |
|      13 | 0x36B61     |      224097 |
|      14 | 0x03AE      |         942 |
|      15 | 0x0001      |           1 |
|      16 | 0x012C      |         300 |

## Events

### Event 65535

#### Metadata

| Field        | Value   |
|--------------|---------|
| Entrypoint   | 0x0000  |
| Data Size    | 1 bytes |
| Instructions | 1       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000: 00                                                .               
```

#### Opcodes

```
  0: 0x0000 [0x00] END_REQSTACK()
```

### Event 152

#### Metadata

| Field        | Value   |
|--------------|---------|
| Entrypoint   | 0x0001  |
| Data Size    | 1 bytes |
| Instructions | 1       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000:    00                                              .              
```

#### Opcodes

```
  0: 0x0001 [0x00] END_REQSTACK()
```

### Event 65535.1

#### Metadata

| Field        | Value    |
|--------------|----------|
| Entrypoint   | 0x0002   |
| Data Size    | 21 bytes |
| Instructions | 4        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000:       A5 01 6C A2 F1 06  01 00 80 01 80 37 02 80    ..l........7..
0010: 03 80 04 80 05 80 00                              .......         
```

#### Opcodes

```
  0: 0x0002 [0xA5] EventEntity->Flags3.BallistaTeam |= 0x08  // Set bit 3 of BallistaTeam
  1: 0x0004 [0x6C] FADE_ENTITY_COLOR(entity_id=Klafaan (ID: 17232290/0x0106F1A2), end_alpha=0*, fade_time=60*)
  2: 0x000D [0x37] UPDATE_EVENT_POSITION_AND_DIR: x=242.995*, z=231.383*, y=0.229*, direction=37.6Â°*
  3: 0x0016 [0x00] END_REQSTACK()
```

### Event 65535.2

#### Metadata

| Field        | Value    |
|--------------|----------|
| Entrypoint   | 0x0017   |
| Data Size    | 25 bytes |
| Instructions | 6        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0010:                      61  00 6C A2 F1 06 01 06 80         a.l......
0020: 07 80 32 08 80 1F 00 09  80 0A 80 0B 80 1F 01 00  ..2.............
```

#### Opcodes

```
  0: 0x0017 [0x61] EventEntity->Render.Flags2 &= ~0x00000001
  1: 0x0019 [0x6C] FADE_ENTITY_COLOR(entity_id=Klafaan (ID: 17232290/0x0106F1A2), end_alpha=80*, fade_time=120*)
  2: 0x0022 [0x32] ExtData[1]->MainSpeed = 13* * 0.1
  3: 0x0025 [0x1F] MOVE_ENTITY: EventEntity moves to X=248.272*, Z=227.307*, Y=0.719*
  4: 0x002D [0x1F] MOVE_ENTITY: Update entity position (mode=1)
  5: 0x002F [0x00] END_REQSTACK()
```

### Event 65535.3

#### Metadata

| Field        | Value    |
|--------------|----------|
| Entrypoint   | 0x0030   |
| Data Size    | 14 bytes |
| Instructions | 4        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0030: 32 08 80 1F 00 0C 80 0D  80 0E 80 1F 01 00        2.............  
```

#### Opcodes

```
  0: 0x0030 [0x32] ExtData[1]->MainSpeed = 13* * 0.1
  1: 0x0033 [0x1F] MOVE_ENTITY: EventEntity moves to X=245.830*, Z=224.097*, Y=0.942*
  2: 0x003B [0x1F] MOVE_ENTITY: Update entity position (mode=1)
  3: 0x003D [0x00] END_REQSTACK()
```

### Event 65535.4

#### Metadata

| Field        | Value   |
|--------------|---------|
| Entrypoint   | 0x003E  |
| Data Size    | 4 bytes |
| Instructions | 2       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0030:                                            95 0F                ..
0040: 80 00                                             ..              
```

#### Opcodes

```
  0: 0x003E [0x95] SETUP_EVENT_NPC: Prepare NPC for event (Render.Flags3 = 1*)
  1: 0x0041 [0x00] END_REQSTACK()
```

### Event 65535.5

#### Metadata

| Field        | Value   |
|--------------|---------|
| Entrypoint   | 0x0042  |
| Data Size    | 2 bytes |
| Instructions | 2       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0040:       96 00                                         ..            
```

#### Opcodes

```
  0: 0x0042 [0x96] UNSET_EVENT_NPC: Restore NPC after event (removes event NPC status)
  1: 0x0043 [0x00] END_REQSTACK()
```

### Event 65535.6

#### Metadata

| Field        | Value    |
|--------------|----------|
| Entrypoint   | 0x0044   |
| Data Size    | 10 bytes |
| Instructions | 2        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0040:             6C A2 F1 06  01 00 80 10 80 00            l.........  
```

#### Opcodes

```
  0: 0x0044 [0x6C] FADE_ENTITY_COLOR(entity_id=Klafaan (ID: 17232290/0x0106F1A2), end_alpha=0*, fade_time=300*)
  1: 0x004D [0x00] END_REQSTACK()
```
