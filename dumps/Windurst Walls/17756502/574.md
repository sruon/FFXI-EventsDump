# Event 574

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 11/13     |
| Offset          | 0x5656    |
| Data Size       | 834 bytes |
| Calculated Size | 834 bytes |
| Instructions    | 121       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
5650:                   42 03  01 00 01 80 5D 01 80 0D        B.....]...
5660: 80 1A 64 00 46 01 38 0C  80 02 09 10 01 80 01 77  ..d.F.8........w
5670: 56 75 00 0E 80 75 01 2F  00 57 F1 0E 01 4E 00 57  Vu...u./.W...N.W
5680: F1 0E 01 92 01 1A F0 0E  01 92 01 57 F1 0E 01 94  ...........W....
5690: 01 1A F0 0E 01 94 01 F0  FF FF 7F 94 01 57 F1 0E  .............W..
56A0: 01 59 05 57 F1 0E 01 01  BA 57 F1 0E 01 6C 81 6D  .Y.W.....W...l.m
56B0: 81 17 80 18 80 80 F0 FF  FF 7F 80 1A F0 0E 01 6C  ...............l
56C0: 57 F1 0E 01 01 80 03 80  29 08 F0 FF FF 7F 05 BA  W.......).......
56D0: F0 FF FF 7F 15 80 16 80  17 80 18 80 4A 1A F0 0E  ............J...
56E0: 01 F0 FF FF 7F 6F 76 1A  F0 0E 01 79 00 F0 FF FF  .....ov....y....
56F0: 7F 1A F0 0E 01 5C 00 19  80 5C 01 19 80 9A 5D 1A  .....\...\....].
5700: 80 03 80 27 08 1A F0 0E  01 DD 02 09 10 0F 80 00  ...'............
5710: 26 57 45 F2 80 F8 FF FF  7F F8 FF FF 7F 73 30 36  &WE..........s06
5720: 31 01 80 01 53 57 02 09  10 14 80 00 42 57 45 F2  1...SW......BWE.
5730: 80 F8 FF FF 7F F8 FF FF  7F 73 30 36 31 01 80 01  .........s061...
5740: 53 57 45 F2 80 F8 FF FF  7F F8 FF FF 7F 73 30 35  SWE..........s05
5750: 37 01 80 1A 43 00 2A 08  1A F0 0E 01 2B 1A F0 0E  7...C.*.....+...
5760: 01 6E 81 23 29 08 1A F0  0E 01 09 2B 1A F0 0E 01  .n.#)......+....
5770: 6F 81 23 29 08 1A F0 0E  01 0A 27 08 F0 FF FF 7F  o.#)......'.....
5780: 7D 1C 6C 80 1A 64 00 02  09 10 0F 80 00 A1 57 52  }.l..d........WR
5790: F2 80 F8 FF FF 7F F8 FF  FF 7F 73 30 36 31 01 CA  ..........s061..
57A0: 57 02 09 10 14 80 00 BB  57 52 F2 80 F8 FF FF 7F  W.......WR......
57B0: F8 FF FF 7F 73 30 36 31  01 CA 57 52 F2 80 F8 FF  ....s061..WR....
57C0: FF 7F F8 FF FF 7F 73 30  35 37 2A 08 F0 FF FF 7F  ......s057*.....
57D0: 6C 57 F1 0E 01 7A 80 03  80 1C 03 80 29 08 57 F1  lW...z......).W.
57E0: 0E 01 01 79 00 F0 FF FF  7F 57 F1 0E 01 4A 1A F0  ...y.....W...J..
57F0: 0E 01 57 F1 0E 01 6F 76  1A F0 0E 01 45 F2 80 F8  ..W...ov....E...
5800: FF FF 7F F8 FF FF 7F 73  30 35 38 01 80 9F 70 81  .......s058...p.
5810: 57 F1 0E 01 57 F1 0E 01  6D 61 69 6E 01 80 1A 43  W...W...main...C
5820: 00 2B 57 F1 0E 01 71 81  1C 72 81 5D 01 80 03 80  .+W...q..r.]....
5830: 1A B7 01 9F 70 81 57 F1  0E 01 57 F1 0E 01 65 66  ....p.W...W...ef
5840: 6B 6C 01 80 23 52 F2 80  F8 FF FF 7F F8 FF FF 7F  kl..#R..........
5850: 73 30 35 38 6B 69 64 6C  30 57 F1 0E 01 02 09 10  s058kidl0W......
5860: 0F 80 00 79 58 45 F2 80  F8 FF FF 7F F8 FF FF 7F  ...yXE..........
5870: 73 30 36 32 01 80 01 A6  58 02 09 10 14 80 00 95  s062....X.......
5880: 58 45 F2 80 F8 FF FF 7F  F8 FF FF 7F 73 30 36 32  XE..........s062
5890: 01 80 01 A6 58 45 F2 80  F8 FF FF 7F F8 FF FF 7F  ....XE..........
58A0: 73 30 35 39 01 80 1A 85  00 5D 1A 80 03 80 29 08  s059.....]....).
58B0: 1A F0 0E 01 09 2B 1A F0  0E 01 73 81 23 29 08 1A  .....+....s.#)..
58C0: F0 0E 01 0A 79 00 F0 FF  FF 7F 1A F0 0E 01 27 08  ....y.........'.
58D0: 1A F0 0E 01 2F 2B 1A F0  0E 01 74 81 23 2A 08 1A  ..../+....t.#*..
58E0: F0 0E 01 02 09 10 0F 80  00 FD 58 52 F2 80 F8 FF  ..........XR....
58F0: FF 7F F8 FF FF 7F 73 30  36 32 01 26 59 02 09 10  ......s062.&Y...
5900: 14 80 00 17 59 52 F2 80  F8 FF FF 7F F8 FF FF 7F  ....YR..........
5910: 73 30 36 32 01 26 59 52  F2 80 F8 FF FF 7F F8 FF  s062.&YR........
5920: FF 7F 73 30 35 39 45 F2  80 F8 FF FF 7F F8 FF FF  ..s059E.........
5930: 7F 73 30 36 30 01 80 1C  3E 80 29 08 1A F0 0E 01  .s060...>.).....
5940: 0B 2B 1A F0 0E 01 75 81  23 5D 01 80 0D 80 1A 64  .+....u.#].....d
5950: 00 29 08 1A F0 0E 01 0C  52 F2 80 F8 FF FF 7F F8  .)......R.......
5960: FF FF 7F 73 30 36 30 59  05 57 F1 0E 01 00 5C 00  ...s060Y.W....\.
5970: 2A 80 5C 01 2A 80 9A 5D  1A 80 03 80 AB 11 01 80  *.\.*..]........
5980: 1C 03 80 46 00 45 00 80  F8 FF FF 7F F8 FF FF 7F  ...F.E..........
5990: 66 64 69 32 01 80 21 00                           fdi2..!.        
```

## Opcodes

```
  0: 0x5656 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x5657 [0x03] ExtData[1]->WorkLocal[1] = 0*
  2: 0x565C [0x5D] SET_MUSIC_VOLUME(volume=0*, fade_time=300*)
  3: 0x5661 [0x1A] CALL_SUBROUTINE(address=0x0064)
  4: 0x5664 [0x46] CAMERA_CONTROL: Disable user control
  5: 0x5666 [0x38] SET_CLIENT_EVENT_MODE(mode=147*)
  6: 0x5669 [0x02] IF !(Work_Zone[9] == 0*) GOTO 0x5677
  7: 0x5671 [0x75] LOAD_ROOM(Load indoor room, room=405*)
  8: 0x5675 [0x75] LOAD_ROOM(No action)
  9: 0x5677 [0x2F] Memorian (ID: 17756503/0x010EF157)->Render.Flags0 &= ~0x80000 // Bit 19
 10: 0x567D [0x4E] SET_ENTITY_HIDE_FLAG: Show Memorian (ID: 17756503/0x010EF157)
 11: 0x5683 [0x92] Shantotto (ID: 17756186/0x010EF01A)->Render.Flags3 ^= 0x01
 12: 0x5689 [0x92] Memorian (ID: 17756503/0x010EF157)->Render.Flags3 ^= 0x01
 13: 0x568F [0x94] Shantotto (ID: 17756186/0x010EF01A)->Render.Flags3 ^= 0x01
 14: 0x5695 [0x94] LocalPlayer->Render.Flags3 ^= 0x01
 15: 0x569B [0x94] Memorian (ID: 17756503/0x010EF157)->Render.Flags3 ^= 0x01
 16: 0x56A1 [0x59] UPDATE_ENTITY_DATA: Memorian (ID: 17756503/0x010EF157)->Render.Flags0 |= 0x200000
 17: 0x56A8 [0xBA] SET_ENTITY_POSITION(entity_id=References[17723735], pos_x=122.748*, pos_z=110.600*, pos_y=-3.000*, direction=262.7°*)
 18: 0x56B5 [0x80] LOAD_WAIT(entity=LocalPlayer)
 19: 0x56BA [0x80] LOAD_WAIT(entity=Shantotto (ID: 17756186/0x010EF01A))
 20: 0x56BF [0x6C] FADE_ENTITY_COLOR(entity_id=Memorian (ID: 17756503/0x010EF157), end_alpha=0*, fade_time=1*)
 21: 0x56C8 [0x29] REQ_SET_WAIT(priority=0x08, entity_id=LocalPlayer, tag_num=0x05)
 22: 0x56CF [0xBA] SET_ENTITY_POSITION(entity_id=LocalPlayer, pos_x=122.949*, pos_z=109.602*, pos_y=-3.000*, direction=262.7°*)
 23: 0x56DC [0x4A] Shantotto (ID: 17756186/0x010EF01A) looks at LocalPlayer
 24: 0x56E5 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 25: 0x56E6 [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until Shantotto (ID: 17756186/0x010EF01A) Render.Flags0 and Render.Flags3 conditions are met
 26: 0x56EB [0x79] LocalPlayer looks at Shantotto (ID: 17756186/0x010EF01A) (Basic look)
 27: 0x56F5 [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 25*
 28: 0x56F9 [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 25*
 29: 0x56FD [0x9A] WAIT_MUSIC_SERVER()
 30: 0x56FE [0x5D] SET_MUSIC_VOLUME(volume=127*, fade_time=1*)
 31: 0x5703 [0x27] REQ_SET(priority=0x08, entity_id=Shantotto (ID: 17756186/0x010EF01A), tag_num=0xDD)
 32: 0x570A [0x02] IF !(Work_Zone[9] == 5*) GOTO 0x5726
 33: 0x5712 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s061" with entities [EventEntity, EventEntity], work=[893*, 0*]
 34: 0x5723 [0x01] GOTO 0x5753
 35: 0x5726 [0x02] IF !(Work_Zone[9] == 6*) GOTO 0x5742
 36: 0x572E [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s061" with entities [EventEntity, EventEntity], work=[893*, 0*]
 37: 0x573F [0x01] GOTO 0x5753
 38: 0x5742 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s057" with entities [EventEntity, EventEntity], work=[893*, 0*]

SUBROUTINE_5753:
 39: 0x5753 [0x1A] CALL_SUBROUTINE(address=0x0043)
 40: 0x5756 [0x2A] GET_REQ_LEVEL(level=8, entity_id=Shantotto (ID: 17756186/0x010EF01A))
 41: 0x575C [0x2B] Shantotto (ID: 17756186/0x010EF01A) [11166*]:
    → "Ah, it's you.\u0007Your face appears to be rather fresh and true.\u007F1\u0000\u0007"
 42: 0x5763 [0x23] WAIT_FOR_DIALOG_INTERACTION
 43: 0x5764 [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Shantotto (ID: 17756186/0x010EF01A), tag_num=0x09)
 44: 0x576B [0x2B] Shantotto (ID: 17756186/0x010EF01A) [11167*]:
    → "You look as if a great weight has been lifted from your heart.\u0007Yes, your aura has brightened considerably since I saw you last depart.\u007F1\u0000\u0007"
 45: 0x5772 [0x23] WAIT_FOR_DIALOG_INTERACTION
 46: 0x5773 [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Shantotto (ID: 17756186/0x010EF01A), tag_num=0x0A)
 47: 0x577A [0x27] REQ_SET(priority=0x08, entity_id=LocalPlayer, tag_num=0x7D)
 48: 0x5781 [0x1C] WAIT(90* ticks)
 49: 0x5784 [0x1A] CALL_SUBROUTINE(address=0x0064)
 50: 0x5787 [0x02] IF !(Work_Zone[9] == 5*) GOTO 0x57A1
 51: 0x578F [0x52] END_LOAD_SCHEDULER: End scheduler "s061" with entities [EventEntity, EventEntity], work=893*
 52: 0x579E [0x01] GOTO 0x57CA
 53: 0x57A1 [0x02] IF !(Work_Zone[9] == 6*) GOTO 0x57BB
 54: 0x57A9 [0x52] END_LOAD_SCHEDULER: End scheduler "s061" with entities [EventEntity, EventEntity], work=893*
 55: 0x57B8 [0x01] GOTO 0x57CA
 56: 0x57BB [0x52] END_LOAD_SCHEDULER: End scheduler "s057" with entities [EventEntity, EventEntity], work=893*

SUBROUTINE_57CA:
 57: 0x57CA [0x2A] GET_REQ_LEVEL(level=8, entity_id=LocalPlayer)
 58: 0x57D0 [0x6C] FADE_ENTITY_COLOR(entity_id=Memorian (ID: 17756503/0x010EF157), end_alpha=128*, fade_time=1*)
 59: 0x57D9 [0x1C] WAIT(1* ticks)
 60: 0x57DC [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Memorian (ID: 17756503/0x010EF157), tag_num=0x01)
 61: 0x57E3 [0x79] LocalPlayer looks at Memorian (ID: 17756503/0x010EF157) (Basic look)
 62: 0x57ED [0x4A] Shantotto (ID: 17756186/0x010EF01A) looks at Memorian (ID: 17756503/0x010EF157)
 63: 0x57F6 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 64: 0x57F7 [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until Shantotto (ID: 17756186/0x010EF01A) Render.Flags0 and Render.Flags3 conditions are met
 65: 0x57FC [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s058" with entities [EventEntity, EventEntity], work=[893*, 0*]
 66: 0x580D [0x9F] LOAD_SCHEDULED_TASK_ALT: Load scheduler "main" with entities [Memorian (ID: 17756503/0x010EF157), Memorian (ID: 17756503/0x010EF157)], work=[39*, 0*]
 67: 0x581E [0x1A] CALL_SUBROUTINE(address=0x0043)
 68: 0x5821 [0x2B] Memorian (ID: 17756503/0x010EF157) [11168*]:
    → "Arrrrrrg...\u0007It's over...\u0007It's all over...\u007F1\u0000\u0007"
 69: 0x5828 [0x1C] WAIT(160* ticks)
 70: 0x582B [0x5D] SET_MUSIC_VOLUME(volume=0*, fade_time=1*)
 71: 0x5830 [0x1A] CALL_SUBROUTINE(address=0x01B7)
 72: 0x5833 [0x9F] LOAD_SCHEDULED_TASK_ALT: Load scheduler "efkl" with entities [Memorian (ID: 17756503/0x010EF157), Memorian (ID: 17756503/0x010EF157)], work=[39*, 0*]
 73: 0x5844 [0x23] WAIT_FOR_DIALOG_INTERACTION
 74: 0x5845 [0x52] END_LOAD_SCHEDULER: End scheduler "s058" with entities [EventEntity, EventEntity], work=893*
 75: 0x5854 [0x6B] STOP_AND_IDLE: Memorian (ID: 17756503/0x010EF157) stops current action and resets to idle (animation="idl0")
 76: 0x585D [0x02] IF !(Work_Zone[9] == 5*) GOTO 0x5879
 77: 0x5865 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s062" with entities [EventEntity, EventEntity], work=[893*, 0*]
 78: 0x5876 [0x01] GOTO 0x58A6
 79: 0x5879 [0x02] IF !(Work_Zone[9] == 6*) GOTO 0x5895
 80: 0x5881 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s062" with entities [EventEntity, EventEntity], work=[893*, 0*]
 81: 0x5892 [0x01] GOTO 0x58A6
 82: 0x5895 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s059" with entities [EventEntity, EventEntity], work=[893*, 0*]

SUBROUTINE_58A6:
 83: 0x58A6 [0x1A] CALL_SUBROUTINE(address=0x0085)
 84: 0x58A9 [0x5D] SET_MUSIC_VOLUME(volume=127*, fade_time=1*)
 85: 0x58AE [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Shantotto (ID: 17756186/0x010EF01A), tag_num=0x09)
 86: 0x58B5 [0x2B] Shantotto (ID: 17756186/0x010EF01A) [11169*]:
    → "Oh, it seems that magic doll has served its purpose at last.\u0007Now we can put its sinister visage in the past.\u007F1\u0000\u0007"
 87: 0x58BC [0x23] WAIT_FOR_DIALOG_INTERACTION
 88: 0x58BD [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Shantotto (ID: 17756186/0x010EF01A), tag_num=0x0A)
 89: 0x58C4 [0x79] LocalPlayer looks at Shantotto (ID: 17756186/0x010EF01A) (Basic look)
 90: 0x58CE [0x27] REQ_SET(priority=0x08, entity_id=Shantotto (ID: 17756186/0x010EF01A), tag_num=0x2F)
 91: 0x58D5 [0x2B] Shantotto (ID: 17756186/0x010EF01A) [11170*]:
    → "Very well.\u0007What happens next, only time will tell.\u007F1\u0000\u0007"
 92: 0x58DC [0x23] WAIT_FOR_DIALOG_INTERACTION
 93: 0x58DD [0x2A] GET_REQ_LEVEL(level=8, entity_id=Shantotto (ID: 17756186/0x010EF01A))
 94: 0x58E3 [0x02] IF !(Work_Zone[9] == 5*) GOTO 0x58FD
 95: 0x58EB [0x52] END_LOAD_SCHEDULER: End scheduler "s062" with entities [EventEntity, EventEntity], work=893*
 96: 0x58FA [0x01] GOTO 0x5926
 97: 0x58FD [0x02] IF !(Work_Zone[9] == 6*) GOTO 0x5917
 98: 0x5905 [0x52] END_LOAD_SCHEDULER: End scheduler "s062" with entities [EventEntity, EventEntity], work=893*
 99: 0x5914 [0x01] GOTO 0x5926
100: 0x5917 [0x52] END_LOAD_SCHEDULER: End scheduler "s059" with entities [EventEntity, EventEntity], work=893*

SUBROUTINE_5926:
101: 0x5926 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s060" with entities [EventEntity, EventEntity], work=[893*, 0*]
102: 0x5937 [0x1C] WAIT(60* ticks)
103: 0x593A [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Shantotto (ID: 17756186/0x010EF01A), tag_num=0x0B)
104: 0x5941 [0x2B] Shantotto (ID: 17756186/0x010EF01A) [11171*]:
    → "Now that it's all over, this magic doll is kind of cute, I must say...\u0007On second thought, I take that back. Clearly, the influence of Koru-Moru is still at play.\u007F1\u0000\u0007"
105: 0x5948 [0x23] WAIT_FOR_DIALOG_INTERACTION
106: 0x5949 [0x5D] SET_MUSIC_VOLUME(volume=0*, fade_time=300*)
107: 0x594E [0x1A] CALL_SUBROUTINE(address=0x0064)
108: 0x5951 [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Shantotto (ID: 17756186/0x010EF01A), tag_num=0x0C)
109: 0x5958 [0x52] END_LOAD_SCHEDULER: End scheduler "s060" with entities [EventEntity, EventEntity], work=893*
110: 0x5967 [0x59] UPDATE_ENTITY_DATA: Memorian (ID: 17756503/0x010EF157)->Render.Flags0 &= ~0x200000
111: 0x596E [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 151*
112: 0x5972 [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 151*
113: 0x5976 [0x9A] WAIT_MUSIC_SERVER()
114: 0x5977 [0x5D] SET_MUSIC_VOLUME(volume=127*, fade_time=1*)
115: 0x597C [0xAB] EventEntity->DespawnValue = 0* // Set despawn value
116: 0x5980 [0x1C] WAIT(1* ticks)
117: 0x5983 [0x46] CAMERA_CONTROL: Restore default settings
118: 0x5985 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi2" with entities [EventEntity, EventEntity], work=[200*, 0*]
119: 0x5996 [0x21] END_EVENT
120: 0x5997 [0x00] END_REQSTACK()
```
