# Event 543

## Metadata

| Field           | Value      |
|-----------------|------------|
| Event Index     | 4/4        |
| Offset          | 0x0140     |
| Data Size       | 1594 bytes |
| Calculated Size | 1594 bytes |
| Instructions    | 311        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0140: 1E F0 FF FF 7F 6F 70 03  01 00 02 10 03 05 00 04  .....op.........
0150: 10 03 00 00 05 10 03 02  00 06 10 03 03 00 07 10  ................
0160: 03 04 00 08 10 03 06 00  09 10 5B 00 80 F8 FF FF  ..........[.....
0170: 7F F8 FF FF 7F 74 6C 6B  30 1D 1F 80 23 06 07 00  .....tlk0...#...
0180: 03 0C 00 0D 80 02 03 00  01 80 00 A5 01 02 04 00  ................
0190: 01 80 00 9D 01 03 0D 00  20 80 01 A2 01 03 0D 00  ........ .......
01A0: 21 80 01 AA 01 03 0D 00  22 80 02 0C 00 01 80 02  !.......".......
01B0: 9A 03 24 23 80 07 00 0D  00 25 02 00 10 01 80 00  ..$#.....%......
01C0: 3B 02 03 07 00 00 10 02  01 00 01 80 80 D6 01 1D  ;...............
01D0: 17 80 23 01 FC 01 02 01  00 0D 80 80 E9 01 1D 24  ..#............$
01E0: 80 23 1D 25 80 23 01 FC  01 02 01 00 26 80 80 FC  .#.%.#......&...
01F0: 01 1D 27 80 23 1D 28 80  23 01 FC 01 24 18 80 0D  ..'.#.(.#...$...
0200: 80 01 80 25 02 00 10 01  80 00 24 02 42 07 01 00  ...%......$.B...
0210: 19 80 03 01 10 01 00 1D  1A 80 23 0C 0C 00 01 9C  ..........#.....
0220: 03 01 38 02 02 00 10 0D  80 00 38 02 1D 1B 80 23  ..8.......8....#
0230: 03 01 10 1C 80 01 38 02  01 97 03 02 00 10 0D 80  ......8.........
0240: 00 C8 02 42 03 07 00 00  10 03 01 10 29 80 43 00  ...B........).C.
0250: 43 01 03 01 00 02 10 03  05 00 04 10 03 00 00 05  C...............
0260: 10 03 02 00 06 10 03 03  00 07 10 03 04 00 08 10  ................
0270: 03 06 00 09 10 02 02 00  01 80 02 B5 02 03 02 10  ................
0280: 02 00 03 03 10 02 00 14  03 10 26 80 5B 00 80 F8  ..........&.[...
0290: FF FF 7F F8 FF FF 7F 62  69 6B 30 1D 2A 80 23 5B  .......bik0.*.#[
02A0: 00 80 F8 FF FF 7F F8 FF  FF 7F 74 6C 6B 30 1D 2B  ..........tlk0.+
02B0: 80 23 01 BD 02 1D 2C 80  23 1D 2B 80 23 0C 0C 00  .#....,.#.+.#...
02C0: 03 01 10 2D 80 01 97 03  02 00 10 26 80 00 DB 02  ...-.......&....
02D0: 03 07 00 00 10 1A 50 04  01 97 03 02 00 10 2E 80  ......P.........
02E0: 00 EE 02 03 07 00 00 10  1A 98 05 01 97 03 02 00  ................
02F0: 10 2F 80 00 07 03 03 07  00 00 10 03 02 10 05 00  ./..............
0300: 1D 30 80 23 01 97 03 02  00 10 31 80 00 1F 03 03  .0.#......1.....
0310: 07 00 00 10 03 01 10 32  80 0C 0C 00 01 97 03 02  .......2........
0320: 00 10 33 80 00 3B 03 03  07 00 00 10 1D 34 80 23  ..3..;.......4.#
0330: 03 01 10 35 80 0C 0C 00  01 97 03 02 00 10 36 80  ...5..........6.
0340: 00 6F 03 03 07 00 00 10  1D 37 80 23 1D 0F 80 23  .o.......7.#...#
0350: 1D 10 80 23 1D 11 80 23  1D 12 80 23 1D 13 80 23  ...#...#...#...#
0360: 1D 14 80 23 1D 15 80 23  1D 16 80 23 01 97 03 02  ...#...#...#....
0370: 00 10 38 80 00 97 03 03  07 00 00 10 0C 0C 00 02  ..8.............
0380: 03 00 01 80 00 8F 03 03  01 10 1C 80 01 94 03 03  ................
0390: 01 10 39 80 01 97 03 01  AA 01 21 00 42 13 10 00  ..9.......!.B...
03A0: 26 80 45 3A 80 F0 FF FF  7F F0 FF FF 7F 66 64 6F  &.E:.........fdo
03B0: 31 01 80 55 3A 80 F0 FF  FF 7F F0 FF FF 7F 66 64  1..U:.........fd
03C0: 6F 31 02 10 00 01 80 80  E6 03 BA F0 FF FF 7F 3B  o1.............;
03D0: 80 3C 80 3D 80 3E 80 47  00 3B 80 3C 80 3D 80 3E  .<.=.>.G.;.<.=.>
03E0: 80 47 01 01 2E 04 02 10  00 0D 80 80 0A 04 BA F0  .G..............
03F0: FF FF 7F 3F 80 40 80 41  80 42 80 47 00 3F 80 40  ...?.@.A.B.G.?.@
0400: 80 41 80 42 80 47 01 01  2E 04 02 10 00 26 80 80  .A.B.G.......&..
0410: 2E 04 BA F0 FF FF 7F 43  80 44 80 45 80 01 80 47  .......C.D.E...G
0420: 00 43 80 44 80 45 80 01  80 47 01 01 2E 04 45 3A  .C.D.E...G....E:
0430: 80 F0 FF FF 7F F0 FF FF  7F 66 64 69 31 01 80 55  .........fdi1..U
0440: 3A 80 F0 FF FF 7F F0 FF  FF 7F 66 64 69 31 21 00  :.........fdi1!.
0450: 0B 0C 00 06 08 00 1D 46  80 23 1D 47 80 23 02 0C  .......F.#.G.#..
0460: 00 0D 80 02 97 05 03 02  10 48 80 03 03 10 49 80  .........H....I.
0470: 03 04 10 4A 80 03 05 10  4B 80 03 06 10 4C 80 03  ...J....K....L..
0480: 03 17 4D 80 03 04 17 4D  80 03 05 17 4E 80 03 06  ..M....M....N...
0490: 17 4D 80 03 07 17 4F 80  03 16 17 05 00 03 0E 00  .M....O.........
04A0: 50 80 D4 03 01 80 02 10  D4 03 0D 80 03 10 D4 03  P...............
04B0: 26 80 04 10 D4 03 2E 80  05 10 D4 03 2F 80 06 10  &.........../...
04C0: D4 02 51 80 08 00 0E 00  25 02 00 10 1E 80 00 DA  ..Q.....%.......
04D0: 04 06 08 00 0C 0C 00 01  DA 04 02 00 10 1C 80 05  ................
04E0: 94 05 03 08 00 00 10 02  00 10 01 80 80 03 05 03  ................
04F0: 01 10 52 80 D4 03 01 80  02 10 D4 03 0D 80 02 10  ..R.............
0500: 01 73 05 02 00 10 0D 80  80 1F 05 03 01 10 53 80  .s............S.
0510: D4 03 01 80 03 10 D4 03  0D 80 03 10 01 73 05 02  .............s..
0520: 00 10 26 80 80 3B 05 03  01 10 54 80 D4 03 01 80  ..&..;....T.....
0530: 04 10 D4 03 0D 80 04 10  01 73 05 02 00 10 2E 80  .........s......
0540: 80 57 05 03 01 10 55 80  D4 03 01 80 05 10 D4 03  .W....U.........
0550: 0D 80 05 10 01 73 05 02  00 10 2F 80 80 73 05 03  .....s..../..s..
0560: 01 10 56 80 D4 03 01 80  06 10 D4 03 0D 80 06 10  ..V.............
0570: 01 73 05 D4 02 57 80 0D  80 01 80 25 02 00 10 01  .s...W.....%....
0580: 80 00 89 05 21 00 01 94  05 02 00 10 0D 80 00 94  ....!...........
0590: 05 01 94 05 01 5E 04 1B  0B 0C 00 06 11 00 06 08  .....^..........
05A0: 00 1D 58 80 23 1D 59 80  23 02 0C 00 0D 80 02 D4  ..X.#.Y.#.......
05B0: 06 03 02 10 5A 80 03 03  10 3A 80 03 04 10 4D 80  ....Z....:....M.
05C0: 03 16 17 05 00 02 06 00  2E 80 00 D3 05 06 0E 00  ................
05D0: 01 E8 05 02 06 00 26 80  00 E3 05 03 0E 00 2F 80  ......&......./.
05E0: 01 E8 05 03 0E 00 33 80  24 5B 80 08 00 0E 00 25  ......3.$[.....%
05F0: 02 00 10 2E 80 00 01 06  06 08 00 0C 0C 00 01 01  ................
0600: 06 02 00 10 26 80 05 D1  06 03 08 00 00 10 02 00  ....&...........
0610: 10 01 80 80 2C 06 03 0F  00 00 10 03 11 00 5A 80  ....,.........Z.
0620: 03 01 10 5A 80 43 00 43  01 01 68 06 02 00 10 0D  ...Z.C.C..h.....
0630: 80 80 4A 06 03 0F 00 00  10 03 11 00 3A 80 03 01  ..J.........:...
0640: 10 5C 80 43 00 43 01 01  68 06 02 00 10 26 80 80  .\.C.C..h....&..
0650: 68 06 03 0F 00 00 10 03  11 00 4D 80 03 01 10 5D  h.........M....]
0660: 80 43 00 43 01 01 68 06  1D 5E 80 23 24 5F 80 0D  .C.C..h..^.#$_..
0670: 80 01 80 25 02 00 10 01  80 00 C6 06 02 0F 00 01  ...%............
0680: 80 80 93 06 03 01 10 60  80 43 00 43 01 1A D5 06  .......`.C.C....
0690: 01 C1 06 02 0F 00 0D 80  80 AA 06 03 01 10 61 80  ..............a.
06A0: 43 00 43 01 1A D5 06 01  C1 06 02 0F 00 26 80 80  C.C..........&..
06B0: C1 06 03 01 10 62 80 43  00 43 01 1A D5 06 01 C1  .....b.C.C......
06C0: 06 21 00 01 D1 06 02 00  10 0D 80 00 D1 06 01 D1  .!..............
06D0: 06 01 A9 05 1B 42 02 06  10 01 80 00 08 07 5B 00  .....B........[.
06E0: 80 F8 FF FF 7F F8 FF FF  7F 62 69 6B 30 1D 63 80  .........bik0.c.
06F0: 23 5B 00 80 F8 FF FF 7F  F8 FF FF 7F 74 6C 6B 30  #[..........tlk0
0700: 03 01 10 64 80 01 79 07  02 06 10 65 80 00 6B 07  ...d..y....e..k.
0710: 5B 00 80 F8 FF FF 7F F8  FF FF 7F 62 69 6B 30 1D  [..........bik0.
0720: 63 80 23 5B 00 80 F8 FF  FF 7F F8 FF FF 7F 74 6C  c.#[..........tl
0730: 6B 30 1D 66 80 23 24 67  80 01 80 01 80 25 02 00  k0.f.#$g.....%..
0740: 10 01 80 00 53 07 1D 68  80 23 03 01 10 69 80 1B  ....S..h.#...i..
0750: 01 68 07 02 00 10 0D 80  00 68 07 1D 34 80 23 03  .h.......h..4.#.
0760: 01 10 6A 80 1B 01 68 07  01 79 07 02 06 10 04 80  ..j...h..y......
0770: 00 79 07 03 01 10 6B 80  1B 1B                    .y....k...      
```

## Opcodes

```
  0: 0x0140 [0x1E] EventEntity looks at LocalPlayer and starts talking
  1: 0x0145 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  2: 0x0146 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
  3: 0x0147 [0x03] ExtData[1]->WorkLocal[1] = Work_Zone[2]
  4: 0x014C [0x03] ExtData[1]->WorkLocal[5] = Work_Zone[4]
  5: 0x0151 [0x03] ExtData[1]->WorkLocal[0] = Work_Zone[5]
  6: 0x0156 [0x03] ExtData[1]->WorkLocal[2] = Work_Zone[6]
  7: 0x015B [0x03] ExtData[1]->WorkLocal[3] = Work_Zone[7]
  8: 0x0160 [0x03] ExtData[1]->WorkLocal[4] = Work_Zone[8]
  9: 0x0165 [0x03] ExtData[1]->WorkLocal[6] = Work_Zone[9]
 10: 0x016A [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=2161*
 11: 0x0179 [0x1D] PRINT_EVENT_MESSAGE(message_id=10578*)
    → "Why, hello!\u007F1\u0000\u0007"
 12: 0x017C [0x23] WAIT_FOR_DIALOG_INTERACTION
 13: 0x017D [0x06] ExtData[1]->WorkLocal[7] = 0
 14: 0x0180 [0x03] ExtData[1]->WorkLocal[12] = 1*
 15: 0x0185 [0x02] IF !(ExtData[1]->WorkLocal[3] == 0*) GOTO 0x01A5
 16: 0x018D [0x02] IF !(ExtData[1]->WorkLocal[4] == 0*) GOTO 0x019D
 17: 0x0195 [0x03] ExtData[1]->WorkLocal[13] = 98*
 18: 0x019A [0x01] GOTO 0x01A2
 19: 0x019D [0x03] ExtData[1]->WorkLocal[13] = 159*

SUBROUTINE_01A2:
 20: 0x01A2 [0x01] GOTO 0x01AA
 21: 0x01A5 [0x03] ExtData[1]->WorkLocal[13] = 125*

SUBROUTINE_01AA:
 22: 0x01AA [0x02] IF !(ExtData[1]->WorkLocal[12] <= 0*) GOTO 0x039A
 23: 0x01B2 [0x24] CREATE_DIALOG(message_id=10579*, default_option=ExtData[1]->WorkLocal[7], option_flags=ExtData[1]->WorkLocal[13])
    → "Inquire about what?\u0007\u000BI want to play the game.\u0007I'm ready to turn in my shards.\u0007I want to exchange small seeds.\u0007Let me try the grab bag.\u0007How many seeds do I have?\u0007I'd like the items you're holding for me.\u0007Dispose of what you're holding for me.\u0007Tell me how the game works.\u0007No questions for now.\u007F1\u0000\u0007"
 24: 0x01B9 [0x25] WAIT_DIALOG_SELECT()
 25: 0x01BA [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x023B
 26: 0x01C2 [0x03] ExtData[1]->WorkLocal[7] = Work_Zone[0]
 27: 0x01C7 [0x02] IF !(ExtData[1]->WorkLocal[1] == 0*) GOTO 0x01D6
 28: 0x01CF [0x1D] PRINT_EVENT_MESSAGE(message_id=10574*)
    → "I can fly you right to the starting point. Just say the word!\u007F1\u0000\u0007"
 29: 0x01D2 [0x23] WAIT_FOR_DIALOG_INTERACTION
 30: 0x01D3 [0x01] GOTO 0x01FC
 31: 0x01D6 [0x02] IF !(ExtData[1]->WorkLocal[1] == 1*) GOTO 0x01E9
 32: 0x01DE [0x1D] PRINT_EVENT_MESSAGE(message_id=10580*)
    → "You look like you'll be able to try for even harder things in this game!\u007F1\u0000\u0007"
 33: 0x01E1 [0x23] WAIT_FOR_DIALOG_INTERACTION
 34: 0x01E2 [0x1D] PRINT_EVENT_MESSAGE(message_id=10581*)
    → "My friends'll try to get in your way even more. Are you sure you're ready?\u007F1\u0000\u0007"
 35: 0x01E5 [0x23] WAIT_FOR_DIALOG_INTERACTION
 36: 0x01E6 [0x01] GOTO 0x01FC
 37: 0x01E9 [0x02] IF !(ExtData[1]->WorkLocal[1] == 2*) GOTO 0x01FC
 38: 0x01F1 [0x1D] PRINT_EVENT_MESSAGE(message_id=10582*)
    → "Wow! I'll bet you're ready for the championship round!\u007F1\u0000\u0007"
 39: 0x01F4 [0x23] WAIT_FOR_DIALOG_INTERACTION
 40: 0x01F5 [0x1D] PRINT_EVENT_MESSAGE(message_id=10583*)
    → "My friends'll surely never let you get away now! Sure you want to try anyway?\u007F1\u0000\u0007"
 41: 0x01F8 [0x23] WAIT_FOR_DIALOG_INTERACTION
 42: 0x01F9 [0x01] GOTO 0x01FC

SUBROUTINE_01FC:
 43: 0x01FC [0x24] CREATE_DIALOG(message_id=10575*, default_option=1*, option_flags=0*)
    → "Ready for mischief?\u0007\u000BThe sun will bow before me!\u0007The light...it burns us!\u007F1\u0000\u0007"
 44: 0x0203 [0x25] WAIT_DIALOG_SELECT()
 45: 0x0204 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x0224
 46: 0x020C [0x42] SET_CLI_EVENT_CANCEL_DATA()
 47: 0x020D [0x07] ExtData[1]->WorkLocal[1] += 100*
 48: 0x0212 [0x03] Work_Zone[1] = ExtData[1]->WorkLocal[1]
 49: 0x0217 [0x1D] PRINT_EVENT_MESSAGE(message_id=10577*)
    → "Good luck! Collect as many as you can and bring them back to me!\u007F1\u0000\u0007"
 50: 0x021A [0x23] WAIT_FOR_DIALOG_INTERACTION
 51: 0x021B [0x0C] ExtData[1]->WorkLocal[12]--
 52: 0x021E [0x01] GOTO 0x039C

SUBROUTINE_0238:
 53: 0x0238 [0x01] GOTO 0x0397
 54: 0x023B [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x02C8
 55: 0x0243 [0x42] SET_CLI_EVENT_CANCEL_DATA()
 56: 0x0244 [0x03] ExtData[1]->WorkLocal[7] = Work_Zone[0]
 57: 0x0249 [0x03] Work_Zone[1] = 56*
 58: 0x024E [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
 59: 0x0250 [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
 60: 0x0252 [0x03] ExtData[1]->WorkLocal[1] = Work_Zone[2]
 61: 0x0257 [0x03] ExtData[1]->WorkLocal[5] = Work_Zone[4]
 62: 0x025C [0x03] ExtData[1]->WorkLocal[0] = Work_Zone[5]
 63: 0x0261 [0x03] ExtData[1]->WorkLocal[2] = Work_Zone[6]
 64: 0x0266 [0x03] ExtData[1]->WorkLocal[3] = Work_Zone[7]
 65: 0x026B [0x03] ExtData[1]->WorkLocal[4] = Work_Zone[8]
 66: 0x0270 [0x03] ExtData[1]->WorkLocal[6] = Work_Zone[9]
 67: 0x0275 [0x02] IF !(ExtData[1]->WorkLocal[2] <= 0*) GOTO 0x02B5
 68: 0x027D [0x03] Work_Zone[2] = ExtData[1]->WorkLocal[2]
 69: 0x0282 [0x03] Work_Zone[3] = ExtData[1]->WorkLocal[2]
 70: 0x0287 [0x14] Work_Zone[3] *= 2*
 71: 0x028C [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "bik0" with entities [EventEntity, EventEntity], work=2161*
 72: 0x029B [0x1D] PRINT_EVENT_MESSAGE(message_id=10586*)
    → "You did such a lovely job! You brought me 
\u0000 shard\u007F\u0012\u0000[/s] of sunlight, so I'll give you 
\u0001 small seed\u007F\u0012\u0001[/s]!\u007F1\u0000\u0007"
 73: 0x029E [0x23] WAIT_FOR_DIALOG_INTERACTION
 74: 0x029F [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=2161*
 75: 0x02AE [0x1D] PRINT_EVENT_MESSAGE(message_id=10585*)
    → "I'll be waiting for you to play our game again!\u007F1\u0000\u0007"
 76: 0x02B1 [0x23] WAIT_FOR_DIALOG_INTERACTION
 77: 0x02B2 [0x01] GOTO 0x02BD
 78: 0x02B5 [0x1D] PRINT_EVENT_MESSAGE(message_id=10584*)
    → "Oh no...you mean you didn't find even one single shard? That's terrible...\u007F1\u0000\u0007"
 79: 0x02B8 [0x23] WAIT_FOR_DIALOG_INTERACTION
 80: 0x02B9 [0x1D] PRINT_EVENT_MESSAGE(message_id=10585*)
    → "I'll be waiting for you to play our game again!\u007F1\u0000\u0007"
 81: 0x02BC [0x23] WAIT_FOR_DIALOG_INTERACTION

SUBROUTINE_02BD:
 82: 0x02BD [0x0C] ExtData[1]->WorkLocal[12]--
 83: 0x02C0 [0x03] Work_Zone[1] = 12*
 84: 0x02C5 [0x01] GOTO 0x0397
 85: 0x02C8 [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x02DB
 86: 0x02D0 [0x03] ExtData[1]->WorkLocal[7] = Work_Zone[0]
 87: 0x02D5 [0x1A] CALL_SUBROUTINE(address=0x0450)
 88: 0x02D8 [0x01] GOTO 0x0397
 89: 0x02DB [0x02] IF !(Work_Zone[0] == 3*) GOTO 0x02EE
 90: 0x02E3 [0x03] ExtData[1]->WorkLocal[7] = Work_Zone[0]
 91: 0x02E8 [0x1A] CALL_SUBROUTINE(address=0x0598)
 92: 0x02EB [0x01] GOTO 0x0397
 93: 0x02EE [0x02] IF !(Work_Zone[0] == 4*) GOTO 0x0307
 94: 0x02F6 [0x03] ExtData[1]->WorkLocal[7] = Work_Zone[0]
 95: 0x02FB [0x03] Work_Zone[2] = ExtData[1]->WorkLocal[5]
 96: 0x0300 [0x1D] PRINT_EVENT_MESSAGE(message_id=10601*)
    → "You have a total of 
\u0000 small seed\u007F\u0012\u0000[/s].\u007F1\u0000\u0007"
 97: 0x0303 [0x23] WAIT_FOR_DIALOG_INTERACTION
 98: 0x0304 [0x01] GOTO 0x0397
 99: 0x0307 [0x02] IF !(Work_Zone[0] == 5*) GOTO 0x031F
100: 0x030F [0x03] ExtData[1]->WorkLocal[7] = Work_Zone[0]
101: 0x0314 [0x03] Work_Zone[1] = 21*
102: 0x0319 [0x0C] ExtData[1]->WorkLocal[12]--
103: 0x031C [0x01] GOTO 0x0397
104: 0x031F [0x02] IF !(Work_Zone[0] == 6*) GOTO 0x033B
105: 0x0327 [0x03] ExtData[1]->WorkLocal[7] = Work_Zone[0]
106: 0x032C [0x1D] PRINT_EVENT_MESSAGE(message_id=10600*)
    → "Then...you won't mind if I have it!\u007F1\u0000\u0007"
107: 0x032F [0x23] WAIT_FOR_DIALOG_INTERACTION
108: 0x0330 [0x03] Work_Zone[1] = 23*
109: 0x0335 [0x0C] ExtData[1]->WorkLocal[12]--
110: 0x0338 [0x01] GOTO 0x0397
111: 0x033B [0x02] IF !(Work_Zone[0] == 7*) GOTO 0x036F
112: 0x0343 [0x03] ExtData[1]->WorkLocal[7] = Work_Zone[0]
113: 0x0348 [0x1D] PRINT_EVENT_MESSAGE(message_id=10602*)
    → "The goal of sunshine seeker is to collect shards of sunlight!\u007F1\u0000\u0007"
114: 0x034B [0x23] WAIT_FOR_DIALOG_INTERACTION
115: 0x034C [0x1D] PRINT_EVENT_MESSAGE(message_id=10566*)
    → "I'll give you some small seeds in exchange for the shards of sunlight you bring back.\u007F1\u0000\u0007"
116: 0x034F [0x23] WAIT_FOR_DIALOG_INTERACTION
117: 0x0350 [0x1D] PRINT_EVENT_MESSAGE(message_id=10567*)
    → "Even better! I've got some special things available for you to buy with your seeds!\u007F1\u0000\u0007"
118: 0x0353 [0x23] WAIT_FOR_DIALOG_INTERACTION
119: 0x0354 [0x1D] PRINT_EVENT_MESSAGE(message_id=10568*)
    → "But here's the best part--If you try your luck with my grab bag enough times, you might win something really super!\u007F1\u0000\u0007"
120: 0x0357 [0x23] WAIT_FOR_DIALOG_INTERACTION
121: 0x0358 [0x1D] PRINT_EVENT_MESSAGE(message_id=10569*)
    → "One of the rules of the game is that you must be a mandragora, like me, or else you won't be able to collect any shards.\u007F1\u0000\u0007"
122: 0x035B [0x23] WAIT_FOR_DIALOG_INTERACTION
123: 0x035C [0x1D] PRINT_EVENT_MESSAGE(message_id=10570*)
    → "They can be found all around here. But if you don't hurry, someone else might gobble them up.\u007F1\u0000\u0007"
124: 0x035F [0x23] WAIT_FOR_DIALOG_INTERACTION
125: 0x0360 [0x1D] PRINT_EVENT_MESSAGE(message_id=10571*)
    → "But once you've taken them from one place, you can't get any more from there by searching it repeatedly!\u007F1\u0000\u0007"
126: 0x0363 [0x23] WAIT_FOR_DIALOG_INTERACTION
127: 0x0364 [0x1D] PRINT_EVENT_MESSAGE(message_id=10572*)
    → "Shards of sunlight are really delicate, so they'll disappear if you leave this area or take too much time getting them back to me.\u007F1\u0000\u0007"
128: 0x0367 [0x23] WAIT_FOR_DIALOG_INTERACTION
129: 0x0368 [0x1D] PRINT_EVENT_MESSAGE(message_id=10573*)
    → "My friends'll also try to get in your way, so be sure not to get noticed!\u007F1\u0000\u0007"
130: 0x036B [0x23] WAIT_FOR_DIALOG_INTERACTION
131: 0x036C [0x01] GOTO 0x0397
132: 0x036F [0x02] IF !(Work_Zone[0] == 8*) GOTO 0x0397
133: 0x0377 [0x03] ExtData[1]->WorkLocal[7] = Work_Zone[0]
134: 0x037C [0x0C] ExtData[1]->WorkLocal[12]--
135: 0x037F [0x02] IF !(ExtData[1]->WorkLocal[3] == 0*) GOTO 0x038F
136: 0x0387 [0x03] Work_Zone[1] = 10*
137: 0x038C [0x01] GOTO 0x0394
138: 0x038F [0x03] Work_Zone[1] = 22*

SUBROUTINE_0394:
139: 0x0394 [0x01] GOTO 0x0397

SUBROUTINE_0397:
140: 0x0397 [0x01] GOTO 0x01AA
141: 0x039A [0x21] END_EVENT
142: 0x039B [0x00] END_REQSTACK()

SUBROUTINE_039C:
143: 0x039C [0x42] SET_CLI_EVENT_CANCEL_DATA()
144: 0x039D [0x13] ExtData[1]->WorkLocal[16] = rand() % 2*
145: 0x03A2 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
146: 0x03B3 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=200*
147: 0x03C2 [0x02] IF !(ExtData[1]->WorkLocal[16] == 0*) GOTO 0x03E6
148: 0x03CA [0xBA] SET_ENTITY_POSITION(entity_id=LocalPlayer, pos_x=110.000*, pos_z=152.000*, pos_y=-11.500*, direction=180.0°*)
149: 0x03D7 [0x47] UPDATE_PLAYER_POS(110.000*, 152.000*, -11.500*, yaw=180.0°*)
150: 0x03E1 [0x47] WAIT_PLAYER_POS_UPDATE
151: 0x03E3 [0x01] GOTO 0x042E
152: 0x03E6 [0x02] IF !(ExtData[1]->WorkLocal[16] == 1*) GOTO 0x040A
153: 0x03EE [0xBA] SET_ENTITY_POSITION(entity_id=LocalPlayer, pos_x=-4.000*, pos_z=282.000*, pos_y=-10.524*, direction=92.1°*)
154: 0x03FB [0x47] UPDATE_PLAYER_POS(-4.000*, 282.000*, -10.524*, yaw=92.1°*)
155: 0x0405 [0x47] WAIT_PLAYER_POS_UPDATE
156: 0x0407 [0x01] GOTO 0x042E
157: 0x040A [0x02] IF !(ExtData[1]->WorkLocal[16] == 2*) GOTO 0x042E
158: 0x0412 [0xBA] SET_ENTITY_POSITION(entity_id=LocalPlayer, pos_x=-184.000*, pos_z=148.000*, pos_y=-2.889*, direction=0.0°*)
159: 0x041F [0x47] UPDATE_PLAYER_POS(-184.000*, 148.000*, -2.889*, yaw=0.0°*)
160: 0x0429 [0x47] WAIT_PLAYER_POS_UPDATE
161: 0x042B [0x01] GOTO 0x042E

SUBROUTINE_042E:
162: 0x042E [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
163: 0x043F [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=200*
164: 0x044E [0x21] END_EVENT
165: 0x044F [0x00] END_REQSTACK()

SUBROUTINE_0450:
166: 0x0450 [0x0B] ExtData[1]->WorkLocal[12]++
167: 0x0453 [0x06] ExtData[1]->WorkLocal[8] = 0
168: 0x0456 [0x1D] PRINT_EVENT_MESSAGE(message_id=10587*)
    → "I can give you so many pretty gifts in exchange for your small seeds!\u007F1\u0000\u0007"
169: 0x0459 [0x23] WAIT_FOR_DIALOG_INTERACTION
170: 0x045A [0x1D] PRINT_EVENT_MESSAGE(message_id=10588*)
    → "Which would you like?\u007F1\u0000\u0007"
171: 0x045D [0x23] WAIT_FOR_DIALOG_INTERACTION

SUBROUTINE_045E:
172: 0x045E [0x02] IF !(ExtData[1]->WorkLocal[12] <= 1*) GOTO 0x0597
173: 0x0466 [0x03] Work_Zone[2] = 26706*
174: 0x046B [0x03] Work_Zone[3] = 27855*
175: 0x0470 [0x03] Work_Zone[4] = 10143*
176: 0x0475 [0x03] Work_Zone[5] = 22051*
177: 0x047A [0x03] Work_Zone[6] = 6695*
178: 0x047F [0x03] Work_Zone_1700[3] = 500*
179: 0x0484 [0x03] Work_Zone_1700[4] = 500*
180: 0x0489 [0x03] Work_Zone_1700[5] = 300*
181: 0x048E [0x03] Work_Zone_1700[6] = 500*
182: 0x0493 [0x03] Work_Zone_1700[7] = 1500*
183: 0x0498 [0x03] Work_Zone_1700[22] = ExtData[1]->WorkLocal[5]
184: 0x049D [0x03] ExtData[1]->WorkLocal[14] = 2016*
185: 0x04A2 [0xD4] MAP_QUERY_WINDOW: Prepare buffer configuration A (buffer=[01 80 02 10 D4 03 0D 80...])
186: 0x04C0 [0xD4] MAP_QUERY_WINDOW: Test and open query window (flag=0x51, work=[0x0880, 0x0E00, 0x2500])
187: 0x04C9 [0x02] IF !(Work_Zone[0] == 11*) GOTO 0x04DA
188: 0x04D1 [0x06] ExtData[1]->WorkLocal[8] = 0
189: 0x04D4 [0x0C] ExtData[1]->WorkLocal[12]--
190: 0x04D7 [0x01] GOTO 0x04DA

SUBROUTINE_04DA:
191: 0x04DA [0x02] IF !(Work_Zone[0] > 10*) GOTO 0x0594
192: 0x04E2 [0x03] ExtData[1]->WorkLocal[8] = Work_Zone[0]
193: 0x04E7 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x0503
194: 0x04EF [0x03] Work_Zone[1] = 14*
195: 0x04F4 [0xD4] MAP_QUERY_WINDOW: Prepare buffer configuration A (buffer=[01 80 02 10 D4 03 0D 80...])
196: 0x0512 [0x01] GOTO 0x0380
197: 0x0515 [0x10] 0x03D4 <<= 1*
198: 0x051A [0x03] 0x0110 = 0x0573
199: 0x051F [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x053B
200: 0x0527 [0x03] Work_Zone[1] = 16*
201: 0x052C [0xD4] MAP_QUERY_WINDOW: Prepare buffer configuration A (buffer=[01 80 04 10 D4 03 0D 80...])
202: 0x054A [0x01] GOTO 0x0580
203: 0x054D [0x10] 0x03D4 <<= 1*
204: 0x0552 [0x05] 0x0110 = 1
205: 0x0555 [0x73] Unknown NPC (ID: 2150567936/0x802F1000) casts magic 0x0205 on Unknown NPC (ID: 50688896/0x03057380)
206: 0x0560 [0x01] GOTO 0x5610

SUBROUTINE_0594:
207: 0x0594 [0x01] GOTO 0x045E
208: 0x0597 [0x1B] RETURN

SUBROUTINE_0598:
209: 0x0598 [0x0B] ExtData[1]->WorkLocal[12]++
210: 0x059B [0x06] ExtData[1]->WorkLocal[17] = 0
211: 0x059E [0x06] ExtData[1]->WorkLocal[8] = 0
212: 0x05A1 [0x1D] PRINT_EVENT_MESSAGE(message_id=10591*)
    → "I've prepared a little grab bag you can enjoy for some small seeds.\u007F1\u0000\u0007"
213: 0x05A4 [0x23] WAIT_FOR_DIALOG_INTERACTION
214: 0x05A5 [0x1D] PRINT_EVENT_MESSAGE(message_id=10592*)
    → "Which would you like to try?\u007F1\u0000\u0007"
215: 0x05A8 [0x23] WAIT_FOR_DIALOG_INTERACTION

SUBROUTINE_05A9:
216: 0x05A9 [0x02] IF !(ExtData[1]->WorkLocal[12] <= 1*) GOTO 0x06D4
217: 0x05B1 [0x03] Work_Zone[2] = 50*
218: 0x05B6 [0x03] Work_Zone[3] = 200*
219: 0x05BB [0x03] Work_Zone[4] = 500*
220: 0x05C0 [0x03] Work_Zone_1700[22] = ExtData[1]->WorkLocal[5]
221: 0x05C5 [0x02] IF !(ExtData[1]->WorkLocal[6] == 3*) GOTO 0x05D3
222: 0x05CD [0x06] ExtData[1]->WorkLocal[14] = 0
223: 0x05D0 [0x01] GOTO 0x05E8
224: 0x05D3 [0x02] IF !(ExtData[1]->WorkLocal[6] == 2*) GOTO 0x05E3
225: 0x05DB [0x03] ExtData[1]->WorkLocal[14] = 4*
226: 0x05E0 [0x01] GOTO 0x05E8
227: 0x05E3 [0x03] ExtData[1]->WorkLocal[14] = 6*

SUBROUTINE_05E8:
228: 0x05E8 [0x24] CREATE_DIALOG(message_id=10593*, default_option=ExtData[1]->WorkLocal[8], option_flags=ExtData[1]->WorkLocal[14])
    → "Pick your poison. (
\u001E seed\u007F\u0012\u001E[/s])\u0007\u000BThe 
\u0000-seed grab bag.\u0007The 
\u0001-seed grab bag.\u0007The 
\u0002-seed grab bag.\u0007No poison, thanks.\u007F1\u0000\u0007"
229: 0x05EF [0x25] WAIT_DIALOG_SELECT()
230: 0x05F0 [0x02] IF !(Work_Zone[0] == 3*) GOTO 0x0601
231: 0x05F8 [0x06] ExtData[1]->WorkLocal[8] = 0
232: 0x05FB [0x0C] ExtData[1]->WorkLocal[12]--
233: 0x05FE [0x01] GOTO 0x0601

SUBROUTINE_0601:
234: 0x0601 [0x02] IF !(Work_Zone[0] > 2*) GOTO 0x06D1
235: 0x0609 [0x03] ExtData[1]->WorkLocal[8] = Work_Zone[0]
236: 0x060E [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x062C
237: 0x0616 [0x03] ExtData[1]->WorkLocal[15] = Work_Zone[0]
238: 0x061B [0x03] ExtData[1]->WorkLocal[17] = 50*
239: 0x0620 [0x03] Work_Zone[1] = 50*
240: 0x0625 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
241: 0x0627 [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
242: 0x0629 [0x01] GOTO 0x0668
243: 0x062C [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x064A
244: 0x0634 [0x03] ExtData[1]->WorkLocal[15] = Work_Zone[0]
245: 0x0639 [0x03] ExtData[1]->WorkLocal[17] = 200*
246: 0x063E [0x03] Work_Zone[1] = 51*
247: 0x0643 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
248: 0x0645 [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
249: 0x0647 [0x01] GOTO 0x0668
250: 0x064A [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x0668
251: 0x0652 [0x03] ExtData[1]->WorkLocal[15] = Work_Zone[0]
252: 0x0657 [0x03] ExtData[1]->WorkLocal[17] = 500*
253: 0x065C [0x03] Work_Zone[1] = 52*
254: 0x0661 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
255: 0x0663 [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
256: 0x0665 [0x01] GOTO 0x0668

SUBROUTINE_0668:
257: 0x0668 [0x1D] PRINT_EVENT_MESSAGE(message_id=10594*)
    → "That grab bag contains prizes like \u0001\u0005%\u0002\u0000\u0000\u0000, \u0001\u0005%\u0002\u0001\u0000\u0000, and \u0001\u0005%\u0002\u0002\u0000\u0000.\u007F1\u0000\u0007"
258: 0x066B [0x23] WAIT_FOR_DIALOG_INTERACTION
259: 0x066C [0x24] CREATE_DIALOG(message_id=10595*, default_option=1*, option_flags=0*)
    → "Press your luck?\u0007\u000BC'mon, no whammies...\u0007Not right now.\u007F1\u0000\u0007"
260: 0x0673 [0x25] WAIT_DIALOG_SELECT()
261: 0x0674 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x06C6
262: 0x067C [0x02] IF !(ExtData[1]->WorkLocal[15] == 0*) GOTO 0x0693
263: 0x0684 [0x03] Work_Zone[1] = 53*
264: 0x0689 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
265: 0x068B [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
266: 0x068D [0x1A] CALL_SUBROUTINE(address=0x06D5)
267: 0x0690 [0x01] GOTO 0x06C1
268: 0x0693 [0x02] IF !(ExtData[1]->WorkLocal[15] == 1*) GOTO 0x06AA
269: 0x069B [0x03] Work_Zone[1] = 54*
270: 0x06A0 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
271: 0x06A2 [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
272: 0x06A4 [0x1A] CALL_SUBROUTINE(address=0x06D5)
273: 0x06A7 [0x01] GOTO 0x06C1
274: 0x06AA [0x02] IF !(ExtData[1]->WorkLocal[15] == 2*) GOTO 0x06C1
275: 0x06B2 [0x03] Work_Zone[1] = 55*
276: 0x06B7 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
277: 0x06B9 [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
278: 0x06BB [0x1A] CALL_SUBROUTINE(address=0x06D5)
279: 0x06BE [0x01] GOTO 0x06C1

SUBROUTINE_06C1:
280: 0x06C1 [0x21] END_EVENT
281: 0x06C2 [0x00] END_REQSTACK()

SUBROUTINE_06D1:
282: 0x06D1 [0x01] GOTO 0x05A9
283: 0x06D4 [0x1B] RETURN

SUBROUTINE_06D5:
284: 0x06D5 [0x42] SET_CLI_EVENT_CANCEL_DATA()
285: 0x06D6 [0x02] IF !(Work_Zone[6] == 0*) GOTO 0x0708
286: 0x06DE [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "bik0" with entities [EventEntity, EventEntity], work=2161*
287: 0x06ED [0x1D] PRINT_EVENT_MESSAGE(message_id=10596*)
    → "You won \u0001\u0001\u0001 \u0001\u0005$\u0002\u0000\u0000\u0000! Congratulations!\u007F1\u0000\u0007"
288: 0x06F0 [0x23] WAIT_FOR_DIALOG_INTERACTION
289: 0x06F1 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=2161*
290: 0x0700 [0x03] Work_Zone[1] = 17*
291: 0x0705 [0x01] GOTO 0x0779
292: 0x0708 [0x02] IF !(Work_Zone[6] == 81*) GOTO 0x076B
293: 0x0710 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "bik0" with entities [EventEntity, EventEntity], work=2161*
294: 0x071F [0x1D] PRINT_EVENT_MESSAGE(message_id=10596*)
    → "You won \u0001\u0001\u0001 \u0001\u0005$\u0002\u0000\u0000\u0000! Congratulations!\u007F1\u0000\u0007"
295: 0x0722 [0x23] WAIT_FOR_DIALOG_INTERACTION
296: 0x0723 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=2161*
297: 0x0732 [0x1D] PRINT_EVENT_MESSAGE(message_id=10597*)
    → "...But your bags are full! What do you want me to do with it?\u007F1\u0000\u0007"
298: 0x0735 [0x23] WAIT_FOR_DIALOG_INTERACTION
299: 0x0736 [0x24] CREATE_DIALOG(message_id=10598*, default_option=0*, option_flags=0*)
    → "What will you do with the \u0001\u0005#\u0002\u0000\u0000\u0000?\u0007\u000BHave Babban hold it.\u0007I don't want it.\u007F1\u0000\u0007"
300: 0x073D [0x25] WAIT_DIALOG_SELECT()
301: 0x073E [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x0753
302: 0x0746 [0x1D] PRINT_EVENT_MESSAGE(message_id=10599*)
    → "I'll make sure to keep it really safe! Come back when you've made room!\u007F1\u0000\u0007"
303: 0x0749 [0x23] WAIT_FOR_DIALOG_INTERACTION
304: 0x074A [0x03] Work_Zone[1] = 18*
305: 0x074F [0x1B] RETURN

SUBROUTINE_0768:
306: 0x0768 [0x01] GOTO 0x0779
307: 0x076B [0x02] IF !(Work_Zone[6] == 80*) GOTO 0x0779
308: 0x0773 [0x03] Work_Zone[1] = 20*
309: 0x0778 [0x1B] RETURN

SUBROUTINE_0779:
310: 0x0779 [0x1B] RETURN
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x0221 [0x01] GOTO 0x0238
# Dead code (unreachable instructions):
     0x0563 [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2147550164/0x800103D4))
     0x0568 [0x06] 0xD410 = 0
     0x056B [0x03] 1* = Work_Zone[6]
     0x0570 [0x01] GOTO 0x0573
     0x0573 [0xD4] MAP_QUERY_WINDOW: Test and open query window (flag=0x57, work=[0x0D80, 0x0180, 0x2580])
     0x057C [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x0589
     0x0586 [0x01] GOTO 0x0594
     0x0589 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x0594
     0x0591 [0x01] GOTO 0x0594
# Dead code (unreachable instructions):
     0x06C3 [0x01] GOTO 0x06D1
# Dead code (unreachable instructions):
     0x0750 [0x01] GOTO 0x0768
     0x0765 [0x01] GOTO 0x0768
```