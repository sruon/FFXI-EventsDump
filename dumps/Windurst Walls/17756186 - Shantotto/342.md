# Event 342

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 113/236   |
| Offset          | 0x0ABD    |
| Data Size       | 565 bytes |
| Calculated Size | 565 bytes |
| Instructions    | 80        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0AB0:                                         20 01 42                .B
0AC0: 46 01 45 60 80 F0 FF FF  7F F0 FF FF 7F 66 64 6F  F.E`.........fdo
0AD0: 31 18 80 1C 02 80 75 00  61 80 75 01 38 19 80 29  1.....u.a.u.8..)
0AE0: 0B F0 FF FF 7F 20 1E F0  FF FF 7F 4A F0 FF FF 7F  ..... .....J....
0AF0: 1A F0 0E 01 6F 70 1C 20  80 45 62 80 F0 FF FF 7F  ....op. .Eb.....
0B00: F0 FF FF 7F 73 31 30 39  18 80 45 60 80 F0 FF FF  ....s109..E`....
0B10: 7F F0 FF FF 7F 66 64 69  31 18 80 1D 63 80 23 52  .....fdi1...c.#R
0B20: 62 80 F0 FF FF 7F F0 FF  FF 7F 73 31 30 39 45 62  b.........s109Eb
0B30: 80 F0 FF FF 7F F0 FF FF  7F 73 31 31 30 18 80 29  .........s110..)
0B40: 08 1A F0 0E 01 29 1D 64  80 23 29 08 1A F0 0E 01  .....).d.#).....
0B50: 2A 45 60 80 F0 FF FF 7F  F0 FF FF 7F 66 64 6F 31  *E`.........fdo1
0B60: 18 80 1C 65 80 45 62 80  F0 FF FF 7F F0 FF FF 7F  ...e.Eb.........
0B70: 73 31 31 31 18 80 45 60  80 F0 FF FF 7F F0 FF FF  s111..E`........
0B80: 7F 66 64 69 31 18 80 02  05 10 18 80 00 96 0B 1D  .fdi1...........
0B90: 66 80 23 01 9A 0B 1D 67  80 23 52 62 80 F0 FF FF  f.#....g.#Rb....
0BA0: 7F F0 FF FF 7F 73 31 31  31 45 62 80 F0 FF FF 7F  .....s111Eb.....
0BB0: F0 FF FF 7F 73 31 30 39  18 80 29 08 1A F0 0E 01  ....s109..).....
0BC0: 07 1D 68 80 23 29 08 1A  F0 0E 01 08 45 62 80 F0  ..h.#)......Eb..
0BD0: FF FF 7F F0 FF FF 7F 73  31 31 32 18 80 27 0B 1A  .......s112..'..
0BE0: F0 0E 01 71 29 0B F0 FF  FF 7F 21 2A 0B 1A F0 0E  ...q).....!*....
0BF0: 01 52 62 80 F0 FF FF 7F  F0 FF FF 7F 73 31 31 32  .Rb.........s112
0C00: 4B 1A F0 0E 01 69 80 1D  6A 80 23 45 62 80 F0 FF  K....i..j.#Eb...
0C10: FF 7F F0 FF FF 7F 73 31  31 30 18 80 29 08 1A F0  ......s110..)...
0C20: 0E 01 03 1D 6B 80 23 29  08 1A F0 0E 01 04 29 08  ....k.#)......).
0C30: 1A F0 0E 01 05 29 08 1A  F0 0E 01 06 1D 6C 80 23  .....).......l.#
0C40: 27 0B 1A F0 0E 01 72 1C  02 80 45 60 80 F0 FF FF  '.....r...E`....
0C50: 7F F0 FF FF 7F 66 64 6F  31 18 80 1C 60 80 2A 0B  .....fdo1...`.*.
0C60: 1A F0 0E 01 52 62 80 F0  FF FF 7F F0 FF FF 7F 73  ....Rb.........s
0C70: 31 31 32 37 6D 80 6E 80  6F 80 70 80 1E F0 FF FF  1127m.n.o.p.....
0C80: 7F 6F 70 45 62 80 F0 FF  FF 7F F0 FF FF 7F 73 31  .opEb.........s1
0C90: 30 39 18 80 45 60 80 F0  FF FF 7F F0 FF FF 7F 66  09..E`.........f
0CA0: 64 69 31 18 80 29 0B 1A  F0 0E 01 73 45 60 80 F0  di1..).....sE`..
0CB0: FF FF 7F F0 FF FF 7F 66  64 6F 31 18 80 1C 02 80  .......fdo1.....
0CC0: 29 08 1A F0 0E 01 2A 1C  20 80 46 00 45 60 80 F0  ).....*. .F.E`..
0CD0: FF FF 7F F0 FF FF 7F 66  64 69 31 18 80 45 22 80  .......fdi1..E".
0CE0: F0 FF FF 7F F0 FF FF 7F  71 73 74 63 18 80 20 00  ........qstc.. .
0CF0: 21 00                                             !.              
```

## Opcodes

```
  0: 0x0ABD [0x20] SET_CLI_EVENT_UC_FLAG: Lock player control
  1: 0x0ABF [0x42] SET_CLI_EVENT_CANCEL_DATA()
  2: 0x0AC0 [0x46] CAMERA_CONTROL: Disable user control
  3: 0x0AC2 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
  4: 0x0AD3 [0x1C] WAIT(60* ticks)
  5: 0x0AD6 [0x75] LOAD_ROOM(Load indoor room, room=405*)
  6: 0x0ADA [0x75] LOAD_ROOM(No action)
  7: 0x0ADC [0x38] SET_CLIENT_EVENT_MODE(mode=3*)
  8: 0x0ADF [0x29] REQ_SET_WAIT(priority=0x0B, entity_id=LocalPlayer, tag_num=0x20)
  9: 0x0AE6 [0x1E] EventEntity looks at LocalPlayer and starts talking
 10: 0x0AEB [0x4A] LocalPlayer looks at Shantotto (ID: 17756186/0x010EF01A)
 11: 0x0AF4 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 12: 0x0AF5 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
 13: 0x0AF6 [0x1C] WAIT(300* ticks)
 14: 0x0AF9 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s109" with entities [LocalPlayer, LocalPlayer], work=[139*, 0*]
 15: 0x0B0A [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 16: 0x0B1B [0x1D] PRINT_EVENT_MESSAGE(message_id=8121*)
    → "Dear, did you come to apologize for your failure?\u007F1\u0000\u0007"
 17: 0x0B1E [0x23] WAIT_FOR_DIALOG_INTERACTION
 18: 0x0B1F [0x52] END_LOAD_SCHEDULER: End scheduler "s109" with entities [LocalPlayer, LocalPlayer], work=139*
 19: 0x0B2E [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s110" with entities [LocalPlayer, LocalPlayer], work=[139*, 0*]
 20: 0x0B3F [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Shantotto (ID: 17756186/0x010EF01A), tag_num=0x29)
 21: 0x0B46 [0x1D] PRINT_EVENT_MESSAGE(message_id=8122*)
    → "Ohoho! My new curse will work just as fine on you, I'm sure.\u007F1\u0000\u0007"
 22: 0x0B49 [0x23] WAIT_FOR_DIALOG_INTERACTION
 23: 0x0B4A [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Shantotto (ID: 17756186/0x010EF01A), tag_num=0x2A)
 24: 0x0B51 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 25: 0x0B62 [0x1C] WAIT(100* ticks)
 26: 0x0B65 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s111" with entities [LocalPlayer, LocalPlayer], work=[139*, 0*]
 27: 0x0B76 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 28: 0x0B87 [0x02] IF !(Work_Zone[5] == 0*) GOTO 0x0B96
 29: 0x0B8F [0x1D] PRINT_EVENT_MESSAGE(message_id=8123*)
    → "What is this you're saying?\u0007The tome vanishes after fighting the golems in Fei'Yin?\u007F1\u0000\u0007"
 30: 0x0B92 [0x23] WAIT_FOR_DIALOG_INTERACTION
 31: 0x0B93 [0x01] GOTO 0x0B9A
 32: 0x0B96 [0x1D] PRINT_EVENT_MESSAGE(message_id=8133*)
    → "I doubt a total loser like you would have noticed if it was true what they were saying...\u0007But I wonder if that magic tome really vanishes when you fight the golems in Fei'Yin...\u007F1\u0000\u0007"
 33: 0x0B99 [0x23] WAIT_FOR_DIALOG_INTERACTION

SUBROUTINE_0B9A:
 34: 0x0B9A [0x52] END_LOAD_SCHEDULER: End scheduler "s111" with entities [LocalPlayer, LocalPlayer], work=139*
 35: 0x0BA9 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s109" with entities [LocalPlayer, LocalPlayer], work=[139*, 0*]
 36: 0x0BBA [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Shantotto (ID: 17756186/0x010EF01A), tag_num=0x07)
 37: 0x0BC1 [0x1D] PRINT_EVENT_MESSAGE(message_id=8124*)
    → "Those brutes don't know what a nuisance they're being!\u007F1\u0000\u0007"
 38: 0x0BC4 [0x23] WAIT_FOR_DIALOG_INTERACTION
 39: 0x0BC5 [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Shantotto (ID: 17756186/0x010EF01A), tag_num=0x08)
 40: 0x0BCC [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s112" with entities [LocalPlayer, LocalPlayer], work=[139*, 0*]
 41: 0x0BDD [0x27] REQ_SET(priority=0x0B, entity_id=Shantotto (ID: 17756186/0x010EF01A), tag_num=0x71)
 42: 0x0BE4 [0x29] REQ_SET_WAIT(priority=0x0B, entity_id=LocalPlayer, tag_num=0x21)
 43: 0x0BEB [0x2A] GET_REQ_LEVEL(level=11, entity_id=Shantotto (ID: 17756186/0x010EF01A))
 44: 0x0BF1 [0x52] END_LOAD_SCHEDULER: End scheduler "s112" with entities [LocalPlayer, LocalPlayer], work=139*
 45: 0x0C00 [0x4B] UPDATE_ENTITY_YAW(entity=Shantotto (ID: 17756186/0x010EF01A), yaw=15.2°*)
 46: 0x0C07 [0x1D] PRINT_EVENT_MESSAGE(message_id=8126*)
    → "So, how was Rukususu, the old air-head?\u0007For being deathly afraid of the undead, \u0007she's sure spent much time away from her Windurstian bed.\u007F1\u0000\u0007"
 47: 0x0C0A [0x23] WAIT_FOR_DIALOG_INTERACTION
 48: 0x0C0B [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s110" with entities [LocalPlayer, LocalPlayer], work=[139*, 0*]
 49: 0x0C1C [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Shantotto (ID: 17756186/0x010EF01A), tag_num=0x03)
 50: 0x0C23 [0x1D] PRINT_EVENT_MESSAGE(message_id=8127*)
    → "It must be the thought of getting revenge...I dread...\u0007for what happened to her professor, Iru-Kuiru, that drives her instead.\u007F1\u0000\u0007"
 51: 0x0C26 [0x23] WAIT_FOR_DIALOG_INTERACTION
 52: 0x0C27 [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Shantotto (ID: 17756186/0x010EF01A), tag_num=0x04)
 53: 0x0C2E [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Shantotto (ID: 17756186/0x010EF01A), tag_num=0x05)
 54: 0x0C35 [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Shantotto (ID: 17756186/0x010EF01A), tag_num=0x06)
 55: 0x0C3C [0x1D] PRINT_EVENT_MESSAGE(message_id=8128*)
    → "I guess I must present you with a reward for your deed.\u0007I will bestow upon you my special magic, which I'm sure you'll need.\u007F1\u0000\u0007"
 56: 0x0C3F [0x23] WAIT_FOR_DIALOG_INTERACTION
 57: 0x0C40 [0x27] REQ_SET(priority=0x0B, entity_id=Shantotto (ID: 17756186/0x010EF01A), tag_num=0x72)
 58: 0x0C47 [0x1C] WAIT(60* ticks)
 59: 0x0C4A [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 60: 0x0C5B [0x1C] WAIT(200* ticks)
 61: 0x0C5E [0x2A] GET_REQ_LEVEL(level=11, entity_id=Shantotto (ID: 17756186/0x010EF01A))
 62: 0x0C64 [0x52] END_LOAD_SCHEDULER: End scheduler "s112" with entities [LocalPlayer, LocalPlayer], work=139*
 63: 0x0C73 [0x37] UPDATE_EVENT_POSITION_AND_DIR: x=122.640*, z=113.606*, y=-3.000*, direction=8.6°*
 64: 0x0C7C [0x1E] EventEntity looks at LocalPlayer and starts talking
 65: 0x0C81 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 66: 0x0C82 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
 67: 0x0C83 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s109" with entities [LocalPlayer, LocalPlayer], work=[139*, 0*]
 68: 0x0C94 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 69: 0x0CA5 [0x29] REQ_SET_WAIT(priority=0x0B, entity_id=Shantotto (ID: 17756186/0x010EF01A), tag_num=0x73)
 70: 0x0CAC [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 71: 0x0CBD [0x1C] WAIT(60* ticks)
 72: 0x0CC0 [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Shantotto (ID: 17756186/0x010EF01A), tag_num=0x2A)
 73: 0x0CC7 [0x1C] WAIT(300* ticks)
 74: 0x0CCA [0x46] CAMERA_CONTROL: Restore default settings
 75: 0x0CCC [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 76: 0x0CDD [0x45] LOAD_SCHEDULED_TASK: Load scheduler "qstc" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
 77: 0x0CEE [0x20] SET_CLI_EVENT_UC_FLAG: Unlock player control
 78: 0x0CF0 [0x21] END_EVENT
 79: 0x0CF1 [0x00] END_REQSTACK()
```
