# Event 387

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 9/14      |
| Offset          | 0x30EA    |
| Data Size       | 670 bytes |
| Calculated Size | 670 bytes |
| Instructions    | 88        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
30E0:                                46 01 42 5D 01 80            F.B]..
30F0: 00 80 45 00 80 F8 FF FF  7F F8 FF FF 7F 66 64 6F  ..E..........fdo
3100: 31 01 80 4C 1C 00 80 38  3A 80 75 00 3E 80 75 01  1..L...8:.u.>.u.
3110: 4E 00 19 F0 0E 01 80 19  F0 0E 01 29 08 F0 FF FF  N..........)....
3120: 7F 05 29 08 F0 FF FF 7F  03 29 0B 19 F0 0E 01 2F  ..)......)...../
3130: 29 0B F0 FF FF 7F 39 4A  F0 FF FF 7F 19 F0 0E 01  ).....9J........
3140: 6F 76 F0 FF FF 7F 4D 48  66 80 23 1C 00 80 62 22  ov....MHf.#...b"
3150: 80 F0 FF FF 7F 19 F0 0E  01 6D 61 69 31 01 80 45  .........mai1..E
3160: 63 80 F0 FF FF 7F F0 FF  FF 7F 73 30 34 36 01 80  c.........s046..
3170: 45 00 80 F8 FF FF 7F F8  FF FF 7F 66 64 69 31 01  E..........fdi1.
3180: 80 1C 13 80 45 00 80 F8  FF FF 7F F8 FF FF 7F 66  ....E..........f
3190: 64 6F 31 01 80 1C 3D 80  5C 00 62 80 5C 01 62 80  do1...=.\.b.\.b.
31A0: 5D 15 80 29 80 1C 00 80  52 63 80 F0 FF FF 7F F0  ]..)....Rc......
31B0: FF FF 7F 73 30 34 36 45  63 80 F0 FF FF 7F F0 FF  ...s046Ec.......
31C0: FF 7F 73 30 34 35 01 80  45 00 80 F8 FF FF 7F F8  ..s045..E.......
31D0: FF FF 7F 66 64 69 31 01  80 29 0B 19 F0 0E 01 3B  ...fdi1..).....;
31E0: 29 08 19 F0 0E 01 01 29  0B 19 F0 0E 01 3C 29 08  )......).....<).
31F0: 19 F0 0E 01 02 52 63 80  F0 FF FF 7F F0 FF FF 7F  .....Rc.........
3200: 73 30 34 35 45 00 80 F0  FF FF 7F F0 FF FF 7F 6F  s045E..........o
3210: 76 6C 31 01 80 45 63 80  F0 FF FF 7F F0 FF FF 7F  vl1..Ec.........
3220: 73 30 34 37 01 80 29 08  19 F0 0E 01 01 29 0B 19  s047..)......)..
3230: F0 0E 01 3D 29 0B 19 F0  0E 01 3E 29 08 19 F0 0E  ...=).....>)....
3240: 01 02 52 63 80 F0 FF FF  7F F0 FF FF 7F 73 30 34  ..Rc.........s04
3250: 37 45 00 80 F0 FF FF 7F  F0 FF FF 7F 6F 76 6C 31  7E..........ovl1
3260: 01 80 45 63 80 F0 FF FF  7F F0 FF FF 7F 73 30 34  ..Ec.........s04
3270: 38 01 80 27 0B 19 F0 0E  01 31 2B 19 F0 0E 01 67  8..'.....1+....g
3280: 80 23 2A 0B 19 F0 0E 01  52 63 80 F0 FF FF 7F F0  .#*.....Rc......
3290: FF FF 7F 73 30 34 38 45  00 80 F0 FF FF 7F F0 FF  ...s048E........
32A0: FF 7F 6F 76 6C 31 01 80  45 63 80 F0 FF FF 7F F0  ..ovl1..Ec......
32B0: FF FF 7F 73 30 34 39 01  80 29 0B 19 F0 0E 01 40  ...s049..).....@
32C0: 03 02 00 01 80 02 02 00  01 80 00 39 33 24 68 80  ...........93$h.
32D0: 01 80 01 80 25 02 00 10  01 80 00 11 33 52 63 80  ....%.......3Rc.
32E0: F0 FF FF 7F F0 FF FF 7F  73 30 34 39 45 63 80 F0  ........s049Ec..
32F0: FF FF 7F F0 FF FF 7F 73  30 35 30 01 80 03 01 10  .......s050.....
3300: 29 80 29 0B 19 F0 0E 01  42 03 02 00 29 80 01 36  ).).....B...)..6
3310: 33 02 00 10 29 80 00 36  33 03 01 10 5D 80 29 08  3...)..63...].).
3320: 19 F0 0E 01 01 29 0B 19  F0 0E 01 41 29 08 19 F0  .....).....A)...
3330: 0E 01 02 01 36 33 01 C5  32 5D 01 80 00 80 45 2A  ....63..2]....E*
3340: 80 F0 FF FF 7F F0 FF FF  7F 77 68 6F 31 01 80 1C  .........who1...
3350: 07 80 52 63 80 F0 FF FF  7F F0 FF FF 7F 73 30 35  ..Rc.........s05
3360: 30 46 00 5C 00 28 80 5C  01 28 80 5D 15 80 29 80  0F.\.(.\.(.]..).
3370: 1C 00 80 45 2A 80 F0 FF  FF 7F F0 FF FF 7F 77 68  ...E*.........wh
3380: 69 31 01 80 20 00 21 00                           i1.. .!.        
```

## Opcodes

```
  0: 0x30EA [0x46] CAMERA_CONTROL: Disable user control
  1: 0x30EC [0x42] SET_CLI_EVENT_CANCEL_DATA()
  2: 0x30ED [0x5D] SET_MUSIC_VOLUME(volume=0*, fade_time=200*)
  3: 0x30F2 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [EventEntity, EventEntity], work=[200*, 0*]
  4: 0x3103 [0x4C] EventEntity->StatusEvent = 8 // Open door
  5: 0x3104 [0x1C] WAIT(200* ticks)
  6: 0x3107 [0x38] SET_CLIENT_EVENT_MODE(mode=3*)
  7: 0x310A [0x75] LOAD_ROOM(Load indoor room, room=403*)
  8: 0x310E [0x75] LOAD_ROOM(No action)
  9: 0x3110 [0x4E] SET_ENTITY_HIDE_FLAG: Show Joker (ID: 17756185/0x010EF019)
 10: 0x3116 [0x80] LOAD_WAIT(entity=Joker (ID: 17756185/0x010EF019))
 11: 0x311B [0x29] REQ_SET_WAIT(priority=0x08, entity_id=LocalPlayer, tag_num=0x05)
 12: 0x3122 [0x29] REQ_SET_WAIT(priority=0x08, entity_id=LocalPlayer, tag_num=0x03)
 13: 0x3129 [0x29] REQ_SET_WAIT(priority=0x0B, entity_id=Joker (ID: 17756185/0x010EF019), tag_num=0x2F)
 14: 0x3130 [0x29] REQ_SET_WAIT(priority=0x0B, entity_id=LocalPlayer, tag_num=0x39)
 15: 0x3137 [0x4A] LocalPlayer looks at Joker (ID: 17756185/0x010EF019)
 16: 0x3140 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 17: 0x3141 [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until LocalPlayer Render.Flags0 and Render.Flags3 conditions are met
 18: 0x3146 [0x4D] EventEntity->StatusEvent = 9 // Close door
 19: 0x3147 [0x48] [System] [8795*]:
    → "You give the \u0001\u00053\u0002\u0001\u0000\u0000 to Joker...\u0000\u0007"
 20: 0x314A [0x23] WAIT_FOR_DIALOG_INTERACTION
 21: 0x314B [0x1C] WAIT(200* ticks)
 22: 0x314E [0x62] LOAD_EVENT_SCHEDULER: Load scheduler "mai1" with entities [LocalPlayer, Joker (ID: 17756185/0x010EF019)], work=[13*, 0*]
 23: 0x315F [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s046" with entities [LocalPlayer, LocalPlayer], work=[247*, 0*]
 24: 0x3170 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [EventEntity, EventEntity], work=[200*, 0*]
 25: 0x3181 [0x1C] WAIT(300* ticks)
 26: 0x3184 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [EventEntity, EventEntity], work=[200*, 0*]
 27: 0x3195 [0x1C] WAIT(150* ticks)
 28: 0x3198 [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 159*
 29: 0x319C [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 159*
 30: 0x31A0 [0x5D] SET_MUSIC_VOLUME(volume=127*, fade_time=1*)
 31: 0x31A5 [0x1C] WAIT(200* ticks)
 32: 0x31A8 [0x52] END_LOAD_SCHEDULER: End scheduler "s046" with entities [LocalPlayer, LocalPlayer], work=247*
 33: 0x31B7 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s045" with entities [LocalPlayer, LocalPlayer], work=[247*, 0*]
 34: 0x31C8 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [EventEntity, EventEntity], work=[200*, 0*]
 35: 0x31D9 [0x29] REQ_SET_WAIT(priority=0x0B, entity_id=Joker (ID: 17756185/0x010EF019), tag_num=0x3B)
 36: 0x31E0 [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Joker (ID: 17756185/0x010EF019), tag_num=0x01)
 37: 0x31E7 [0x29] REQ_SET_WAIT(priority=0x0B, entity_id=Joker (ID: 17756185/0x010EF019), tag_num=0x3C)
 38: 0x31EE [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Joker (ID: 17756185/0x010EF019), tag_num=0x02)
 39: 0x31F5 [0x52] END_LOAD_SCHEDULER: End scheduler "s045" with entities [LocalPlayer, LocalPlayer], work=247*
 40: 0x3204 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "ovl1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 41: 0x3215 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s047" with entities [LocalPlayer, LocalPlayer], work=[247*, 0*]
 42: 0x3226 [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Joker (ID: 17756185/0x010EF019), tag_num=0x01)
 43: 0x322D [0x29] REQ_SET_WAIT(priority=0x0B, entity_id=Joker (ID: 17756185/0x010EF019), tag_num=0x3D)
 44: 0x3234 [0x29] REQ_SET_WAIT(priority=0x0B, entity_id=Joker (ID: 17756185/0x010EF019), tag_num=0x3E)
 45: 0x323B [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Joker (ID: 17756185/0x010EF019), tag_num=0x02)
 46: 0x3242 [0x52] END_LOAD_SCHEDULER: End scheduler "s047" with entities [LocalPlayer, LocalPlayer], work=247*
 47: 0x3251 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "ovl1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 48: 0x3262 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s048" with entities [LocalPlayer, LocalPlayer], work=[247*, 0*]
 49: 0x3273 [0x27] REQ_SET(priority=0x0B, entity_id=Joker (ID: 17756185/0x010EF019), tag_num=0x31)
 50: 0x327A [0x2B] Joker (ID: 17756185/0x010EF019) [8800*]:
    → "And so, \u0008,\u0007I cannot allow you to disassemble me as Honoi-Gomoi has asked you.\u007F1\u0000\u0007"
 51: 0x3281 [0x23] WAIT_FOR_DIALOG_INTERACTION
 52: 0x3282 [0x2A] GET_REQ_LEVEL(level=11, entity_id=Joker (ID: 17756185/0x010EF019))
 53: 0x3288 [0x52] END_LOAD_SCHEDULER: End scheduler "s048" with entities [LocalPlayer, LocalPlayer], work=247*
 54: 0x3297 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "ovl1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 55: 0x32A8 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s049" with entities [LocalPlayer, LocalPlayer], work=[247*, 0*]
 56: 0x32B9 [0x29] REQ_SET_WAIT(priority=0x0B, entity_id=Joker (ID: 17756185/0x010EF019), tag_num=0x40)
 57: 0x32C0 [0x03] ExtData[1]->WorkLocal[2] = 0*
 58: 0x32C5 [0x02] IF !(ExtData[1]->WorkLocal[2] == 0*) GOTO 0x3339
 59: 0x32CD [0x24] CREATE_DIALOG(message_id=8802*, default_option=0*, option_flags=0*)
    → "Accept the offer?\u0007\u000BWhen you put it that way...\u0007The hammer or the axe?\u007F1\u0000\u0007"
 60: 0x32D4 [0x25] WAIT_DIALOG_SELECT()
 61: 0x32D5 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x3311
 62: 0x32DD [0x52] END_LOAD_SCHEDULER: End scheduler "s049" with entities [LocalPlayer, LocalPlayer], work=247*
 63: 0x32EC [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s050" with entities [LocalPlayer, LocalPlayer], work=[247*, 0*]
 64: 0x32FD [0x03] Work_Zone[1] = 1*
 65: 0x3302 [0x29] REQ_SET_WAIT(priority=0x0B, entity_id=Joker (ID: 17756185/0x010EF019), tag_num=0x42)
 66: 0x3309 [0x03] ExtData[1]->WorkLocal[2] = 1*
 67: 0x330E [0x01] GOTO 0x3336

SUBROUTINE_3311:
 68: 0x3311 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x3336
 69: 0x3319 [0x03] Work_Zone[1] = 2*
 70: 0x331E [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Joker (ID: 17756185/0x010EF019), tag_num=0x01)
 71: 0x3325 [0x29] REQ_SET_WAIT(priority=0x0B, entity_id=Joker (ID: 17756185/0x010EF019), tag_num=0x41)
 72: 0x332C [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Joker (ID: 17756185/0x010EF019), tag_num=0x02)
 73: 0x3333 [0x01] GOTO 0x3336

SUBROUTINE_3336:
 74: 0x3336 [0x01] GOTO 0x32C5

SUBROUTINE_3339:
 75: 0x3339 [0x5D] SET_MUSIC_VOLUME(volume=0*, fade_time=200*)
 76: 0x333E [0x45] LOAD_SCHEDULED_TASK: Load scheduler "who1" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
 77: 0x334F [0x1C] WAIT(100* ticks)
 78: 0x3352 [0x52] END_LOAD_SCHEDULER: End scheduler "s050" with entities [LocalPlayer, LocalPlayer], work=247*
 79: 0x3361 [0x46] CAMERA_CONTROL: Restore default settings
 80: 0x3363 [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 151*
 81: 0x3367 [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 151*
 82: 0x336B [0x5D] SET_MUSIC_VOLUME(volume=127*, fade_time=1*)
 83: 0x3370 [0x1C] WAIT(200* ticks)
 84: 0x3373 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "whi1" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
 85: 0x3384 [0x20] SET_CLI_EVENT_UC_FLAG: Unlock player control
 86: 0x3386 [0x21] END_EVENT
 87: 0x3387 [0x00] END_REQSTACK()
```
