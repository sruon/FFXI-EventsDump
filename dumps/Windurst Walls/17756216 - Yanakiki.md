# 17756216 - Yanakiki

## Common Data

| Field            | Value                    |
|------------------|--------------------------|
| Zone             | Windurst Walls (ID: 239) |
| Block Size       | 204 bytes                |
| Total Events     | 8                        |
| References Count | 15                       |

## List of Events

| Event ID                 | Entrypoint   |   Size |   Instructions |
|--------------------------|--------------|--------|----------------|
| [65535](#event-65535)    | 0x0000       |      1 |              1 |
| [65535.1](#event-655351) | 0x0001       |     16 |              2 |
| [65535.2](#event-655352) | 0x0011       |      9 |              3 |
| [443](#event-443)        | 0x001A       |      7 |              2 |
| [65535.3](#event-655353) | 0x0021       |     10 |              2 |
| [65535.4](#event-655354) | 0x002B       |     14 |              4 |
| [65535.5](#event-655355) | 0x0039       |     10 |              2 |
| [259](#event-259)        | 0x0043       |     29 |             10 |

## DAT References (imed_data)

|   Index | Hex Value   |   Dec Value |
|---------|-------------|-------------|
|       0 | 0x0028      |          40 |
|       1 | 0x001E      |          30 |
|       2 | 0xFFFF72A9  |  4294931113 |
|       3 | 0x214BF     |      136383 |
|       4 | 0xFFFFC180  |  4294951296 |
|       5 | 0x06E0      |        1760 |
|       6 | 0x000D      |          13 |
|       7 | 0xFFFF2DCF  |  4294913487 |
|       8 | 0x1ED31     |      126257 |
|       9 | 0xFFFFCB44  |  4294953796 |
|      10 | 0xFFFEA36F  |  4294878063 |
|      11 | 0x1DCE4     |      122084 |
|      12 | 0xFFFFE8CD  |  4294961357 |
|      13 | 0x0F7B      |        3963 |
|      14 | 0x1E0D      |        7693 |

## String References

- **7693**: This is the gateway to Heavens Tower that serves as the political centaru of our town. The meeting of the five ministries has ended, so you are free to entaru the tower if you wish.

## Events

### Event 65535

#### Metadata

| Field        | Value   |
|--------------|---------|
| Entrypoint   | 0x0000  |
| Data Size    | 1 bytes |
| Instructions | 1       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000: 00                                                .               
```

#### Opcodes

```
  0: 0x0000 [0x00] END_REQSTACK()
```

### Event 65535.1

#### Metadata

| Field        | Value    |
|--------------|----------|
| Entrypoint   | 0x0001   |
| Data Size    | 16 bytes |
| Instructions | 2        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000:    66 00 80 F8 FF FF 7F  F8 FF FF 7F 74 6C 6B 30   f..........tlk0
0010: 00                                                .               
```

#### Opcodes

```
  0: 0x0001 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=40*
  1: 0x0010 [0x00] END_REQSTACK()
```

### Event 65535.2

#### Metadata

| Field        | Value   |
|--------------|---------|
| Entrypoint   | 0x0011  |
| Data Size    | 9 bytes |
| Instructions | 3       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0010:    5E 69 64 6C 30 1C 01  80 00                     ^idl0....      
```

#### Opcodes

```
  0: 0x0011 [0x5E] EventEntity goes idle (kills current action) (animation: "idl0")
  1: 0x0016 [0x1C] WAIT(30* ticks)
  2: 0x0019 [0x00] END_REQSTACK()
```

### Event 443

#### Metadata

| Field        | Value   |
|--------------|---------|
| Entrypoint   | 0x001A  |
| Data Size    | 7 bytes |
| Instructions | 2       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0010:                                92 01 F8 FF FF 7F            ......
0020: 00                                                .               
```

#### Opcodes

```
  0: 0x001A [0x92] EventEntity->Render.Flags3 ^= 0x01
  1: 0x0020 [0x00] END_REQSTACK()
```

### Event 65535.3

#### Metadata

| Field        | Value    |
|--------------|----------|
| Entrypoint   | 0x0021   |
| Data Size    | 10 bytes |
| Instructions | 2        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0020:    37 02 80 03 80 04 80  05 80 00                  7.........     
```

#### Opcodes

```
  0: 0x0021 [0x37] UPDATE_EVENT_POSITION_AND_DIR: x=-36.183*, z=136.383*, y=-16.000*, direction=154.7°*
  1: 0x002A [0x00] END_REQSTACK()
```

### Event 65535.4

#### Metadata

| Field        | Value    |
|--------------|----------|
| Entrypoint   | 0x002B   |
| Data Size    | 14 bytes |
| Instructions | 4        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0020:                                   32 06 80 5A 00             2..Z.
0030: 07 80 08 80 09 80 5A 01  00                       ......Z..       
```

#### Opcodes

```
  0: 0x002B [0x32] ExtData[1]->MainSpeed = 13* * 0.1
  1: 0x002E [0x5A] UPDATE_EVENT_POSITION: Set EventEntity MovePosition to X=-53.809*, Z=126.257*, Y=-13.500*
  2: 0x0036 [0x5A] UPDATE_EVENT_POSITION: Move EventEntity incrementally towards MovePosition
  3: 0x0038 [0x00] END_REQSTACK()
```

### Event 65535.5

#### Metadata

| Field        | Value    |
|--------------|----------|
| Entrypoint   | 0x0039   |
| Data Size    | 10 bytes |
| Instructions | 2        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0030:                             37 0A 80 0B 80 0C 80           7......
0040: 0D 80 00                                          ...             
```

#### Opcodes

```
  0: 0x0039 [0x37] UPDATE_EVENT_POSITION_AND_DIR: x=-89.233*, z=122.084*, y=-5.939*, direction=348.3°*
  1: 0x0042 [0x00] END_REQSTACK()
```

### Event 259

#### Metadata

| Field        | Value    |
|--------------|----------|
| Entrypoint   | 0x0043   |
| Data Size    | 29 bytes |
| Instructions | 10       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0040:          1E F0 FF FF 7F  6F 70 29 0B 38 F0 0E 01     .....op).8...
0050: 01 1D 0E 80 23 29 0B 38  F0 0E 01 02 20 00 21 00  ....#).8.... .!.
```

#### Opcodes

```
  0: 0x0043 [0x1E] EventEntity looks at LocalPlayer and starts talking
  1: 0x0048 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  2: 0x0049 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
  3: 0x004A [0x29] REQ_SET_WAIT(priority=0x0B, entity_id=Yanakiki (ID: 17756216/0x010EF038), tag_num=0x01)
  4: 0x0051 [0x1D] PRINT_EVENT_MESSAGE(message_id=7693*)
    → "This is the gateway to Heavens Tower that serves as the political centaru of our town. The meeting of the five ministries has ended, so you are free to entaru the tower if you wish."
  5: 0x0054 [0x23] WAIT_FOR_DIALOG_INTERACTION
  6: 0x0055 [0x29] REQ_SET_WAIT(priority=0x0B, entity_id=Yanakiki (ID: 17756216/0x010EF038), tag_num=0x02)
  7: 0x005C [0x20] SET_CLI_EVENT_UC_FLAG: Unlock player control
  8: 0x005E [0x21] END_EVENT
  9: 0x005F [0x00] END_REQSTACK()
```
