# Event 31

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 12/14     |
| Offset          | 0x42EC    |
| Data Size       | 476 bytes |
| Calculated Size | 476 bytes |
| Instructions    | 74        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
42E0:                                      42 02 09 10              B...
42F0: 00 80 00 17 43 4A F0 FF  FF 7F CC F2 0A 01 4A CC  ....CJ........J.
4300: F2 0A 01 F0 FF FF 7F 6F  76 CC F2 0A 01 2B CC F2  .......ov....+..
4310: 0A 01 86 81 23 21 00 43  00 43 01 1A A6 55 46 01  ....#!.C.C...UF.
4320: 38 1D 80 27 10 D6 F2 0A  01 02 92 01 CC F2 0A 01  8..'............
4330: 1A 74 1D 94 01 F0 FF FF  7F 94 01 CC F2 0A 01 94  .t..............
4340: 01 D6 F2 0A 01 BA F0 FF  FF 7F 2C 80 2D 80 2E 80  ..........,.-...
4350: 2F 80 80 F0 FF FF 7F 80  CC F2 0A 01 80 D6 F2 0A  /...............
4360: 01 79 00 F0 FF FF 7F CC  F2 0A 01 4A CC F2 0A 01  .y.........J....
4370: F0 FF FF 7F 5C 00 33 80  5C 01 33 80 9A 1C 23 80  ....\.3.\.3...#.
4380: 45 B7 80 F0 FF FF 7F F0  FF FF 7F 61 6A 30 30 03  E..........aj00.
4390: 80 1A 85 55 29 10 F0 FF  FF 7F 06 6E CC F2 0A 01  ...U)......n....
43A0: 0A 80 99 CC F2 0A 01 2B  CC F2 0A 01 87 81 23 1A  .......+......#.
43B0: A6 55 1C 09 80 7B CC F2  0A 01 3B CC F2 0A 01 04  .U...{....;.....
43C0: 00 06 00 05 00 3A CC F2  0A 01 07 00 BA D6 F2 0A  .....:..........
43D0: 01 04 00 06 00 05 00 07  00 1C 23 80 6C D6 F2 0A  ..........#.l...
43E0: 01 2E 81 00 80 5B 88 81  CC F2 0A 01 CC F2 0A 01  .....[..........
43F0: 73 68 6B 30 5B B6 80 D6  F2 0A 01 D6 F2 0A 01 73  shk0[..........s
4400: 68 6B 30 48 11 80 23 52  B7 80 F0 FF FF 7F F0 FF  hk0H..#R........
4410: FF 7F 61 6A 30 30 45 B7  80 F0 FF FF 7F F0 FF FF  ..aj00E.........
4420: 7F 61 6A 30 31 03 80 1A  85 55 1C 09 80 2B CC F2  .aj01....U...+..
4430: 0A 01 89 81 23 52 B7 80  F0 FF FF 7F F0 FF FF 7F  ....#R..........
4440: 61 6A 30 31 45 B7 80 F0  FF FF 7F F0 FF FF 7F 61  aj01E..........a
4450: 6A 30 32 03 80 1C 1B 80  2B CC F2 0A 01 86 81 23  j02.....+......#
4460: 52 B7 80 F0 FF FF 7F F0  FF FF 7F 61 6A 30 32 45  R..........aj02E
4470: B7 80 F0 FF FF 7F F0 FF  FF 7F 61 6A 30 33 03 80  ..........aj03..
4480: 5D 03 80 51 80 2B CC F2  0A 01 8A 81 23 1A A6 55  ]..Q.+......#..U
4490: 1C 1B 80 52 B7 80 F0 FF  FF 7F F0 FF FF 7F 61 6A  ...R..........aj
44A0: 30 33 45 B7 80 F0 FF FF  7F F0 FF FF 7F 30 62 6C  03E..........0bl
44B0: 66 03 80 46 00 45 1C 80  F0 FF FF 7F F0 FF FF 7F  f..F.E..........
44C0: 66 64 69 32 03 80 21 00                           fdi2..!.        
```

## Opcodes

```
  0: 0x42EC [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x42ED [0x02] IF !(Work_Zone[9] == 1*) GOTO 0x4317
  2: 0x42F5 [0x4A] LocalPlayer looks at Erlene (ID: 17494732/0x010AF2CC)
  3: 0x42FE [0x4A] Erlene (ID: 17494732/0x010AF2CC) looks at LocalPlayer
  4: 0x4307 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  5: 0x4308 [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until Erlene (ID: 17494732/0x010AF2CC) Render.Flags0 and Render.Flags3 conditions are met
  6: 0x430D [0x2B] Erlene (ID: 17494732/0x010AF2CC) [7851*]:
    → "This is sealed with a shrouding magic to protect the identities of the concerned parties. Very hush-hush.\u0007See how the incantation is pressed directly into the sealing wax?\u007F1\u0000\u0007"
  7: 0x4314 [0x23] WAIT_FOR_DIALOG_INTERACTION
  8: 0x4315 [0x21] END_EVENT
  9: 0x4316 [0x00] END_REQSTACK()
 10: 0x4317 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
 11: 0x4319 [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
 12: 0x431B [0x1A] CALL_SUBROUTINE(address=0x55A6)
 13: 0x431E [0x46] CAMERA_CONTROL: Disable user control
 14: 0x4320 [0x38] SET_CLIENT_EVENT_MODE(mode=19*)
 15: 0x4323 [0x27] REQ_SET(priority=0x10, entity_id=Unnamed NPC (ID: 17494742/0x010AF2D6), tag_num=0x02)
 16: 0x432A [0x92] Erlene (ID: 17494732/0x010AF2CC)->Render.Flags3 ^= 0x01
 17: 0x4330 [0x1A] CALL_SUBROUTINE(address=0x1D74)
 18: 0x4333 [0x94] LocalPlayer->Render.Flags3 ^= 0x01
 19: 0x4339 [0x94] Erlene (ID: 17494732/0x010AF2CC)->Render.Flags3 ^= 0x01
 20: 0x433F [0x94] Unnamed NPC (ID: 17494742/0x010AF2D6)->Render.Flags3 ^= 0x01
 21: 0x4345 [0xBA] SET_ENTITY_POSITION(entity_id=LocalPlayer, pos_x=378.791*, pos_z=17.703*, pos_y=-39.999*, direction=186.5°*)
 22: 0x4352 [0x80] LOAD_WAIT(entity=LocalPlayer)
 23: 0x4357 [0x80] LOAD_WAIT(entity=Erlene (ID: 17494732/0x010AF2CC))
 24: 0x435C [0x80] LOAD_WAIT(entity=Unnamed NPC (ID: 17494742/0x010AF2D6))
 25: 0x4361 [0x79] LocalPlayer looks at Erlene (ID: 17494732/0x010AF2CC) (Basic look)
 26: 0x436B [0x4A] Erlene (ID: 17494732/0x010AF2CC) looks at LocalPlayer
 27: 0x4374 [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 180*
 28: 0x4378 [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 180*
 29: 0x437C [0x9A] WAIT_MUSIC_SERVER()
 30: 0x437D [0x1C] WAIT(15* ticks)
 31: 0x4380 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "aj00" with entities [LocalPlayer, LocalPlayer], work=[381*, 0*]
 32: 0x4391 [0x1A] CALL_SUBROUTINE(address=0x5585)
 33: 0x4394 [0x29] REQ_SET_WAIT(priority=0x10, entity_id=LocalPlayer, tag_num=0x06)
 34: 0x439B [0x6E] Erlene (ID: 17494732/0x010AF2CC) uses emote 22*
 35: 0x43A2 [0x99] Wait for Erlene (ID: 17494732/0x010AF2CC) animation to complete
 36: 0x43A7 [0x2B] Erlene (ID: 17494732/0x010AF2CC) [7849*]:
    → "A sealed letter?\u007F1\u0000\u0007"
 37: 0x43AE [0x23] WAIT_FOR_DIALOG_INTERACTION
 38: 0x43AF [0x1A] CALL_SUBROUTINE(address=0x55A6)
 39: 0x43B2 [0x1C] WAIT(60* ticks)
 40: 0x43B5 [0x7B] Erlene (ID: 17494732/0x010AF2CC) stops talking
 41: 0x43BA [0x3B] GET_ENTITY_POSITION(entity=Erlene (ID: 17494732/0x010AF2CC), x_destination=ExtData[1]->WorkLocal[4], y_destination=ExtData[1]->WorkLocal[6], z_destination=ExtData[1]->WorkLocal[5])
 42: 0x43C5 [0x3A] CONVERT_YAW_TO_BYTE(entity=Erlene (ID: 17494732/0x010AF2CC), result_destination=ExtData[1]->WorkLocal[7])
 43: 0x43CC [0xBA] SET_ENTITY_POSITION(entity_id=Unnamed NPC (ID: 17494742/0x010AF2D6), pos_x=ExtData[1]->WorkLocal[4], pos_z=ExtData[1]->WorkLocal[6], pos_y=ExtData[1]->WorkLocal[5], direction=ExtData[1]->WorkLocal[7])
 44: 0x43D9 [0x1C] WAIT(15* ticks)
 45: 0x43DC [0x6C] FADE_ENTITY_COLOR(entity_id=Unnamed NPC (ID: 17494742/0x010AF2D6), end_alpha=128*, fade_time=1*)
 46: 0x43E5 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "shk0" with entities [Erlene (ID: 17494732/0x010AF2CC), Erlene (ID: 17494732/0x010AF2CC)], work=1447*
 47: 0x43F4 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "shk0" with entities [Unnamed NPC (ID: 17494742/0x010AF2D6), Unnamed NPC (ID: 17494742/0x010AF2D6)], work=1459*
 48: 0x4403 [0x48] [System] [7917*]:
    → "\u0001@\u0001@ \u007F4\u0001\u0000\u0007"
 49: 0x4406 [0x23] WAIT_FOR_DIALOG_INTERACTION
 50: 0x4407 [0x52] END_LOAD_SCHEDULER: End scheduler "aj00" with entities [LocalPlayer, LocalPlayer], work=381*
 51: 0x4416 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "aj01" with entities [LocalPlayer, LocalPlayer], work=[381*, 0*]
 52: 0x4427 [0x1A] CALL_SUBROUTINE(address=0x5585)
 53: 0x442A [0x1C] WAIT(60* ticks)
 54: 0x442D [0x2B] Erlene (ID: 17494732/0x010AF2CC) [7850*]:
    → "Hmmm... No addressee and no sender...\u007F1\u0000\u0007"
 55: 0x4434 [0x23] WAIT_FOR_DIALOG_INTERACTION
 56: 0x4435 [0x52] END_LOAD_SCHEDULER: End scheduler "aj01" with entities [LocalPlayer, LocalPlayer], work=381*
 57: 0x4444 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "aj02" with entities [LocalPlayer, LocalPlayer], work=[381*, 0*]
 58: 0x4455 [0x1C] WAIT(30* ticks)
 59: 0x4458 [0x2B] Erlene (ID: 17494732/0x010AF2CC) [7851*]:
    → "This is sealed with a shrouding magic to protect the identities of the concerned parties. Very hush-hush.\u0007See how the incantation is pressed directly into the sealing wax?\u007F1\u0000\u0007"
 60: 0x445F [0x23] WAIT_FOR_DIALOG_INTERACTION
 61: 0x4460 [0x52] END_LOAD_SCHEDULER: End scheduler "aj02" with entities [LocalPlayer, LocalPlayer], work=381*
 62: 0x446F [0x45] LOAD_SCHEDULED_TASK: Load scheduler "aj03" with entities [LocalPlayer, LocalPlayer], work=[381*, 0*]
 63: 0x4480 [0x5D] SET_MUSIC_VOLUME(volume=0*, fade_time=300*)
 64: 0x4485 [0x2B] Erlene (ID: 17494732/0x010AF2CC) [7852*]:
    → "But the mere fact that you happened across it makes me think...\u0007I wonder... \u0008, perhaps it is addressed to you!\u007F1\u0000\u0007"
 65: 0x448C [0x23] WAIT_FOR_DIALOG_INTERACTION
 66: 0x448D [0x1A] CALL_SUBROUTINE(address=0x55A6)
 67: 0x4490 [0x1C] WAIT(30* ticks)
 68: 0x4493 [0x52] END_LOAD_SCHEDULER: End scheduler "aj03" with entities [LocalPlayer, LocalPlayer], work=381*
 69: 0x44A2 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "0blf" with entities [LocalPlayer, LocalPlayer], work=[381*, 0*]
 70: 0x44B3 [0x46] CAMERA_CONTROL: Restore default settings
 71: 0x44B5 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi2" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 72: 0x44C6 [0x21] END_EVENT
 73: 0x44C7 [0x00] END_REQSTACK()
```
