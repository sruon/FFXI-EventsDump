# Event 51

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 3/6       |
| Offset          | 0x002F    |
| Data Size       | 205 bytes |
| Calculated Size | 205 bytes |
| Instructions    | 46        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0020:                                               1E                 .
0030: F0 FF FF 7F 6F 70 66 00  80 F8 FF FF 7F F8 FF FF  ....opf.........
0040: 7F 74 6C 6B 30 1D 02 80  23 1D 03 80 23 1D 04 80  .tlk0...#...#...
0050: 23 1D 05 80 23 1D 06 80  23 1D 07 80 23 24 08 80  #...#...#...#$..
0060: 09 80 0A 80 25 02 00 10  0A 80 00 C0 00 42 43 00  ....%........BC.
0070: 43 01 1D 0B 80 23 03 01  10 09 80 66 00 80 F8 FF  C....#.....f....
0080: FF 7F F8 FF FF 7F 74 6C  6B 31 45 0C 80 F0 FF FF  ......tlk1E.....
0090: 7F F0 FF FF 7F 66 64 6F  31 0A 80 1C 0D 80 73 0E  .....fdo1.....s.
00A0: 80 B5 11 0C 01 F0 FF FF  7F 1C 0F 80 45 0C 80 F0  ............E...
00B0: FF FF 7F F0 FF FF 7F 66  64 69 31 0A 80 01 F8 00  .......fdi1.....
00C0: 02 00 10 09 80 00 F8 00  42 43 00 43 01 66 10 80  ........BC.C.f..
00D0: F8 FF FF 7F F8 FF FF 7F  64 69 73 30 1D 11 80 23  ........dis0...#
00E0: 53 F8 FF FF 7F F8 FF FF  7F 64 69 73 30 5E 69 64  S........dis0^id
00F0: 6C 30 1C 12 80 01 F8 00  20 00 21 00              l0...... .!.    
```

## Opcodes

```
  0: 0x002F [0x1E] EventEntity looks at LocalPlayer and starts talking
  1: 0x0034 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  2: 0x0035 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
  3: 0x0036 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=29*
  4: 0x0045 [0x1D] PRINT_EVENT_MESSAGE(message_id=7436*)
    → "Well, it's about time you showed up! You're here for the V.E.R.M.I.N. extermination operation, yes?\u007F1\u0000\u0007"
  5: 0x0048 [0x23] WAIT_FOR_DIALOG_INTERACTION
  6: 0x0049 [0x1D] PRINT_EVENT_MESSAGE(message_id=7437*)
    → "I'll get straight to the point. We want you to find and defeat the fiend that has been wreaking havoc down here, then take the evidence of its extermination to Norejaie in San d'Oria.\u007F1\u0000\u0007"
  7: 0x004C [0x23] WAIT_FOR_DIALOG_INTERACTION
  8: 0x004D [0x1D] PRINT_EVENT_MESSAGE(message_id=7438*)
    → "In order to lure the creature into the open, we have prepared this special ointment that must be applied to your skin.\u007F1\u0000\u0007"
  9: 0x0050 [0x23] WAIT_FOR_DIALOG_INTERACTION
 10: 0x0051 [0x1D] PRINT_EVENT_MESSAGE(message_id=7439*)
    → "Lest you think me unhelpful, I will share with you what I know: sightings have been reported from the area around G-9.\u007F1\u0000\u0007"
 11: 0x0054 [0x23] WAIT_FOR_DIALOG_INTERACTION
 12: 0x0055 [0x1D] PRINT_EVENT_MESSAGE(message_id=7440*)
    → "The effect of the ointment lasts for about a day. If it wears off early, or you want the effect removed, just come back here and talk to me.\u007F1\u0000\u0007"
 13: 0x0058 [0x23] WAIT_FOR_DIALOG_INTERACTION
 14: 0x0059 [0x1D] PRINT_EVENT_MESSAGE(message_id=7441*)
    → "There may be some...unexpected side effects. But we won't let a little discomfort bother us now, will we?\u007F1\u0000\u0007"
 15: 0x005C [0x23] WAIT_FOR_DIALOG_INTERACTION
 16: 0x005D [0x24] CREATE_DIALOG(message_id=7442*, default_option=1*, option_flags=0*)
    → "Apply the ointment?\u0007\u000BSlap it on.\u0007Did you say, \u00072side effects\u00073...?\u007F1\u0000\u0007"
 17: 0x0064 [0x25] WAIT_DIALOG_SELECT()
 18: 0x0065 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x00C0
 19: 0x006D [0x42] SET_CLI_EVENT_CANCEL_DATA()
 20: 0x006E [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
 21: 0x0070 [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
 22: 0x0072 [0x1D] PRINT_EVENT_MESSAGE(message_id=7445*)
    → "Now, close your eyes for a moment. This won't hurt a bit...\u007F1\u0000\u0007"
 23: 0x0075 [0x23] WAIT_FOR_DIALOG_INTERACTION
 24: 0x0076 [0x03] Work_Zone[1] = 1*
 25: 0x007B [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk1" with entities [EventEntity, EventEntity], work=29*
 26: 0x008A [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 27: 0x009B [0x1C] WAIT(60* ticks)
 28: 0x009E [0x73] Rojaireaut (ID: 17568181/0x010C11B5) casts magic 499* on LocalPlayer
 29: 0x00A9 [0x1C] WAIT(90* ticks)
 30: 0x00AC [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 31: 0x00BD [0x01] GOTO 0x00F8

SUBROUTINE_00C0:
 32: 0x00C0 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x00F8
 33: 0x00C8 [0x42] SET_CLI_EVENT_CANCEL_DATA()
 34: 0x00C9 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
 35: 0x00CB [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
 36: 0x00CD [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "dis0" with entities [EventEntity, EventEntity], work=21*
 37: 0x00DC [0x1D] PRINT_EVENT_MESSAGE(message_id=7443*)
    → "Come now, you call yourself an adventurer?\u007F1\u0000\u0007"
 38: 0x00DF [0x23] WAIT_FOR_DIALOG_INTERACTION
 39: 0x00E0 [0x53] WAIT_SCHEDULER_TASK: Wait for scheduler "dis0" with entities [EventEntity, EventEntity]
 40: 0x00ED [0x5E] EventEntity goes idle (kills current action) (animation: "idl0")
 41: 0x00F2 [0x1C] WAIT(30* ticks)
 42: 0x00F5 [0x01] GOTO 0x00F8

SUBROUTINE_00F8:
 43: 0x00F8 [0x20] SET_CLI_EVENT_UC_FLAG: Unlock player control
 44: 0x00FA [0x21] END_EVENT
 45: 0x00FB [0x00] END_REQSTACK()
```
