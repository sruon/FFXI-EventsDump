# Event 173

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 3/58      |
| Offset          | 0x0021    |
| Data Size       | 646 bytes |
| Calculated Size | 646 bytes |
| Instructions    | 86        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0020:    42 75 00 03 80 75 01  45 04 80 F0 FF FF 7F F0   Bu...u.E.......
0030: FF FF 7F 66 64 6F 31 05  80 55 04 80 F0 FF FF 7F  ...fdo1..U......
0040: F0 FF FF 7F 66 64 6F 31  46 01 38 06 80 BA F0 FF  ....fdo1F.8.....
0050: FF 7F 07 80 08 80 09 80  0A 80 43 00 43 01 03 00  ..........C.C...
0060: 00 02 10 02 00 00 0B 80  00 77 00 29 10 1C 80 0F  .........w.)....
0070: 01 05 80 1C 80 0F 01 1C  0C 80 1E F0 FF FF 7F 45  ...............E
0080: 0D 80 F0 FF FF 7F F0 FF  FF 7F 73 65 30 39 05 80  ..........se09..
0090: 45 04 80 F0 FF FF 7F F0  FF FF 7F 66 64 69 31 05  E..........fdi1.
00A0: 80 55 04 80 F0 FF FF 7F  F0 FF FF 7F 66 64 69 31  .U..........fdi1
00B0: 6F 70 66 00 80 F8 FF FF  7F F8 FF FF 7F 74 6C 6B  opf..........tlk
00C0: 30 1D 0E 80 23 27 80 1C  80 0F 01 02 45 0D 80 F0  0...#'......E...
00D0: FF FF 7F F0 FF FF 7F 73  65 30 38 05 80 5E 69 64  .......se08..^id
00E0: 6C 30 2B 1C 80 0F 01 0F  80 1E 1C 80 0F 01 2A 80  l0+...........*.
00F0: 1C 80 0F 01 1E 1C 80 0F  01 23 1D 10 80 23 02 00  .........#...#..
0100: 00 0B 80 00 1B 01 5B 11  80 1C 80 0F 01 1C 80 0F  ......[.........
0110: 01 74 6C 61 30 1C 12 80  01 2A 01 5B 13 80 1C 80  .tla0....*.[....
0120: 0F 01 1C 80 0F 01 70 61  73 30 2B 1C 80 0F 01 14  ......pas0+.....
0130: 80 23 6F 70 02 00 00 0B  80 00 4E 01 5B 11 80 1C  .#op......N.[...
0140: 80 0F 01 1C 80 0F 01 74  6C 61 31 01 5B 01 53 1C  .......tla1.[.S.
0150: 80 0F 01 1C 80 0F 01 70  61 73 30 66 15 80 F8 FF  .......pas0f....
0160: FF 7F F8 FF FF 7F 61 69  67 30 1D 16 80 23 53 F8  ......aig0...#S.
0170: FF FF 7F F8 FF FF 7F 61  69 67 30 66 15 80 F8 FF  .......aig0f....
0180: FF 7F F8 FF FF 7F 61 69  67 31 02 00 00 0B 80 00  ......aig1......
0190: A4 01 5B 11 80 1C 80 0F  01 1C 80 0F 01 79 65 73  ..[..........yes
01A0: 30 01 B3 01 5B 13 80 1C  80 0F 01 1C 80 0F 01 74  0...[..........t
01B0: 6C 6B 30 2B 1C 80 0F 01  17 80 23 02 00 00 0B 80  lk0+......#.....
01C0: 00 D3 01 53 1C 80 0F 01  1C 80 0F 01 79 65 73 30  ...S........yes0
01D0: 01 E0 01 53 1C 80 0F 01  1C 80 0F 01 74 6C 6B 30  ...S........tlk0
01E0: 53 F8 FF FF 7F F8 FF FF  7F 61 69 67 31 1D 18 80  S........aig1...
01F0: 23 55 0D 80 F0 FF FF 7F  F0 FF FF 7F 73 65 30 38  #U..........se08
0200: 02 00 00 0B 80 00 12 02  29 80 1C 80 0F 01 04 01  ........).......
0210: 19 02 29 80 1C 80 0F 01  03 55 0D 80 F0 FF FF 7F  ..)......U......
0220: F0 FF FF 7F 73 65 31 30  45 0D 80 F0 FF FF 7F F0  ....se10E.......
0230: FF FF 7F 73 65 30 39 05  80 66 00 80 F8 FF FF 7F  ...se09..f......
0240: F8 FF FF 7F 74 6C 6B 30  1D 19 80 23 45 04 80 F0  ....tlk0...#E...
0250: FF FF 7F F0 FF FF 7F 66  64 6F 31 05 80 55 04 80  .......fdo1..U..
0260: F0 FF FF 7F F0 FF FF 7F  66 64 6F 31 1C 0C 80 02  ........fdo1....
0270: 00 00 0B 80 00 83 02 29  80 1C 80 0F 01 06 80 1C  .......)........
0280: 80 0F 01 46 00 45 04 80  F0 FF FF 7F F0 FF FF 7F  ...F.E..........
0290: 66 64 69 31 05 80 55 04  80 F0 FF FF 7F F0 FF FF  fdi1..U.........
02A0: 7F 66 64 69 31 21 00                              .fdi1!.         
```

## Opcodes

```
  0: 0x0021 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x0022 [0x75] LOAD_ROOM(Load indoor room, room=481*)
  2: 0x0026 [0x75] LOAD_ROOM(No action)
  3: 0x0028 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
  4: 0x0039 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=200*
  5: 0x0048 [0x46] CAMERA_CONTROL: Disable user control
  6: 0x004A [0x38] SET_CLIENT_EVENT_MODE(mode=3*)
  7: 0x004D [0xBA] SET_ENTITY_POSITION(entity_id=LocalPlayer, pos_x=14.424*, pos_z=-7.257*, pos_y=-7.339*, direction=159.7°*)
  8: 0x005A [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
  9: 0x005C [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
 10: 0x005E [0x03] ExtData[1]->WorkLocal[0] = Work_Zone[2]
 11: 0x0063 [0x02] IF !(ExtData[1]->WorkLocal[0] == 1*) GOTO 0x0077
 12: 0x006B [0x29] REQ_SET_WAIT(priority=0x10, entity_id=Mathilde's Son (ID: 17793052/0x010F801C), tag_num=0x05)
 13: 0x0072 [0x80] LOAD_WAIT(entity=Mathilde's Son (ID: 17793052/0x010F801C))
 14: 0x0077 [0x1C] WAIT(60* ticks)
 15: 0x007A [0x1E] EventEntity looks at LocalPlayer and starts talking
 16: 0x007F [0x45] LOAD_SCHEDULED_TASK: Load scheduler "se09" with entities [LocalPlayer, LocalPlayer], work=[148*, 0*]
 17: 0x0090 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 18: 0x00A1 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=200*
 19: 0x00B0 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 20: 0x00B1 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
 21: 0x00B2 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=10*
 22: 0x00C1 [0x1D] PRINT_EVENT_MESSAGE(message_id=6960*)
    → "Hello again. We have lots of fine things in today. Take your time!\u007F1\u0000\u0007"
 23: 0x00C4 [0x23] WAIT_FOR_DIALOG_INTERACTION
 24: 0x00C5 [0x27] REQ_SET(priority=0x80, entity_id=Mathilde's Son (ID: 17793052/0x010F801C), tag_num=0x02)
 25: 0x00CC [0x45] LOAD_SCHEDULED_TASK: Load scheduler "se08" with entities [LocalPlayer, LocalPlayer], work=[148*, 0*]
 26: 0x00DD [0x5E] EventEntity goes idle (kills current action) (animation: "idl0")
 27: 0x00E2 [0x2B] Mathilde's Son (ID: 17793052/0x010F801C) [6961*]:
    → "I'm home!\u007F1\u0000\u0007"
 28: 0x00E9 [0x1E] EventEntity looks at Mathilde's Son (ID: 17793052/0x010F801C) and starts talking
 29: 0x00EE [0x2A] GET_REQ_LEVEL(level=128, entity_id=Mathilde's Son (ID: 17793052/0x010F801C))
 30: 0x00F4 [0x1E] EventEntity looks at Mathilde's Son (ID: 17793052/0x010F801C) and starts talking
 31: 0x00F9 [0x23] WAIT_FOR_DIALOG_INTERACTION
 32: 0x00FA [0x1D] PRINT_EVENT_MESSAGE(message_id=6962*)
    → "Hi, Aldo.\u007F1\u0000\u0007"
 33: 0x00FD [0x23] WAIT_FOR_DIALOG_INTERACTION
 34: 0x00FE [0x02] IF !(ExtData[1]->WorkLocal[0] == 1*) GOTO 0x011B
 35: 0x0106 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tla0" with entities [Mathilde's Son (ID: 17793052/0x010F801C), Mathilde's Son (ID: 17793052/0x010F801C)], work=2569*
 36: 0x0115 [0x1C] WAIT(30* ticks)
 37: 0x0118 [0x01] GOTO 0x012A
 38: 0x011B [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "pas0" with entities [Mathilde's Son (ID: 17793052/0x010F801C), Mathilde's Son (ID: 17793052/0x010F801C)], work=75*

SUBROUTINE_012A:
 39: 0x012A [0x2B] Mathilde's Son (ID: 17793052/0x010F801C) [6963*]:
    → "Mom, look! I found this on the beach. It's for you!\u007F1\u0000\u0007"
 40: 0x0131 [0x23] WAIT_FOR_DIALOG_INTERACTION
 41: 0x0132 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 42: 0x0133 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
 43: 0x0134 [0x02] IF !(ExtData[1]->WorkLocal[0] == 1*) GOTO 0x014E
 44: 0x013C [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tla1" with entities [Mathilde's Son (ID: 17793052/0x010F801C), Mathilde's Son (ID: 17793052/0x010F801C)], work=2569*
 45: 0x014B [0x01] GOTO 0x015B
 46: 0x014E [0x53] WAIT_SCHEDULER_TASK: Wait for scheduler "pas0" with entities [Mathilde's Son (ID: 17793052/0x010F801C), Mathilde's Son (ID: 17793052/0x010F801C)]

SUBROUTINE_015B:
 47: 0x015B [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "aig0" with entities [EventEntity, EventEntity], work=11*
 48: 0x016A [0x1D] PRINT_EVENT_MESSAGE(message_id=6964*)
    → "What a pretty seashell! Thank you.\u007F1\u0000\u0007"
 49: 0x016D [0x23] WAIT_FOR_DIALOG_INTERACTION
 50: 0x016E [0x53] WAIT_SCHEDULER_TASK: Wait for scheduler "aig0" with entities [EventEntity, EventEntity]
 51: 0x017B [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "aig1" with entities [EventEntity, EventEntity], work=11*
 52: 0x018A [0x02] IF !(ExtData[1]->WorkLocal[0] == 1*) GOTO 0x01A4
 53: 0x0192 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "yes0" with entities [Mathilde's Son (ID: 17793052/0x010F801C), Mathilde's Son (ID: 17793052/0x010F801C)], work=2569*
 54: 0x01A1 [0x01] GOTO 0x01B3
 55: 0x01A4 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tlk0" with entities [Mathilde's Son (ID: 17793052/0x010F801C), Mathilde's Son (ID: 17793052/0x010F801C)], work=75*

SUBROUTINE_01B3:
 56: 0x01B3 [0x2B] Mathilde's Son (ID: 17793052/0x010F801C) [6965*]:
    → "Ashtia's waiting for me. Gotta go!\u007F1\u0000\u0007"
 57: 0x01BA [0x23] WAIT_FOR_DIALOG_INTERACTION
 58: 0x01BB [0x02] IF !(ExtData[1]->WorkLocal[0] == 1*) GOTO 0x01D3
 59: 0x01C3 [0x53] WAIT_SCHEDULER_TASK: Wait for scheduler "yes0" with entities [Mathilde's Son (ID: 17793052/0x010F801C), Mathilde's Son (ID: 17793052/0x010F801C)]
 60: 0x01D0 [0x01] GOTO 0x01E0
 61: 0x01D3 [0x53] WAIT_SCHEDULER_TASK: Wait for scheduler "tlk0" with entities [Mathilde's Son (ID: 17793052/0x010F801C), Mathilde's Son (ID: 17793052/0x010F801C)]

SUBROUTINE_01E0:
 62: 0x01E0 [0x53] WAIT_SCHEDULER_TASK: Wait for scheduler "aig1" with entities [EventEntity, EventEntity]
 63: 0x01ED [0x1D] PRINT_EVENT_MESSAGE(message_id=6966*)
    → "Take care!\u007F1\u0000\u0007"
 64: 0x01F0 [0x23] WAIT_FOR_DIALOG_INTERACTION
 65: 0x01F1 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "se08" with entities [LocalPlayer, LocalPlayer], work=148*
 66: 0x0200 [0x02] IF !(ExtData[1]->WorkLocal[0] == 1*) GOTO 0x0212
 67: 0x0208 [0x29] REQ_SET_WAIT(priority=0x80, entity_id=Mathilde's Son (ID: 17793052/0x010F801C), tag_num=0x04)
 68: 0x020F [0x01] GOTO 0x0219
 69: 0x0212 [0x29] REQ_SET_WAIT(priority=0x80, entity_id=Mathilde's Son (ID: 17793052/0x010F801C), tag_num=0x03)

SUBROUTINE_0219:
 70: 0x0219 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "se10" with entities [LocalPlayer, LocalPlayer], work=148*
 71: 0x0228 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "se09" with entities [LocalPlayer, LocalPlayer], work=[148*, 0*]
 72: 0x0239 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=10*
 73: 0x0248 [0x1D] PRINT_EVENT_MESSAGE(message_id=6970*)
    → "He comes and goes like a cyclone, that boy!\u007F1\u0000\u0007"
 74: 0x024B [0x23] WAIT_FOR_DIALOG_INTERACTION
 75: 0x024C [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 76: 0x025D [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=200*
 77: 0x026C [0x1C] WAIT(60* ticks)
 78: 0x026F [0x02] IF !(ExtData[1]->WorkLocal[0] == 1*) GOTO 0x0283
 79: 0x0277 [0x29] REQ_SET_WAIT(priority=0x80, entity_id=Mathilde's Son (ID: 17793052/0x010F801C), tag_num=0x06)
 80: 0x027E [0x80] LOAD_WAIT(entity=Mathilde's Son (ID: 17793052/0x010F801C))
 81: 0x0283 [0x46] CAMERA_CONTROL: Restore default settings
 82: 0x0285 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 83: 0x0296 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=200*
 84: 0x02A5 [0x21] END_EVENT
 85: 0x02A6 [0x00] END_REQSTACK()
```
