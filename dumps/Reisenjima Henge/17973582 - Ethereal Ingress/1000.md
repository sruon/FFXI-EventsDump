# Event 1000

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 2/2       |
| Offset          | 0x0001    |
| Data Size       | 670 bytes |
| Calculated Size | 670 bytes |
| Instructions    | 95        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000:    03 00 00 02 10 03 04  00 09 10 03 02 00 00 80   ...............
0010: 02 00 00 01 80 00 22 00  3D 05 00 02 80 02 80 01  ......".=.......
0020: 29 00 3C 05 00 02 80 02  80 02 00 00 03 80 04 3E  ).<............>
0030: 00 02 00 00 04 80 05 3E  00 03 02 00 02 80 02 00  .......>........
0040: 00 05 80 04 64 00 03 02  00 01 80 02 04 00 00 80  ....d...........
0050: 00 5D 00 3C 06 00 02 80  02 80 01 64 00 3D 06 00  .].<.......d.=..
0060: 02 80 02 80 03 01 00 03  10 02 02 00 00 80 80 AE  ................
0070: 00 24 06 80 01 80 05 00  25 02 00 10 00 80 00 8A  .$......%.......
0080: 00 42 03 01 10 02 80 01  AB 00 02 00 10 02 80 00  .B..............
0090: 9B 00 42 03 01 10 05 80  01 AB 00 02 00 10 01 80  ..B.............
00A0: 00 AB 00 03 01 10 00 80  01 AB 00 01 CB 01 02 02  ................
00B0: 00 02 80 80 76 01 24 07  80 08 80 03 00 25 02 00  ....v.$......%..
00C0: 10 00 80 00 DF 00 42 02  01 00 00 80 00 D7 00 03  ......B.........
00D0: 01 10 03 80 01 DC 00 03  01 10 01 80 01 73 01 02  .............s..
00E0: 00 10 02 80 00 00 01 42  02 01 00 00 80 00 F8 00  .......B........
00F0: 03 01 10 04 80 01 FD 00  03 01 10 01 80 01 73 01  ..............s.
0100: 02 00 10 01 80 00 21 01  42 02 01 00 00 80 00 19  ......!.B.......
0110: 01 03 01 10 08 80 01 1E  01 03 01 10 01 80 01 73  ...............s
0120: 01 02 00 10 03 80 00 42  01 42 02 01 00 00 80 00  .......B.B......
0130: 3A 01 03 01 10 09 80 01  3F 01 03 01 10 01 80 01  :.......?.......
0140: 73 01 02 00 10 04 80 00  63 01 42 02 01 00 00 80  s.......c.B.....
0150: 00 5B 01 03 01 10 0A 80  01 60 01 03 01 10 01 80  .[.......`......
0160: 01 73 01 02 00 10 08 80  00 73 01 03 01 10 00 80  .s.......s......
0170: 01 73 01 01 CB 01 02 02  00 01 80 80 CB 01 24 0B  .s............$.
0180: 80 01 80 06 00 25 02 00  10 00 80 00 A7 01 42 02  .....%........B.
0190: 01 00 00 80 00 9F 01 03  01 10 0C 80 01 A4 01 03  ................
01A0: 01 10 0D 80 01 C8 01 02  00 10 02 80 00 B8 01 42  ...............B
01B0: 03 01 10 0E 80 01 C8 01  02 00 10 01 80 00 C8 01  ................
01C0: 03 01 10 00 80 01 C8 01  01 CB 01 2E 21 00 03 01  ............!...
01D0: 10 0F 80 43 00 43 01 D0  10 80 F0 FF FF 7F F0 FF  ...C.C..........
01E0: FF 7F 6D 61 69 6E 00 80  1C 11 80 45 12 80 F0 FF  ..main.....E....
01F0: FF 7F F0 FF FF 7F 66 64  6F 31 00 80 1C 13 80 1B  ......fdo1......
0200: 45 12 80 F0 FF FF 7F F0  FF FF 7F 66 64 69 31 00  E..........fdi1.
0210: 80 D0 14 80 F0 FF FF 7F  F0 FF FF 7F 6D 61 69 6E  ............main
0220: 00 80 1C 11 80 55 12 80  F0 FF FF 7F F0 FF FF 7F  .....U..........
0230: 66 64 69 31 1B 03 01 10  0F 80 43 00 43 01 D0 10  fdi1......C.C...
0240: 80 F0 FF FF 7F F0 FF FF  7F 6D 61 69 6E 00 80 1C  .........main...
0250: 11 80 48 15 80 45 16 80  F0 FF FF 7F F0 FF FF 7F  ..H..E..........
0260: 77 68 6F 31 00 80 1C 13  80 1B 45 16 80 F0 FF FF  who1......E.....
0270: 7F F0 FF FF 7F 77 68 69  31 00 80 D0 14 80 F0 FF  .....whi1.......
0280: FF 7F F0 FF FF 7F 6D 61  69 6E 00 80 1C 11 80 55  ......main.....U
0290: 16 80 F0 FF FF 7F F0 FF  FF 7F 77 68 69 31 1B     ..........whi1. 
```

## Opcodes

```
  0: 0x0001 [0x03] ExtData[1]->WorkLocal[0] = Work_Zone[2]
  1: 0x0006 [0x03] ExtData[1]->WorkLocal[4] = Work_Zone[9]
  2: 0x000B [0x03] ExtData[1]->WorkLocal[2] = 0*
  3: 0x0010 [0x02] IF !(ExtData[1]->WorkLocal[0] == 2*) GOTO 0x0022
  4: 0x0018 [0x3D] CLEAR_BIT_FLAG_CONDITIONAL(target_work_offset=0x05, bit_index_work_offset=0x8002, condition_work_offset=0x8002)
  5: 0x001F [0x01] GOTO 0x0029
  6: 0x0022 [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=0x05, bit_index_work_offset=0x8002, condition_work_offset=0x8002)

SUBROUTINE_0029:
  7: 0x0029 [0x02] IF !(ExtData[1]->WorkLocal[0] < 3*) GOTO 0x003E
  8: 0x0031 [0x02] IF !(ExtData[1]->WorkLocal[0] > 4*) GOTO 0x003E
  9: 0x0039 [0x03] ExtData[1]->WorkLocal[2] = 1*
 10: 0x003E [0x02] IF !(ExtData[1]->WorkLocal[0] < 10*) GOTO 0x0064
 11: 0x0046 [0x03] ExtData[1]->WorkLocal[2] = 2*
 12: 0x004B [0x02] IF !(ExtData[1]->WorkLocal[4] == 0*) GOTO 0x005D
 13: 0x0053 [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=0x06, bit_index_work_offset=0x8002, condition_work_offset=0x8002)
 14: 0x005A [0x01] GOTO 0x0064
 15: 0x005D [0x3D] CLEAR_BIT_FLAG_CONDITIONAL(target_work_offset=0x06, bit_index_work_offset=0x8002, condition_work_offset=0x8002)

SUBROUTINE_0064:
 16: 0x0064 [0x03] ExtData[1]->WorkLocal[1] = Work_Zone[3]
 17: 0x0069 [0x02] IF !(ExtData[1]->WorkLocal[2] == 0*) GOTO 0x00AE
 18: 0x0071 [0x24] CREATE_DIALOG(message_id=7328*, default_option=2*, option_flags=0x05)
    → "What will you do?\u0007\u000BGo into the light.\u0007Go into the smaller light.\u0007Do not go into the light.\u007F1\u0000\u0007"
 19: 0x0078 [0x25] WAIT_DIALOG_SELECT()
 20: 0x0079 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x008A
 21: 0x0081 [0x42] SET_CLI_EVENT_CANCEL_DATA()
 22: 0x0082 [0x03] Work_Zone[1] = 1*
 23: 0x0087 [0x01] GOTO 0x00AB
 24: 0x008A [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x009B
 25: 0x0092 [0x42] SET_CLI_EVENT_CANCEL_DATA()
 26: 0x0093 [0x03] Work_Zone[1] = 10*
 27: 0x0098 [0x01] GOTO 0x00AB
 28: 0x009B [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x00AB
 29: 0x00A3 [0x03] Work_Zone[1] = 0*
 30: 0x00A8 [0x01] GOTO 0x00AB

SUBROUTINE_00AB:
 31: 0x00AB [0x01] GOTO 0x01CB
 32: 0x00AE [0x02] IF !(ExtData[1]->WorkLocal[2] == 1*) GOTO 0x0176
 33: 0x00B6 [0x24] CREATE_DIALOG(message_id=7329*, default_option=5*, option_flags=0x03)
    → "Go into which light?\u0007\u000BKin.\u0007Gin.\u0007Kei.\u0007Kyou.\u0007Fu.\u0007Do not go into the light.\u007F1\u0000\u0007"
 34: 0x00BD [0x25] WAIT_DIALOG_SELECT()
 35: 0x00BE [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x00DF
 36: 0x00C6 [0x42] SET_CLI_EVENT_CANCEL_DATA()
 37: 0x00C7 [0x02] IF !(ExtData[1]->WorkLocal[1] == 0*) GOTO 0x00D7
 38: 0x00CF [0x03] Work_Zone[1] = 3*
 39: 0x00D4 [0x01] GOTO 0x00DC
 40: 0x00D7 [0x03] Work_Zone[1] = 2*

SUBROUTINE_00DC:
 41: 0x00DC [0x01] GOTO 0x0173
 42: 0x00DF [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x0100
 43: 0x00E7 [0x42] SET_CLI_EVENT_CANCEL_DATA()
 44: 0x00E8 [0x02] IF !(ExtData[1]->WorkLocal[1] == 0*) GOTO 0x00F8
 45: 0x00F0 [0x03] Work_Zone[1] = 4*
 46: 0x00F5 [0x01] GOTO 0x00FD
 47: 0x00F8 [0x03] Work_Zone[1] = 2*

SUBROUTINE_00FD:
 48: 0x00FD [0x01] GOTO 0x0173
 49: 0x0100 [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x0121
 50: 0x0108 [0x42] SET_CLI_EVENT_CANCEL_DATA()
 51: 0x0109 [0x02] IF !(ExtData[1]->WorkLocal[1] == 0*) GOTO 0x0119
 52: 0x0111 [0x03] Work_Zone[1] = 5*
 53: 0x0116 [0x01] GOTO 0x011E
 54: 0x0119 [0x03] Work_Zone[1] = 2*

SUBROUTINE_011E:
 55: 0x011E [0x01] GOTO 0x0173
 56: 0x0121 [0x02] IF !(Work_Zone[0] == 3*) GOTO 0x0142
 57: 0x0129 [0x42] SET_CLI_EVENT_CANCEL_DATA()
 58: 0x012A [0x02] IF !(ExtData[1]->WorkLocal[1] == 0*) GOTO 0x013A
 59: 0x0132 [0x03] Work_Zone[1] = 6*
 60: 0x0137 [0x01] GOTO 0x013F
 61: 0x013A [0x03] Work_Zone[1] = 2*

SUBROUTINE_013F:
 62: 0x013F [0x01] GOTO 0x0173
 63: 0x0142 [0x02] IF !(Work_Zone[0] == 4*) GOTO 0x0163
 64: 0x014A [0x42] SET_CLI_EVENT_CANCEL_DATA()
 65: 0x014B [0x02] IF !(ExtData[1]->WorkLocal[1] == 0*) GOTO 0x015B
 66: 0x0153 [0x03] Work_Zone[1] = 7*
 67: 0x0158 [0x01] GOTO 0x0160
 68: 0x015B [0x03] Work_Zone[1] = 2*

SUBROUTINE_0160:
 69: 0x0160 [0x01] GOTO 0x0173
 70: 0x0163 [0x02] IF !(Work_Zone[0] == 5*) GOTO 0x0173
 71: 0x016B [0x03] Work_Zone[1] = 0*
 72: 0x0170 [0x01] GOTO 0x0173

SUBROUTINE_0173:
 73: 0x0173 [0x01] GOTO 0x01CB
 74: 0x0176 [0x02] IF !(ExtData[1]->WorkLocal[2] == 2*) GOTO 0x01CB
 75: 0x017E [0x24] CREATE_DIALOG(message_id=7330*, default_option=2*, option_flags=0x06)
    → "What will you do?\u0007\u000BEscape.\u0007Head toward Ou.\u0007Remain.\u007F1\u0000\u0007"
 76: 0x0185 [0x25] WAIT_DIALOG_SELECT()
 77: 0x0186 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x01A7
 78: 0x018E [0x42] SET_CLI_EVENT_CANCEL_DATA()
 79: 0x018F [0x02] IF !(ExtData[1]->WorkLocal[1] == 0*) GOTO 0x019F
 80: 0x0197 [0x03] Work_Zone[1] = 9*
 81: 0x019C [0x01] GOTO 0x01A4
 82: 0x019F [0x03] Work_Zone[1] = 8*

SUBROUTINE_01A4:
 83: 0x01A4 [0x01] GOTO 0x01C8
 84: 0x01A7 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x01B8
 85: 0x01AF [0x42] SET_CLI_EVENT_CANCEL_DATA()
 86: 0x01B0 [0x03] Work_Zone[1] = 11*
 87: 0x01B5 [0x01] GOTO 0x01C8
 88: 0x01B8 [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x01C8
 89: 0x01C0 [0x03] Work_Zone[1] = 0*
 90: 0x01C5 [0x01] GOTO 0x01C8

SUBROUTINE_01C8:
 91: 0x01C8 [0x01] GOTO 0x01CB

SUBROUTINE_01CB:
 92: 0x01CB [0x2E] SET_CLI_EVENT_CANCEL_FLAGS()
 93: 0x01CC [0x21] END_EVENT
 94: 0x01CD [0x00] END_REQSTACK()
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x01CE [0x03] Work_Zone[1] = 255*
     0x01D3 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
     0x01D5 [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
     0x01D7 [0xD0] LOAD_SCHEDULED_TASK_ALT5: Load scheduler "main" with entities [LocalPlayer, LocalPlayer], work=[168*, 0*]
     0x01E8 [0x1C] WAIT(160* ticks)
     0x01EB [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x01FC [0x1C] WAIT(60* ticks)
     0x01FF [0x1B] RETURN
     0x0200 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x0211 [0xD0] LOAD_SCHEDULED_TASK_ALT5: Load scheduler "main" with entities [LocalPlayer, LocalPlayer], work=[169*, 0*]
     0x0222 [0x1C] WAIT(160* ticks)
     0x0225 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=200*
     0x0234 [0x1B] RETURN
     0x0235 [0x03] Work_Zone[1] = 255*
     0x023A [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
     0x023C [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
     0x023E [0xD0] LOAD_SCHEDULED_TASK_ALT5: Load scheduler "main" with entities [LocalPlayer, LocalPlayer], work=[168*, 0*]
     0x024F [0x1C] WAIT(160* ticks)
     0x0252 [0x48] [System] [7331*]:
    → "The light contains...something other than peace and serenity!\u0000\u0007"
     0x0255 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "who1" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
     0x0266 [0x1C] WAIT(60* ticks)
     0x0269 [0x1B] RETURN
     0x026A [0x45] LOAD_SCHEDULED_TASK: Load scheduler "whi1" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
     0x027B [0xD0] LOAD_SCHEDULED_TASK_ALT5: Load scheduler "main" with entities [LocalPlayer, LocalPlayer], work=[169*, 0*]
     0x028C [0x1C] WAIT(160* ticks)
     0x028F [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "whi1" with entities [LocalPlayer, LocalPlayer], work=201*
     0x029E [0x1B] RETURN
```