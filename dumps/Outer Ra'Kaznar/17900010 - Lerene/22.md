# Event 22

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 56/90     |
| Offset          | 0x0381    |
| Data Size       | 294 bytes |
| Calculated Size | 294 bytes |
| Instructions    | 76        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0380:    42 03 01 10 09 80 1E  F0 FF FF 7F 4A F0 FF FF   B..........J...
0390: 7F F8 FF FF 7F 6F 70 29  08 EA 21 11 01 01 1D 0A  .....op)..!.....
03A0: 80 23 1D 0B 80 23 1D 0C  80 23 29 08 EA 21 11 01  .#...#...#)..!..
03B0: 02 27 08 EA 21 11 01 03  1D 0D 80 23 2A 08 EA 21  .'..!......#*..!
03C0: 11 01 29 08 EA 21 11 01  0D 1D 0E 80 23 29 08 EA  ..)..!......#)..
03D0: 21 11 01 0E 29 08 EA 21  11 01 0F 1D 0F 80 23 29  !...)..!......#)
03E0: 08 EA 21 11 01 10 29 08  EA 21 11 01 13 1D 10 80  ..!...)..!......
03F0: 23 29 08 EA 21 11 01 14  29 08 EA 21 11 01 23 1D  #)..!...)..!..#.
0400: 11 80 23 1D 12 80 23 1D  13 80 23 29 08 EA 21 11  ..#...#...#)..!.
0410: 01 24 29 08 EA 21 11 01  25 1D 14 80 23 1D 15 80  .$)..!..%...#...
0420: 23 29 08 EA 21 11 01 26  29 08 EA 21 11 01 01 1D  #)..!..&)..!....
0430: 16 80 23 03 03 10 17 80  1D 18 80 23 1D 19 80 23  ..#........#...#
0440: 29 08 EA 21 11 01 02 27  08 EA 21 11 01 03 24 1A  )..!...'..!...$.
0450: 80 1B 80 1B 80 25 02 00  10 1B 80 00 89 04 03 01  .....%..........
0460: 10 1C 80 43 00 43 01 2A  08 EA 21 11 01 29 08 EA  ...C.C.*..!..)..
0470: 21 11 01 23 1D 1D 80 23  29 08 EA 21 11 01 24 29  !..#...#)..!..$)
0480: 08 EA 21 11 01 25 01 A3  04 02 00 10 09 80 00 A3  ..!..%..........
0490: 04 03 01 10 09 80 1D 1E  80 23 2A 08 EA 21 11 01  .........#*..!..
04A0: 01 A3 04 20 00 21 00                              ... .!.         
```

## Opcodes

```
  0: 0x0381 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x0382 [0x03] Work_Zone[1] = 1*
  2: 0x0387 [0x1E] EventEntity looks at LocalPlayer and starts talking
  3: 0x038C [0x4A] LocalPlayer looks at EventEntity
  4: 0x0395 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  5: 0x0396 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
  6: 0x0397 [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Lerene (ID: 17900010/0x011121EA), tag_num=0x01)
  7: 0x039E [0x1D] PRINT_EVENT_MESSAGE(message_id=7794*)
    → "My name is, err...Lerene. I visit ruins all around Vana'diel in pursuit of ancient knowledge.\u007F1\u0000\u0007"
  8: 0x03A1 [0x23] WAIT_FOR_DIALOG_INTERACTION
  9: 0x03A2 [0x1D] PRINT_EVENT_MESSAGE(message_id=7795*)
    → "Ra'Kaznar is positively overflowing with all manner of shadows. If we don't keep their numbers under control, they might spill out into the wildlands.\u007F1\u0000\u0007"
 10: 0x03A5 [0x23] WAIT_FOR_DIALOG_INTERACTION
 11: 0x03A6 [0x1D] PRINT_EVENT_MESSAGE(message_id=7796*)
    → "If they were just feral fiends, I'd say throw caution to the wind and cull them right now, but I sense that there's some greater presence guiding them.\u007F1\u0000\u0007"
 12: 0x03A9 [0x23] WAIT_FOR_DIALOG_INTERACTION
 13: 0x03AA [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Lerene (ID: 17900010/0x011121EA), tag_num=0x02)
 14: 0x03B1 [0x27] REQ_SET(priority=0x08, entity_id=Lerene (ID: 17900010/0x011121EA), tag_num=0x03)
 15: 0x03B8 [0x1D] PRINT_EVENT_MESSAGE(message_id=7797*)
    → "I'd advise you to take care of the mystical barricades that line this place should you decide to take the beasts on. Those \u00072doors\u00073 have a mind of their own, and are apt to trap you within the labyrinth.\u007F1\u0000\u0007"
 16: 0x03BB [0x23] WAIT_FOR_DIALOG_INTERACTION
 17: 0x03BC [0x2A] GET_REQ_LEVEL(level=8, entity_id=Lerene (ID: 17900010/0x011121EA))
 18: 0x03C2 [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Lerene (ID: 17900010/0x011121EA), tag_num=0x0D)
 19: 0x03C9 [0x1D] PRINT_EVENT_MESSAGE(message_id=7798*)
    → "It's as if the walls themselves are alive, with energies pulsing through their cracks like the blood in our veins.\u007F1\u0000\u0007"
 20: 0x03CC [0x23] WAIT_FOR_DIALOG_INTERACTION
 21: 0x03CD [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Lerene (ID: 17900010/0x011121EA), tag_num=0x0E)
 22: 0x03D4 [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Lerene (ID: 17900010/0x011121EA), tag_num=0x0F)
 23: 0x03DB [0x1D] PRINT_EVENT_MESSAGE(message_id=7799*)
    → "And those energies are no ordinary magic. You could try to rend them to tatters with a greataxe, but the only thing to splinter would be its hilt.\u007F1\u0000\u0007"
 24: 0x03DE [0x23] WAIT_FOR_DIALOG_INTERACTION
 25: 0x03DF [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Lerene (ID: 17900010/0x011121EA), tag_num=0x10)
 26: 0x03E6 [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Lerene (ID: 17900010/0x011121EA), tag_num=0x13)
 27: 0x03ED [0x1D] PRINT_EVENT_MESSAGE(message_id=7800*)
    → "If your goal is to colonize this land, then you'll need to find a way to deal with such obstacles. I'll do a little bit of experimentation and see if I can find anything.\u007F1\u0000\u0007"
 28: 0x03F0 [0x23] WAIT_FOR_DIALOG_INTERACTION
 29: 0x03F1 [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Lerene (ID: 17900010/0x011121EA), tag_num=0x14)
 30: 0x03F8 [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Lerene (ID: 17900010/0x011121EA), tag_num=0x23)
 31: 0x03FF [0x1D] PRINT_EVENT_MESSAGE(message_id=7801*)
    → "And by \u00072I,\u00073 I mean \u00072we.\u00073 I would expect no less.\u007F1\u0000\u0007"
 32: 0x0402 [0x23] WAIT_FOR_DIALOG_INTERACTION
 33: 0x0403 [0x1D] PRINT_EVENT_MESSAGE(message_id=7802*)
    → "If you find something with traces of arcane energies, come back to me. Perhaps I can learn more about its form and function.\u007F1\u0000\u0007"
 34: 0x0406 [0x23] WAIT_FOR_DIALOG_INTERACTION
 35: 0x0407 [0x1D] PRINT_EVENT_MESSAGE(message_id=7803*)
    → "With any luck, I'll be able to fashion a paten that'll turn the energies to our benefit.\u007F1\u0000\u0007"
 36: 0x040A [0x23] WAIT_FOR_DIALOG_INTERACTION
 37: 0x040B [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Lerene (ID: 17900010/0x011121EA), tag_num=0x24)
 38: 0x0412 [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Lerene (ID: 17900010/0x011121EA), tag_num=0x25)
 39: 0x0419 [0x1D] PRINT_EVENT_MESSAGE(message_id=7804*)
    → "\u00072What's a paten?\u00073 A paten is a magical apparatus that converts cyclical magic into simple formulas.\u007F1\u0000\u0007"
 40: 0x041C [0x23] WAIT_FOR_DIALOG_INTERACTION
 41: 0x041D [0x1D] PRINT_EVENT_MESSAGE(message_id=7805*)
    → "Leave the details to me--for you, a grasp of the basics will suffice.\u007F1\u0000\u0007"
 42: 0x0420 [0x23] WAIT_FOR_DIALOG_INTERACTION
 43: 0x0421 [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Lerene (ID: 17900010/0x011121EA), tag_num=0x26)
 44: 0x0428 [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Lerene (ID: 17900010/0x011121EA), tag_num=0x01)
 45: 0x042F [0x1D] PRINT_EVENT_MESSAGE(message_id=7806*)
    → "First things first. Find something with remnants of this energy and bring it back here. Then we can get it to work.\u007F1\u0000\u0007"
 46: 0x0432 [0x23] WAIT_FOR_DIALOG_INTERACTION
 47: 0x0433 [0x03] Work_Zone[3] = 8751*
 48: 0x0438 [0x1D] PRINT_EVENT_MESSAGE(message_id=7807*)
    → "I would venture two \u0001\u0005%\u0002\u0001\u0000\u0000 should suffice.\u007F1\u0000\u0007"
 49: 0x043B [0x23] WAIT_FOR_DIALOG_INTERACTION
 50: 0x043C [0x1D] PRINT_EVENT_MESSAGE(message_id=7808*)
    → "If I'm right, the shadows wandering about the inner court should have some on them.\u007F1\u0000\u0007"
 51: 0x043F [0x23] WAIT_FOR_DIALOG_INTERACTION
 52: 0x0440 [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Lerene (ID: 17900010/0x011121EA), tag_num=0x02)
 53: 0x0447 [0x27] REQ_SET(priority=0x08, entity_id=Lerene (ID: 17900010/0x011121EA), tag_num=0x03)
 54: 0x044E [0x24] CREATE_DIALOG(message_id=7809*, default_option=0*, option_flags=0*)
    → "Will you assist Lerene?\u0007\u000BYes. I've got to.\u0007Defeat monsters? Not my thing.\u007F1\u0000\u0007"
 55: 0x0455 [0x25] WAIT_DIALOG_SELECT()
 56: 0x0456 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x0489
 57: 0x045E [0x03] Work_Zone[1] = 2*
 58: 0x0463 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
 59: 0x0465 [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
 60: 0x0467 [0x2A] GET_REQ_LEVEL(level=8, entity_id=Lerene (ID: 17900010/0x011121EA))
 61: 0x046D [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Lerene (ID: 17900010/0x011121EA), tag_num=0x23)
 62: 0x0474 [0x1D] PRINT_EVENT_MESSAGE(message_id=7810*)
    → "Excellent! The two of us will make the perfect team.\u007F1\u0000\u0007"
 63: 0x0477 [0x23] WAIT_FOR_DIALOG_INTERACTION
 64: 0x0478 [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Lerene (ID: 17900010/0x011121EA), tag_num=0x24)
 65: 0x047F [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Lerene (ID: 17900010/0x011121EA), tag_num=0x25)
 66: 0x0486 [0x01] GOTO 0x04A3
 67: 0x0489 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x04A3
 68: 0x0491 [0x03] Work_Zone[1] = 1*
 69: 0x0496 [0x1D] PRINT_EVENT_MESSAGE(message_id=7811*)
    → "Not your thing? But then how...?\u0007<Sigh> I suppose I can't ask you to risk life and limb.\u007F1\u0000\u0007"
 70: 0x0499 [0x23] WAIT_FOR_DIALOG_INTERACTION
 71: 0x049A [0x2A] GET_REQ_LEVEL(level=8, entity_id=Lerene (ID: 17900010/0x011121EA))
 72: 0x04A0 [0x01] GOTO 0x04A3

SUBROUTINE_04A3:
 73: 0x04A3 [0x20] SET_CLI_EVENT_UC_FLAG: Unlock player control
 74: 0x04A5 [0x21] END_EVENT
 75: 0x04A6 [0x00] END_REQSTACK()
```
