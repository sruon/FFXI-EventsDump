# 17809441 - Keal

## Common Data

| Field            | Value          |
|------------------|----------------|
| Zone             | Norg (ID: 252) |
| Block Size       | 732 bytes      |
| Total Events     | 6              |
| References Count | 30             |

## List of Events

| Event ID              | Entrypoint   |   Size |   Instructions |
|-----------------------|--------------|--------|----------------|
| [65535](#event-65535) | 0x0000       |      1 |              1 |
| [89](#event-89)       | 0x0001       |     71 |             15 |
| [36](#event-36)       | 0x0048       |    168 |             40 |
| [37](#event-37)       | 0x00F0       |     46 |             10 |
| [38](#event-38)       | 0x011E       |     52 |             12 |
| [39](#event-39)       | 0x0152       |    231 |             36 |

## DAT References (imed_data)

|   Index | Hex Value   |   Dec Value |
|---------|-------------|-------------|
|       0 | 0x2865      |       10341 |
|       1 | 0x2866      |       10342 |
|       2 | 0x0000      |           0 |
|       3 | 0x002D      |          45 |
|       4 | 0x2867      |       10343 |
|       5 | 0x001E      |          30 |
|       6 | 0x0001      |           1 |
|       7 | 0x2831      |       10289 |
|       8 | 0x282C      |       10284 |
|       9 | 0x282D      |       10285 |
|      10 | 0x282E      |       10286 |
|      11 | 0x282F      |       10287 |
|      12 | 0x2830      |       10288 |
|      13 | 0x2832      |       10290 |
|      14 | 0x2833      |       10291 |
|      15 | 0x2834      |       10292 |
|      16 | 0x2835      |       10293 |
|      17 | 0x2836      |       10294 |
|      18 | 0x2837      |       10295 |
|      19 | 0x00C9      |         201 |
|      20 | 0x2838      |       10296 |
|      21 | 0x000A      |          10 |
|      22 | 0x0014      |          20 |
|      23 | 0x0028      |          40 |
|      24 | 0x0032      |          50 |
|      25 | 0x003C      |          60 |
|      26 | 0x0005      |           5 |
|      27 | 0x0050      |          80 |
|      28 | 0x00EE      |         238 |
|      29 | 0x0236      |         566 |

## String References

- **10284**: 'Old on there. Yer that adventurer, <Player>, everybody's talkin' 'bout. Perfect timin' there, matey. I need a hand.
- **10285**: That storage room I jus' mentioned--I need somebody t'go down there and fetch me $6. Unless the Sahagin have thrown 'er in the sea, she should still be down there.
- **10286**: Don't think I'd ask ya t'go down for nothin' now, would ya? There's a pretty penny in it fer ya, if yer interested.
- **10287**: Whaddaya say, matey? [Arrrg, sign me up./I forgot my eye patch at home.]
- **10288**: Well, ya can't go huntin' fer booty without yer eye patch...
- **10289**: So, yer ready to hunt fer some booty?
- **10290**: Spoken like a true pirate! Just go down t'the storage room and bring back the booty. It be as simple as takin' candy from a baby.
- **10291**: I'll be waitin' 'ere for ya.
- **10292**: Where's the storage room? Remember passin' by a false door on yer way to Norg? There's a 'idden door to the west of that one, but if ya don't have $6, ya may have some trouble.
- **10293**: Stay along the walls and ya should find a hidden passageway. Ya made it t'Norg, so findin' it should be no problem. Jus' watch out fer the monsters lurkin' down there.
- **10294**: That's what I was lookin' fer! Now, when openin' these, ya gotta be careful of traps. Ya do this...then turn this...then wiggle this...then...
- **10295**: Arrrg! Its contents are still intact after all these years. Oh yeah, yer reward. Take this. It'll come in handy on yer landlubbin' adventures.
- **10296**: Rottin' floor, fallen crates... Condition of me storage room don't sound so good. I'll have t'head down there with me mateys t'check it out.
- **10341**: We pirates call tha cave connectin' Norg t'tha mainland the "Sea Serpent Grotto." Just like there be beastmen on tha continents, tha grotto has its share of slimy dwellers. Namely, tha Sahagin.
- **10342**: And t'make things worse, those nasty little beasts have filled tha place up with trick doors so ya can't get t'tha deeper parts of the cave.
- **10343**: We used t'have a vault down there, but nobody's been able t'get close to it fer years.

## Events

### Event 65535

#### Metadata

| Field        | Value   |
|--------------|---------|
| Entrypoint   | 0x0000  |
| Data Size    | 1 bytes |
| Instructions | 1       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000: 00                                                .               
```

#### Opcodes

```
  0: 0x0000 [0x00] END_REQSTACK()
```

### Event 89

#### Metadata

| Field        | Value    |
|--------------|----------|
| Entrypoint   | 0x0001   |
| Data Size    | 71 bytes |
| Instructions | 15       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000:    1A 5B 01 1A 69 01 1D  00 80 23 1D 01 80 23 66   .[..i....#...#f
0010: 02 80 F8 FF FF 7F F8 FF  FF 7F 74 65 6E 30 1C 03  ..........ten0..
0020: 80 66 02 80 F8 FF FF 7F  F8 FF FF 7F 74 68 6B 31  .f..........thk1
0030: 1D 04 80 23 66 02 80 F8  FF FF 7F F8 FF FF 7F 74  ...#f..........t
0040: 68 6B 32 1C 05 80 21 00                           hk2...!.        
```

#### Opcodes

```
  0: 0x0001 [0x1A] CALL_SUBROUTINE(address=0x015B)
  1: 0x0004 [0x1A] CALL_SUBROUTINE(address=0x0169)
  2: 0x0007 [0x1D] PRINT_EVENT_MESSAGE(message_id=10341*)
    → "We pirates call tha cave connectin' Norg t'tha mainland the "Sea Serpent Grotto." Just like there be beastmen on tha continents, tha grotto has its share of slimy dwellers. Namely, tha Sahagin."
  3: 0x000A [0x23] WAIT_FOR_DIALOG_INTERACTION
  4: 0x000B [0x1D] PRINT_EVENT_MESSAGE(message_id=10342*)
    → "And t'make things worse, those nasty little beasts have filled tha place up with trick doors so ya can't get t'tha deeper parts of the cave."
  5: 0x000E [0x23] WAIT_FOR_DIALOG_INTERACTION
  6: 0x000F [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "ten0" with entities [EventEntity, EventEntity], work=0*
  7: 0x001E [0x1C] WAIT(45* ticks)
  8: 0x0021 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "thk1" with entities [EventEntity, EventEntity], work=0*
  9: 0x0030 [0x1D] PRINT_EVENT_MESSAGE(message_id=10343*)
    → "We used t'have a vault down there, but nobody's been able t'get close to it fer years."
 10: 0x0033 [0x23] WAIT_FOR_DIALOG_INTERACTION
 11: 0x0034 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "thk2" with entities [EventEntity, EventEntity], work=0*
 12: 0x0043 [0x1C] WAIT(30* ticks)
 13: 0x0046 [0x21] END_EVENT
 14: 0x0047 [0x00] END_REQSTACK()
```

### Event 36

#### Metadata

| Field        | Value     |
|--------------|-----------|
| Entrypoint   | 0x0048    |
| Data Size    | 168 bytes |
| Instructions | 39        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0040:                          1A 5B 01 02 09 10 06 80          .[......
0050: 00 5A 00 1D 07 80 23 01  A5 00 1A 69 01 1D 00 80  .Z....#....i....
0060: 23 1D 01 80 23 66 02 80  F8 FF FF 7F F8 FF FF 7F  #...#f..........
0070: 74 65 6E 30 1C 03 80 66  02 80 F8 FF FF 7F F8 FF  ten0...f........
0080: FF 7F 74 68 6B 31 1D 04  80 23 66 02 80 F8 FF FF  ..thk1...#f.....
0090: 7F F8 FF FF 7F 74 68 6B  32 1D 08 80 23 1D 09 80  .....thk2...#...
00A0: 23 1D 0A 80 23 24 0B 80  02 80 02 80 25 02 00 10  #...#$......%...
00B0: 06 80 00 BF 00 1D 0C 80  23 01 EE 00 01 BF 00 42  ........#......B
00C0: 03 01 10 06 80 66 02 80  F8 FF FF 7F F8 FF FF 7F  .....f..........
00D0: 74 6C 6B 31 1D 0D 80 23  1D 0E 80 23 66 02 80 F8  tlk1...#...#f...
00E0: FF FF 7F F8 FF FF 7F 74  65 6E 31 1C 05 80 21 00  .......ten1...!.
```

#### Opcodes

```
  0: 0x0048 [0x1A] CALL_SUBROUTINE(address=0x015B)
  1: 0x004B [0x02] IF !(Work_Zone[9] == 1*) GOTO 0x005A
  2: 0x0053 [0x1D] PRINT_EVENT_MESSAGE(message_id=10289*)
    → "So, yer ready to hunt fer some booty?"
  3: 0x0056 [0x23] WAIT_FOR_DIALOG_INTERACTION
  4: 0x0057 [0x01] GOTO 0x00A5
  5: 0x005A [0x1A] CALL_SUBROUTINE(address=0x0169)
  6: 0x005D [0x1D] PRINT_EVENT_MESSAGE(message_id=10341*)
    → "We pirates call tha cave connectin' Norg t'tha mainland the "Sea Serpent Grotto." Just like there be beastmen on tha continents, tha grotto has its share of slimy dwellers. Namely, tha Sahagin."
  7: 0x0060 [0x23] WAIT_FOR_DIALOG_INTERACTION
  8: 0x0061 [0x1D] PRINT_EVENT_MESSAGE(message_id=10342*)
    → "And t'make things worse, those nasty little beasts have filled tha place up with trick doors so ya can't get t'tha deeper parts of the cave."
  9: 0x0064 [0x23] WAIT_FOR_DIALOG_INTERACTION
 10: 0x0065 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "ten0" with entities [EventEntity, EventEntity], work=0*
 11: 0x0074 [0x1C] WAIT(45* ticks)
 12: 0x0077 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "thk1" with entities [EventEntity, EventEntity], work=0*
 13: 0x0086 [0x1D] PRINT_EVENT_MESSAGE(message_id=10343*)
    → "We used t'have a vault down there, but nobody's been able t'get close to it fer years."
 14: 0x0089 [0x23] WAIT_FOR_DIALOG_INTERACTION
 15: 0x008A [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "thk2" with entities [EventEntity, EventEntity], work=0*
 16: 0x0099 [0x1D] PRINT_EVENT_MESSAGE(message_id=10284*)
    → "'Old on there. Yer that adventurer, <Player>, everybody's talkin' 'bout. Perfect timin' there, matey. I need a hand."
 17: 0x009C [0x23] WAIT_FOR_DIALOG_INTERACTION
 18: 0x009D [0x1D] PRINT_EVENT_MESSAGE(message_id=10285*)
    → "That storage room I jus' mentioned--I need somebody t'go down there and fetch me $6. Unless the Sahagin have thrown 'er in the sea, she should still be down there."
 19: 0x00A0 [0x23] WAIT_FOR_DIALOG_INTERACTION
 20: 0x00A1 [0x1D] PRINT_EVENT_MESSAGE(message_id=10286*)
    → "Don't think I'd ask ya t'go down for nothin' now, would ya? There's a pretty penny in it fer ya, if yer interested."
 21: 0x00A4 [0x23] WAIT_FOR_DIALOG_INTERACTION

SUBROUTINE_00A5:
 22: 0x00A5 [0x24] CREATE_DIALOG(message_id=10287*, default_option=0*, option_flags=0*)
    → "Whaddaya say, matey? [Arrrg, sign me up./I forgot my eye patch at home.]"
 23: 0x00AC [0x25] WAIT_DIALOG_SELECT()
 24: 0x00AD [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x00BF
 25: 0x00B5 [0x1D] PRINT_EVENT_MESSAGE(message_id=10288*)
    → "Well, ya can't go huntin' fer booty without yer eye patch..."
 26: 0x00B8 [0x23] WAIT_FOR_DIALOG_INTERACTION
 27: 0x00B9 [0x01] GOTO 0x00EE

SUBROUTINE_00BF:
 28: 0x00BF [0x42] SET_CLI_EVENT_CANCEL_DATA()
 29: 0x00C0 [0x03] Work_Zone[1] = 1*
 30: 0x00C5 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk1" with entities [EventEntity, EventEntity], work=0*
 31: 0x00D4 [0x1D] PRINT_EVENT_MESSAGE(message_id=10290*)
    → "Spoken like a true pirate! Just go down t'the storage room and bring back the booty. It be as simple as takin' candy from a baby."
 32: 0x00D7 [0x23] WAIT_FOR_DIALOG_INTERACTION
 33: 0x00D8 [0x1D] PRINT_EVENT_MESSAGE(message_id=10291*)
    → "I'll be waitin' 'ere for ya."
 34: 0x00DB [0x23] WAIT_FOR_DIALOG_INTERACTION
 35: 0x00DC [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "ten1" with entities [EventEntity, EventEntity], work=0*
 36: 0x00EB [0x1C] WAIT(30* ticks)

SUBROUTINE_00EE:
 37: 0x00EE [0x21] END_EVENT
 38: 0x00EF [0x00] END_REQSTACK()
```

#### Data or dead code:

```
# Dead code (unreachable instructions):
     0x00BC [0x01] GOTO 0x00BF
```

### Event 37

#### Metadata

| Field        | Value    |
|--------------|----------|
| Entrypoint   | 0x00F0   |
| Data Size    | 46 bytes |
| Instructions | 10       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
00F0: 1A 5B 01 66 02 80 F8 FF  FF 7F F8 FF FF 7F 74 6C  .[.f..........tl
0100: 6B 31 1D 0F 80 23 1D 10  80 23 66 02 80 F8 FF FF  k1...#...#f.....
0110: 7F F8 FF FF 7F 74 65 6E  31 1C 05 80 21 00        .....ten1...!.  
```

#### Opcodes

```
  0: 0x00F0 [0x1A] CALL_SUBROUTINE(address=0x015B)
  1: 0x00F3 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk1" with entities [EventEntity, EventEntity], work=0*
  2: 0x0102 [0x1D] PRINT_EVENT_MESSAGE(message_id=10292*)
    → "Where's the storage room? Remember passin' by a false door on yer way to Norg? There's a 'idden door to the west of that one, but if ya don't have $6, ya may have some trouble."
  3: 0x0105 [0x23] WAIT_FOR_DIALOG_INTERACTION
  4: 0x0106 [0x1D] PRINT_EVENT_MESSAGE(message_id=10293*)
    → "Stay along the walls and ya should find a hidden passageway. Ya made it t'Norg, so findin' it should be no problem. Jus' watch out fer the monsters lurkin' down there."
  5: 0x0109 [0x23] WAIT_FOR_DIALOG_INTERACTION
  6: 0x010A [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "ten1" with entities [EventEntity, EventEntity], work=0*
  7: 0x0119 [0x1C] WAIT(30* ticks)
  8: 0x011C [0x21] END_EVENT
  9: 0x011D [0x00] END_REQSTACK()
```

### Event 38

#### Metadata

| Field        | Value    |
|--------------|----------|
| Entrypoint   | 0x011E   |
| Data Size    | 52 bytes |
| Instructions | 12       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0110:                                            42 1A                B.
0120: 5B 01 1A 69 01 1D 11 80  23 1D 12 80 23 66 02 80  [..i....#...#f..
0130: F8 FF FF 7F F8 FF FF 7F  74 65 6E 30 1C 05 80 45  ........ten0...E
0140: 13 80 F0 FF FF 7F F0 FF  FF 7F 71 73 74 63 02 80  ..........qstc..
0150: 21 00                                             !.              
```

#### Opcodes

```
  0: 0x011E [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x011F [0x1A] CALL_SUBROUTINE(address=0x015B)
  2: 0x0122 [0x1A] CALL_SUBROUTINE(address=0x0169)
  3: 0x0125 [0x1D] PRINT_EVENT_MESSAGE(message_id=10294*)
    → "That's what I was lookin' fer! Now, when openin' these, ya gotta be careful of traps. Ya do this...then turn this...then wiggle this...then..."
  4: 0x0128 [0x23] WAIT_FOR_DIALOG_INTERACTION
  5: 0x0129 [0x1D] PRINT_EVENT_MESSAGE(message_id=10295*)
    → "Arrrg! Its contents are still intact after all these years. Oh yeah, yer reward. Take this. It'll come in handy on yer landlubbin' adventures."
  6: 0x012C [0x23] WAIT_FOR_DIALOG_INTERACTION
  7: 0x012D [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "ten0" with entities [EventEntity, EventEntity], work=0*
  8: 0x013C [0x1C] WAIT(30* ticks)
  9: 0x013F [0x45] LOAD_SCHEDULED_TASK: Load scheduler "qstc" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
 10: 0x0150 [0x21] END_EVENT
 11: 0x0151 [0x00] END_REQSTACK()
```

### Event 39

#### Metadata

| Field        | Value     |
|--------------|-----------|
| Entrypoint   | 0x0152    |
| Data Size    | 231 bytes |
| Instructions | 10        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0150:       1A 5B 01 1D 14 80  23 21 00 86 00 F8 FF FF    .[....#!......
0160: 7F 1E F0 FF FF 7F 6F 70  1B 66 02 80 F8 FF FF 7F  ......op.f......
0170: F8 FF FF 7F 74 6C 6B 30  1B 66 02 80 F8 FF FF 7F  ....tlk0.f......
0180: F8 FF FF 7F 74 6C 6B 31  1B 66 15 80 F8 FF FF 7F  ....tlk1.f......
0190: F8 FF FF 7F 74 6C 6B 30  1B 66 16 80 F8 FF FF 7F  ....tlk0.f......
01A0: F8 FF FF 7F 74 6C 6B 30  1B 66 05 80 F8 FF FF 7F  ....tlk0.f......
01B0: F8 FF FF 7F 74 6C 6B 30  1B 66 17 80 F8 FF FF 7F  ....tlk0.f......
01C0: F8 FF FF 7F 74 6C 6B 30  1B 66 18 80 F8 FF FF 7F  ....tlk0.f......
01D0: F8 FF FF 7F 74 6C 6B 30  1B 66 19 80 F8 FF FF 7F  ....tlk0.f......
01E0: F8 FF FF 7F 74 6C 6B 30  1B 5B 1A 80 F8 FF FF 7F  ....tlk0.[......
01F0: F8 FF FF 7F 74 6C 6B 30  1B 5B 1B 80 F8 FF FF 7F  ....tlk0.[......
0200: F8 FF FF 7F 74 6C 6B 30  1B 5B 1C 80 F8 FF FF 7F  ....tlk0.[......
0210: F8 FF FF 7F 74 6C 6B 30  1B 5B 1D 80 F8 FF FF 7F  ....tlk0.[......
0220: F8 FF FF 7F 74 6C 6B 30  1B 5B 19 80 F8 FF FF 7F  ....tlk0.[......
0230: F8 FF FF 7F 74 6C 62 30  1B                       ....tlb0.       
```

#### Opcodes

```
  0: 0x0152 [0x1A] CALL_SUBROUTINE(address=0x015B)
  1: 0x0155 [0x1D] PRINT_EVENT_MESSAGE(message_id=10296*)
    → "Rottin' floor, fallen crates... Condition of me storage room don't sound so good. I'll have t'head down there with me mateys t'check it out."
  2: 0x0158 [0x23] WAIT_FOR_DIALOG_INTERACTION
  3: 0x0159 [0x21] END_EVENT
  4: 0x015A [0x00] END_REQSTACK()

SUBROUTINE_015B:
  5: 0x015B [0x86] EventEntity->Render.Flags3 = Flags3  // No change (flag=0)
  6: 0x0161 [0x1E] EventEntity looks at LocalPlayer and starts talking
  7: 0x0166 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  8: 0x0167 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
  9: 0x0168 [0x1B] RETURN
```

#### Data or dead code:

```
# Dead code (unreachable instructions):
     0x0169 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=0*
     0x0178 [0x1B] RETURN
     0x0179 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk1" with entities [EventEntity, EventEntity], work=0*
     0x0188 [0x1B] RETURN
     0x0189 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=10*
     0x0198 [0x1B] RETURN
     0x0199 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=20*
     0x01A8 [0x1B] RETURN
     0x01A9 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=30*
     0x01B8 [0x1B] RETURN
     0x01B9 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=40*
     0x01C8 [0x1B] RETURN
     0x01C9 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=50*
     0x01D8 [0x1B] RETURN
     0x01D9 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=60*
     0x01E8 [0x1B] RETURN
     0x01E9 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=5*
     0x01F8 [0x1B] RETURN
     0x01F9 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=80*
     0x0208 [0x1B] RETURN
     0x0209 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=238*
     0x0218 [0x1B] RETURN
     0x0219 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=566*
     0x0228 [0x1B] RETURN
     0x0229 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tlb0" with entities [EventEntity, EventEntity], work=60*
     0x0238 [0x1B] RETURN
```
