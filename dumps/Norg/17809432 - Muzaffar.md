# 17809432 - Muzaffar

## Common Data

| Field            | Value          |
|------------------|----------------|
| Zone             | Norg (ID: 252) |
| Block Size       | 708 bytes      |
| Total Events     | 7              |
| References Count | 29             |

## List of Events

| Event ID              | Entrypoint   |   Size |   Instructions |
|-----------------------|--------------|--------|----------------|
| [65535](#event-65535) | 0x0000       |      1 |              1 |
| [15](#event-15)       | 0x0001       |    113 |             32 |
| [16](#event-16)       | 0x0072       |     50 |             14 |
| [17](#event-17)       | 0x00A4       |     46 |             10 |
| [18](#event-18)       | 0x00D2       |     46 |             10 |
| [19](#event-19)       | 0x0100       |     46 |             10 |
| [20](#event-20)       | 0x012E       |    246 |             39 |

## DAT References (imed_data)

|   Index | Hex Value   |   Dec Value |
|---------|-------------|-------------|
|       0 | 0x27AD      |       10157 |
|       1 | 0x27AE      |       10158 |
|       2 | 0x27AF      |       10159 |
|       3 | 0x0000      |           0 |
|       4 | 0x0001      |           1 |
|       5 | 0x00EE      |         238 |
|       6 | 0x27B0      |       10160 |
|       7 | 0x27B1      |       10161 |
|       8 | 0x27B2      |       10162 |
|       9 | 0x27B3      |       10163 |
|      10 | 0x04AF      |        1199 |
|      11 | 0x04B0      |        1200 |
|      12 | 0x04B1      |        1201 |
|      13 | 0x27B4      |       10164 |
|      14 | 0x27B5      |       10165 |
|      15 | 0x27B6      |       10166 |
|      16 | 0x27B7      |       10167 |
|      17 | 0x27B8      |       10168 |
|      18 | 0x00C9      |         201 |
|      19 | 0x27B9      |       10169 |
|      20 | 0x000A      |          10 |
|      21 | 0x0014      |          20 |
|      22 | 0x001E      |          30 |
|      23 | 0x0028      |          40 |
|      24 | 0x0032      |          50 |
|      25 | 0x003C      |          60 |
|      26 | 0x0005      |           5 |
|      27 | 0x0050      |          80 |
|      28 | 0x0236      |         566 |

## String References

- **10157**: Gnyah-hah-hoh! A fine lookin' adventurer you are. I heard that if the price is right, your kind will do almost anything.
- **10158**: How's about it? Are ya game?
- **10159**: Accept Muzaffar's offer? [Yes./No.]
- **10160**: That's too bad. I was ready to pay a bundle... Guess I'll just have to find someone with a little more moxie.
- **10161**: That's the answer I was lookin' for! As you know, we sell items here that are forbidden to import and export on the mainland.
- **10162**: But as of late there's been mighty more demand than our supply can handle. We just don't have enough people to keep up. That's where you come in.
- **10163**: If you can make it here, you can make it to where all those forbidden items are found. You bring me some, and I'll pay you well. Oh, and I wouldn't try sellin' the goods at any other shop. You won't get ten gil for them.
- **10164**: This is what I need: $1, $2, and $3.
- **10165**: Bring them to me in sets. Four items make one set. I'll pay you for one set at a time.
- **10166**: You already forgot what I want you to bring? Not that smart for an adventurer, are you? Now listen up, I don't want to have to tell you again.
- **10167**: Gnyah-hoh-hoh! If it isn't a set of $1! Here's the payment I promised you.
- **10168**: If you ever come across any more, bring them to me, 'cause I'll be happy to take them off your hands for you. Like they say, "You scratch my back, I'll scratch yours."
- **10169**: If you ever have any more $1, $2, or $3, come to Muzaffar. I'll be happy to take them off your hands for you.

## Events

### Event 65535

#### Metadata

| Field        | Value   |
|--------------|---------|
| Entrypoint   | 0x0000  |
| Data Size    | 1 bytes |
| Instructions | 1       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000: 00                                                .               
```

#### Opcodes

```
  0: 0x0000 [0x00] END_REQSTACK()
```

### Event 15

#### Metadata

| Field        | Value     |
|--------------|-----------|
| Entrypoint   | 0x0001    |
| Data Size    | 113 bytes |
| Instructions | 31        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000:    1A 46 01 1D 00 80 23  1D 01 80 23 24 02 80 03   .F....#...#$...
0010: 80 03 80 25 02 00 10 04  80 00 35 00 5B 05 80 F8  ...%......5.[...
0020: FF FF 7F F8 FF FF 7F 74  68 6B 31 1D 06 80 23 01  .......thk1...#.
0030: 70 00 01 35 00 42 1A F4  01 1D 07 80 23 1D 08 80  p..5.B......#...
0040: 23 1D 09 80 23 03 03 10  0A 80 03 04 10 0B 80 03  #...#...........
0050: 05 10 0C 80 1D 0D 80 23  5B 05 80 F8 FF FF 7F F8  .......#[.......
0060: FF FF 7F 74 6C 6B 31 1D  0E 80 23 03 01 10 04 80  ...tlk1...#.....
0070: 21 00                                             !.              
```

#### Opcodes

```
  0: 0x0001 [0x1A] CALL_SUBROUTINE(address=0x0146)
  1: 0x0004 [0x1D] PRINT_EVENT_MESSAGE(message_id=10157*)
    → "Gnyah-hah-hoh! A fine lookin' adventurer you are. I heard that if the price is right, your kind will do almost anything."
  2: 0x0007 [0x23] WAIT_FOR_DIALOG_INTERACTION
  3: 0x0008 [0x1D] PRINT_EVENT_MESSAGE(message_id=10158*)
    → "How's about it? Are ya game?"
  4: 0x000B [0x23] WAIT_FOR_DIALOG_INTERACTION
  5: 0x000C [0x24] CREATE_DIALOG(message_id=10159*, default_option=0*, option_flags=0*)
    → "Accept Muzaffar's offer? [Yes./No.]"
  6: 0x0013 [0x25] WAIT_DIALOG_SELECT()
  7: 0x0014 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x0035
  8: 0x001C [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "thk1" with entities [EventEntity, EventEntity], work=238*
  9: 0x002B [0x1D] PRINT_EVENT_MESSAGE(message_id=10160*)
    → "That's too bad. I was ready to pay a bundle... Guess I'll just have to find someone with a little more moxie."
 10: 0x002E [0x23] WAIT_FOR_DIALOG_INTERACTION
 11: 0x002F [0x01] GOTO 0x0070

SUBROUTINE_0035:
 12: 0x0035 [0x42] SET_CLI_EVENT_CANCEL_DATA()
 13: 0x0036 [0x1A] CALL_SUBROUTINE(address=0x01F4)
 14: 0x0039 [0x1D] PRINT_EVENT_MESSAGE(message_id=10161*)
    → "That's the answer I was lookin' for! As you know, we sell items here that are forbidden to import and export on the mainland."
 15: 0x003C [0x23] WAIT_FOR_DIALOG_INTERACTION
 16: 0x003D [0x1D] PRINT_EVENT_MESSAGE(message_id=10162*)
    → "But as of late there's been mighty more demand than our supply can handle. We just don't have enough people to keep up. That's where you come in."
 17: 0x0040 [0x23] WAIT_FOR_DIALOG_INTERACTION
 18: 0x0041 [0x1D] PRINT_EVENT_MESSAGE(message_id=10163*)
    → "If you can make it here, you can make it to where all those forbidden items are found. You bring me some, and I'll pay you well. Oh, and I wouldn't try sellin' the goods at any other shop. You won't get ten gil for them."
 19: 0x0044 [0x23] WAIT_FOR_DIALOG_INTERACTION
 20: 0x0045 [0x03] Work_Zone[3] = 1199*
 21: 0x004A [0x03] Work_Zone[4] = 1200*
 22: 0x004F [0x03] Work_Zone[5] = 1201*
 23: 0x0054 [0x1D] PRINT_EVENT_MESSAGE(message_id=10164*)
    → "This is what I need: $1, $2, and $3."
 24: 0x0057 [0x23] WAIT_FOR_DIALOG_INTERACTION
 25: 0x0058 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tlk1" with entities [EventEntity, EventEntity], work=238*
 26: 0x0067 [0x1D] PRINT_EVENT_MESSAGE(message_id=10165*)
    → "Bring them to me in sets. Four items make one set. I'll pay you for one set at a time."
 27: 0x006A [0x23] WAIT_FOR_DIALOG_INTERACTION
 28: 0x006B [0x03] Work_Zone[1] = 1*

SUBROUTINE_0070:
 29: 0x0070 [0x21] END_EVENT
 30: 0x0071 [0x00] END_REQSTACK()
```

#### Data or dead code:

```
# Dead code (unreachable instructions):
     0x0032 [0x01] GOTO 0x0035
```

### Event 16

#### Metadata

| Field        | Value    |
|--------------|----------|
| Entrypoint   | 0x0072   |
| Data Size    | 50 bytes |
| Instructions | 14       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0070:       1A 46 01 1A F4 01  1D 0F 80 23 03 03 10 0A    .F.......#....
0080: 80 03 04 10 0B 80 03 05  10 0C 80 1D 0D 80 23 5B  ..............#[
0090: 05 80 F8 FF FF 7F F8 FF  FF 7F 74 6C 6B 31 1D 0E  ..........tlk1..
00A0: 80 23 21 00                                       .#!.            
```

#### Opcodes

```
  0: 0x0072 [0x1A] CALL_SUBROUTINE(address=0x0146)
  1: 0x0075 [0x1A] CALL_SUBROUTINE(address=0x01F4)
  2: 0x0078 [0x1D] PRINT_EVENT_MESSAGE(message_id=10166*)
    → "You already forgot what I want you to bring? Not that smart for an adventurer, are you? Now listen up, I don't want to have to tell you again."
  3: 0x007B [0x23] WAIT_FOR_DIALOG_INTERACTION
  4: 0x007C [0x03] Work_Zone[3] = 1199*
  5: 0x0081 [0x03] Work_Zone[4] = 1200*
  6: 0x0086 [0x03] Work_Zone[5] = 1201*
  7: 0x008B [0x1D] PRINT_EVENT_MESSAGE(message_id=10164*)
    → "This is what I need: $1, $2, and $3."
  8: 0x008E [0x23] WAIT_FOR_DIALOG_INTERACTION
  9: 0x008F [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tlk1" with entities [EventEntity, EventEntity], work=238*
 10: 0x009E [0x1D] PRINT_EVENT_MESSAGE(message_id=10165*)
    → "Bring them to me in sets. Four items make one set. I'll pay you for one set at a time."
 11: 0x00A1 [0x23] WAIT_FOR_DIALOG_INTERACTION
 12: 0x00A2 [0x21] END_EVENT
 13: 0x00A3 [0x00] END_REQSTACK()
```

### Event 17

#### Metadata

| Field        | Value    |
|--------------|----------|
| Entrypoint   | 0x00A4   |
| Data Size    | 46 bytes |
| Instructions | 10       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
00A0:             42 1A 46 01  1D 10 80 23 5B 05 80 F8      B.F....#[...
00B0: FF FF 7F F8 FF FF 7F 70  61 73 30 1D 11 80 23 45  .......pas0...#E
00C0: 12 80 F0 FF FF 7F F0 FF  FF 7F 71 73 74 63 03 80  ..........qstc..
00D0: 21 00                                             !.              
```

#### Opcodes

```
  0: 0x00A4 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x00A5 [0x1A] CALL_SUBROUTINE(address=0x0146)
  2: 0x00A8 [0x1D] PRINT_EVENT_MESSAGE(message_id=10167*)
    → "Gnyah-hoh-hoh! If it isn't a set of $1! Here's the payment I promised you."
  3: 0x00AB [0x23] WAIT_FOR_DIALOG_INTERACTION
  4: 0x00AC [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "pas0" with entities [EventEntity, EventEntity], work=238*
  5: 0x00BB [0x1D] PRINT_EVENT_MESSAGE(message_id=10168*)
    → "If you ever come across any more, bring them to me, 'cause I'll be happy to take them off your hands for you. Like they say, "You scratch my back, I'll scratch yours.""
  6: 0x00BE [0x23] WAIT_FOR_DIALOG_INTERACTION
  7: 0x00BF [0x45] LOAD_SCHEDULED_TASK: Load scheduler "qstc" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
  8: 0x00D0 [0x21] END_EVENT
  9: 0x00D1 [0x00] END_REQSTACK()
```

### Event 18

#### Metadata

| Field        | Value    |
|--------------|----------|
| Entrypoint   | 0x00D2   |
| Data Size    | 46 bytes |
| Instructions | 10       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
00D0:       42 1A 46 01 1D 10  80 23 5B 05 80 F8 FF FF    B.F....#[.....
00E0: 7F F8 FF FF 7F 70 61 73  30 1D 11 80 23 45 12 80  .....pas0...#E..
00F0: F0 FF FF 7F F0 FF FF 7F  71 73 74 63 03 80 21 00  ........qstc..!.
```

#### Opcodes

```
  0: 0x00D2 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x00D3 [0x1A] CALL_SUBROUTINE(address=0x0146)
  2: 0x00D6 [0x1D] PRINT_EVENT_MESSAGE(message_id=10167*)
    → "Gnyah-hoh-hoh! If it isn't a set of $1! Here's the payment I promised you."
  3: 0x00D9 [0x23] WAIT_FOR_DIALOG_INTERACTION
  4: 0x00DA [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "pas0" with entities [EventEntity, EventEntity], work=238*
  5: 0x00E9 [0x1D] PRINT_EVENT_MESSAGE(message_id=10168*)
    → "If you ever come across any more, bring them to me, 'cause I'll be happy to take them off your hands for you. Like they say, "You scratch my back, I'll scratch yours.""
  6: 0x00EC [0x23] WAIT_FOR_DIALOG_INTERACTION
  7: 0x00ED [0x45] LOAD_SCHEDULED_TASK: Load scheduler "qstc" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
  8: 0x00FE [0x21] END_EVENT
  9: 0x00FF [0x00] END_REQSTACK()
```

### Event 19

#### Metadata

| Field        | Value    |
|--------------|----------|
| Entrypoint   | 0x0100   |
| Data Size    | 46 bytes |
| Instructions | 10       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0100: 42 1A 46 01 1D 10 80 23  5B 05 80 F8 FF FF 7F F8  B.F....#[.......
0110: FF FF 7F 70 61 73 30 1D  11 80 23 45 12 80 F0 FF  ...pas0...#E....
0120: FF 7F F0 FF FF 7F 71 73  74 63 03 80 21 00        ......qstc..!.  
```

#### Opcodes

```
  0: 0x0100 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x0101 [0x1A] CALL_SUBROUTINE(address=0x0146)
  2: 0x0104 [0x1D] PRINT_EVENT_MESSAGE(message_id=10167*)
    → "Gnyah-hoh-hoh! If it isn't a set of $1! Here's the payment I promised you."
  3: 0x0107 [0x23] WAIT_FOR_DIALOG_INTERACTION
  4: 0x0108 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "pas0" with entities [EventEntity, EventEntity], work=238*
  5: 0x0117 [0x1D] PRINT_EVENT_MESSAGE(message_id=10168*)
    → "If you ever come across any more, bring them to me, 'cause I'll be happy to take them off your hands for you. Like they say, "You scratch my back, I'll scratch yours.""
  6: 0x011A [0x23] WAIT_FOR_DIALOG_INTERACTION
  7: 0x011B [0x45] LOAD_SCHEDULED_TASK: Load scheduler "qstc" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
  8: 0x012C [0x21] END_EVENT
  9: 0x012D [0x00] END_REQSTACK()
```

### Event 20

#### Metadata

| Field        | Value     |
|--------------|-----------|
| Entrypoint   | 0x012E    |
| Data Size    | 246 bytes |
| Instructions | 13        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0120:                                            1A 46                .F
0130: 01 03 03 10 0A 80 03 04  10 0B 80 03 05 10 0C 80  ................
0140: 1D 13 80 23 21 00 86 00  F8 FF FF 7F 1E F0 FF FF  ...#!...........
0150: 7F 6F 70 1B 66 03 80 F8  FF FF 7F F8 FF FF 7F 74  .op.f..........t
0160: 6C 6B 30 1B 66 03 80 F8  FF FF 7F F8 FF FF 7F 74  lk0.f..........t
0170: 6C 6B 31 1B 66 14 80 F8  FF FF 7F F8 FF FF 7F 74  lk1.f..........t
0180: 6C 6B 30 1B 66 15 80 F8  FF FF 7F F8 FF FF 7F 74  lk0.f..........t
0190: 6C 6B 30 1B 66 16 80 F8  FF FF 7F F8 FF FF 7F 74  lk0.f..........t
01A0: 6C 6B 30 1B 66 17 80 F8  FF FF 7F F8 FF FF 7F 74  lk0.f..........t
01B0: 6C 6B 30 1B 66 18 80 F8  FF FF 7F F8 FF FF 7F 74  lk0.f..........t
01C0: 6C 6B 30 1B 66 19 80 F8  FF FF 7F F8 FF FF 7F 74  lk0.f..........t
01D0: 6C 6B 30 1B 5B 1A 80 F8  FF FF 7F F8 FF FF 7F 74  lk0.[..........t
01E0: 6C 6B 30 1B 5B 1B 80 F8  FF FF 7F F8 FF FF 7F 74  lk0.[..........t
01F0: 6C 6B 30 1B 5B 05 80 F8  FF FF 7F F8 FF FF 7F 74  lk0.[..........t
0200: 6C 6B 30 1B 5B 1C 80 F8  FF FF 7F F8 FF FF 7F 74  lk0.[..........t
0210: 6C 6B 30 1B 5B 19 80 F8  FF FF 7F F8 FF FF 7F 74  lk0.[..........t
0220: 6C 62 30 1B                                       lb0.            
```

#### Opcodes

```
  0: 0x012E [0x1A] CALL_SUBROUTINE(address=0x0146)
  1: 0x0131 [0x03] Work_Zone[3] = 1199*
  2: 0x0136 [0x03] Work_Zone[4] = 1200*
  3: 0x013B [0x03] Work_Zone[5] = 1201*
  4: 0x0140 [0x1D] PRINT_EVENT_MESSAGE(message_id=10169*)
    → "If you ever have any more $1, $2, or $3, come to Muzaffar. I'll be happy to take them off your hands for you."
  5: 0x0143 [0x23] WAIT_FOR_DIALOG_INTERACTION
  6: 0x0144 [0x21] END_EVENT
  7: 0x0145 [0x00] END_REQSTACK()

SUBROUTINE_0146:
  8: 0x0146 [0x86] EventEntity->Render.Flags3 = Flags3  // No change (flag=0)
  9: 0x014C [0x1E] EventEntity looks at LocalPlayer and starts talking
 10: 0x0151 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 11: 0x0152 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
 12: 0x0153 [0x1B] RETURN
```

#### Data or dead code:

```
# Dead code (unreachable instructions):
     0x0154 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=0*
     0x0163 [0x1B] RETURN
     0x0164 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk1" with entities [EventEntity, EventEntity], work=0*
     0x0173 [0x1B] RETURN
     0x0174 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=10*
     0x0183 [0x1B] RETURN
     0x0184 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=20*
     0x0193 [0x1B] RETURN
     0x0194 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=30*
     0x01A3 [0x1B] RETURN
     0x01A4 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=40*
     0x01B3 [0x1B] RETURN
     0x01B4 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=50*
     0x01C3 [0x1B] RETURN
     0x01C4 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=60*
     0x01D3 [0x1B] RETURN
     0x01D4 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=5*
     0x01E3 [0x1B] RETURN
     0x01E4 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=80*
     0x01F3 [0x1B] RETURN
     0x01F4 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=238*
     0x0203 [0x1B] RETURN
     0x0204 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=566*
     0x0213 [0x1B] RETURN
     0x0214 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tlb0" with entities [EventEntity, EventEntity], work=60*
     0x0223 [0x1B] RETURN
```
