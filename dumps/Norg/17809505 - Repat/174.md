# Event 174

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 2/2       |
| Offset          | 0x0001    |
| Data Size       | 359 bytes |
| Calculated Size | 359 bytes |
| Instructions    | 85        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000:    1E F0 FF FF 7F 02 04  10 00 80 00 33 01 1D 01   ...........3...
0010: 80 23 02 03 10 00 80 00  2C 01 02 02 10 02 80 03  .#......,.......
0020: 29 00 1D 03 80 23 01 29  01 24 04 80 05 80 00 80  )....#.).$......
0030: 25 02 00 10 00 80 00 DB  00 42 1D 06 80 23 43 00  %........B...#C.
0040: 43 01 02 05 10 07 80 04  BC 00 5B 08 80 F8 FF FF  C.........[.....
0050: 7F F8 FF FF 7F 74 6C 6B  30 45 09 80 F8 FF FF 7F  .....tlk0E......
0060: F8 FF FF 7F 71 73 74 63  00 80 1D 0A 80 23 5B 08  ....qstc.....#[.
0070: 80 F8 FF FF 7F F8 FF FF  7F 70 61 73 30 1D 0B 80  .........pas0...
0080: 23 03 02 10 0C 80 48 0D  80 1C 05 80 02 05 10 0E  #.....H.........
0090: 80 80 9B 00 1D 0F 80 23  01 B9 00 02 05 10 10 80  .......#........
00A0: 80 AA 00 1D 11 80 23 01  B9 00 02 05 10 12 80 80  ......#.........
00B0: B9 00 1D 11 80 23 01 B9  00 01 D8 00 5B 08 80 F8  .....#......[...
00C0: FF FF 7F F8 FF FF 7F 74  6C 6B 30 1D 0A 80 23 5E  .......tlk0...#^
00D0: 69 64 6C 30 1D 13 80 23  01 29 01 02 00 10 05 80  idl0...#.)......
00E0: 00 EB 00 03 01 10 14 80  01 29 01 02 00 10 15 80  .........)......
00F0: 00 29 01 5B 08 80 F8 FF  FF 7F F8 FF FF 7F 74 6C  .).[..........tl
0100: 6B 30 1D 16 80 23 1D 03  80 23 1D 17 80 23 1D 18  k0...#...#...#..
0110: 80 23 1D 19 80 23 1D 1A  80 23 5E 69 64 6C 30 1D  .#...#...#^idl0.
0120: 1B 80 23 01 29 00 01 29  01 01 30 01 1D 16 80 23  ..#.)..)..0....#
0130: 01 66 01 02 04 10 1C 80  05 52 01 42 5B 08 80 F8  .f.......R.B[...
0140: FF FF 7F F8 FF FF 7F 70  61 73 30 1D 0F 80 23 01  .......pas0...#.
0150: 66 01 42 5B 08 80 F8 FF  FF 7F F8 FF FF 7F 70 61  f.B[..........pa
0160: 73 30 1D 11 80 23 21 00                           s0...#!.        
```

## Opcodes

```
  0: 0x0001 [0x1E] EventEntity looks at LocalPlayer and starts talking
  1: 0x0006 [0x02] IF !(Work_Zone[4] == 0*) GOTO 0x0133
  2: 0x000E [0x1D] PRINT_EVENT_MESSAGE(message_id=10764*)
    → "Hey, \u007F\u0005[mister/lady]. You look like you could use some extra cash, and what easier way to get gil than by making a date with Lady Luck?\u007F1\u0000\u0007"
  3: 0x0011 [0x23] WAIT_FOR_DIALOG_INTERACTION
  4: 0x0012 [0x02] IF !(Work_Zone[3] == 0*) GOTO 0x012C
  5: 0x001A [0x02] IF !(Work_Zone[2] >= 100*) GOTO 0x0029
  6: 0x0022 [0x1D] PRINT_EVENT_MESSAGE(message_id=10767*)
    → "One play is 100 gil, but as long as you keep paying, you can keep playing.\u007F1\u0000\u0007"
  7: 0x0025 [0x23] WAIT_FOR_DIALOG_INTERACTION
  8: 0x0026 [0x01] GOTO 0x0129

SUBROUTINE_0029:
  9: 0x0029 [0x24] CREATE_DIALOG(message_id=10765*, default_option=1*, option_flags=0*)
    → "Give \u00072Lucky Roll\u00073 a try?\u0007\u000BLuck be a lady tonight!\u0007I'm not throwing my money away!\u0007Fill me in on the details.\u007F1\u0000\u0007"
 10: 0x0030 [0x25] WAIT_DIALOG_SELECT()
 11: 0x0031 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x00DB
 12: 0x0039 [0x42] SET_CLI_EVENT_CANCEL_DATA()
 13: 0x003A [0x1D] PRINT_EVENT_MESSAGE(message_id=10773*)
    → "Alright, enough talk, let's get rolling!\u007F1\u0000\u0007"
 14: 0x003D [0x23] WAIT_FOR_DIALOG_INTERACTION
 15: 0x003E [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
 16: 0x0040 [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
 17: 0x0042 [0x02] IF !(Work_Zone[5] < 400*) GOTO 0x00BC
 18: 0x004A [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=238*
 19: 0x0059 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "qstc" with entities [EventEntity, EventEntity], work=[201*, 0*]
 20: 0x006A [0x1D] PRINT_EVENT_MESSAGE(message_id=10774*)
    → "You rolled a...
\u0001!\u0007The running total is now 
\u0003!\u007F1\u0000\u0007"
 21: 0x006D [0x23] WAIT_FOR_DIALOG_INTERACTION
 22: 0x006E [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "pas0" with entities [EventEntity, EventEntity], work=238*
 23: 0x007D [0x1D] PRINT_EVENT_MESSAGE(message_id=10775*)
    → "Congratulations! Lady Luck has smiled on you today! Here's your 10000 gil!\u007F1\u0000\u0007"
 24: 0x0080 [0x23] WAIT_FOR_DIALOG_INTERACTION
 25: 0x0081 [0x03] Work_Zone[2] = 10000*
 26: 0x0086 [0x48] [System] [6415*]:
    → "Obtained 
\u0000 gil.\u0000\u0007"
 27: 0x0089 [0x1C] WAIT(1* ticks)
 28: 0x008C [0x02] IF !(Work_Zone[5] == 1000*) GOTO 0x009B
 29: 0x0094 [0x1D] PRINT_EVENT_MESSAGE(message_id=10776*)
    → "And because your roll put the running total at exactly 400, you receive a bonus prize!\u007F1\u0000\u0007"
 30: 0x0097 [0x23] WAIT_FOR_DIALOG_INTERACTION
 31: 0x0098 [0x01] GOTO 0x00B9
 32: 0x009B [0x02] IF !(Work_Zone[5] == 1001*) GOTO 0x00AA
 33: 0x00A3 [0x1D] PRINT_EVENT_MESSAGE(message_id=10777*)
    → "And for bringing the total so close to 400, here is your extra prize!\u007F1\u0000\u0007"
 34: 0x00A6 [0x23] WAIT_FOR_DIALOG_INTERACTION
 35: 0x00A7 [0x01] GOTO 0x00B9
 36: 0x00AA [0x02] IF !(Work_Zone[5] == 1002*) GOTO 0x00B9
 37: 0x00B2 [0x1D] PRINT_EVENT_MESSAGE(message_id=10777*)
    → "And for bringing the total so close to 400, here is your extra prize!\u007F1\u0000\u0007"
 38: 0x00B5 [0x23] WAIT_FOR_DIALOG_INTERACTION
 39: 0x00B6 [0x01] GOTO 0x00B9

SUBROUTINE_00B9:
 40: 0x00B9 [0x01] GOTO 0x00D8
 41: 0x00BC [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=238*
 42: 0x00CB [0x1D] PRINT_EVENT_MESSAGE(message_id=10774*)
    → "You rolled a...
\u0001!\u0007The running total is now 
\u0003!\u007F1\u0000\u0007"
 43: 0x00CE [0x23] WAIT_FOR_DIALOG_INTERACTION
 44: 0x00CF [0x5E] EventEntity goes idle (kills current action) (animation: "idl0")
 45: 0x00D4 [0x1D] PRINT_EVENT_MESSAGE(message_id=10778*)
    → "I'm sorry, but that's it for today's game of Lucky Roll. Come by tomorrow, and maybe Lady Luck will be waiting for you!\u007F1\u0000\u0007"
 46: 0x00D7 [0x23] WAIT_FOR_DIALOG_INTERACTION

SUBROUTINE_00D8:
 47: 0x00D8 [0x01] GOTO 0x0129
 48: 0x00DB [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x00EB
 49: 0x00E3 [0x03] Work_Zone[1] = 1073741824*
 50: 0x00E8 [0x01] GOTO 0x0129
 51: 0x00EB [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x0129
 52: 0x00F3 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=238*
 53: 0x0102 [0x1D] PRINT_EVENT_MESSAGE(message_id=10766*)
    → "Let me explain to you how it works. One game of Lucky Roll is played each Vana'diel day.\u007F1\u0000\u0007"
 54: 0x0105 [0x23] WAIT_FOR_DIALOG_INTERACTION
 55: 0x0106 [0x1D] PRINT_EVENT_MESSAGE(message_id=10767*)
    → "One play is 100 gil, but as long as you keep paying, you can keep playing.\u007F1\u0000\u0007"
 56: 0x0109 [0x23] WAIT_FOR_DIALOG_INTERACTION
 57: 0x010A [0x1D] PRINT_EVENT_MESSAGE(message_id=10768*)
    → "For each 100 gil, you get one roll of our six-sided die. The number that appears is added to the running total for that day.\u007F1\u0000\u0007"
 58: 0x010D [0x23] WAIT_FOR_DIALOG_INTERACTION
 59: 0x010E [0x1D] PRINT_EVENT_MESSAGE(message_id=10769*)
    → "The lucky adventurer who rolls the die that gets the running total over 400 wins...get this...a whopping 10000 gil!\u007F1\u0000\u0007"
 60: 0x0111 [0x23] WAIT_FOR_DIALOG_INTERACTION
 61: 0x0112 [0x1D] PRINT_EVENT_MESSAGE(message_id=10770*)
    → "And that's not all! You'll receive extra prizes if the total comes to 401 or 402, and a super bonus prize if your roll brings the total to exactly 400!\u007F1\u0000\u0007"
 62: 0x0115 [0x23] WAIT_FOR_DIALOG_INTERACTION
 63: 0x0116 [0x1D] PRINT_EVENT_MESSAGE(message_id=10771*)
    → "But be careful; the only time you can find out the running total is after you have rolled.\u007F1\u0000\u0007"
 64: 0x0119 [0x23] WAIT_FOR_DIALOG_INTERACTION
 65: 0x011A [0x5E] EventEntity goes idle (kills current action) (animation: "idl0")
 66: 0x011F [0x1D] PRINT_EVENT_MESSAGE(message_id=10772*)
    → "And that's it! Pretty simple, huh?\u0007You can attack from the get go, or you can sit back while other people roll, and then come in for the final kill. We provide you with the die, you choose the strategy.\u007F1\u0000\u0007"
 67: 0x0122 [0x23] WAIT_FOR_DIALOG_INTERACTION
 68: 0x0123 [0x01] GOTO 0x0029

SUBROUTINE_0129:
 69: 0x0129 [0x01] GOTO 0x0130
 70: 0x012C [0x1D] PRINT_EVENT_MESSAGE(message_id=10766*)
    → "Let me explain to you how it works. One game of Lucky Roll is played each Vana'diel day.\u007F1\u0000\u0007"
 71: 0x012F [0x23] WAIT_FOR_DIALOG_INTERACTION

SUBROUTINE_0130:
 72: 0x0130 [0x01] GOTO 0x0166
 73: 0x0133 [0x02] IF !(Work_Zone[4] > 8*) GOTO 0x0152
 74: 0x013B [0x42] SET_CLI_EVENT_CANCEL_DATA()
 75: 0x013C [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "pas0" with entities [EventEntity, EventEntity], work=238*
 76: 0x014B [0x1D] PRINT_EVENT_MESSAGE(message_id=10776*)
    → "And because your roll put the running total at exactly 400, you receive a bonus prize!\u007F1\u0000\u0007"
 77: 0x014E [0x23] WAIT_FOR_DIALOG_INTERACTION
 78: 0x014F [0x01] GOTO 0x0166
 79: 0x0152 [0x42] SET_CLI_EVENT_CANCEL_DATA()
 80: 0x0153 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "pas0" with entities [EventEntity, EventEntity], work=238*
 81: 0x0162 [0x1D] PRINT_EVENT_MESSAGE(message_id=10777*)
    → "And for bringing the total so close to 400, here is your extra prize!\u007F1\u0000\u0007"
 82: 0x0165 [0x23] WAIT_FOR_DIALOG_INTERACTION

SUBROUTINE_0166:
 83: 0x0166 [0x21] END_EVENT
 84: 0x0167 [0x00] END_REQSTACK()
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x0126 [0x01] GOTO 0x0129
```