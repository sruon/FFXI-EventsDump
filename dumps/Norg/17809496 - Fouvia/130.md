# Event 130

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 2/2       |
| Offset          | 0x0001    |
| Data Size       | 521 bytes |
| Calculated Size | 521 bytes |
| Instructions    | 47        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000:    1E F0 FF FF 7F 6F 70  03 09 10 00 80 02 08 10   .....op........
0010: 01 80 00 2B 00 5B 02 80  F8 FF FF 7F F8 FF FF 7F  ...+.[..........
0020: 74 6C 6B 30 1D 03 80 23  01 46 00 1D 04 80 23 5B  tlk0...#.F....#[
0030: 02 80 F8 FF FF 7F F8 FF  FF 7F 74 6C 6B 30 1D 05  ..........tlk0..
0040: 80 23 1D 06 80 23 5E 69  64 6C 30 24 07 80 01 80  .#...#^idl0$....
0050: 08 80 25 02 00 10 08 80  00 7C 00 1D 09 80 23 03  ..%......|....#.
0060: 01 00 0A 80 1A CF 00 03  01 10 00 00 42 02 00 00  ............B...
0070: 0B 80 01 79 00 1D 0C 80  23 01 90 00 02 00 10 01  ...y....#.......
0080: 80 00 90 00 1D 0D 80 23  03 01 10 0B 80 01 90 00  .......#........
0090: 21 00 24 0E 80 08 80 08  80 25 02 00 10 08 80 00  !.$......%......
00A0: A5 00 01 A5 00 03 00 00  00 10 24 0F 80 01 80 10  ..........$.....
00B0: 80 25 02 00 10 01 80 00  C0 00 01 92 00 01 CE 00  .%..............
00C0: 02 00 10 11 80 00 CE 00  01 92 00 01 CE 00 1B 06  ................
00D0: 00 00 24 12 80 08 80 08  80 25 02 00 10 13 80 00  ..$......%......
00E0: EA 00 03 00 00 13 80 01  00 01 02 00 10 14 80 00  ................
00F0: FB 00 03 00 00 0B 80 1B  01 00 01 03 00 00 00 10  ................
0100: 02 01 00 13 80 04 51 01  02 00 00 13 80 04 51 01  ......Q.......Q.
0110: 24 15 80 08 80 08 80 25  02 00 10 16 80 00 2B 01  $......%......+.
0120: 08 00 00 13 80 01 CF 00  01 51 01 02 00 10 13 80  .........Q......
0130: 00 3B 01 07 00 00 16 80  01 51 01 02 00 10 14 80  .;.......Q......
0140: 00 4C 01 03 00 00 0B 80  1B 01 51 01 07 00 00 00  .L........Q.....
0150: 10 02 01 00 17 80 04 A2  01 02 00 00 17 80 04 A2  ................
0160: 01 24 18 80 08 80 08 80  25 02 00 10 16 80 00 7C  .$......%......|
0170: 01 08 00 00 16 80 01 00  01 01 A2 01 02 00 10 13  ................
0180: 80 00 8C 01 07 00 00 16  80 01 A2 01 02 00 10 14  ................
0190: 80 00 9D 01 03 00 00 0B  80 1B 01 A2 01 07 00 00  ................
01A0: 00 10 02 01 00 19 80 04  E3 01 02 00 00 19 80 04  ................
01B0: E3 01 24 1A 80 08 80 0B  80 25 02 00 10 16 80 00  ..$......%......
01C0: CD 01 08 00 00 16 80 01  51 01 01 E3 01 02 00 10  ........Q.......
01D0: 14 80 00 DE 01 03 00 00  0B 80 1B 01 E3 01 07 00  ................
01E0: 00 00 10 24 0F 80 01 80  08 80 25 02 00 10 01 80  ...$......%.....
01F0: 00 F9 01 01 CF 00 01 09  02 02 00 10 11 80 00 09  ................
0200: 02 03 00 00 0B 80 01 09  02 1B                    ..........      
```

## Opcodes

```
  0: 0x0001 [0x1E] EventEntity looks at LocalPlayer and starts talking
  1: 0x0006 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  2: 0x0007 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
  3: 0x0008 [0x03] Work_Zone[9] = 9800*
  4: 0x000D [0x02] IF !(Work_Zone[8] == 1*) GOTO 0x002B
  5: 0x0015 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=35*
  6: 0x0024 [0x1D] PRINT_EVENT_MESSAGE(message_id=10591*)
    → "Ye want ter change yer wyvern's name again? Jes pay me fee of 
\u0007 gil, an' oi can 'elp yer.\u007F1\u0000\u0007"
  7: 0x0027 [0x23] WAIT_FOR_DIALOG_INTERACTION
  8: 0x0028 [0x01] GOTO 0x0046
  9: 0x002B [0x1D] PRINT_EVENT_MESSAGE(message_id=10588*)
    → "Oi spy ye've got a gran' wyvern dare witcha.\u007F1\u0000\u0007"
 10: 0x002E [0x23] WAIT_FOR_DIALOG_INTERACTION
 11: 0x002F [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=35*
 12: 0x003E [0x1D] PRINT_EVENT_MESSAGE(message_id=10589*)
    → "Ye gave a name ter yer wyvern whaen yer made yer pact, roi? Well, I'll let ye in on a secret. Did ye know ye can change yer wyvern's name?\u007F1\u0000\u0007"
 13: 0x0041 [0x23] WAIT_FOR_DIALOG_INTERACTION
 14: 0x0042 [0x1D] PRINT_EVENT_MESSAGE(message_id=10590*)
    → "If ye pay me fee of 
\u0007 gil, oi can 'elp yer. Waaat do yer say? You can alwus back oyt at any time.\u007F1\u0000\u0007"
 15: 0x0045 [0x23] WAIT_FOR_DIALOG_INTERACTION
 16: 0x0046 [0x5E] EventEntity goes idle (kills current action) (animation: "idl0")
 17: 0x004B [0x24] CREATE_DIALOG(message_id=10592*, default_option=1*, option_flags=0*)
    → "Ask the woman for her help?\u0007\u000BYes.\u0007No.\u007F1\u0000\u0007"
 18: 0x0052 [0x25] WAIT_DIALOG_SELECT()
 19: 0x0053 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x007C
 20: 0x005B [0x1D] PRINT_EVENT_MESSAGE(message_id=10594*)
    → "Choose a new name from de followin'. An' don't go givin' yer wyvern de seem name, now, hear?\u007F1\u0000\u0007"
 21: 0x005E [0x23] WAIT_FOR_DIALOG_INTERACTION
 22: 0x005F [0x03] ExtData[1]->WorkLocal[1] = 116*
 23: 0x0064 [0x1A] CALL_SUBROUTINE(address=0x00CF)
 24: 0x0067 [0x03] Work_Zone[1] = ExtData[1]->WorkLocal[0]
 25: 0x006C [0x42] SET_CLI_EVENT_CANCEL_DATA()
 26: 0x006D [0x02] IF !(ExtData[1]->WorkLocal[0] == 1073741824*) GOTO 0x0079
 27: 0x0075 [0x1D] PRINT_EVENT_MESSAGE(message_id=10595*)
    → "Waaat a gran' name ye 'av chosen. Good day!\u007F1\u0000\u0007"
 28: 0x0078 [0x23] WAIT_FOR_DIALOG_INTERACTION
 29: 0x0079 [0x01] GOTO 0x0090
 30: 0x007C [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x0090
 31: 0x0084 [0x1D] PRINT_EVENT_MESSAGE(message_id=10593*)
    → "A wyvern's name is a part av its destiny. A change may be good for it. Come back if ye change yer mind.\u007F1\u0000\u0007"
 32: 0x0087 [0x23] WAIT_FOR_DIALOG_INTERACTION
 33: 0x0088 [0x03] Work_Zone[1] = 1073741824*
 34: 0x008D [0x01] GOTO 0x0090

SUBROUTINE_0090:
 35: 0x0090 [0x21] END_EVENT
 36: 0x0091 [0x00] END_REQSTACK()

SUBROUTINE_00CF:
 37: 0x00CF [0x06] ExtData[1]->WorkLocal[0] = 0
 38: 0x00D2 [0x24] CREATE_DIALOG(message_id=10597*, default_option=0*, option_flags=0*)
    → "Select a name for your wyvern.\u0007\u000BAzure\u0007Cerulean\u0007Rygor\u0007Firewing\u0007Delphyne\u0007Ember\u0007Rover\u0007Max\u0007Buster\u0007Duke\u0007Oscar\u0007Maggie\u0007Jessie\u0007Lady\u0007Hien\u0007Raiden\u0007Lumiere\u0007Eisenzahn\u0007Pfeil\u0007Wuffi\u0007George\u0007Donryu\u0007Qiqiru\u0007Karav-Marav\u0007Oboro\u0007Darug-Borug\u0007Mikan\u0007Vhiki\u0007Sasavi\u0007Tatang\u0007Look at the next list.\u0007Quit\u007F1\u0000\u0007"
 39: 0x00D9 [0x25] WAIT_DIALOG_SELECT()
 40: 0x00DA [0x02] IF !(Work_Zone[0] == 30*) GOTO 0x00EA
 41: 0x00E2 [0x03] ExtData[1]->WorkLocal[0] = 30*
 42: 0x00E7 [0x01] GOTO 0x0100
 43: 0x00EA [0x02] IF !(Work_Zone[0] == 31*) GOTO 0x00FB
 44: 0x00F2 [0x03] ExtData[1]->WorkLocal[0] = 1073741824*
 45: 0x00F7 [0x1B] RETURN

SUBROUTINE_0209:
 46: 0x0209 [0x1B] RETURN
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x0092 [0x24] CREATE_DIALOG(message_id=10583*, default_option=0*, option_flags=0*)
    → "Select a name for your Wyvern.\u0007\u000BAzure\u0007Cerulean\u0007Rygor\u0007Firewing\u0007Delphyne\u0007Ember\u0007Rover\u0007Max\u0007Buster\u0007Duke\u0007Oscar\u0007Maggie\u0007Jessie\u0007Lady\u0007Hien\u0007Raiden\u0007Lumiere\u0007Eisenzahn\u0007Pfeil\u0007Wuffi\u0007George\u0007Donryu\u0007Qiqiru\u0007Karav-Marav\u0007Oboro\u0007Darug-Borug\u0007Mikan\u0007Vhiki\u0007Sasavi\u0007Tatang\u0007Nanaja\u0007Khocha\u007F1\u0000\u0007"
     0x0099 [0x25] WAIT_DIALOG_SELECT()
     0x009A [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x00A5
     0x00A2 [0x01] GOTO 0x00A5
     0x00A5 [0x03] ExtData[1]->WorkLocal[0] = Work_Zone[0]
     0x00AA [0x24] CREATE_DIALOG(message_id=10586*, default_option=1*, option_flags=4*)
    → "Is this the name you really want?\u0007\u000BThis is the one.\u0007I need more time to think.\u0007Forget about it.\u007F1\u0000\u0007"
     0x00B1 [0x25] WAIT_DIALOG_SELECT()
     0x00B2 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x00C0
     0x00BA [0x01] GOTO 0x0092
     0x00BD [0x01] GOTO 0x00CE
     0x00C0 [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x00CE
     0x00C8 [0x01] GOTO 0x0092
     0x00CB [0x01] GOTO 0x00CE
     0x00CE [0x1B] RETURN
# Dead code (unreachable instructions):
     0x00F8 [0x01] GOTO 0x0100
     0x0128 [0x01] GOTO 0x0151
     0x0149 [0x01] GOTO 0x0151
     0x0179 [0x01] GOTO 0x01A2
     0x019A [0x01] GOTO 0x01A2
     0x01CA [0x01] GOTO 0x01E3
     0x01DB [0x01] GOTO 0x01E3
     0x01F6 [0x01] GOTO 0x0209
```