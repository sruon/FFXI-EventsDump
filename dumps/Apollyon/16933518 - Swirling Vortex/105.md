# Event 105

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 2/2       |
| Offset          | 0x0001    |
| Data Size       | 486 bytes |
| Calculated Size | 486 bytes |
| Instructions    | 75        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000:    20 01 03 00 00 00 80  03 01 00 00 80 03 00 00    ..............
0010: 03 10 08 00 00 01 80 24  02 80 00 00 01 00 25 02  .......$......%.
0020: 00 10 00 80 00 2F 00 03  01 10 01 80 01 9F 00 02  ...../..........
0030: 00 10 03 80 00 3F 00 03  01 10 04 80 01 9F 00 02  .....?..........
0040: 00 10 05 80 00 4F 00 03  01 10 06 80 01 9F 00 02  .....O..........
0050: 00 10 07 80 00 5F 00 03  01 10 08 80 01 9F 00 02  ....._..........
0060: 00 10 09 80 00 6F 00 03  01 10 0A 80 01 9F 00 02  .....o..........
0070: 00 10 0B 80 00 7F 00 03  01 10 03 80 01 9F 00 02  ................
0080: 00 10 0C 80 00 8F 00 03  01 10 05 80 01 9F 00 02  ................
0090: 00 10 0D 80 00 9F 00 03  01 10 00 80 01 9F 00 02  ................
00A0: 00 10 00 00 00 AF 00 03  01 10 0E 80 01 7D 01 02  .............}..
00B0: 01 10 00 80 00 BA 00 01  7D 01 42 03 02 00 01 10  ........}.B.....
00C0: 03 01 10 0F 80 43 00 43  01 03 01 10 02 00 29 01  .....C.C......).
00D0: F0 FF FF 7F 02 02 01 10  03 80 80 EC 00 47 00 10  .............G..
00E0: 80 11 80 00 80 12 80 47  01 01 76 01 02 01 10 05  .......G..v.....
00F0: 80 80 03 01 47 00 13 80  11 80 00 80 00 80 47 01  ....G.........G.
0100: 01 76 01 02 01 10 01 80  80 1A 01 47 00 14 80 15  .v.........G....
0110: 80 00 80 16 80 47 01 01  76 01 02 01 10 04 80 80  .....G..v.......
0120: 31 01 47 00 17 80 18 80  00 80 19 80 47 01 01 76  1.G.........G..v
0130: 01 02 01 10 06 80 80 48  01 47 00 1A 80 18 80 00  .......H.G......
0140: 80 19 80 47 01 01 76 01  02 01 10 08 80 80 5F 01  ...G..v......._.
0150: 47 00 1B 80 1C 80 00 80  1D 80 47 01 01 76 01 02  G.........G..v..
0160: 01 10 0A 80 80 76 01 47  00 1E 80 1F 80 00 80 1D  .....v.G........
0170: 80 47 01 01 76 01 29 01  F0 FF FF 7F 03 20 00 21  .G..v.)...... .!
0180: 00 9F 20 80 F0 FF FF 7F  F0 FF FF 7F 6D 61 69 6E  .. .........main
0190: 00 80 03 02 00 01 10 03  01 10 0F 80 43 00 43 01  ............C.C.
01A0: 03 01 10 02 00 1C 21 80  45 22 80 F0 FF FF 7F F0  ......!.E"......
01B0: FF FF 7F 66 64 6F 31 00  80 1C 23 80 46 01 1B 45  ...fdo1...#.F..E
01C0: 22 80 F0 FF FF 7F F0 FF  FF 7F 66 64 69 31 00 80  ".........fdi1..
01D0: 9F 24 80 F0 FF FF 7F F0  FF FF 7F 6D 61 69 6E 00  .$.........main.
01E0: 80 1C 25 80 46 00 1B                              ..%.F..         
```

## Opcodes

```
  0: 0x0001 [0x20] SET_CLI_EVENT_UC_FLAG: Lock player control
  1: 0x0003 [0x03] ExtData[1]->WorkLocal[0] = 0*
  2: 0x0008 [0x03] ExtData[1]->WorkLocal[1] = 0*
  3: 0x000D [0x03] ExtData[1]->WorkLocal[0] = Work_Zone[3]
  4: 0x0012 [0x08] ExtData[1]->WorkLocal[0] -= 11*
  5: 0x0017 [0x24] CREATE_DIALOG(message_id=7241*, default_option=0x0000, option_flags=0x01)
    → "Select a destination.\u0007\u000B\u000C\u0000[/NW/SW/NE/SE] #1.\u0007\u000C\u0000[/NW/SW/NE/SE] #2.\u0007\u000C\u0000[/NW/SW/NE/SE] #3.\u0007\u000C\u0000[/NW/SW/NE/SE] #4.\u0007\u000C\u0000[/NW//NE] #5.\u0007Entrance #1.\u0007Entrance #2.\u0007Never mind.\u007F1\u0000\u0007"
  6: 0x001E [0x25] WAIT_DIALOG_SELECT()
  7: 0x001F [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x002F
  8: 0x0027 [0x03] Work_Zone[1] = 11*
  9: 0x002C [0x01] GOTO 0x009F
 10: 0x002F [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x003F
 11: 0x0037 [0x03] Work_Zone[1] = 12*
 12: 0x003C [0x01] GOTO 0x009F
 13: 0x003F [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x004F
 14: 0x0047 [0x03] Work_Zone[1] = 13*
 15: 0x004C [0x01] GOTO 0x009F
 16: 0x004F [0x02] IF !(Work_Zone[0] == 3*) GOTO 0x005F
 17: 0x0057 [0x03] Work_Zone[1] = 14*
 18: 0x005C [0x01] GOTO 0x009F
 19: 0x005F [0x02] IF !(Work_Zone[0] == 4*) GOTO 0x006F
 20: 0x0067 [0x03] Work_Zone[1] = 15*
 21: 0x006C [0x01] GOTO 0x009F
 22: 0x006F [0x02] IF !(Work_Zone[0] == 5*) GOTO 0x007F
 23: 0x0077 [0x03] Work_Zone[1] = 1*
 24: 0x007C [0x01] GOTO 0x009F
 25: 0x007F [0x02] IF !(Work_Zone[0] == 6*) GOTO 0x008F
 26: 0x0087 [0x03] Work_Zone[1] = 2*
 27: 0x008C [0x01] GOTO 0x009F
 28: 0x008F [0x02] IF !(Work_Zone[0] == 7*) GOTO 0x009F
 29: 0x0097 [0x03] Work_Zone[1] = 0*
 30: 0x009C [0x01] GOTO 0x009F

SUBROUTINE_009F:
 31: 0x009F [0x02] IF !(Work_Zone[0] == ExtData[1]->WorkLocal[0]) GOTO 0x00AF
 32: 0x00A7 [0x03] Work_Zone[1] = 255*
 33: 0x00AC [0x01] GOTO 0x017D
 34: 0x00AF [0x02] IF !(Work_Zone[1] == 0*) GOTO 0x00BA
 35: 0x00B7 [0x01] GOTO 0x017D
 36: 0x00BA [0x42] SET_CLI_EVENT_CANCEL_DATA()
 37: 0x00BB [0x03] ExtData[1]->WorkLocal[2] = Work_Zone[1]
 38: 0x00C0 [0x03] Work_Zone[1] = 100*
 39: 0x00C5 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
 40: 0x00C7 [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
 41: 0x00C9 [0x03] Work_Zone[1] = ExtData[1]->WorkLocal[2]
 42: 0x00CE [0x29] REQ_SET_WAIT(priority=0x01, entity_id=LocalPlayer, tag_num=0x02)
 43: 0x00D5 [0x02] IF !(Work_Zone[1] == 1*) GOTO 0x00EC
 44: 0x00DD [0x47] UPDATE_PLAYER_POS(-608.000*, -600.000*, 0.000*, yaw=177.9°*)
 45: 0x00E7 [0x47] WAIT_PLAYER_POS_UPDATE
 46: 0x00E9 [0x01] GOTO 0x0176
 47: 0x00EC [0x02] IF !(Work_Zone[1] == 2*) GOTO 0x0103
 48: 0x00F4 [0x47] UPDATE_PLAYER_POS(608.000*, -600.000*, 0.000*, yaw=0.0°*)
 49: 0x00FE [0x47] WAIT_PLAYER_POS_UPDATE
 50: 0x0100 [0x01] GOTO 0x0176
 51: 0x0103 [0x02] IF !(Work_Zone[1] == 11*) GOTO 0x011A
 52: 0x010B [0x47] UPDATE_PLAYER_POS(-440.000*, -88.000*, 0.000*, yaw=270.0°*)
 53: 0x0115 [0x47] WAIT_PLAYER_POS_UPDATE
 54: 0x0117 [0x01] GOTO 0x0176
 55: 0x011A [0x02] IF !(Work_Zone[1] == 12*) GOTO 0x0131
 56: 0x0122 [0x47] UPDATE_PLAYER_POS(-534.000*, 171.000*, 0.000*, yaw=225.0°*)
 57: 0x012C [0x47] WAIT_PLAYER_POS_UPDATE
 58: 0x012E [0x01] GOTO 0x0176
 59: 0x0131 [0x02] IF !(Work_Zone[1] == 13*) GOTO 0x0148
 60: 0x0139 [0x47] UPDATE_PLAYER_POS(-294.000*, 171.000*, 0.000*, yaw=225.0°*)
 61: 0x0143 [0x47] WAIT_PLAYER_POS_UPDATE
 62: 0x0145 [0x01] GOTO 0x0176
 63: 0x0148 [0x02] IF !(Work_Zone[1] == 14*) GOTO 0x015F
 64: 0x0150 [0x47] UPDATE_PLAYER_POS(-628.000*, 497.000*, 0.000*, yaw=315.0°*)
 65: 0x015A [0x47] WAIT_PLAYER_POS_UPDATE
 66: 0x015C [0x01] GOTO 0x0176
 67: 0x015F [0x02] IF !(Work_Zone[1] == 15*) GOTO 0x0176
 68: 0x0167 [0x47] UPDATE_PLAYER_POS(-388.000*, 498.000*, 0.000*, yaw=315.0°*)
 69: 0x0171 [0x47] WAIT_PLAYER_POS_UPDATE
 70: 0x0173 [0x01] GOTO 0x0176

SUBROUTINE_0176:
 71: 0x0176 [0x29] REQ_SET_WAIT(priority=0x01, entity_id=LocalPlayer, tag_num=0x03)

SUBROUTINE_017D:
 72: 0x017D [0x20] SET_CLI_EVENT_UC_FLAG: Unlock player control
 73: 0x017F [0x21] END_EVENT
 74: 0x0180 [0x00] END_REQSTACK()
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x0181 [0x9F] LOAD_SCHEDULED_TASK_ALT: Load scheduler "main" with entities [LocalPlayer, LocalPlayer], work=[73*, 0*]
     0x0192 [0x03] ExtData[1]->WorkLocal[2] = Work_Zone[1]
     0x0197 [0x03] Work_Zone[1] = 100*
     0x019C [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
     0x019E [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
     0x01A0 [0x03] Work_Zone[1] = ExtData[1]->WorkLocal[2]
     0x01A5 [0x1C] WAIT(140* ticks)
     0x01A8 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x01B9 [0x1C] WAIT(60* ticks)
     0x01BC [0x46] CAMERA_CONTROL: Disable user control
     0x01BE [0x1B] RETURN
     0x01BF [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x01D0 [0x9F] LOAD_SCHEDULED_TASK_ALT: Load scheduler "main" with entities [LocalPlayer, LocalPlayer], work=[74*, 0*]
     0x01E1 [0x1C] WAIT(170* ticks)
     0x01E4 [0x46] CAMERA_CONTROL: Restore default settings
     0x01E6 [0x1B] RETURN
```