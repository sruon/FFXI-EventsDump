# Event 1517

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 5/5       |
| Offset          | 0x0064    |
| Data Size       | 587 bytes |
| Calculated Size | 587 bytes |
| Instructions    | 7         |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0060:             1E F0 FF FF  7F 1D 07 80 23 1D 09 80      ........#...
0070: 23 21 00 05 00 00 02 00  00 0C 80 00 FD 00 03 01  #!..............
0080: 10 03 80 24 0D 80 0E 80  07 00 25 02 00 10 03 80  ...$......%.....
0090: 00 A2 00 40 03 80 0F 80  01 10 0C 80 06 00 00 01  ...@............
00A0: FA 00 02 00 10 0C 80 00  D5 00 1D 10 80 23 1D 11  .............#..
00B0: 80 23 1D 12 80 23 1D 13  80 23 1D 14 80 23 1D 15  .#...#...#...#..
00C0: 80 23 1D 16 80 23 1D 17  80 23 1D 18 80 23 1D 19  .#...#...#...#..
00D0: 80 23 01 FA 00 02 00 10  1A 80 00 E7 00 1D 1B 80  .#..............
00E0: 23 1A FE 00 01 FA 00 02  00 10 0F 80 00 FA 00 03  #...............
00F0: 01 10 1C 80 06 00 00 01  FA 00 01 76 00 1B 05 01  ...........v....
0100: 00 02 01 00 0C 80 00 AE  02 03 02 10 02 00 03 03  ................
0110: 10 1D 80 03 04 10 1E 80  03 05 10 1F 80 03 06 10  ................
0120: 20 80 03 07 10 21 80 03  08 10 22 80 03 09 10 23   ....!...."....#
0130: 80 03 00 17 24 80 03 01  17 25 80 03 02 17 26 80  ....$....%....&.
0140: 24 27 80 03 80 03 80 25  02 00 10 03 80 00 5C 01  $'.....%......\.
0150: 1D 28 80 23 03 06 00 03  80 01 BA 01 02 00 10 0C  .(.#............
0160: 80 00 70 01 1D 29 80 23  03 06 00 0C 80 01 BA 01  ..p..).#........
0170: 02 00 10 1A 80 00 84 01  1D 2A 80 23 03 06 00 1A  .........*.#....
0180: 80 01 BA 01 02 00 10 0F  80 00 98 01 1D 2B 80 23  .............+.#
0190: 03 06 00 0F 80 01 BA 01  02 00 10 0E 80 00 AC 01  ................
01A0: 1D 2C 80 23 03 06 00 0E  80 01 BA 01 02 00 10 2D  .,.#...........-
01B0: 80 00 BA 01 06 01 00 01  BA 01 02 01 00 03 80 01  ................
01C0: AB 02 03 01 10 03 80 48  2E 80 40 03 80 0F 80 01  .......H..@.....
01D0: 10 1A 80 71 12 0C 80 1A  80 71 13 03 00 02 03 00  ...q.....q......
01E0: 03 80 02 AB 02 02 03 00  2F 80 05 AB 02 03 04 00  ......../.......
01F0: 03 00 02 06 00 03 80 80  07 02 14 04 00 1E 80 03  ................
0200: 15 17 1D 80 01 5B 02 02  06 00 0C 80 80 1C 02 14  .....[..........
0210: 04 00 20 80 03 15 17 1F  80 01 5B 02 02 06 00 1A  .. .......[.....
0220: 80 80 31 02 14 04 00 22  80 03 15 17 21 80 01 5B  ..1...."....!..[
0230: 02 02 06 00 0F 80 80 46  02 14 04 00 24 80 03 15  .......F....$...
0240: 17 23 80 01 5B 02 02 06  00 0E 80 80 5B 02 14 04  .#..[.......[...
0250: 00 26 80 03 15 17 25 80  01 5B 02 03 16 17 03 00  .&....%..[......
0260: 03 17 17 04 00 1D 30 80  23 24 31 80 0C 80 03 80  ......0.#$1.....
0270: 25 02 00 10 03 80 00 A0  02 40 03 80 0F 80 01 10  %........@......
0280: 0F 80 40 0E 80 32 80 01  10 06 00 40 33 80 34 80  ..@..2.....@3.4.
0290: 01 10 03 00 43 00 43 01  03 02 00 02 10 01 AB 02  ....C.C.........
02A0: 02 00 10 0C 80 00 AB 02  01 AB 02 01 01 01 1B     ............... 
```

## Opcodes

```
  0: 0x0064 [0x1E] EventEntity looks at LocalPlayer and starts talking
  1: 0x0069 [0x1D] PRINT_EVENT_MESSAGE(message_id=8501*)
    → "Ah, welcome back!\u007F1\u0000\u0007"
  2: 0x006C [0x23] WAIT_FOR_DIALOG_INTERACTION
  3: 0x006D [0x1D] PRINT_EVENT_MESSAGE(message_id=8503*)
    → "Oh, and do not forget to report the completion of your task to the resistance sapper.\u007F1\u0000\u0007"
  4: 0x0070 [0x23] WAIT_FOR_DIALOG_INTERACTION
  5: 0x0071 [0x21] END_EVENT
  6: 0x0072 [0x00] END_REQSTACK()
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x0073 [0x05] ExtData[1]->WorkLocal[0] = 1
     0x0076 [0x02] IF !(ExtData[1]->WorkLocal[0] == 1*) GOTO 0x00FD
     0x007E [0x03] Work_Zone[1] = 0*
     0x0083 [0x24] CREATE_DIALOG(message_id=8477*, default_option=4*, option_flags=ExtData[1]->WorkLocal[7])
    → "What will you do?\u0007\u000BCommence operation.\u0007Ask about pack chocobos.\u0007Exchange cruor for items.\u0007Nothing right now.\u007F1\u0000\u0007"
     0x008A [0x25] WAIT_DIALOG_SELECT()
     0x008B [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x00A2
     0x0093 [0x40] SET_BIT_WORK_RANGE(start_bit=0*, end_bit=3*, target=Work_Zone[1], source=1*)
     0x009C [0x06] ExtData[1]->WorkLocal[0] = 0
     0x009F [0x01] GOTO 0x00FA
     0x00A2 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x00D5
     0x00AA [0x1D] PRINT_EVENT_MESSAGE(message_id=8491*)
    → "It would be my pleasure to tell you all I know of these trusty creatures.\u007F1\u0000\u0007"
     0x00AD [0x23] WAIT_FOR_DIALOG_INTERACTION
     0x00AE [0x1D] PRINT_EVENT_MESSAGE(message_id=8492*)
    → "Pack chocobos are bred especially for tractability, and will faithfully follow you at a single command.\u0007To minimize the risk of both animal and baggage being lost, they are also trained to stay put should they lose sight of their caretaker.\u007F1\u0000\u0007"
     0x00B1 [0x23] WAIT_FOR_DIALOG_INTERACTION
     0x00B2 [0x1D] PRINT_EVENT_MESSAGE(message_id=8493*)
    → "As to be expected, the chocobo's stamina gradually deteriorates over the course of labor.\u0007You would be doing it a kindness by taking no longer than necessary to complete your task.\u007F1\u0000\u0007"
     0x00B5 [0x23] WAIT_FOR_DIALOG_INTERACTION
     0x00B6 [0x1D] PRINT_EVENT_MESSAGE(message_id=8494*)
    → "For the operation, you must first lead the chocobo to the stockpile, and thence load it up with as many supplies as manageable.\u007F1\u0000\u0007"
     0x00B9 [0x23] WAIT_FOR_DIALOG_INTERACTION
     0x00BA [0x1D] PRINT_EVENT_MESSAGE(message_id=8495*)
    → "The creature's stamina will continue to deteriorate even during loading.\u007F1\u0000\u0007"
     0x00BD [0x23] WAIT_FOR_DIALOG_INTERACTION
     0x00BE [0x1D] PRINT_EVENT_MESSAGE(message_id=8496*)
    → "It is your responsibility to make absolutely certain that it has sufficient energy remaining to make the return trip.\u007F1\u0000\u0007"
     0x00C1 [0x23] WAIT_FOR_DIALOG_INTERACTION
     0x00C2 [0x1D] PRINT_EVENT_MESSAGE(message_id=8497*)
    → "Lastly, these hostile environs have caused the chocobos to revert to their natural instincts for self-preservation.\u007F1\u0000\u0007"
     0x00C5 [0x23] WAIT_FOR_DIALOG_INTERACTION
     0x00C6 [0x1D] PRINT_EVENT_MESSAGE(message_id=8498*)
    → "The creatures have become highly skittish, and will startle and bolt should they catch scent of a monster.\u007F1\u0000\u0007"
     0x00C9 [0x23] WAIT_FOR_DIALOG_INTERACTION
     0x00CA [0x1D] PRINT_EVENT_MESSAGE(message_id=8499*)
    → "In attempting to flee, the chocobo will tire rapidly. There is also a chance that it will drop its burden.\u0007Should this happen, waste no time in securing and calming down the poor creature.\u007F1\u0000\u0007"
     0x00CD [0x23] WAIT_FOR_DIALOG_INTERACTION
     0x00CE [0x1D] PRINT_EVENT_MESSAGE(message_id=8500*)
    → "Our avian allies play a crucial role in keeping the outpost well-provisioned.\u0007We do our utmost to keep them content and in fine feather, and would appreciate your cooperation in this regard.\u007F1\u0000\u0007"
     0x00D1 [0x23] WAIT_FOR_DIALOG_INTERACTION
     0x00D2 [0x01] GOTO 0x00FA
     0x00D5 [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x00E7
     0x00DD [0x1D] PRINT_EVENT_MESSAGE(message_id=8481*)
    → "I can offer you a range of helpful pack chocobo goods in exchange for cruor.\u007F1\u0000\u0007"
     0x00E0 [0x23] WAIT_FOR_DIALOG_INTERACTION
     0x00E1 [0x1A] CALL_SUBROUTINE(address=0x00FE)
     0x00E4 [0x01] GOTO 0x00FA
     0x00E7 [0x02] IF !(Work_Zone[0] == 3*) GOTO 0x00FA
     0x00EF [0x03] Work_Zone[1] = 1073741824*
     0x00F4 [0x06] ExtData[1]->WorkLocal[0] = 0
     0x00F7 [0x01] GOTO 0x00FA
     0x00FA [0x01] GOTO 0x0076
     0x00FD [0x1B] RETURN
     0x00FE [0x05] ExtData[1]->WorkLocal[1] = 1
     0x0101 [0x02] IF !(ExtData[1]->WorkLocal[1] == 1*) GOTO 0x02AE
     0x0109 [0x03] Work_Zone[2] = ExtData[1]->WorkLocal[2]
     0x010E [0x03] Work_Zone[3] = 4545*
     0x0113 [0x03] Work_Zone[4] = 50*
     0x0118 [0x03] Work_Zone[5] = 5606*
     0x011D [0x03] Work_Zone[6] = 300*
     0x0122 [0x03] Work_Zone[7] = 2389*
     0x0127 [0x03] Work_Zone[8] = 100*
     0x012C [0x03] Work_Zone[9] = 2390*
     0x0131 [0x03] Work_Zone_1700[0] = 150*
     0x0136 [0x03] Work_Zone_1700[1] = 2399*
     0x013B [0x03] Work_Zone_1700[2] = 200*
     0x0140 [0x24] CREATE_DIALOG(message_id=8482*, default_option=0*, option_flags=0*)
    → "Select an item. (Cruor balance: 
\u0000)\u0007\u000B\u007F\u0000\u0001\u0001\u0005#\u0002\u0001\u0000\u0000: 
\u0002\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0003\u0000\u0000: 
\u0004\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0005\u0000\u0000: 
\u0006\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0007\u0000\u0000: 
\u0008\u0007\u007F\u0000\u0001\u0001\u0005#\u0002	\u0000\u0000: 

\u0007Never mind.\u007F1\u0000\u0007"
     0x0147 [0x25] WAIT_DIALOG_SELECT()
     0x0148 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x015C
     0x0150 [0x1D] PRINT_EVENT_MESSAGE(message_id=8483*)
    → "This item slightly recovers the pack chocobo's health.\u007F1\u0000\u0007"
     0x0153 [0x23] WAIT_FOR_DIALOG_INTERACTION
     0x0154 [0x03] ExtData[1]->WorkLocal[6] = 0*
     0x0159 [0x01] GOTO 0x01BA
     0x015C [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x0170
     0x0164 [0x1D] PRINT_EVENT_MESSAGE(message_id=8484*)
    → "This item moderately recovers the pack chocobo's health.\u007F1\u0000\u0007"
     0x0167 [0x23] WAIT_FOR_DIALOG_INTERACTION
     0x0168 [0x03] ExtData[1]->WorkLocal[6] = 1*
     0x016D [0x01] GOTO 0x01BA
     0x0170 [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x0184
     0x0178 [0x1D] PRINT_EVENT_MESSAGE(message_id=8485*)
    → "This item temporarily increases the pack chocobo's movement speed.\u007F1\u0000\u0007"
     0x017B [0x23] WAIT_FOR_DIALOG_INTERACTION
     0x017C [0x03] ExtData[1]->WorkLocal[6] = 2*
     0x0181 [0x01] GOTO 0x01BA
     0x0184 [0x02] IF !(Work_Zone[0] == 3*) GOTO 0x0198
     0x018C [0x1D] PRINT_EVENT_MESSAGE(message_id=8486*)
    → "This item temporarily improves the pack chocobo's hardiness.\u007F1\u0000\u0007"
     0x018F [0x23] WAIT_FOR_DIALOG_INTERACTION
     0x0190 [0x03] ExtData[1]->WorkLocal[6] = 3*
     0x0195 [0x01] GOTO 0x01BA
     0x0198 [0x02] IF !(Work_Zone[0] == 4*) GOTO 0x01AC
     0x01A0 [0x1D] PRINT_EVENT_MESSAGE(message_id=8487*)
    → "This item temporarily dampens the pack chocobo's sense of smell.\u007F1\u0000\u0007"
     0x01A3 [0x23] WAIT_FOR_DIALOG_INTERACTION
     0x01A4 [0x03] ExtData[1]->WorkLocal[6] = 4*
     0x01A9 [0x01] GOTO 0x01BA
     0x01AC [0x02] IF !(Work_Zone[0] == 5*) GOTO 0x01BA
     0x01B4 [0x06] ExtData[1]->WorkLocal[1] = 0
     0x01B7 [0x01] GOTO 0x01BA
     0x01BA [0x02] IF !(ExtData[1]->WorkLocal[1] == 0*) GOTO 0x02AB
     0x01C2 [0x03] Work_Zone[1] = 0*
     0x01C7 [0x48] [System] [8488*]:
    → "Please choose a quantity from one to twelve.\u0000\u0007"
     0x01CA [0x40] SET_BIT_WORK_RANGE(start_bit=0*, end_bit=3*, target=Work_Zone[1], source=2*)
     0x01D3 [0x71] USER_INPUT_HANDLER: Open numerical input with params (work=[1*, 2*])
     0x01D9 [0x71] USER_INPUT_HANDLER: Process numerical input B (work=ExtData[1]->WorkLocal[3])
     0x01DD [0x02] IF !(ExtData[1]->WorkLocal[3] <= 0*) GOTO 0x02AB
     0x01E5 [0x02] IF !(ExtData[1]->WorkLocal[3] > 12*) GOTO 0x02AB
     0x01ED [0x03] ExtData[1]->WorkLocal[4] = ExtData[1]->WorkLocal[3]
     0x01F2 [0x02] IF !(ExtData[1]->WorkLocal[6] == 0*) GOTO 0x0207
     0x01FA [0x14] ExtData[1]->WorkLocal[4] *= 50*
     0x01FF [0x03] Work_Zone_1700[21] = 4545*
     0x0204 [0x01] GOTO 0x025B
     0x0207 [0x02] IF !(ExtData[1]->WorkLocal[6] == 1*) GOTO 0x021C
     0x020F [0x14] ExtData[1]->WorkLocal[4] *= 300*
     0x0214 [0x03] Work_Zone_1700[21] = 5606*
     0x0219 [0x01] GOTO 0x025B
     0x021C [0x02] IF !(ExtData[1]->WorkLocal[6] == 2*) GOTO 0x0231
     0x0224 [0x14] ExtData[1]->WorkLocal[4] *= 100*
     0x0229 [0x03] Work_Zone_1700[21] = 2389*
     0x022E [0x01] GOTO 0x025B
     0x0231 [0x02] IF !(ExtData[1]->WorkLocal[6] == 3*) GOTO 0x0246
     0x0239 [0x14] ExtData[1]->WorkLocal[4] *= 150*
     0x023E [0x03] Work_Zone_1700[21] = 2390*
     0x0243 [0x01] GOTO 0x025B
     0x0246 [0x02] IF !(ExtData[1]->WorkLocal[6] == 4*) GOTO 0x025B
     0x024E [0x14] ExtData[1]->WorkLocal[4] *= 200*
     0x0253 [0x03] Work_Zone_1700[21] = 2399*
     0x0258 [0x01] GOTO 0x025B
     0x025B [0x03] Work_Zone_1700[22] = ExtData[1]->WorkLocal[3]
     0x0260 [0x03] Work_Zone_1700[23] = ExtData[1]->WorkLocal[4]
     0x0265 [0x1D] PRINT_EVENT_MESSAGE(message_id=8489*)
    → "
\u001E \u0001	)\u0002\u001E\u0000\u0000\u0002\u001D\u0000\u0000...\u0007The total comes to 
\u001F cruor. Will this be all right?\u007F1\u0000\u0007"
     0x0268 [0x23] WAIT_FOR_DIALOG_INTERACTION
     0x0269 [0x24] CREATE_DIALOG(message_id=8490*, default_option=1*, option_flags=0*)
    → "Proceed with exchange?\u0007\u000BYes.\u0007No.\u007F1\u0000\u0007"
     0x0270 [0x25] WAIT_DIALOG_SELECT()
     0x0271 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x02A0
     0x0279 [0x40] SET_BIT_WORK_RANGE(start_bit=0*, end_bit=3*, target=Work_Zone[1], source=3*)
     0x0282 [0x40] SET_BIT_WORK_RANGE(start_bit=4*, end_bit=7*, target=Work_Zone[1], source=ExtData[1]->WorkLocal[6])
     0x028B [0x40] SET_BIT_WORK_RANGE(start_bit=8*, end_bit=11*, target=Work_Zone[1], source=ExtData[1]->WorkLocal[3])
     0x0294 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
     0x0296 [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
     0x0298 [0x03] ExtData[1]->WorkLocal[2] = Work_Zone[2]
     0x029D [0x01] GOTO 0x02AB
     0x02A0 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x02AB
     0x02A8 [0x01] GOTO 0x02AB
     0x02AB [0x01] GOTO 0x0101
     0x02AE [0x1B] RETURN
```