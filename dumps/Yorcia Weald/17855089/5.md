# Event 5

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 2/5       |
| Offset          | 0x0001    |
| Data Size       | 551 bytes |
| Calculated Size | 551 bytes |
| Instructions    | 79        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000:    20 01 42 46 01 5C A0  00 80 01 80 5C A1 00 80    .BF.\.....\...
0010: 01 80 45 02 80 F8 FF FF  7F F8 FF FF 7F 66 64 6F  ..E..........fdo
0020: 31 00 80 1C 03 80 38 04  80 2F 00 53 72 10 01 29  1.....8../.Sr..)
0030: 08 53 72 10 01 62 4E 00  53 72 10 01 4E 00 F0 FF  .Sr..bN.Sr..N...
0040: FF 7F BA F0 FF FF 7F 05  80 06 80 07 80 00 80 BA  ................
0050: 53 72 10 01 08 80 09 80  0A 80 0B 80 80 53 72 10  Sr...........Sr.
0060: 01 80 F0 FF FF 7F 92 01  53 72 10 01 94 01 53 72  ........Sr....Sr
0070: 10 01 6E F0 FF FF 7F 0C  80 99 F0 FF FF 7F 1C 0D  ..n.............
0080: 80 03 09 10 87 7F 45 0E  80 F8 FF FF 7F F8 FF FF  ......E.........
0090: 7F 73 30 30 30 00 80 27  08 53 72 10 01 5D 45 02  .s000..'.Sr..]E.
00A0: 80 F8 FF FF 7F F8 FF FF  7F 66 64 69 31 00 80 1C  .........fdi1...
00B0: 03 80 1C 0B 80 4A F0 FF  FF 7F 53 72 10 01 6F 76  .....J....Sr..ov
00C0: F0 FF FF 7F 1C 0F 80 52  0E 80 F8 FF FF 7F F8 FF  .......R........
00D0: FF 7F 73 30 30 30 45 0E  80 F8 FF FF 7F F8 FF FF  ..s000E.........
00E0: 7F 73 30 30 31 00 80 2B  53 72 10 01 10 80 23 79  .s001..+Sr....#y
00F0: 00 53 72 10 01 F0 FF FF  7F 52 0E 80 F8 FF FF 7F  .Sr......R......
0100: F8 FF FF 7F 73 30 30 31  03 09 10 87 7F 02 09 10  ....s001........
0110: 11 80 00 29 01 45 0E 80  F8 FF FF 7F F8 FF FF 7F  ...).E..........
0120: 73 30 32 30 00 80 01 56  01 02 09 10 12 80 00 45  s020...V.......E
0130: 01 45 0E 80 F8 FF FF 7F  F8 FF FF 7F 73 30 32 30  .E..........s020
0140: 00 80 01 56 01 45 0E 80  F8 FF FF 7F F8 FF FF 7F  ...V.E..........
0150: 73 30 30 32 00 80 2A 08  53 72 10 01 2B 53 72 10  s002..*.Sr..+Sr.
0160: 01 13 80 23 5C A0 00 80  01 80 5C A1 00 80 01 80  ...#\.....\.....
0170: 6E F0 FF FF 7F 14 80 99  F0 FF FF 7F 1C 03 80 7B  n..............{
0180: 53 72 10 01 27 08 53 72  10 01 5E 1C 0F 80 45 02  Sr..'.Sr..^...E.
0190: 80 F0 FF FF 7F F0 FF FF  7F 66 64 6F 31 00 80 1C  .........fdo1...
01A0: 03 80 02 09 10 11 80 00  BC 01 52 0E 80 F8 FF FF  ..........R.....
01B0: 7F F8 FF FF 7F 73 30 32  30 01 E5 01 02 09 10 12  .....s020.......
01C0: 80 00 D6 01 52 0E 80 F8  FF FF 7F F8 FF FF 7F 73  ....R..........s
01D0: 30 32 30 01 E5 01 52 0E  80 F8 FF FF 7F F8 FF FF  020...R.........
01E0: 7F 73 30 30 32 94 00 53  72 10 01 94 00 54 72 10  .s002..Sr....Tr.
01F0: 01 29 05 53 72 10 01 17  5C 00 15 80 5C 01 15 80  .).Sr...\...\...
0200: 9A 5D 16 80 17 80 4E 00  F0 FF FF 7F 80 F0 FF FF  .]....N.........
0210: 7F 46 00 45 02 80 F0 FF  FF 7F F0 FF FF 7F 66 64  .F.E..........fd
0220: 69 31 00 80 20 00 21 00                           i1.. .!.        
```

## Opcodes

```
  0: 0x0001 [0x20] SET_CLI_EVENT_UC_FLAG: Lock player control
  1: 0x0003 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  2: 0x0004 [0x46] CAMERA_CONTROL: Disable user control
  3: 0x0006 [0x5C] MUSIC_CONTROL: Set music volume to song 0*, fade_time=400*
  4: 0x000C [0x5C] MUSIC_CONTROL: Adjust music volume to song 0*, fade_time=400*
  5: 0x0012 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [EventEntity, EventEntity], work=[200*, 0*]
  6: 0x0023 [0x1C] WAIT(60* ticks)
  7: 0x0026 [0x38] SET_CLIENT_EVENT_MODE(mode=19*)
  8: 0x0029 [0x2F] Unnamed NPC (ID: 17855059/0x01107253)->Render.Flags0 &= ~0x80000 // Bit 19
  9: 0x002F [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Unnamed NPC (ID: 17855059/0x01107253), tag_num=0x62)
 10: 0x0036 [0x4E] SET_ENTITY_HIDE_FLAG: Show Unnamed NPC (ID: 17855059/0x01107253)
 11: 0x003C [0x4E] SET_ENTITY_HIDE_FLAG: Show LocalPlayer
 12: 0x0042 [0xBA] SET_ENTITY_POSITION(entity_id=LocalPlayer, pos_x=166.870*, pos_z=46.400*, pos_y=0.110*, direction=0.0°*)
 13: 0x004F [0xBA] SET_ENTITY_POSITION(entity_id=Unnamed NPC (ID: 17855059/0x01107253), pos_x=153.978*, pos_z=49.202*, pos_y=0.618*, direction=12.3°*)
 14: 0x005C [0x80] LOAD_WAIT(entity=Unnamed NPC (ID: 17855059/0x01107253))
 15: 0x0061 [0x80] LOAD_WAIT(entity=LocalPlayer)
 16: 0x0066 [0x92] Unnamed NPC (ID: 17855059/0x01107253)->Render.Flags3 ^= 0x01
 17: 0x006C [0x94] Unnamed NPC (ID: 17855059/0x01107253)->Render.Flags3 ^= 0x01
 18: 0x0072 [0x6E] LocalPlayer uses emote 3*
 19: 0x0079 [0x99] Wait for LocalPlayer animation to complete
 20: 0x007E [0x1C] WAIT(80* ticks)
 21: 0x0081 [0x03] Work_Zone[9] = LocalPlayer->Race
 22: 0x0086 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s000" with entities [EventEntity, EventEntity], work=[752*, 0*]
 23: 0x0097 [0x27] REQ_SET(priority=0x08, entity_id=Unnamed NPC (ID: 17855059/0x01107253), tag_num=0x5D)
 24: 0x009E [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [EventEntity, EventEntity], work=[200*, 0*]
 25: 0x00AF [0x1C] WAIT(60* ticks)
 26: 0x00B2 [0x1C] WAIT(140* ticks)
 27: 0x00B5 [0x4A] LocalPlayer looks at Unnamed NPC (ID: 17855059/0x01107253)
 28: 0x00BE [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 29: 0x00BF [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until LocalPlayer Render.Flags0 and Render.Flags3 conditions are met
 30: 0x00C4 [0x1C] WAIT(20* ticks)
 31: 0x00C7 [0x52] END_LOAD_SCHEDULER: End scheduler "s000" with entities [EventEntity, EventEntity], work=752*
 32: 0x00D6 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s001" with entities [EventEntity, EventEntity], work=[752*, 0*]
 33: 0x00E7 [0x2B] Unnamed NPC (ID: 17855059/0x01107253) [8790*]:
    → "So you have deigned to grace me with your presence.\u0007But...there appears to be nothing out of the ordinary.\u007F1\u0000\u0007"
 34: 0x00EE [0x23] WAIT_FOR_DIALOG_INTERACTION
 35: 0x00EF [0x79] Unnamed NPC (ID: 17855059/0x01107253) looks at LocalPlayer (Basic look)
 36: 0x00F9 [0x52] END_LOAD_SCHEDULER: End scheduler "s001" with entities [EventEntity, EventEntity], work=752*
 37: 0x0108 [0x03] Work_Zone[9] = LocalPlayer->Race
 38: 0x010D [0x02] IF !(Work_Zone[9] == 5*) GOTO 0x0129
 39: 0x0115 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s020" with entities [EventEntity, EventEntity], work=[752*, 0*]
 40: 0x0126 [0x01] GOTO 0x0156
 41: 0x0129 [0x02] IF !(Work_Zone[9] == 6*) GOTO 0x0145
 42: 0x0131 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s020" with entities [EventEntity, EventEntity], work=[752*, 0*]
 43: 0x0142 [0x01] GOTO 0x0156
 44: 0x0145 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s002" with entities [EventEntity, EventEntity], work=[752*, 0*]

SUBROUTINE_0156:
 45: 0x0156 [0x2A] GET_REQ_LEVEL(level=8, entity_id=Unnamed NPC (ID: 17855059/0x01107253))
 46: 0x015C [0x2B] Unnamed NPC (ID: 17855059/0x01107253) [8791*]:
    → "You undoubtedly have your hands full babysitting Arciela. I will remain here to make sure the area is safe.\u007F1\u0000\u0007"
 47: 0x0163 [0x23] WAIT_FOR_DIALOG_INTERACTION
 48: 0x0164 [0x5C] MUSIC_CONTROL: Set music volume to song 0*, fade_time=400*
 49: 0x016A [0x5C] MUSIC_CONTROL: Adjust music volume to song 0*, fade_time=400*
 50: 0x0170 [0x6E] LocalPlayer uses emote 7*
 51: 0x0177 [0x99] Wait for LocalPlayer animation to complete
 52: 0x017C [0x1C] WAIT(60* ticks)
 53: 0x017F [0x7B] Unnamed NPC (ID: 17855059/0x01107253) stops talking
 54: 0x0184 [0x27] REQ_SET(priority=0x08, entity_id=Unnamed NPC (ID: 17855059/0x01107253), tag_num=0x5E)
 55: 0x018B [0x1C] WAIT(20* ticks)
 56: 0x018E [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 57: 0x019F [0x1C] WAIT(60* ticks)
 58: 0x01A2 [0x02] IF !(Work_Zone[9] == 5*) GOTO 0x01BC
 59: 0x01AA [0x52] END_LOAD_SCHEDULER: End scheduler "s020" with entities [EventEntity, EventEntity], work=752*
 60: 0x01B9 [0x01] GOTO 0x01E5
 61: 0x01BC [0x02] IF !(Work_Zone[9] == 6*) GOTO 0x01D6
 62: 0x01C4 [0x52] END_LOAD_SCHEDULER: End scheduler "s020" with entities [EventEntity, EventEntity], work=752*
 63: 0x01D3 [0x01] GOTO 0x01E5
 64: 0x01D6 [0x52] END_LOAD_SCHEDULER: End scheduler "s002" with entities [EventEntity, EventEntity], work=752*

SUBROUTINE_01E5:
 65: 0x01E5 [0x94] Unnamed NPC (ID: 17855059/0x01107253)->Render.Flags3 = Flags3  // No change (flag=0)
 66: 0x01EB [0x94] Unnamed NPC (ID: 17855060/0x01107254)->Render.Flags3 = Flags3  // No change (flag=0)
 67: 0x01F1 [0x29] REQ_SET_WAIT(priority=0x05, entity_id=Unnamed NPC (ID: 17855059/0x01107253), tag_num=0x17)
 68: 0x01F8 [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 61*
 69: 0x01FC [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 61*
 70: 0x0200 [0x9A] WAIT_MUSIC_SERVER()
 71: 0x0201 [0x5D] SET_MUSIC_VOLUME(volume=127*, fade_time=1*)
 72: 0x0206 [0x4E] SET_ENTITY_HIDE_FLAG: Show LocalPlayer
 73: 0x020C [0x80] LOAD_WAIT(entity=LocalPlayer)
 74: 0x0211 [0x46] CAMERA_CONTROL: Restore default settings
 75: 0x0213 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 76: 0x0224 [0x20] SET_CLI_EVENT_UC_FLAG: Unlock player control
 77: 0x0226 [0x21] END_EVENT
 78: 0x0227 [0x00] END_REQSTACK()
```
