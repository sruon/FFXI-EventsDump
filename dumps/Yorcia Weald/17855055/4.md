# Event 4

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 5/5       |
| Offset          | 0x36BD    |
| Data Size       | 774 bytes |
| Calculated Size | 774 bytes |
| Instructions    | 101       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
36B0:                                         42 1A EA               B..
36C0: 2C 46 01 38 00 80 5D 1C  80 4F 80 2F 00 53 72 10  ,F.8..]..O./.Sr.
36D0: 01 2F 00 54 72 10 01 2F  00 55 72 10 01 4E 00 53  ./.Tr../.Ur..N.S
36E0: 72 10 01 4E 00 54 72 10  01 4E 00 55 72 10 01 4E  r..N.Tr..N.Ur..N
36F0: 00 F0 FF FF 7F 94 01 53  72 10 01 94 01 54 72 10  .......Sr....Tr.
3700: 01 94 01 55 72 10 01 94  01 F0 FF FF 7F 92 01 53  ...Ur..........S
3710: 72 10 01 BA 53 72 10 01  68 81 69 81 6A 81 6B 81  r...Sr..h.i.j.k.
3720: BA 54 72 10 01 A9 81 AA  81 AB 81 CA 80 BA 55 72  .Tr...........Ur
3730: 10 01 AC 81 AD 81 AE 81  AF 81 BA F0 FF FF 7F B0  ................
3740: 81 B1 81 B2 81 CA 80 80  53 72 10 01 80 54 72 10  ........Sr...Tr.
3750: 01 80 55 72 10 01 80 F0  FF FF 7F 5C 00 B3 81 5C  ..Ur.......\...\
3760: 01 B3 81 5C 02 B3 81 5C  03 B3 81 9A 4A 54 72 10  ...\...\....JTr.
3770: 01 53 72 10 01 7B 54 72  10 01 4A F0 FF FF 7F 53  .Sr..{Tr..J....S
3780: 72 10 01 6F 76 54 72 10  01 1C 19 80 5B 7F 81 53  r..ovTr.....[..S
3790: 72 10 01 53 72 10 01 64  65 64 30 27 05 F0 FF FF  r..Sr..ded0'....
37A0: 7F 06 5B A4 81 54 72 10  01 54 72 10 01 62 74 6C  ..[..Tr..Tr..btl
37B0: 30 1C 19 80 45 80 81 F0  FF FF 7F F0 FF FF 7F 73  0...E..........s
37C0: 31 39 36 1C 80 1A C9 2C  D0 81 81 53 72 10 01 53  196....,...Sr..S
37D0: 72 10 01 74 30 30 30 1C  80 1C 1E 80 2B 53 72 10  r..t000.....+Sr.
37E0: 01 B4 81 1C 4F 80 23 52  80 81 F0 FF FF 7F F0 FF  ....O.#R........
37F0: FF 7F 73 31 39 36 45 80  81 F0 FF FF 7F F0 FF FF  ..s196E.........
3800: 7F 73 31 39 37 1C 80 1C  1E 80 2B 53 72 10 01 B5  .s197.....+Sr...
3810: 81 1C 4F 80 23 52 80 81  F0 FF FF 7F F0 FF FF 7F  ..O.#R..........
3820: 73 31 39 37 45 80 81 F0  FF FF 7F F0 FF FF 7F 73  s197E..........s
3830: 31 32 31 1C 80 5B 7F 81  53 72 10 01 53 72 10 01  121..[..Sr..Sr..
3840: 64 65 64 31 D0 81 81 53  72 10 01 53 72 10 01 74  ded1...Sr..Sr..t
3850: 30 30 33 1C 80 5C A0 1C  80 4F 80 5C A1 1C 80 E1  003..\...O.\....
3860: 80 2B 53 72 10 01 B6 81  1C 4F 80 52 80 81 F0 FF  .+Sr.....O.R....
3870: FF 7F F0 FF FF 7F 73 31  32 31 45 80 81 F0 FF FF  ......s121E.....
3880: 7F F0 FF FF 7F 73 31 32  33 1C 80 1C B7 81 52 80  .....s123.....R.
3890: 81 F0 FF FF 7F F0 FF FF  7F 73 31 32 33 45 80 81  .........s123E..
38A0: F0 FF FF 7F F0 FF FF 7F  73 31 32 32 1C 80 79 00  ........s122..y.
38B0: 54 72 10 01 55 72 10 01  4A F0 FF FF 7F 53 72 10  Tr..Ur..J....Sr.
38C0: 01 1C 54 80 52 80 81 F0  FF FF 7F F0 FF FF 7F 73  ..T.R..........s
38D0: 31 32 32 45 80 81 F0 FF  FF 7F F0 FF FF 7F 73 32  122E..........s2
38E0: 30 38 1C 80 5B A4 81 54  72 10 01 54 72 10 01 62  08..[..Tr..Tr..b
38F0: 74 6C 31 1C 19 80 27 05  F0 FF FF 7F 07 1C 5F 80  tl1...'......._.
3900: 52 80 81 F0 FF FF 7F F0  FF FF 7F 73 32 30 38 45  R..........s208E
3910: 80 81 F0 FF FF 7F F0 FF  FF 7F 73 32 31 33 1C 80  ..........s213..
3920: D0 B8 81 55 72 10 01 55  72 10 01 6D 30 30 30 1C  ...Ur..Ur..m000.
3930: 80 D0 B8 81 55 72 10 01  55 72 10 01 6D 73 30 30  ....Ur..Ur..ms00
3940: 1C 80 1C 5F 80 1A EA 2C  1C 19 80 52 80 81 F0 FF  ..._...,...R....
3950: FF 7F F0 FF FF 7F 73 32  31 33 D0 B8 81 55 72 10  ......s213...Ur.
3960: 01 55 72 10 01 6D 30 30  31 1C 80 45 80 81 F0 FF  .Ur..m001..E....
3970: FF 7F F0 FF FF 7F 62 6C  6F 66 1C 80 27 05 53 72  ......blof..'.Sr
3980: 10 01 17 27 05 54 72 10  01 14 27 05 55 72 10 01  ...'.Tr...'.Ur..
3990: 0E 5C 00 1A 80 5C 01 1A  80 5C 02 A8 81 5C 03 A8  .\...\...\...\..
39A0: 81 9A 1C 49 80 AB 11 1C  80 1C 37 80 AB 0A 46 00  ...I......7...F.
39B0: 45 B7 80 F0 FF FF 7F F0  FF FF 7F 66 64 69 32 1C  E..........fdi2.
39C0: 80 21 00                                          .!.             
```

## Opcodes

```
  0: 0x36BD [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x36BE [0x1A] CALL_SUBROUTINE(address=0x2CEA)
  2: 0x36C1 [0x46] CAMERA_CONTROL: Disable user control
  3: 0x36C3 [0x38] SET_CLIENT_EVENT_MODE(mode=19*)
  4: 0x36C6 [0x5D] SET_MUSIC_VOLUME(volume=0*, fade_time=120*)
  5: 0x36CB [0x2F] Unnamed NPC (ID: 17855059/0x01107253)->Render.Flags0 &= ~0x80000 // Bit 19
  6: 0x36D1 [0x2F] Unnamed NPC (ID: 17855060/0x01107254)->Render.Flags0 &= ~0x80000 // Bit 19
  7: 0x36D7 [0x2F] Unnamed NPC (ID: 17855061/0x01107255)->Render.Flags0 &= ~0x80000 // Bit 19
  8: 0x36DD [0x4E] SET_ENTITY_HIDE_FLAG: Show Unnamed NPC (ID: 17855059/0x01107253)
  9: 0x36E3 [0x4E] SET_ENTITY_HIDE_FLAG: Show Unnamed NPC (ID: 17855060/0x01107254)
 10: 0x36E9 [0x4E] SET_ENTITY_HIDE_FLAG: Show Unnamed NPC (ID: 17855061/0x01107255)
 11: 0x36EF [0x4E] SET_ENTITY_HIDE_FLAG: Show LocalPlayer
 12: 0x36F5 [0x94] Unnamed NPC (ID: 17855059/0x01107253)->Render.Flags3 ^= 0x01
 13: 0x36FB [0x94] Unnamed NPC (ID: 17855060/0x01107254)->Render.Flags3 ^= 0x01
 14: 0x3701 [0x94] Unnamed NPC (ID: 17855061/0x01107255)->Render.Flags3 ^= 0x01
 15: 0x3707 [0x94] LocalPlayer->Render.Flags3 ^= 0x01
 16: 0x370D [0x92] Unnamed NPC (ID: 17855059/0x01107253)->Render.Flags3 ^= 0x01
 17: 0x3713 [0xBA] SET_ENTITY_POSITION(entity_id=Unnamed NPC (ID: 17855059/0x01107253), pos_x=223.087*, pos_z=-73.682*, pos_y=0.301*, direction=324.0°*)
 18: 0x3720 [0xBA] SET_ENTITY_POSITION(entity_id=Unnamed NPC (ID: 17855060/0x01107254), pos_x=226.357*, pos_z=-74.309*, pos_y=0.296*, direction=149.4°*)
 19: 0x372D [0xBA] SET_ENTITY_POSITION(entity_id=Unnamed NPC (ID: 17855061/0x01107255), pos_x=221.858*, pos_z=-75.060*, pos_y=0.355*, direction=86.7°*)
 20: 0x373A [0xBA] SET_ENTITY_POSITION(entity_id=LocalPlayer, pos_x=226.216*, pos_z=-71.795*, pos_y=0.304*, direction=149.4°*)
 21: 0x3747 [0x80] LOAD_WAIT(entity=Unnamed NPC (ID: 17855059/0x01107253))
 22: 0x374C [0x80] LOAD_WAIT(entity=Unnamed NPC (ID: 17855060/0x01107254))
 23: 0x3751 [0x80] LOAD_WAIT(entity=Unnamed NPC (ID: 17855061/0x01107255))
 24: 0x3756 [0x80] LOAD_WAIT(entity=LocalPlayer)
 25: 0x375B [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 161*
 26: 0x375F [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 161*
 27: 0x3763 [0x5C] MUSIC_CONTROL: Set Combat (Solo) music to song 161*
 28: 0x3767 [0x5C] MUSIC_CONTROL: Set Combat (Party) music to song 161*
 29: 0x376B [0x9A] WAIT_MUSIC_SERVER()
 30: 0x376C [0x4A] Unnamed NPC (ID: 17855060/0x01107254) looks at Unnamed NPC (ID: 17855059/0x01107253)
 31: 0x3775 [0x7B] Unnamed NPC (ID: 17855060/0x01107254) stops talking
 32: 0x377A [0x4A] LocalPlayer looks at Unnamed NPC (ID: 17855059/0x01107253)
 33: 0x3783 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 34: 0x3784 [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until Unnamed NPC (ID: 17855060/0x01107254) Render.Flags0 and Render.Flags3 conditions are met
 35: 0x3789 [0x1C] WAIT(30* ticks)
 36: 0x378C [0x5B] LOAD_EXT_SCHEDULER(work_offset=3633*, entity1=Unnamed NPC (ID: 17855059/0x01107253), entity2=Unnamed NPC (ID: 17855059/0x01107253), action="ded0")
 37: 0x379B [0x27] REQ_SET(priority=0x05, entity_id=LocalPlayer, tag_num=0x06)
 38: 0x37A2 [0x5B] LOAD_EXT_SCHEDULER(work_offset=3815*, entity1=Unnamed NPC (ID: 17855060/0x01107254), entity2=Unnamed NPC (ID: 17855060/0x01107254), action="btl0")
 39: 0x37B1 [0x1C] WAIT(30* ticks)
 40: 0x37B4 [0x45] LOAD_SCHEDULED_TASK(work_offset1=729*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="s196", work_offset2=0*)
 41: 0x37C5 [0x1A] CALL_SUBROUTINE(address=0x2CC9)
 42: 0x37C8 [0xD0] LOAD_SCHEDULED_TASK_ALT5(work_offset=22*, entity1=Unnamed NPC (ID: 17855059/0x01107253), entity2=Unnamed NPC (ID: 17855059/0x01107253), action="t000", work_offset2=0*)
 43: 0x37D9 [0x1C] WAIT(60* ticks)
 44: 0x37DC [0x2B] Unnamed NPC (ID: 17855059/0x01107253) [8785*]:
    → "You think my life forfeit, but nothing could be further from the truth.\u007F1\u0000\u0007"
 45: 0x37E3 [0x1C] WAIT(120* ticks)
 46: 0x37E6 [0x23] WAIT_FOR_DIALOG_INTERACTION
 47: 0x37E7 [0x52] END_LOAD_SCHEDULER: End scheduler "s196" with entities [LocalPlayer, LocalPlayer], work=729*
 48: 0x37F6 [0x45] LOAD_SCHEDULED_TASK(work_offset1=729*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="s197", work_offset2=0*)
 49: 0x3807 [0x1C] WAIT(60* ticks)
 50: 0x380A [0x2B] Unnamed NPC (ID: 17855059/0x01107253) [8786*]:
    → "There exists no light without shadow. From shadow I come, and from shadow shall I be reborn!\u007F1\u0000\u0007"
 51: 0x3811 [0x1C] WAIT(120* ticks)
 52: 0x3814 [0x23] WAIT_FOR_DIALOG_INTERACTION
 53: 0x3815 [0x52] END_LOAD_SCHEDULER: End scheduler "s197" with entities [LocalPlayer, LocalPlayer], work=729*
 54: 0x3824 [0x45] LOAD_SCHEDULED_TASK(work_offset1=729*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="s121", work_offset2=0*)
 55: 0x3835 [0x5B] LOAD_EXT_SCHEDULER(work_offset=3633*, entity1=Unnamed NPC (ID: 17855059/0x01107253), entity2=Unnamed NPC (ID: 17855059/0x01107253), action="ded1")
 56: 0x3844 [0xD0] LOAD_SCHEDULED_TASK_ALT5(work_offset=22*, entity1=Unnamed NPC (ID: 17855059/0x01107253), entity2=Unnamed NPC (ID: 17855059/0x01107253), action="t003", work_offset2=0*)
 57: 0x3855 [0x5C] MUSIC_CONTROL: Set music volume to song 0*, fade_time=120*
 58: 0x385B [0x5C] MUSIC_CONTROL: Adjust music volume to song 0*, fade_time=240*
 59: 0x3861 [0x2B] Unnamed NPC (ID: 17855059/0x01107253) [8787*]:
    → "Ha...des, I...!\u0000\u0007"
 60: 0x3868 [0x1C] WAIT(120* ticks)
 61: 0x386B [0x52] END_LOAD_SCHEDULER: End scheduler "s121" with entities [LocalPlayer, LocalPlayer], work=729*
 62: 0x387A [0x45] LOAD_SCHEDULED_TASK(work_offset1=729*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="s123", work_offset2=0*)
 63: 0x388B [0x1C] WAIT(80* ticks)
 64: 0x388E [0x52] END_LOAD_SCHEDULER: End scheduler "s123" with entities [LocalPlayer, LocalPlayer], work=729*
 65: 0x389D [0x45] LOAD_SCHEDULED_TASK(work_offset1=729*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="s122", work_offset2=0*)
 66: 0x38AE [0x79] Unnamed NPC (ID: 17855060/0x01107254) looks at Unnamed NPC (ID: 17855061/0x01107255) (Basic look)
 67: 0x38B8 [0x4A] LocalPlayer looks at Unnamed NPC (ID: 17855059/0x01107253)
 68: 0x38C1 [0x1C] WAIT(210* ticks)
 69: 0x38C4 [0x52] END_LOAD_SCHEDULER: End scheduler "s122" with entities [LocalPlayer, LocalPlayer], work=729*
 70: 0x38D3 [0x45] LOAD_SCHEDULED_TASK(work_offset1=729*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="s208", work_offset2=0*)
 71: 0x38E4 [0x5B] LOAD_EXT_SCHEDULER(work_offset=3815*, entity1=Unnamed NPC (ID: 17855060/0x01107254), entity2=Unnamed NPC (ID: 17855060/0x01107254), action="btl1")
 72: 0x38F3 [0x1C] WAIT(30* ticks)
 73: 0x38F6 [0x27] REQ_SET(priority=0x05, entity_id=LocalPlayer, tag_num=0x07)
 74: 0x38FD [0x1C] WAIT(180* ticks)
 75: 0x3900 [0x52] END_LOAD_SCHEDULER: End scheduler "s208" with entities [LocalPlayer, LocalPlayer], work=729*
 76: 0x390F [0x45] LOAD_SCHEDULED_TASK(work_offset1=729*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="s213", work_offset2=0*)
 77: 0x3920 [0xD0] LOAD_SCHEDULED_TASK_ALT5(work_offset=24*, entity1=Unnamed NPC (ID: 17855061/0x01107255), entity2=Unnamed NPC (ID: 17855061/0x01107255), action="m000", work_offset2=0*)
 78: 0x3931 [0xD0] LOAD_SCHEDULED_TASK_ALT5(work_offset=24*, entity1=Unnamed NPC (ID: 17855061/0x01107255), entity2=Unnamed NPC (ID: 17855061/0x01107255), action="ms00", work_offset2=0*)
 79: 0x3942 [0x1C] WAIT(180* ticks)
 80: 0x3945 [0x1A] CALL_SUBROUTINE(address=0x2CEA)
 81: 0x3948 [0x1C] WAIT(30* ticks)
 82: 0x394B [0x52] END_LOAD_SCHEDULER: End scheduler "s213" with entities [LocalPlayer, LocalPlayer], work=729*
 83: 0x395A [0xD0] LOAD_SCHEDULED_TASK_ALT5(work_offset=24*, entity1=Unnamed NPC (ID: 17855061/0x01107255), entity2=Unnamed NPC (ID: 17855061/0x01107255), action="m001", work_offset2=0*)
 84: 0x396B [0x45] LOAD_SCHEDULED_TASK(work_offset1=729*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="blof", work_offset2=0*)
 85: 0x397C [0x27] REQ_SET(priority=0x05, entity_id=Unnamed NPC (ID: 17855059/0x01107253), tag_num=0x17)
 86: 0x3983 [0x27] REQ_SET(priority=0x05, entity_id=Unnamed NPC (ID: 17855060/0x01107254), tag_num=0x14)
 87: 0x398A [0x27] REQ_SET(priority=0x05, entity_id=Unnamed NPC (ID: 17855061/0x01107255), tag_num=0x0E)
 88: 0x3991 [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 61*
 89: 0x3995 [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 61*
 90: 0x3999 [0x5C] MUSIC_CONTROL: Set Combat (Solo) music to song 57*
 91: 0x399D [0x5C] MUSIC_CONTROL: Set Combat (Party) music to song 57*
 92: 0x39A1 [0x9A] WAIT_MUSIC_SERVER()
 93: 0x39A2 [0x1C] WAIT(15* ticks)
 94: 0x39A5 [0xAB] EventEntity->DespawnValue = 0* // Set despawn value
 95: 0x39A9 [0x1C] WAIT(1* ticks)
 96: 0x39AC [0xAB] EventEntity->UnknownFlag = 0 // Disable unknown flag
 97: 0x39AE [0x46] CAMERA_CONTROL: Restore default settings
 98: 0x39B0 [0x45] LOAD_SCHEDULED_TASK(work_offset1=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdi2", work_offset2=0*)
 99: 0x39C1 [0x21] END_EVENT
100: 0x39C2 [0x00] END_REQSTACK()
```
