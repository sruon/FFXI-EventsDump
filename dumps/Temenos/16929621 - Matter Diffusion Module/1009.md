# Event 1009

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 2/2       |
| Offset          | 0x0001    |
| Data Size       | 434 bytes |
| Calculated Size | 434 bytes |
| Instructions    | 84        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000:    20 01 03 00 00 00 80  03 01 00 00 80 03 00 00    ..............
0010: 03 10 08 00 00 01 80 24  02 80 00 00 01 00 25 02  .......$......%.
0020: 00 10 00 80 00 2F 00 03  01 10 01 80 01 AF 00 02  ...../..........
0030: 00 10 03 80 00 3F 00 03  01 10 04 80 01 AF 00 02  .....?..........
0040: 00 10 05 80 00 4F 00 03  01 10 06 80 01 AF 00 02  .....O..........
0050: 00 10 07 80 00 5F 00 03  01 10 08 80 01 AF 00 02  ....._..........
0060: 00 10 09 80 00 6F 00 03  01 10 0A 80 01 AF 00 02  .....o..........
0070: 00 10 0B 80 00 7F 00 03  01 10 0C 80 01 AF 00 02  ................
0080: 00 10 0D 80 00 8F 00 03  01 10 0E 80 01 AF 00 02  ................
0090: 00 10 0F 80 00 9F 00 03  01 10 03 80 01 AF 00 02  ................
00A0: 00 10 10 80 00 AF 00 03  01 10 00 80 01 AF 00 02  ................
00B0: 00 10 00 00 00 BF 00 03  01 10 11 80 01 AF 01 02  ................
00C0: 01 10 00 80 00 CA 00 01  AF 01 02 01 10 03 10 00  ................
00D0: D5 00 01 AF 01 42 03 02  00 01 10 03 01 10 12 80  .....B..........
00E0: 43 00 43 01 03 01 10 02  00 29 01 F0 FF FF 7F 02  C.C......)......
00F0: 02 01 10 03 80 80 07 01  47 00 13 80 14 80 00 80  ........G.......
0100: 15 80 47 01 01 A8 01 02  01 10 01 80 80 1E 01 47  ..G............G
0110: 00 16 80 17 80 18 80 19  80 47 01 01 A8 01 02 01  .........G......
0120: 10 04 80 80 35 01 47 00  1A 80 17 80 1B 80 19 80  ....5.G.........
0130: 47 01 01 A8 01 02 01 10  06 80 80 4C 01 47 00 1C  G..........L.G..
0140: 80 17 80 18 80 19 80 47  01 01 A8 01 02 01 10 08  .......G........
0150: 80 80 63 01 47 00 1D 80  17 80 1B 80 19 80 47 01  ..c.G.........G.
0160: 01 A8 01 02 01 10 0A 80  80 7A 01 47 00 1E 80 17  .........z.G....
0170: 80 18 80 19 80 47 01 01  A8 01 02 01 10 0C 80 80  .....G..........
0180: 91 01 47 00 1F 80 17 80  1B 80 19 80 47 01 01 A8  ..G.........G...
0190: 01 02 01 10 0E 80 80 A8  01 47 00 20 80 17 80 18  .........G. ....
01A0: 80 19 80 47 01 01 A8 01  29 01 F0 FF FF 7F 03 20  ...G....)...... 
01B0: 00 21 00                                          .!.             
```

## Opcodes

```
  0: 0x0001 [0x20] SET_CLI_EVENT_UC_FLAG: Lock player control
  1: 0x0003 [0x03] ExtData[1]->WorkLocal[0] = 0*
  2: 0x0008 [0x03] ExtData[1]->WorkLocal[1] = 0*
  3: 0x000D [0x03] ExtData[1]->WorkLocal[0] = Work_Zone[3]
  4: 0x0012 [0x08] ExtData[1]->WorkLocal[0] -= 21*
  5: 0x0017 [0x24] CREATE_DIALOG(message_id=7233*, default_option=ExtData[1]->WorkLocal[0], option_flags=ExtData[1]->WorkLocal[1])
    → "Enter which floor of the tower?\u0007\u000B\u000C\u0000[/Northern/Western/Eastern/Central] Tower - 1st Floor.\u0007\u000C\u0000[/Northern/Western/Eastern/Central] Tower - 2nd Floor.\u0007\u000C\u0000[/Northern/Western/Eastern/Central] Tower - 3rd Floor.\u0007\u000C\u0000[/Northern/Western/Eastern/Central] Tower - 4th Floor.\u0007\u000C\u0000[/Northern/Western/Eastern] Tower - 5th Floor.\u0007\u000C\u0000[/Northern/Western/Eastern] Tower - 6th Floor.\u0007\u000C\u0000[/Northern/Western/Eastern] Tower - 7th Floor.\u0007Entrance.\u0007Never mind.\u007F1\u0000\u0007"
  6: 0x001E [0x25] WAIT_DIALOG_SELECT()
  7: 0x001F [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x002F
  8: 0x0027 [0x03] Work_Zone[1] = 21*
  9: 0x002C [0x01] GOTO 0x00AF
 10: 0x002F [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x003F
 11: 0x0037 [0x03] Work_Zone[1] = 22*
 12: 0x003C [0x01] GOTO 0x00AF
 13: 0x003F [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x004F
 14: 0x0047 [0x03] Work_Zone[1] = 23*
 15: 0x004C [0x01] GOTO 0x00AF
 16: 0x004F [0x02] IF !(Work_Zone[0] == 3*) GOTO 0x005F
 17: 0x0057 [0x03] Work_Zone[1] = 24*
 18: 0x005C [0x01] GOTO 0x00AF
 19: 0x005F [0x02] IF !(Work_Zone[0] == 4*) GOTO 0x006F
 20: 0x0067 [0x03] Work_Zone[1] = 25*
 21: 0x006C [0x01] GOTO 0x00AF
 22: 0x006F [0x02] IF !(Work_Zone[0] == 5*) GOTO 0x007F
 23: 0x0077 [0x03] Work_Zone[1] = 26*
 24: 0x007C [0x01] GOTO 0x00AF
 25: 0x007F [0x02] IF !(Work_Zone[0] == 6*) GOTO 0x008F
 26: 0x0087 [0x03] Work_Zone[1] = 27*
 27: 0x008C [0x01] GOTO 0x00AF
 28: 0x008F [0x02] IF !(Work_Zone[0] == 7*) GOTO 0x009F
 29: 0x0097 [0x03] Work_Zone[1] = 1*
 30: 0x009C [0x01] GOTO 0x00AF
 31: 0x009F [0x02] IF !(Work_Zone[0] == 8*) GOTO 0x00AF
 32: 0x00A7 [0x03] Work_Zone[1] = 0*
 33: 0x00AC [0x01] GOTO 0x00AF

SUBROUTINE_00AF:
 34: 0x00AF [0x02] IF !(Work_Zone[0] == ExtData[1]->WorkLocal[0]) GOTO 0x00BF
 35: 0x00B7 [0x03] Work_Zone[1] = 255*
 36: 0x00BC [0x01] GOTO 0x01AF
 37: 0x00BF [0x02] IF !(Work_Zone[1] == 0*) GOTO 0x00CA
 38: 0x00C7 [0x01] GOTO 0x01AF
 39: 0x00CA [0x02] IF !(Work_Zone[1] == Work_Zone[3]) GOTO 0x00D5
 40: 0x00D2 [0x01] GOTO 0x01AF
 41: 0x00D5 [0x42] SET_CLI_EVENT_CANCEL_DATA()
 42: 0x00D6 [0x03] ExtData[1]->WorkLocal[2] = Work_Zone[1]
 43: 0x00DB [0x03] Work_Zone[1] = 100*
 44: 0x00E0 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
 45: 0x00E2 [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
 46: 0x00E4 [0x03] Work_Zone[1] = ExtData[1]->WorkLocal[2]
 47: 0x00E9 [0x29] REQ_SET_WAIT(priority=0x01, entity_id=LocalPlayer, tag_num=0x02)
 48: 0x00F0 [0x02] IF !(Work_Zone[1] == 1*) GOTO 0x0107
 49: 0x00F8 [0x47] UPDATE_PLAYER_POS(580.000*, 86.000*, 0.000*, yaw=90.0°*)
 50: 0x0102 [0x47] WAIT_PLAYER_POS_UPDATE
 51: 0x0104 [0x01] GOTO 0x01A8
 52: 0x0107 [0x02] IF !(Work_Zone[1] == 21*) GOTO 0x011E
 53: 0x010F [0x47] UPDATE_PLAYER_POS(380.000*, 96.000*, -2.380*, yaw=270.0°*)
 54: 0x0119 [0x47] WAIT_PLAYER_POS_UPDATE
 55: 0x011B [0x01] GOTO 0x01A8
 56: 0x011E [0x02] IF !(Work_Zone[1] == 22*) GOTO 0x0135
 57: 0x0126 [0x47] UPDATE_PLAYER_POS(180.000*, 96.000*, -162.380*, yaw=270.0°*)
 58: 0x0130 [0x47] WAIT_PLAYER_POS_UPDATE
 59: 0x0132 [0x01] GOTO 0x01A8
 60: 0x0135 [0x02] IF !(Work_Zone[1] == 23*) GOTO 0x014C
 61: 0x013D [0x47] UPDATE_PLAYER_POS(60.000*, 96.000*, -2.380*, yaw=270.0°*)
 62: 0x0147 [0x47] WAIT_PLAYER_POS_UPDATE
 63: 0x0149 [0x01] GOTO 0x01A8
 64: 0x014C [0x02] IF !(Work_Zone[1] == 24*) GOTO 0x0163
 65: 0x0154 [0x47] UPDATE_PLAYER_POS(-140.000*, 96.000*, -162.380*, yaw=270.0°*)
 66: 0x015E [0x47] WAIT_PLAYER_POS_UPDATE
 67: 0x0160 [0x01] GOTO 0x01A8
 68: 0x0163 [0x02] IF !(Work_Zone[1] == 25*) GOTO 0x017A
 69: 0x016B [0x47] UPDATE_PLAYER_POS(-260.000*, 96.000*, -2.380*, yaw=270.0°*)
 70: 0x0175 [0x47] WAIT_PLAYER_POS_UPDATE
 71: 0x0177 [0x01] GOTO 0x01A8
 72: 0x017A [0x02] IF !(Work_Zone[1] == 26*) GOTO 0x0191
 73: 0x0182 [0x47] UPDATE_PLAYER_POS(-460.000*, 96.000*, -162.380*, yaw=270.0°*)
 74: 0x018C [0x47] WAIT_PLAYER_POS_UPDATE
 75: 0x018E [0x01] GOTO 0x01A8
 76: 0x0191 [0x02] IF !(Work_Zone[1] == 27*) GOTO 0x01A8
 77: 0x0199 [0x47] UPDATE_PLAYER_POS(-580.000*, 96.000*, -2.380*, yaw=270.0°*)
 78: 0x01A3 [0x47] WAIT_PLAYER_POS_UPDATE
 79: 0x01A5 [0x01] GOTO 0x01A8

SUBROUTINE_01A8:
 80: 0x01A8 [0x29] REQ_SET_WAIT(priority=0x01, entity_id=LocalPlayer, tag_num=0x03)

SUBROUTINE_01AF:
 81: 0x01AF [0x20] SET_CLI_EVENT_UC_FLAG: Unlock player control
 82: 0x01B1 [0x21] END_EVENT
 83: 0x01B2 [0x00] END_REQSTACK()
```
