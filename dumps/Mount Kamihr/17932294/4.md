# Event 4

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 5/9       |
| Offset          | 0x68C2    |
| Data Size       | 384 bytes |
| Calculated Size | 384 bytes |
| Instructions    | 64        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
68C0:       42 5D 00 80 01 80  1A DB AE 46 01 03 01 10    B].......F....
68D0: 04 80 43 00 43 01 38 03  80 02 09 10 04 80 00 EC  ..C.C.8.........
68E0: 68 34 05 80 77 06 80 00  80 1C 04 80 2F 00 08 A0  h4..w......./...
68F0: 11 01 4E 00 08 A0 11 01  92 01 08 A0 11 01 94 01  ..N.............
6900: 08 A0 11 01 94 01 F0 FF  FF 7F 59 05 08 A0 11 01  ..........Y.....
6910: 01 59 05 F0 FF FF 7F 01  4E 00 F0 FF FF 7F BA 08  .Y......N.......
6920: A0 11 01 0D 80 0E 80 0F  80 10 80 BA F0 FF FF 7F  ................
6930: 81 81 82 81 83 81 84 81  80 08 A0 11 01 80 F0 FF  ................
6940: FF 7F 79 00 F0 FF FF 7F  08 A0 11 01 1C 23 80 2C  ..y..........#.,
6950: 08 A0 11 01 08 A0 11 01  77 33 6F 66 5B 72 80 08  ........w3of[r..
6960: A0 11 01 08 A0 11 01 73  6C 70 34 1C 23 80 5C 00  .......slp4.#.\.
6970: 00 80 5C 01 00 80 9A 45  8E 81 F8 FF FF 7F F8 FF  ..\....E........
6980: FF 7F 73 31 30 38 00 80  1C 28 80 45 02 80 F0 FF  ..s108...(.E....
6990: FF 7F F0 FF FF 7F 66 64  69 30 00 80 7C 00 08 A0  ......fdi0..|...
69A0: 11 01 5B 35 80 08 A0 11  01 08 A0 11 01 73 6C 70  ..[5.........slp
69B0: 33 2B 08 A0 11 01 59 82  23 2B 08 A0 11 01 5A 82  3+....Y.#+....Z.
69C0: 23 52 8E 81 F8 FF FF 7F  F8 FF FF 7F 73 31 30 38  #R..........s108
69D0: 45 8E 81 F8 FF FF 7F F8  FF FF 7F 73 31 30 39 00  E..........s109.
69E0: 80 2B 08 A0 11 01 5B 82  23 2B 08 A0 11 01 5C 82  .+....[.#+....\.
69F0: 23 1A DB AE 1C 23 80 52  8E 81 F8 FF FF 7F F8 FF  #....#.R........
6A00: FF 7F 73 31 30 39 29 05  08 A0 11 01 0E 80 08 A0  ..s109).........
6A10: 11 01 1C 28 80 AB 11 00  80 1C 04 80 02 09 10 04  ...(............
6A20: 80 00 2B 6A 35 8F 80 78  1C 28 80 AB 0A 46 00 45  ..+j5..x.(...F.E
6A30: 02 80 F0 FF FF 7F F0 FF  FF 7F 66 64 69 32 00 80  ..........fdi2..
6A40: 21 00                                             !.              
```

## Opcodes

```
  0: 0x68C2 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x68C3 [0x5D] SET_MUSIC_VOLUME(volume=0*, fade_time=120*)
  2: 0x68C8 [0x1A] CALL_SUBROUTINE(address=0xAEDB)
  3: 0x68CB [0x46] CAMERA_CONTROL: Disable user control
  4: 0x68CD [0x03] Work_Zone[1] = 1*
  5: 0x68D2 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
  6: 0x68D4 [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
  7: 0x68D6 [0x38] SET_CLIENT_EVENT_MODE(mode=147*)
  8: 0x68D9 [0x02] IF !(Work_Zone[9] == 1*) GOTO 0x68EC
  9: 0x68E1 [0x34] LOAD_UNLOAD_ZONE(zone_id=726*)
 10: 0x68E4 [0x77] SET_EVENT_TIME_WEATHER(hour=255*, weather=0*)
 11: 0x68E9 [0x1C] WAIT(1* ticks)
 12: 0x68EC [0x2F] Unnamed NPC (ID: 17932296/0x0111A008)->Render.Flags0 &= ~0x80000 // Bit 19
 13: 0x68F2 [0x4E] SET_ENTITY_HIDE_FLAG: Show Unnamed NPC (ID: 17932296/0x0111A008)
 14: 0x68F8 [0x92] Unnamed NPC (ID: 17932296/0x0111A008)->Render.Flags3 ^= 0x01
 15: 0x68FE [0x94] Unnamed NPC (ID: 17932296/0x0111A008)->Render.Flags3 ^= 0x01
 16: 0x6904 [0x94] LocalPlayer->Render.Flags3 ^= 0x01
 17: 0x690A [0x59] UPDATE_ENTITY_DATA: Unnamed NPC (ID: 17932296/0x0111A008)->Render.Flags0 |= 0x200000
 18: 0x6911 [0x59] UPDATE_ENTITY_DATA: LocalPlayer->Render.Flags0 |= 0x200000
 19: 0x6918 [0x4E] SET_ENTITY_HIDE_FLAG: Show LocalPlayer
 20: 0x691E [0xBA] SET_ENTITY_POSITION(entity_id=References[17899528], pos_x=286.555*, pos_z=7.106*, pos_y=-11.554*, direction=110.3°*)
 21: 0x692B [0xBA] SET_ENTITY_POSITION(entity_id=LocalPlayer, pos_x=293.844*, pos_z=-7.718*, pos_y=-6.430*, direction=235.0°*)
 22: 0x6938 [0x80] LOAD_WAIT(entity=Unnamed NPC (ID: 17932296/0x0111A008))
 23: 0x693D [0x80] LOAD_WAIT(entity=LocalPlayer)
 24: 0x6942 [0x79] LocalPlayer looks at Unnamed NPC (ID: 17932296/0x0111A008) (Basic look)
 25: 0x694C [0x1C] WAIT(30* ticks)
 26: 0x694F [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "w3of" for entities [Unnamed NPC (ID: 17932296/0x0111A008), Unnamed NPC (ID: 17932296/0x0111A008)]
 27: 0x695C [0x5B] LOAD_EXT_SCHEDULER(work_offset=3525*, entity1=Unnamed NPC (ID: 17932296/0x0111A008), entity2=Unnamed NPC (ID: 17932296/0x0111A008), action="slp4")
 28: 0x696B [0x1C] WAIT(30* ticks)
 29: 0x696E [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 0*
 30: 0x6972 [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 0*
 31: 0x6976 [0x9A] WAIT_MUSIC_SERVER()
 32: 0x6977 [0x45] LOAD_SCHEDULED_TASK(work_offset1=634*, entity1=EventEntity, entity2=EventEntity, scheduler_id="s108", work_offset2=0*)
 33: 0x6988 [0x1C] WAIT(15* ticks)
 34: 0x698B [0x45] LOAD_SCHEDULED_TASK(work_offset1=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdi0", work_offset2=0*)
 35: 0x699C [0x7C] Unnamed NPC (ID: 17932296/0x0111A008)->Render.Flags2 |= 0x00
 36: 0x69A2 [0x5B] LOAD_EXT_SCHEDULER(work_offset=3496*, entity1=Unnamed NPC (ID: 17932296/0x0111A008), entity2=Unnamed NPC (ID: 17932296/0x0111A008), action="slp3")
 37: 0x69B1 [0x2B] Unnamed NPC (ID: 17932296/0x0111A008) [7457*]:
    → "Ssso it is as Morimar said. My scales were sealed away in that cursed place.\u007F1\u0000\u0007"
 38: 0x69B8 [0x23] WAIT_FOR_DIALOG_INTERACTION
 39: 0x69B9 [0x2B] Unnamed NPC (ID: 17932296/0x0111A008) [7458*]:
    → "I know you can find them all.\u0007To think...all those yearsss I wasted searching in the wrong places.\u007F1\u0000\u0007"
 40: 0x69C0 [0x23] WAIT_FOR_DIALOG_INTERACTION
 41: 0x69C1 [0x52] END_LOAD_SCHEDULER: End scheduler "s108" with entities [EventEntity, EventEntity], work=634*
 42: 0x69D0 [0x45] LOAD_SCHEDULED_TASK(work_offset1=634*, entity1=EventEntity, entity2=EventEntity, scheduler_id="s109", work_offset2=0*)
 43: 0x69E1 [0x2B] Unnamed NPC (ID: 17932296/0x0111A008) [7459*]:
    → "But remember--even if you find them all, I will not be at full strength, and will not be able to penetrate the Ssserpentine Labyrinth any more than you.\u007F1\u0000\u0007"
 44: 0x69E8 [0x23] WAIT_FOR_DIALOG_INTERACTION
 45: 0x69E9 [0x2B] Unnamed NPC (ID: 17932296/0x0111A008) [7460*]:
    → "Hades, my hatred for you grows deeper with each breath I exhale!\u0007\u0008, I know you will sssucceed!\u007F1\u0000\u0007"
 46: 0x69F0 [0x23] WAIT_FOR_DIALOG_INTERACTION
 47: 0x69F1 [0x1A] CALL_SUBROUTINE(address=0xAEDB)
 48: 0x69F4 [0x1C] WAIT(30* ticks)
 49: 0x69F7 [0x52] END_LOAD_SCHEDULER: End scheduler "s109" with entities [EventEntity, EventEntity], work=634*
 50: 0x6A06 [0x29] REQ_SET_WAIT(priority=0x05, entity_id=Unnamed NPC (ID: 17932296/0x0111A008), tag_num=0x0E)
 51: 0x6A0D [0x80] LOAD_WAIT(entity=Unnamed NPC (ID: 17932296/0x0111A008))
 52: 0x6A12 [0x1C] WAIT(15* ticks)
 53: 0x6A15 [0xAB] EventEntity->DespawnValue = 0* // Set despawn value
 54: 0x6A19 [0x1C] WAIT(1* ticks)
 55: 0x6A1C [0x02] IF !(Work_Zone[9] == 1*) GOTO 0x6A2B
 56: 0x6A24 [0x35] LOAD_ZONE_NO_CLOSE(zone_id=711*)
 57: 0x6A27 [0x78] ENABLE_GAME_TIMER_RESET_WEATHER()
 58: 0x6A28 [0x1C] WAIT(15* ticks)
 59: 0x6A2B [0xAB] EventEntity->UnknownFlag = 0 // Disable unknown flag
 60: 0x6A2D [0x46] CAMERA_CONTROL: Restore default settings
 61: 0x6A2F [0x45] LOAD_SCHEDULED_TASK(work_offset1=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdi2", work_offset2=0*)
 62: 0x6A40 [0x21] END_EVENT
 63: 0x6A41 [0x00] END_REQSTACK()
```
