# Event 2

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 4/6       |
| Offset          | 0x00E9    |
| Data Size       | 320 bytes |
| Calculated Size | 320 bytes |
| Instructions    | 68        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
00E0:                             20 01 1E F0 FF FF 7F            ......
00F0: 6F 70 03 29 00 02 10 03  2A 00 03 10 03 03 00 04  op.)....*.......
0100: 10 03 00 00 05 10 02 29  00 08 80 00 37 01 03 02  .......)....7...
0110: 10 2A 00 06 03 10 02 00  00 10 80 05 2B 01 02 03  .*..........+...
0120: 00 10 80 04 2B 01 03 03  10 08 80 1D 09 80 23 03  ....+.........#.
0130: 01 10 11 80 01 27 02 03  02 10 03 00 1D 12 80 23  .....'.........#
0140: 02 03 00 00 80 80 56 01  1D 13 80 23 3C 27 00 00  ......V....#<'..
0150: 80 08 80 01 86 01 02 03  00 08 80 80 6C 01 1D 14  ............l...
0160: 80 23 3C 27 00 00 80 08  80 01 86 01 02 00 00 10  .#<'............
0170: 80 05 78 01 1D 15 80 23  3C 27 00 08 80 08 80 3C  ..x....#<'.....<
0180: 27 00 10 80 08 80 24 16  80 17 80 27 00 25 02 00  '.....$....'.%..
0190: 10 17 80 00 99 01 01 27  02 42 02 00 10 00 80 80  .......'.B......
01A0: AA 01 03 01 10 00 80 01  CA 01 02 00 10 08 80 80  ................
01B0: BA 01 03 01 10 00 80 01  CA 01 02 00 10 10 80 80  ................
01C0: CA 01 03 01 10 08 80 01  CA 01 43 00 43 01 02 09  ..........C.C...
01D0: 10 00 80 80 D9 01 01 27  02 02 09 10 08 80 80 E8  .......'........
01E0: 01 1D 07 80 23 01 27 02  02 09 10 10 80 80 F7 01  ....#.'.........
01F0: 1D 18 80 23 01 27 02 02  09 10 17 80 80 09 02 1D  ...#.'..........
0200: 19 80 23 01 40 01 01 27  02 02 09 10 1A 80 80 18  ..#.@..'........
0210: 02 1D 1B 80 23 01 27 02  02 09 10 1C 80 80 27 02  ....#.'.......'.
0220: 1D 09 80 23 01 27 02 21  00                       ...#.'.!.       
```

## Opcodes

```
  0: 0x00E9 [0x20] SET_CLI_EVENT_UC_FLAG: Lock player control
  1: 0x00EB [0x1E] EventEntity looks at LocalPlayer and starts talking
  2: 0x00F0 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  3: 0x00F1 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
  4: 0x00F2 [0x03] ExtData[1]->WorkLocal[41] = Work_Zone[2]
  5: 0x00F7 [0x03] ExtData[1]->WorkLocal[42] = Work_Zone[3]
  6: 0x00FC [0x03] ExtData[1]->WorkLocal[3] = Work_Zone[4]
  7: 0x0101 [0x03] ExtData[1]->WorkLocal[0] = Work_Zone[5]
  8: 0x0106 [0x02] IF !(ExtData[1]->WorkLocal[41] == 1*) GOTO 0x0137
  9: 0x010E [0x03] Work_Zone[2] = ExtData[1]->WorkLocal[42]
 10: 0x0113 [0x06] Work_Zone[3] = 0
 11: 0x0116 [0x02] IF !(ExtData[1]->WorkLocal[0] > 2*) GOTO 0x012B
 12: 0x011E [0x02] IF !(ExtData[1]->WorkLocal[3] < 2*) GOTO 0x012B
 13: 0x0126 [0x03] Work_Zone[3] = 1*
 14: 0x012B [0x1D] PRINT_EVENT_MESSAGE(message_id=7814*)
    → "You are already a\u000C\u0001[ / temporary ]member of the \u000C\u0000[Wyverns/Griffons].\u007F1\u0000\u0007"
 15: 0x012E [0x23] WAIT_FOR_DIALOG_INTERACTION
 16: 0x012F [0x03] Work_Zone[1] = 1073741824*
 17: 0x0134 [0x01] GOTO 0x0227
 18: 0x0137 [0x03] Work_Zone[2] = ExtData[1]->WorkLocal[3]
 19: 0x013C [0x1D] PRINT_EVENT_MESSAGE(message_id=7808*)
    → "I am now accepting applications for participation in today's match.\u0007The current entry type is \u00072\u000C\u0000[free/open/auto-balance/random shuffle].\u00073\u007F1\u0000\u0007"
 20: 0x013F [0x23] WAIT_FOR_DIALOG_INTERACTION
 21: 0x0140 [0x02] IF !(ExtData[1]->WorkLocal[3] == 0*) GOTO 0x0156
 22: 0x0148 [0x1D] PRINT_EVENT_MESSAGE(message_id=7809*)
    → "Please note that in the event both sides reach their maximum capacity, your application may not be accepted.\u007F1\u0000\u0007"
 23: 0x014B [0x23] WAIT_FOR_DIALOG_INTERACTION
 24: 0x014C [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=0x27, bit_index_work_offset=0x8000, condition_work_offset=0x8008)
 25: 0x0153 [0x01] GOTO 0x0186
 26: 0x0156 [0x02] IF !(ExtData[1]->WorkLocal[3] == 1*) GOTO 0x016C
 27: 0x015E [0x1D] PRINT_EVENT_MESSAGE(message_id=7810*)
    → "Please note that depending on the number of players registered, you may not always be admitted to the side you choose.\u007F1\u0000\u0007"
 28: 0x0161 [0x23] WAIT_FOR_DIALOG_INTERACTION
 29: 0x0162 [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=0x27, bit_index_work_offset=0x8000, condition_work_offset=0x8008)
 30: 0x0169 [0x01] GOTO 0x0186
 31: 0x016C [0x02] IF !(ExtData[1]->WorkLocal[0] > 2*) GOTO 0x0178
 32: 0x0174 [0x1D] PRINT_EVENT_MESSAGE(message_id=7811*)
    → "Please remember that this type of entry is only temporary. Your final team is subject to change at the discretion of the acting MC.\u007F1\u0000\u0007"
 33: 0x0177 [0x23] WAIT_FOR_DIALOG_INTERACTION
 34: 0x0178 [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=0x27, bit_index_work_offset=0x8008, condition_work_offset=0x8008)
 35: 0x017F [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=0x27, bit_index_work_offset=0x8010, condition_work_offset=0x8008)
 36: 0x0186 [0x24] CREATE_DIALOG(message_id=7812*, default_option=3*, option_flags=0x27)
    → "Submit application?\u0007\u000BFor either side.\u0007For the Wyverns.\u0007For the Griffons.\u0007No.\u007F1\u0000\u0007"
 37: 0x018D [0x25] WAIT_DIALOG_SELECT()
 38: 0x018E [0x02] IF !(Work_Zone[0] == 3*) GOTO 0x0199
 39: 0x0196 [0x01] GOTO 0x0227
 40: 0x0199 [0x42] SET_CLI_EVENT_CANCEL_DATA()
 41: 0x019A [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x01AA
 42: 0x01A2 [0x03] Work_Zone[1] = 0*
 43: 0x01A7 [0x01] GOTO 0x01CA
 44: 0x01AA [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x01BA
 45: 0x01B2 [0x03] Work_Zone[1] = 0*
 46: 0x01B7 [0x01] GOTO 0x01CA
 47: 0x01BA [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x01CA
 48: 0x01C2 [0x03] Work_Zone[1] = 1*
 49: 0x01C7 [0x01] GOTO 0x01CA

SUBROUTINE_01CA:
 50: 0x01CA [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
 51: 0x01CC [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
 52: 0x01CE [0x02] IF !(Work_Zone[9] == 0*) GOTO 0x01D9
 53: 0x01D6 [0x01] GOTO 0x0227
 54: 0x01D9 [0x02] IF !(Work_Zone[9] == 1*) GOTO 0x01E8
 55: 0x01E1 [0x1D] PRINT_EVENT_MESSAGE(message_id=7819*)
    → "I am not accepting entries for either team at this time.\u007F1\u0000\u0007"
 56: 0x01E4 [0x23] WAIT_FOR_DIALOG_INTERACTION
 57: 0x01E5 [0x01] GOTO 0x0227
 58: 0x01E8 [0x02] IF !(Work_Zone[9] == 2*) GOTO 0x01F7
 59: 0x01F0 [0x1D] PRINT_EVENT_MESSAGE(message_id=7820*)
    → "Participant totals for both teams have reached the set limit. I'm sorry, but I cannot accept your application for entry.\u007F1\u0000\u0007"
 60: 0x01F3 [0x23] WAIT_FOR_DIALOG_INTERACTION
 61: 0x01F4 [0x01] GOTO 0x0227
 62: 0x01F7 [0x02] IF !(Work_Zone[9] == 3*) GOTO 0x0209
 63: 0x01FF [0x1D] PRINT_EVENT_MESSAGE(message_id=7815*)
    → "I am sorry. Your application for entry into the \u000C\u0000[Wyverns/Griffons] has been denied.\u007F1\u0000\u0007"
 64: 0x0202 [0x23] WAIT_FOR_DIALOG_INTERACTION
 65: 0x0203 [0x01] GOTO 0x0140

SUBROUTINE_0227:
 66: 0x0227 [0x21] END_EVENT
 67: 0x0228 [0x00] END_REQSTACK()
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x0206 [0x01] GOTO 0x0227
```