# Event 477

## Metadata

| Field           | Value    |
|-----------------|----------|
| Event Index     | 12/23    |
| Offset          | 0x00AB   |
| Data Size       | 68 bytes |
| Calculated Size | 68 bytes |
| Instructions    | 23       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
00A0:                                   1E F0 FF FF 7F             .....
00B0: 6F 70 1D 04 80 23 1D 05  80 23 1D 06 80 23 24 07  op...#...#...#$.
00C0: 80 08 80 08 80 25 02 00  10 08 80 00 DB 00 42 03  .....%........B.
00D0: 01 10 09 80 1D 0A 80 23  01 EB 00 02 00 10 09 80  .......#........
00E0: 00 EB 00 03 01 10 0B 80  01 EB 00 20 00 21 00     ........... .!. 
```

## Opcodes

```
  0: 0x00AB [0x1E] EventEntity looks at LocalPlayer and starts talking
  1: 0x00B0 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  2: 0x00B1 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
  3: 0x00B2 [0x1D] PRINT_EVENT_MESSAGE(message_id=8683*)
    → "Hmm... Our top seller is too popularrr for its own good. Even ourrr hidden stash has almost run out.\u007F1\u0000\u0007"
  4: 0x00B5 [0x23] WAIT_FOR_DIALOG_INTERACTION
  5: 0x00B6 [0x1D] PRINT_EVENT_MESSAGE(message_id=8684*)
    → "I'll need to get my paws on some good \u0001\u0005%\u0002\u0001\u0000\u0000 and \u0001\u0005%\u0002\u0002\u0000\u0000 in orderrr to make some more.\u007F1\u0000\u0007"
  6: 0x00B9 [0x23] WAIT_FOR_DIALOG_INTERACTION
  7: 0x00BA [0x1D] PRINT_EVENT_MESSAGE(message_id=8685*)
    → "Oh! Hey...you're an adventurerrr, aren't you? I'm surrre you've seen either one of these at some time or another. Well, if you happen to come by any of them, would you be so good as to bring me some?\u007F1\u0000\u0007"
  8: 0x00BD [0x23] WAIT_FOR_DIALOG_INTERACTION
  9: 0x00BE [0x24] CREATE_DIALOG(message_id=8686*, default_option=0*, option_flags=0*)
    → "Agree to help?\u0007\u000BYes.\u0007No.\u007F1\u0000\u0007"
 10: 0x00C5 [0x25] WAIT_DIALOG_SELECT()
 11: 0x00C6 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x00DB
 12: 0x00CE [0x42] SET_CLI_EVENT_CANCEL_DATA()
 13: 0x00CF [0x03] Work_Zone[1] = 1*
 14: 0x00D4 [0x1D] PRINT_EVENT_MESSAGE(message_id=8687*)
    → "I'll give you 
\u0003 gil forrr three \u0001\u0005%\u0002\u0001\u0000\u0000 and 
\u0004 gil forrr two \u0001\u0005%\u0002\u0002\u0000\u0000. Please sell me whateverrr you find.\u007F1\u0000\u0007"
 15: 0x00D7 [0x23] WAIT_FOR_DIALOG_INTERACTION
 16: 0x00D8 [0x01] GOTO 0x00EB
 17: 0x00DB [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x00EB
 18: 0x00E3 [0x03] Work_Zone[1] = 2*
 19: 0x00E8 [0x01] GOTO 0x00EB

SUBROUTINE_00EB:
 20: 0x00EB [0x20] SET_CLI_EVENT_UC_FLAG: Unlock player control
 21: 0x00ED [0x21] END_EVENT
 22: 0x00EE [0x00] END_REQSTACK()
```
