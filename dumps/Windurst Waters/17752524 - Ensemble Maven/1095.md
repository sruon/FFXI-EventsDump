# Event 1095

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 4/4       |
| Offset          | 0x03CC    |
| Data Size       | 635 bytes |
| Calculated Size | 635 bytes |
| Instructions    | 61        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
03C0:                                      42 02 02 10              B...
03D0: 00 80 02 A5 04 1E F0 FF  FF 7F 02 02 10 2D 80 00  .............-..
03E0: ED 03 1D 2E 80 23 1D 2F  80 23 01 A5 04 1D 30 80  .....#./.#....0.
03F0: 23 1C 31 80 02 03 10 00  80 02 04 04 03 05 17 32  #.1............2
0400: 80 01 1E 04 02 02 10 0A  80 04 14 04 03 05 17 33  ...............3
0410: 80 01 1E 04 13 05 17 14  80 07 05 17 34 80 27 10  ............4.'.
0420: CD E1 0E 01 03 1C 35 80  1D 36 80 23 02 03 10 00  ......5..6.#....
0430: 80 02 62 04 6E F8 FF FF  7F 37 80 99 F8 FF FF 7F  ..b.n....7......
0440: 1D 38 80 23 1D 39 80 23  43 00 43 01 02 04 10 00  .8.#.9.#C.C.....
0450: 80 00 5F 04 1A A7 04 1D  3A 80 23 1D 3B 80 23 01  .._.....:.#.;.#.
0460: A5 04 02 02 10 0A 80 04  90 04 6E F8 FF FF 7F 37  ..........n....7
0470: 80 99 F8 FF FF 7F 1D 3C  80 23 02 04 10 00 80 00  .......<.#......
0480: 8D 04 1A A7 04 1D 3A 80  23 1D 3D 80 23 01 A5 04  ......:.#.=.#...
0490: 13 03 10 20 80 6E F8 FF  FF 7F 1C 80 99 F8 FF FF  ... .n..........
04A0: 7F 1D 3E 80 23 21 00 66  3F 80 F8 FF FF 7F F8 FF  ..>.#!.f?.......
04B0: FF 7F 74 6C 6B 30 1B 66  3F 80 F8 FF FF 7F F8 FF  ..tlk0.f?.......
04C0: FF 7F 74 6C 6B 31 1B 40  80 41 80 42 80 43 80 44  ..tlk1.@.A.B.C.D
04D0: 80 45 80 46 80 47 80 48  80 49 80 4A 80 4B 80 4C  .E.F.G.H.I.J.K.L
04E0: 80 4D 80 4E 80 4F 80 50  80 51 80 52 80 53 80 54  .M.N.O.P.Q.R.S.T
04F0: 80 55 80 56 80 57 80 58  80 59 80 5A 80 5B 80 5C  .U.V.W.X.Y.Z.[.\
0500: 80 5D 80 5E 80 5F 80 60  80 61 80 62 80 63 80 64  .].^._.`.a.b.c.d
0510: 80 65 80 66 80 67 80 68  80 69 80 6A 80 6B 80 6C  .e.f.g.h.i.j.k.l
0520: 80 6D 80 6E 80 6F 80 70  80 71 80 72 80 73 80 74  .m.n.o.p.q.r.s.t
0530: 80 75 80 76 80 77 80 78  80 79 80 7A 80 7B 80 00  .u.v.w.x.y.z.{..
0540: 80 00 80 00 80 00 80 13  80 13 80 13 80 13 80 13  ................
0550: 80 13 80 13 80 14 80 14  80 14 80 14 80 14 80 14  ................
0560: 80 14 80 14 80 14 80 14  80 14 80 14 80 14 80 14  ................
0570: 80 14 80 14 80 14 80 14  80 14 80 14 80 14 80 14  ................
0580: 80 14 80 14 80 14 80 14  80 14 80 14 80 14 80 14  ................
0590: 80 14 80 14 80 14 80 18  80 18 80 18 80 18 80 18  ................
05A0: 80 18 80 18 80 18 80 0F  80 0F 80 0F 80 0F 80 0F  ................
05B0: 80 0F 80 0F 80 0F 80 0F  80 0F 80 0F 80 0F 80 00  ................
05C0: 80 00 80 00 80 00 80 0F  80 0F 80 0F 80 0F 80 0F  ................
05D0: 80 0F 80 00 80 0F 80 0F  80 0F 80 0F 80 00 80 0F  ................
05E0: 80 00 80 00 80 0F 80 0F  80 00 80 0F 80 0F 80 00  ................
05F0: 80 00 80 0F 80 00 80 00  80 00 80 0F 80 0F 80 0F  ................
0600: 80 00 80 00 80 00 80 0F  80 0F 80 00 80 0F 80 00  ................
0610: 80 00 80 00 80 00 80 00  80 0F 80 00 80 00 80 0F  ................
0620: 80 00 80 00 80 00 80 0F  80 0F 80 00 80 00 80 0F  ................
0630: 80 0F 80 00 80 00 80 0F  80 0F 80 00 80 00 80 00  ................
0640: 80 00 80 00 80 00 80                              .......         
```

## Opcodes

```
  0: 0x03CC [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x03CD [0x02] IF !(Work_Zone[2] <= 0*) GOTO 0x04A5
  2: 0x03D5 [0x1E] EventEntity looks at LocalPlayer and starts talking
  3: 0x03DA [0x02] IF !(Work_Zone[2] == 999*) GOTO 0x03ED
  4: 0x03E2 [0x1D] PRINT_EVENT_MESSAGE(message_id=17156*)
    → "As promised, here is your just reward for doing such a good job in this year's Pink Masquerade.\u007F1\u0000\u0007"
  5: 0x03E5 [0x23] WAIT_FOR_DIALOG_INTERACTION
  6: 0x03E6 [0x1D] PRINT_EVENT_MESSAGE(message_id=17157*)
    → "Though I've got nothing more to give you, I encourage you to participate again to see if you can beat your score!\u007F1\u0000\u0007"
  7: 0x03E9 [0x23] WAIT_FOR_DIALOG_INTERACTION
  8: 0x03EA [0x01] GOTO 0x04A5
  9: 0x03ED [0x1D] PRINT_EVENT_MESSAGE(message_id=17147*)
    → "Well, well, would you look at that stunning little number. Chief! You have a visitor!\u007F1\u0000\u0007"
 10: 0x03F0 [0x23] WAIT_FOR_DIALOG_INTERACTION
 11: 0x03F1 [0x1C] WAIT(30* ticks)
 12: 0x03F4 [0x02] IF !(Work_Zone[3] <= 0*) GOTO 0x0404
 13: 0x03FC [0x03] Work_Zone_1700[5] = 1973*
 14: 0x0401 [0x01] GOTO 0x041E
 15: 0x0404 [0x02] IF !(Work_Zone[2] < 20*) GOTO 0x0414
 16: 0x040C [0x03] Work_Zone_1700[5] = 1974*
 17: 0x0411 [0x01] GOTO 0x041E
 18: 0x0414 [0x13] Work_Zone_1700[5] = rand() % 3*
 19: 0x0419 [0x07] Work_Zone_1700[5] += 1968*

SUBROUTINE_041E:
 20: 0x041E [0x27] REQ_SET(priority=0x10, entity_id=Unnamed NPC (ID: 17752525/0x010EE1CD), tag_num=0x03)
 21: 0x0425 [0x1C] WAIT(240* ticks)
 22: 0x0428 [0x1D] PRINT_EVENT_MESSAGE(message_id=17148*)
    → "Your score for this outfit is...\u007F6\u0001\u0007
\u0000!\u007F1\u0000\u0007"
 23: 0x042B [0x23] WAIT_FOR_DIALOG_INTERACTION
 24: 0x042C [0x02] IF !(Work_Zone[3] <= 0*) GOTO 0x0462
 25: 0x0434 [0x6E] EventEntity uses emote 14*
 26: 0x043B [0x99] Wait for EventEntity animation to complete
 27: 0x0440 [0x1D] PRINT_EVENT_MESSAGE(message_id=17153*)
    → "Why, this is one of the most splendid outfits we've seen! I am more than pleased to award you \u000C\u0001[/first/second/third] place!\u007F1\u0000\u0007"
 28: 0x0443 [0x23] WAIT_FOR_DIALOG_INTERACTION
 29: 0x0444 [0x1D] PRINT_EVENT_MESSAGE(message_id=17154*)
    → "Let me put that wonderful costume of yours up for display on one of our mannequins.\u007F1\u0000\u0007"
 30: 0x0447 [0x23] WAIT_FOR_DIALOG_INTERACTION
 31: 0x0448 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
 32: 0x044A [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
 33: 0x044C [0x02] IF !(Work_Zone[4] == 0*) GOTO 0x045F
 34: 0x0454 [0x1A] CALL_SUBROUTINE(address=0x04A7)
 35: 0x0457 [0x1D] PRINT_EVENT_MESSAGE(message_id=17151*)
    → "Here is your splendid gift, as promised!\u007F1\u0000\u0007"
 36: 0x045A [0x23] WAIT_FOR_DIALOG_INTERACTION
 37: 0x045B [0x1D] PRINT_EVENT_MESSAGE(message_id=17155*)
    → "That's all I have for now. See if you can beat your own personal record next time!\u007F1\u0000\u0007"
 38: 0x045E [0x23] WAIT_FOR_DIALOG_INTERACTION
 39: 0x045F [0x01] GOTO 0x04A5
 40: 0x0462 [0x02] IF !(Work_Zone[2] < 20*) GOTO 0x0490
 41: 0x046A [0x6E] EventEntity uses emote 14*
 42: 0x0471 [0x99] Wait for EventEntity animation to complete
 43: 0x0476 [0x1D] PRINT_EVENT_MESSAGE(message_id=17150*)
    → "Congratulations! You have met the bar for success!\u007F1\u0000\u0007"
 44: 0x0479 [0x23] WAIT_FOR_DIALOG_INTERACTION
 45: 0x047A [0x02] IF !(Work_Zone[4] == 0*) GOTO 0x048D
 46: 0x0482 [0x1A] CALL_SUBROUTINE(address=0x04A7)
 47: 0x0485 [0x1D] PRINT_EVENT_MESSAGE(message_id=17151*)
    → "Here is your splendid gift, as promised!\u007F1\u0000\u0007"
 48: 0x0488 [0x23] WAIT_FOR_DIALOG_INTERACTION
 49: 0x0489 [0x1D] PRINT_EVENT_MESSAGE(message_id=17152*)
    → "I have given you all I have to give, but why not give it another go to see if you can place in the top three?\u007F1\u0000\u0007"
 50: 0x048C [0x23] WAIT_FOR_DIALOG_INTERACTION
 51: 0x048D [0x01] GOTO 0x04A5
 52: 0x0490 [0x13] Work_Zone[3] = rand() % 8*
 53: 0x0495 [0x6E] EventEntity uses emote 12*
 54: 0x049C [0x99] Wait for EventEntity animation to complete
 55: 0x04A1 [0x1D] PRINT_EVENT_MESSAGE(message_id=17149*)
    → "\u000C\u0001[Did your mother dress you in that?/Next time, put your socks on under your shoes!/I've seen worse...but not by much./Maybe if you had offered up some better sweets.../<Yawn> Been there, done that./The chief is wholly unimpressed./What an affront to common sensibility./At least you remembered to brush your teeth./The color scheme was a bit off...]\u0007Take your mistakes and learn from them for your next entry!\u007F1\u0000\u0007"
 56: 0x04A4 [0x23] WAIT_FOR_DIALOG_INTERACTION

SUBROUTINE_04A5:
 57: 0x04A5 [0x21] END_EVENT
 58: 0x04A6 [0x00] END_REQSTACK()

SUBROUTINE_04A7:
 59: 0x04A7 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=189*
 60: 0x04B6 [0x1B] RETURN
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x04B7 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk1" with entities [EventEntity, EventEntity], work=189*
     0x04C6 [0x1B] RETURN
     0x04C7 [0x40] SET_BIT_WORK_RANGE(start_bit=0x4180, end_bit=0x4280, target=0x4380, source=0x4480)
     0x04D0 [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2152104005/0x80468045))
     0x04D5 [0x47] WAIT_PLAYER_POS_UPDATE
     0x04D7 [0x48] [System] [0x4980]:
     0x04DA [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2152431690/0x804B804A))
     0x04DF [0x4C] EventEntity->StatusEvent = 8 // Open door
     0x04E0 [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2152628301/0x804E804D))
     0x04E5 [0x4F] EventEntity->StatusEvent = 0x5080 // Custom event value
     0x04E8 [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2152890449/0x80528051))
     0x04ED [0x53] WAIT_SCHEDULER_TASK: Wait for scheduler 0x59805880 with entities [Unknown NPC (ID: 1434473600/0x55805480), Unknown NPC (ID: 1468028544/0x57805680)]
     0x04FA [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2153480282/0x805B805A))
     0x04FF [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 4271*, volume=4446*
     0x0505 [0x5F] MULTI_HANDLER_COMPLEX(mode=0x80 - Unknown)
     0x0507 [0x60] ADJUST_RENDER_FLAGS1_MULTI: Deprecated mode 0x80 (no operation)
     0x0509 [0x61] EventEntity->Render.Flags2 &= ~0x00000001
     0x050B [0x62] LOAD_EVENT_SCHEDULER: Load scheduler 0x69806880 with entities [Unknown NPC (ID: 1702913152/0x65806480), Unknown NPC (ID: 1736468096/0x67806680)], work=[0x6380, 0x6A80]
     0x051C [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2154594411/0x806C806B))
     0x0521 [0x6D] DEPRECATED_OPCODE(unused1=0x6E80, unused2=0x6F80, unused3=0x7080)
     0x0528 [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2154987633/0x80728071))
     0x052D [0x73] Unknown NPC (ID: 1988130176/0x76807580) casts magic 0x7480 on Unknown NPC (ID: 2021685120/0x78807780)
     0x0538 [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2155511929/0x807A8079))
     0x053D [0x7B] Unknown NPC (ID: 8388736/0x00800080) stops talking
     0x0542 [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2147516416/0x80008000))
     0x0547 [0x13] 0x1380 = rand() % 0x1380
     0x054C [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2148761619/0x80138013))
     0x0551 [0x13] 0x1380 = rand() % 0x1480
     0x0556 [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2148827156/0x80148014))
     0x055B [0x14] 0x1480 *= 0x1480
     0x0560 [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2148827156/0x80148014))
     0x0565 [0x14] 0x1480 *= 0x1480
     0x056A [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2148827156/0x80148014))
     0x056F [0x14] 0x1480 *= 0x1480
     0x0574 [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2148827156/0x80148014))
     0x0579 [0x14] 0x1480 *= 0x1480
     0x057E [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2148827156/0x80148014))
     0x0583 [0x14] 0x1480 *= 0x1480
     0x0588 [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2148827156/0x80148014))
     0x058D [0x14] 0x1480 *= 0x1480
     0x0592 [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2148827156/0x80148014))
     0x0597 [0x18] 0x1880 = atan2(0x1880, 0x1880)
     0x059E [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2149089304/0x80188018))
     0x05A3 [0x18] 0x1880 = atan2(0x0F80, 0x0F80)
     0x05AA [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2148499471/0x800F800F))
     0x05AF [0x0F] 0x0F80 ^= 0x0F80
     0x05B4 [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2148499471/0x800F800F))
     0x05B9 [0x0F] 0x0F80 ^= 0x0F80
     0x05BE [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2147516416/0x80008000))
     0x05C3 [0x00] END_REQSTACK()
     0x05C4 [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2148499456/0x800F8000))
     0x05C9 [0x0F] 0x0F80 ^= 0x0F80
     0x05CE [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2148499471/0x800F800F))
     0x05D3 [0x00] END_REQSTACK()
     0x05D4 [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2148499471/0x800F800F))
     0x05D9 [0x0F] 0x0F80 ^= 0x80
     0x05DE [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2147516431/0x8000800F))
     0x05E3 [0x00] END_REQSTACK()
     0x05E4 [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2148499471/0x800F800F))
     0x05E9 [0x00] END_REQSTACK()
     0x05EA [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2148499471/0x800F800F))
     0x05EF [0x00] END_REQSTACK()
     0x05F0 [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2148499456/0x800F8000))
     0x05F5 [0x00] END_REQSTACK()
     0x05F6 [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2147516416/0x80008000))
     0x05FB [0x0F] 0x0F80 ^= 0x0F80
     0x0600 [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2147516416/0x80008000))
     0x0605 [0x00] END_REQSTACK()
     0x0606 [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2148499471/0x800F800F))
     0x060B [0x00] END_REQSTACK()
     0x060C [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2147516431/0x8000800F))
     0x0611 [0x00] END_REQSTACK()
     0x0612 [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2147516416/0x80008000))
     0x0617 [0x00] END_REQSTACK()
     0x0618 [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2147516431/0x8000800F))
     0x061D [0x00] END_REQSTACK()
     0x061E [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2147516431/0x8000800F))
     0x0623 [0x00] END_REQSTACK()
     0x0624 [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2148499456/0x800F8000))
     0x0629 [0x0F] 0x80 ^= 0x80
     0x062E [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2148499471/0x800F800F))
     0x0633 [0x00] END_REQSTACK()
     0x0634 [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2148499456/0x800F8000))
     0x0639 [0x0F] 0x80 ^= 0x80
     0x063E [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 2147516416/0x80008000))
     0x0643 [0x00] END_REQSTACK()
     0x0644 [0x00] END_REQSTACK()
```