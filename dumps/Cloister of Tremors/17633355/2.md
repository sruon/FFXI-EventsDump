# Event 2

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 3/3       |
| Offset          | 0x001E    |
| Data Size       | 650 bytes |
| Calculated Size | 650 bytes |
| Instructions    | 65        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0010:                                            42 1A                B.
0020: E2 01 46 01 38 01 80 27  10 F0 FF FF 7F 07 27 10  ..F.8..'......'.
0030: 4C 10 0D 01 01 27 10 4D  10 0D 01 02 27 10 4C 10  L....'.M....'.L.
0040: 0D 01 02 59 05 4C 10 0D  01 01 BA F0 FF FF 7F 02  ...Y.L..........
0050: 80 03 80 04 80 05 80 BA  4C 10 0D 01 06 80 07 80  ........L.......
0060: 04 80 08 80 59 05 4D 10  0D 01 01 BA 4D 10 0D 01  ....Y.M.....M...
0070: 06 80 07 80 09 80 08 80  80 F0 FF FF 7F 80 4C 10  ..............L.
0080: 0D 01 80 4D 10 0D 01 1C  0A 80 7B F0 FF FF 7F 4A  ...M......{....J
0090: 4C 10 0D 01 F0 FF FF 7F  6F 76 4C 10 0D 01 1C 0A  L.......ovL.....
00A0: 80 3A 4C 10 0D 01 01 00  07 01 00 0B 80 4B 4C 10  .:L..........KL.
00B0: 0D 01 01 00 6F 76 4C 10  0D 01 1C 0C 80 03 00 00  ....ovL.........
00C0: 0D 80 02 00 00 0E 80 05  E8 00 02 0F 80 00 00 04  ................
00D0: E0 00 02 00 00 10 80 80  E0 00 1A C1 01 01 E0 00  ................
00E0: 07 00 00 0D 80 01 C2 00  03 00 00 0D 80 02 00 00  ................
00F0: 0E 80 05 08 01 02 0F 80  00 00 05 00 01 1A 30 01  ..............0.
0100: 07 00 00 0D 80 01 ED 00  1A E2 01 1C 0C 80 46 00  ..............F.
0110: 45 11 80 F0 FF FF 7F F0  FF FF 7F 66 64 69 32 0F  E..........fdi2.
0120: 80 21 00 02 0F 80 0D 80  00 2F 01 48 12 80 23 1B  .!......./.H..#.
0130: 02 00 00 0D 80 80 7E 01  45 13 80 F0 FF FF 7F F0  ......~.E.......
0140: FF FF 7F 35 30 32 31 0F  80 79 00 F0 FF FF 7F 4D  ...5021..y.....M
0150: 10 0D 01 6E F0 FF FF 7F  0F 80 99 F0 FF FF 7F 1A  ...n............
0160: C1 01 29 10 4C 10 0D 01  06 1C 14 80 55 13 80 F0  ..).L.......U...
0170: FF FF 7F F0 FF FF 7F 35  30 32 31 01 7E 01 1B 45  .......5021.~..E
0180: 11 80 F0 FF FF 7F F0 FF  FF 7F 66 64 69 30 0F 80  ..........fdi0..
0190: 55 11 80 F0 FF FF 7F F0  FF FF 7F 66 64 69 30 1B  U..........fdi0.
01A0: 45 11 80 F0 FF FF 7F F0  FF FF 7F 66 64 6F 30 0F  E..........fdo0.
01B0: 80 55 11 80 F0 FF FF 7F  F0 FF FF 7F 66 64 6F 30  .U..........fdo0
01C0: 1B 45 11 80 F0 FF FF 7F  F0 FF FF 7F 66 64 69 31  .E..........fdi1
01D0: 0F 80 55 11 80 F0 FF FF  7F F0 FF FF 7F 66 64 69  ..U..........fdi
01E0: 31 1B 45 11 80 F0 FF FF  7F F0 FF FF 7F 66 64 6F  1.E..........fdo
01F0: 31 0F 80 55 11 80 F0 FF  FF 7F F0 FF FF 7F 66 64  1..U..........fd
0200: 6F 31 1B 45 15 80 F0 FF  FF 7F F0 FF FF 7F 77 68  o1.E..........wh
0210: 69 31 0F 80 55 15 80 F0  FF FF 7F F0 FF FF 7F 77  i1..U..........w
0220: 68 69 31 1B 45 15 80 F0  FF FF 7F F0 FF FF 7F 77  hi1.E..........w
0230: 68 6F 31 0F 80 55 15 80  F0 FF FF 7F F0 FF FF 7F  ho1..U..........
0240: 77 68 6F 31 1B 45 15 80  F0 FF FF 7F F0 FF FF 7F  who1.E..........
0250: 77 68 69 30 0F 80 55 15  80 F0 FF FF 7F F0 FF FF  whi0..U.........
0260: 7F 77 68 69 30 1B 45 15  80 F0 FF FF 7F F0 FF FF  .whi0.E.........
0270: 7F 77 68 6F 30 0F 80 55  15 80 F0 FF FF 7F F0 FF  .who0..U........
0280: FF 7F 77 68 6F 30 1B 45  16 80 F0 FF FF 7F F0 FF  ..who0.E........
0290: FF 7F 65 66 6F 6E 0F 80  55 16 80 F0 FF FF 7F F0  ..efon..U.......
02A0: FF FF 7F 65 66 6F 6E 1B                           ...efon.        
```

## Opcodes

```
  0: 0x001E [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x001F [0x1A] CALL_SUBROUTINE(address=0x01E2)
  2: 0x0022 [0x46] CAMERA_CONTROL: Disable user control
  3: 0x0024 [0x38] SET_CLIENT_EVENT_MODE(mode=19*)
  4: 0x0027 [0x27] REQ_SET(priority=0x10, entity_id=LocalPlayer, tag_num=0x07)
  5: 0x002E [0x27] REQ_SET(priority=0x10, entity_id=??? (ID: 17633356/0x010D104C), tag_num=0x01)
  6: 0x0035 [0x27] REQ_SET(priority=0x10, entity_id=Unnamed NPC (ID: 17633357/0x010D104D), tag_num=0x02)
  7: 0x003C [0x27] REQ_SET(priority=0x10, entity_id=??? (ID: 17633356/0x010D104C), tag_num=0x02)
  8: 0x0043 [0x59] UPDATE_ENTITY_DATA: ??? (ID: 17633356/0x010D104C)->Render.Flags0 |= 0x200000
  9: 0x004A [0xBA] SET_ENTITY_POSITION(entity_id=LocalPlayer, pos_x=-539.905*, pos_z=-497.020*, pos_y=1.855*, direction=269.6°*)
 10: 0x0057 [0xBA] SET_ENTITY_POSITION(entity_id=??? (ID: 17633356/0x010D104C), pos_x=-539.946*, pos_z=-493.872*, pos_y=1.855*, direction=129.3°*)
 11: 0x0064 [0x59] UPDATE_ENTITY_DATA: Unnamed NPC (ID: 17633357/0x010D104D)->Render.Flags0 |= 0x200000
 12: 0x006B [0xBA] SET_ENTITY_POSITION(entity_id=Unnamed NPC (ID: 17633357/0x010D104D), pos_x=-539.946*, pos_z=-493.872*, pos_y=-1.500*, direction=129.3°*)
 13: 0x0078 [0x80] LOAD_WAIT(entity=LocalPlayer)
 14: 0x007D [0x80] LOAD_WAIT(entity=??? (ID: 17633356/0x010D104C))
 15: 0x0082 [0x80] LOAD_WAIT(entity=Unnamed NPC (ID: 17633357/0x010D104D))
 16: 0x0087 [0x1C] WAIT(15* ticks)
 17: 0x008A [0x7B] LocalPlayer stops talking
 18: 0x008F [0x4A] ??? (ID: 17633356/0x010D104C) looks at LocalPlayer
 19: 0x0098 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 20: 0x0099 [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until ??? (ID: 17633356/0x010D104C) Render.Flags0 and Render.Flags3 conditions are met
 21: 0x009E [0x1C] WAIT(15* ticks)
 22: 0x00A1 [0x3A] CONVERT_YAW_TO_BYTE(entity=??? (ID: 17633356/0x010D104C), result_destination=ExtData[1]->WorkLocal[1])
 23: 0x00A8 [0x07] ExtData[1]->WorkLocal[1] += 1024*
 24: 0x00AD [0x4B] UPDATE_ENTITY_YAW(entity=??? (ID: 17633356/0x010D104C), yaw=0.01°)
 25: 0x00B4 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 26: 0x00B5 [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until ??? (ID: 17633356/0x010D104C) Render.Flags0 and Render.Flags3 conditions are met
 27: 0x00BA [0x1C] WAIT(30* ticks)
 28: 0x00BD [0x03] ExtData[1]->WorkLocal[0] = 1*
 29: 0x00C2 [0x02] IF !(ExtData[1]->WorkLocal[0] > 3*) GOTO 0x00E8
 30: 0x00CA [0x02] IF !(0* < ExtData[1]->WorkLocal[0]) GOTO 0x00E0
 31: 0x00D2 [0x02] IF !(ExtData[1]->WorkLocal[0] == 2*) GOTO 0x00E0
 32: 0x00DA [0x1A] CALL_SUBROUTINE(address=0x01C1)
 33: 0x00DD [0x01] GOTO 0x00E0

SUBROUTINE_00E0:
 34: 0x00E0 [0x07] ExtData[1]->WorkLocal[0] += 1*
 35: 0x00E5 [0x01] GOTO 0x00C2
 36: 0x00E8 [0x03] ExtData[1]->WorkLocal[0] = 1*
 37: 0x00ED [0x02] IF !(ExtData[1]->WorkLocal[0] > 3*) GOTO 0x0108
 38: 0x00F5 [0x02] IF !(0* > ExtData[1]->WorkLocal[0]) GOTO 0x0100
 39: 0x00FD [0x1A] CALL_SUBROUTINE(address=0x0130)
 40: 0x0100 [0x07] ExtData[1]->WorkLocal[0] += 1*
 41: 0x0105 [0x01] GOTO 0x00ED
 42: 0x0108 [0x1A] CALL_SUBROUTINE(address=0x01E2)
 43: 0x010B [0x1C] WAIT(30* ticks)
 44: 0x010E [0x46] CAMERA_CONTROL: Restore default settings
 45: 0x0110 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi2" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 46: 0x0121 [0x21] END_EVENT
 47: 0x0122 [0x00] END_REQSTACK()

SUBROUTINE_0130:
 48: 0x0130 [0x02] IF !(ExtData[1]->WorkLocal[0] == 1*) GOTO 0x017E
 49: 0x0138 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "5021" with entities [LocalPlayer, LocalPlayer], work=[473*, 0*]
 50: 0x0149 [0x79] LocalPlayer looks at Unnamed NPC (ID: 17633357/0x010D104D) (Basic look)
 51: 0x0153 [0x6E] LocalPlayer uses emote 0*
 52: 0x015A [0x99] Wait for LocalPlayer animation to complete
 53: 0x015F [0x1A] CALL_SUBROUTINE(address=0x01C1)
 54: 0x0162 [0x29] REQ_SET_WAIT(priority=0x10, entity_id=??? (ID: 17633356/0x010D104C), tag_num=0x06)
 55: 0x0169 [0x1C] WAIT(20* ticks)
 56: 0x016C [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "5021" with entities [LocalPlayer, LocalPlayer], work=473*
 57: 0x017B [0x01] GOTO 0x017E

SUBROUTINE_017E:
 58: 0x017E [0x1B] RETURN

SUBROUTINE_01C1:
 59: 0x01C1 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 60: 0x01D2 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=200*
 61: 0x01E1 [0x1B] RETURN

SUBROUTINE_01E2:
 62: 0x01E2 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 63: 0x01F3 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=200*
 64: 0x0202 [0x1B] RETURN
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x0123 [0x02] IF !(0* == 1*) GOTO 0x012F
     0x012B [0x48] [System] [7687*]:
    → "\u007F4\u0001\u0000\u0007"
     0x012E [0x23] WAIT_FOR_DIALOG_INTERACTION
     0x012F [0x1B] RETURN
# Dead code (unreachable instructions):
     0x017F [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi0" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x0190 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdi0" with entities [LocalPlayer, LocalPlayer], work=200*
     0x019F [0x1B] RETURN
     0x01A0 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo0" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x01B1 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo0" with entities [LocalPlayer, LocalPlayer], work=200*
     0x01C0 [0x1B] RETURN
# Dead code (unreachable instructions):
     0x0203 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "whi1" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
     0x0214 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "whi1" with entities [LocalPlayer, LocalPlayer], work=201*
     0x0223 [0x1B] RETURN
     0x0224 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "who1" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
     0x0235 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "who1" with entities [LocalPlayer, LocalPlayer], work=201*
     0x0244 [0x1B] RETURN
     0x0245 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "whi0" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
     0x0256 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "whi0" with entities [LocalPlayer, LocalPlayer], work=201*
     0x0265 [0x1B] RETURN
     0x0266 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "who0" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
     0x0277 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "who0" with entities [LocalPlayer, LocalPlayer], work=201*
     0x0286 [0x1B] RETURN
     0x0287 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "efon" with entities [LocalPlayer, LocalPlayer], work=[215*, 0*]
     0x0298 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "efon" with entities [LocalPlayer, LocalPlayer], work=215*
     0x02A7 [0x1B] RETURN
```