# 17748198 - Smithy Moogle

## Common Data

| Field            | Value                |
|------------------|----------------------|
| Zone             | Metalworks (ID: 237) |
| Block Size       | 1252 bytes           |
| Total Events     | 5                    |
| References Count | 74                   |

## List of Events

| Event ID              | Entrypoint   |   Size |   Instructions |
|-----------------------|--------------|--------|----------------|
| [65535](#event-65535) | 0x0000       |      1 |              1 |
| [1057](#event-1057)   | 0x0001       |     42 |              9 |
| [1058](#event-1058)   | 0x002B       |    658 |            115 |
| [1059](#event-1059)   | 0x02BD       |    218 |             33 |
| [1060](#event-1060)   | 0x0397       |      1 |              1 |

## DAT References (imed_data)

|   Index | Hex Value   |   Dec Value |
|---------|-------------|-------------|
|       0 | 0x0001      |           1 |
|       1 | 0x2CEA      |       11498 |
|       2 | 0x0000      |           0 |
|       3 | 0x2CEB      |       11499 |
|       4 | 0x26DD      |        9949 |
|       5 | 0x2CEC      |       11500 |
|       6 | 0x2CED      |       11501 |
|       7 | 0x2CEE      |       11502 |
|       8 | 0x2CEF      |       11503 |
|       9 | 0x2CF0      |       11504 |
|      10 | 0x2CF1      |       11505 |
|      11 | 0x2CF2      |       11506 |
|      12 | 0x2CF3      |       11507 |
|      13 | 0x2CF4      |       11508 |
|      14 | 0x2CF5      |       11509 |
|      15 | 0x2CF6      |       11510 |
|      16 | 0x2CF7      |       11511 |
|      17 | 0x2CF8      |       11512 |
|      18 | 0x2CF9      |       11513 |
|      19 | 0x2CFA      |       11514 |
|      20 | 0x2CFB      |       11515 |
|      21 | 0x2CFC      |       11516 |
|      22 | 0x2CFD      |       11517 |
|      23 | 0x2CFE      |       11518 |
|      24 | 0x50B7      |       20663 |
|      25 | 0x50B8      |       20664 |
|      26 | 0x5424      |       21540 |
|      27 | 0x5425      |       21541 |
|      28 | 0x5458      |       21592 |
|      29 | 0x5459      |       21593 |
|      30 | 0x5462      |       21602 |
|      31 | 0x5463      |       21603 |
|      32 | 0x54AD      |       21677 |
|      33 | 0x54E4      |       21732 |
|      34 | 0x551D      |       21789 |
|      35 | 0x5552      |       21842 |
|      36 | 0x5585      |       21893 |
|      37 | 0x55B0      |       21936 |
|      38 | 0x55C0      |       21952 |
|      39 | 0x55C1      |       21953 |
|      40 | 0x55E7      |       21991 |
|      41 | 0x5698      |       22168 |
|      42 | 0x5699      |       22169 |
|      43 | 0x569A      |       22170 |
|      44 | 0x0002      |           2 |
|      45 | 0x0003      |           3 |
|      46 | 0x0004      |           4 |
|      47 | 0x0005      |           5 |
|      48 | 0x0006      |           6 |
|      49 | 0x0007      |           7 |
|      50 | 0x0008      |           8 |
|      51 | 0x0009      |           9 |
|      52 | 0x000A      |          10 |
|      53 | 0x000B      |          11 |
|      54 | 0x000C      |          12 |
|      55 | 0x000D      |          13 |
|      56 | 0x000E      |          14 |
|      57 | 0x000F      |          15 |
|      58 | 0x0010      |          16 |
|      59 | 0x0011      |          17 |
|      60 | 0x0012      |          18 |
|      61 | 0x0013      |          19 |
|      62 | 0x0014      |          20 |
|      63 | 0x0015      |          21 |
|      64 | 0x2CFF      |       11519 |
|      65 | 0x0016      |          22 |
|      66 | 0x2D00      |       11520 |
|      67 | 0x2D01      |       11521 |
|      68 | 0x001E      |          30 |
|      69 | 0x01E0      |         480 |
|      70 | 0x0078      |         120 |
|      71 | 0x00C8      |         200 |
|      72 | 0x003C      |          60 |
|      73 | 0x00C9      |         201 |

## String References

- **11498**: The blacksmiths' guild here is huge, kupo! There's so much to learn!
- **11499**: Hmmm...wait, you aren't a moogle!
- **11500**: @You show the moogle your $0.
- **11501**: Let me take a look at that, kupo.
- **11502**: ...
- **11503**: Hmm...
- **11504**: An...empyrean weapon?
- **11505**: No...a Mog Bonanza weapon...
- **11506**: And the crystallization is impressive, kupo!
- **11507**: Kupofried truly is a master of his art...but how can we use this, kupo?
- **11508**: Forgive my musing.
- **11509**: That $0 utilizes special magics found in Bonanza weapons, kupo.
- **11510**: In fact, it can probably even be used to reforge them.
- **11511**: But don't expect it to have any effect on other weapons, kupo.
- **11512**: I admit to being intrigued... What is the exact process that makes it so?
- **11513**: It doesn't seem incredibly complicated, yet I admit to being particularly stumped, kupo.
- **11514**: The Mog Bonanza weapons utilize special moogle magic. Perhaps we might be able to take advantage of this magic in other ways.
- **11515**: But either way, this one cannot be used for more generic purposes.
- **11516**: But that's just me thinking out loud, kupo.
- **11517**: Be that as it may, I can use $0 to reforge Mog Bonanza weapons.
- **11518**: Your reforged weapon will look something like this, kupo.
- **11520**: Reforge the $0?
- **11521**: Proceed with the reforging? [Yes./No.]

## Events

### Event 65535

#### Metadata

| Field        | Value   |
|--------------|---------|
| Entrypoint   | 0x0000  |
| Data Size    | 1 bytes |
| Instructions | 1       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000: 00                                                .               
```

#### Opcodes

```
  0: 0x0000 [0x00] END_REQSTACK()
```

### Event 1057

#### Metadata

| Field        | Value    |
|--------------|----------|
| Entrypoint   | 0x0001   |
| Data Size    | 42 bytes |
| Instructions | 9        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000:    1E F0 FF FF 7F 1C 00  80 2C F8 FF FF 7F F8 FF   ........,......
0010: FF 7F 68 61 70 30 1D 01  80 23 2C F8 FF FF 7F F8  ..hap0...#,.....
0020: FF FF 7F 68 61 70 31 20  00 21 00                 ...hap1 .!.     
```

#### Opcodes

```
  0: 0x0001 [0x1E] EventEntity looks at LocalPlayer and starts talking
  1: 0x0006 [0x1C] WAIT(1* ticks)
  2: 0x0009 [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "hap0" with entities [EventEntity, EventEntity]
  3: 0x0016 [0x1D] PRINT_EVENT_MESSAGE(message_id=11498*)
    → "The blacksmiths' guild here is huge, kupo! There's so much to learn!"
  4: 0x0019 [0x23] WAIT_FOR_DIALOG_INTERACTION
  5: 0x001A [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "hap1" with entities [EventEntity, EventEntity]
  6: 0x0027 [0x20] SET_CLI_EVENT_UC_FLAG: Unlock player control
  7: 0x0029 [0x21] END_EVENT
  8: 0x002A [0x00] END_REQSTACK()
```

### Event 1058

#### Metadata

| Field        | Value     |
|--------------|-----------|
| Entrypoint   | 0x002B    |
| Data Size    | 658 bytes |
| Instructions | 115       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0020:                                   03 01 00 02 10             .....
0030: 1E F0 FF FF 7F 1C 00 80  02 01 00 02 80 00 98 01  ................
0040: 2C F8 FF FF 7F F8 FF FF  7F 65 78 70 30 1D 03 80  ,........exp0...
0050: 23 2C F8 FF FF 7F F8 FF  FF 7F 65 78 70 31 6E F0  #,........exp1n.
0060: FF FF 7F 02 80 99 F0 FF  FF 7F 03 02 10 04 80 48  ...............H
0070: 05 80 23 2C F8 FF FF 7F  F8 FF FF 7F 65 78 70 30  ..#,........exp0
0080: 1D 06 80 23 2C F8 FF FF  7F F8 FF FF 7F 65 78 70  ...#,........exp
0090: 31 1D 07 80 23 1D 08 80  23 2C F8 FF FF 7F F8 FF  1...#...#,......
00A0: FF 7F 74 6C 6B 30 1D 09  80 23 1D 0A 80 23 1D 0B  ..tlk0...#...#..
00B0: 80 23 1D 0C 80 23 2C F8  FF FF 7F F8 FF FF 7F 74  .#...#,........t
00C0: 6C 6B 31 1D 08 80 23 1D  07 80 23 2C F8 FF FF 7F  lk1...#...#,....
00D0: F8 FF FF 7F 74 6C 6B 30  1D 0D 80 23 2C F8 FF FF  ....tlk0...#,...
00E0: 7F F8 FF FF 7F 74 6C 6B  31 03 02 10 04 80 2C F8  .....tlk1.....,.
00F0: FF FF 7F F8 FF FF 7F 65  78 70 30 1D 0E 80 23 1D  .......exp0...#.
0100: 0F 80 23 03 02 10 04 80  1D 10 80 23 2C F8 FF FF  ..#........#,...
0110: 7F F8 FF FF 7F 65 78 70  31 1D 07 80 23 1D 08 80  .....exp1...#...
0120: 23 2C F8 FF FF 7F F8 FF  FF 7F 74 6C 6B 30 1D 11  #,........tlk0..
0130: 80 23 1D 12 80 23 1D 13  80 23 1D 14 80 23 2C F8  .#...#...#...#,.
0140: FF FF 7F F8 FF FF 7F 74  6C 6B 31 1D 08 80 23 1D  .......tlk1...#.
0150: 07 80 23 2C F8 FF FF 7F  F8 FF FF 7F 74 6C 6B 30  ..#,........tlk0
0160: 1D 15 80 23 2C F8 FF FF  7F F8 FF FF 7F 74 6C 6B  ...#,........tlk
0170: 31 03 02 10 04 80 2C F8  FF FF 7F F8 FF FF 7F 65  1.....,........e
0180: 78 70 30 1D 16 80 23 2C  F8 FF FF 7F F8 FF FF 7F  xp0...#,........
0190: 65 78 70 31 43 00 43 01  2C F8 FF FF 7F F8 FF FF  exp1C.C.,.......
01A0: 7F 65 78 70 30 1D 17 80  23 2C F8 FF FF 7F F8 FF  .exp0...#,......
01B0: FF 7F 65 78 70 31 03 00  00 02 80 03 02 10 18 80  ..exp1..........
01C0: 03 03 10 19 80 03 04 10  1A 80 03 05 10 1B 80 03  ................
01D0: 06 10 1C 80 03 07 10 1D  80 03 08 10 1E 80 03 09  ................
01E0: 10 1F 80 03 00 17 20 80  03 01 17 21 80 03 02 17  ...... ....!....
01F0: 22 80 03 03 17 23 80 03  04 17 24 80 03 05 17 25  "....#....$....%
0200: 80 03 06 17 26 80 03 07  17 27 80 03 08 17 28 80  ....&....'....(.
0210: 03 09 17 29 80 03 0A 17  2A 80 03 0B 17 2B 80 D4  ...)....*....+..
0220: 03 02 80 02 10 D4 03 00  80 03 10 D4 03 2C 80 04  .............,..
0230: 10 D4 03 2D 80 05 10 D4  03 2E 80 06 10 D4 03 2F  ...-.........../
0240: 80 07 10 D4 03 30 80 08  10 D4 03 31 80 09 10 D4  .....0.....1....
0250: 03 32 80 00 17 D4 03 33  80 01 17 D4 03 34 80 02  .2.....3.....4..
0260: 17 D4 03 35 80 03 17 D4  03 36 80 04 17 D4 03 37  ...5.....6.....7
0270: 80 05 17 D4 03 38 80 06  17 D4 03 39 80 07 17 D4  .....8.....9....
0280: 03 3A 80 08 17 D4 03 3B  80 09 17 D4 03 3C 80 0A  .:.....;.....<..
0290: 17 D4 03 3D 80 0B 17 3C  00 00 3E 80 00 80 3C 00  ...=...<..>...<.
02A0: 00 3F 80 00 80 D4 02 40  80 02 80 00 00 25 02 00  .?.....@.....%..
02B0: 10 41 80 00 B9 02 01 B9  02 20 00 21 00           .A....... .!.   
```

#### Opcodes

```
  0: 0x002B [0x03] ExtData[1]->WorkLocal[1] = Work_Zone[2]
  1: 0x0030 [0x1E] EventEntity looks at LocalPlayer and starts talking
  2: 0x0035 [0x1C] WAIT(1* ticks)
  3: 0x0038 [0x02] IF !(ExtData[1]->WorkLocal[1] == 0*) GOTO 0x0198
  4: 0x0040 [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "exp0" with entities [EventEntity, EventEntity]
  5: 0x004D [0x1D] PRINT_EVENT_MESSAGE(message_id=11499*)
    → "Hmmm...wait, you aren't a moogle!"
  6: 0x0050 [0x23] WAIT_FOR_DIALOG_INTERACTION
  7: 0x0051 [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "exp1" with entities [EventEntity, EventEntity]
  8: 0x005E [0x6E] LocalPlayer uses emote 0*
  9: 0x0065 [0x99] Wait for LocalPlayer animation to complete
 10: 0x006A [0x03] Work_Zone[2] = 9949*
 11: 0x006F [0x48] [System] [11500*]:
    → "@You show the moogle your $0."
 12: 0x0072 [0x23] WAIT_FOR_DIALOG_INTERACTION
 13: 0x0073 [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "exp0" with entities [EventEntity, EventEntity]
 14: 0x0080 [0x1D] PRINT_EVENT_MESSAGE(message_id=11501*)
    → "Let me take a look at that, kupo."
 15: 0x0083 [0x23] WAIT_FOR_DIALOG_INTERACTION
 16: 0x0084 [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "exp1" with entities [EventEntity, EventEntity]
 17: 0x0091 [0x1D] PRINT_EVENT_MESSAGE(message_id=11502*)
    → "..."
 18: 0x0094 [0x23] WAIT_FOR_DIALOG_INTERACTION
 19: 0x0095 [0x1D] PRINT_EVENT_MESSAGE(message_id=11503*)
    → "Hmm..."
 20: 0x0098 [0x23] WAIT_FOR_DIALOG_INTERACTION
 21: 0x0099 [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "tlk0" with entities [EventEntity, EventEntity]
 22: 0x00A6 [0x1D] PRINT_EVENT_MESSAGE(message_id=11504*)
    → "An...empyrean weapon?"
 23: 0x00A9 [0x23] WAIT_FOR_DIALOG_INTERACTION
 24: 0x00AA [0x1D] PRINT_EVENT_MESSAGE(message_id=11505*)
    → "No...a Mog Bonanza weapon..."
 25: 0x00AD [0x23] WAIT_FOR_DIALOG_INTERACTION
 26: 0x00AE [0x1D] PRINT_EVENT_MESSAGE(message_id=11506*)
    → "And the crystallization is impressive, kupo!"
 27: 0x00B1 [0x23] WAIT_FOR_DIALOG_INTERACTION
 28: 0x00B2 [0x1D] PRINT_EVENT_MESSAGE(message_id=11507*)
    → "Kupofried truly is a master of his art...but how can we use this, kupo?"
 29: 0x00B5 [0x23] WAIT_FOR_DIALOG_INTERACTION
 30: 0x00B6 [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "tlk1" with entities [EventEntity, EventEntity]
 31: 0x00C3 [0x1D] PRINT_EVENT_MESSAGE(message_id=11503*)
    → "Hmm..."
 32: 0x00C6 [0x23] WAIT_FOR_DIALOG_INTERACTION
 33: 0x00C7 [0x1D] PRINT_EVENT_MESSAGE(message_id=11502*)
    → "..."
 34: 0x00CA [0x23] WAIT_FOR_DIALOG_INTERACTION
 35: 0x00CB [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "tlk0" with entities [EventEntity, EventEntity]
 36: 0x00D8 [0x1D] PRINT_EVENT_MESSAGE(message_id=11508*)
    → "Forgive my musing."
 37: 0x00DB [0x23] WAIT_FOR_DIALOG_INTERACTION
 38: 0x00DC [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "tlk1" with entities [EventEntity, EventEntity]
 39: 0x00E9 [0x03] Work_Zone[2] = 9949*
 40: 0x00EE [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "exp0" with entities [EventEntity, EventEntity]
 41: 0x00FB [0x1D] PRINT_EVENT_MESSAGE(message_id=11509*)
    → "That $0 utilizes special magics found in Bonanza weapons, kupo."
 42: 0x00FE [0x23] WAIT_FOR_DIALOG_INTERACTION
 43: 0x00FF [0x1D] PRINT_EVENT_MESSAGE(message_id=11510*)
    → "In fact, it can probably even be used to reforge them."
 44: 0x0102 [0x23] WAIT_FOR_DIALOG_INTERACTION
 45: 0x0103 [0x03] Work_Zone[2] = 9949*
 46: 0x0108 [0x1D] PRINT_EVENT_MESSAGE(message_id=11511*)
    → "But don't expect it to have any effect on other weapons, kupo."
 47: 0x010B [0x23] WAIT_FOR_DIALOG_INTERACTION
 48: 0x010C [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "exp1" with entities [EventEntity, EventEntity]
 49: 0x0119 [0x1D] PRINT_EVENT_MESSAGE(message_id=11502*)
    → "..."
 50: 0x011C [0x23] WAIT_FOR_DIALOG_INTERACTION
 51: 0x011D [0x1D] PRINT_EVENT_MESSAGE(message_id=11503*)
    → "Hmm..."
 52: 0x0120 [0x23] WAIT_FOR_DIALOG_INTERACTION
 53: 0x0121 [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "tlk0" with entities [EventEntity, EventEntity]
 54: 0x012E [0x1D] PRINT_EVENT_MESSAGE(message_id=11512*)
    → "I admit to being intrigued... What is the exact process that makes it so?"
 55: 0x0131 [0x23] WAIT_FOR_DIALOG_INTERACTION
 56: 0x0132 [0x1D] PRINT_EVENT_MESSAGE(message_id=11513*)
    → "It doesn't seem incredibly complicated, yet I admit to being particularly stumped, kupo."
 57: 0x0135 [0x23] WAIT_FOR_DIALOG_INTERACTION
 58: 0x0136 [0x1D] PRINT_EVENT_MESSAGE(message_id=11514*)
    → "The Mog Bonanza weapons utilize special moogle magic. Perhaps we might be able to take advantage of this magic in other ways."
 59: 0x0139 [0x23] WAIT_FOR_DIALOG_INTERACTION
 60: 0x013A [0x1D] PRINT_EVENT_MESSAGE(message_id=11515*)
    → "But either way, this one cannot be used for more generic purposes."
 61: 0x013D [0x23] WAIT_FOR_DIALOG_INTERACTION
 62: 0x013E [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "tlk1" with entities [EventEntity, EventEntity]
 63: 0x014B [0x1D] PRINT_EVENT_MESSAGE(message_id=11503*)
    → "Hmm..."
 64: 0x014E [0x23] WAIT_FOR_DIALOG_INTERACTION
 65: 0x014F [0x1D] PRINT_EVENT_MESSAGE(message_id=11502*)
    → "..."
 66: 0x0152 [0x23] WAIT_FOR_DIALOG_INTERACTION
 67: 0x0153 [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "tlk0" with entities [EventEntity, EventEntity]
 68: 0x0160 [0x1D] PRINT_EVENT_MESSAGE(message_id=11516*)
    → "But that's just me thinking out loud, kupo."
 69: 0x0163 [0x23] WAIT_FOR_DIALOG_INTERACTION
 70: 0x0164 [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "tlk1" with entities [EventEntity, EventEntity]
 71: 0x0171 [0x03] Work_Zone[2] = 9949*
 72: 0x0176 [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "exp0" with entities [EventEntity, EventEntity]
 73: 0x0183 [0x1D] PRINT_EVENT_MESSAGE(message_id=11517*)
    → "Be that as it may, I can use $0 to reforge Mog Bonanza weapons."
 74: 0x0186 [0x23] WAIT_FOR_DIALOG_INTERACTION
 75: 0x0187 [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "exp1" with entities [EventEntity, EventEntity]
 76: 0x0194 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
 77: 0x0196 [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
 78: 0x0198 [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "exp0" with entities [EventEntity, EventEntity]
 79: 0x01A5 [0x1D] PRINT_EVENT_MESSAGE(message_id=11518*)
    → "Your reforged weapon will look something like this, kupo."
 80: 0x01A8 [0x23] WAIT_FOR_DIALOG_INTERACTION
 81: 0x01A9 [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "exp1" with entities [EventEntity, EventEntity]
 82: 0x01B6 [0x03] ExtData[1]->WorkLocal[0] = 0*
 83: 0x01BB [0x03] Work_Zone[2] = 20663*
 84: 0x01C0 [0x03] Work_Zone[3] = 20664*
 85: 0x01C5 [0x03] Work_Zone[4] = 21540*
 86: 0x01CA [0x03] Work_Zone[5] = 21541*
 87: 0x01CF [0x03] Work_Zone[6] = 21592*
 88: 0x01D4 [0x03] Work_Zone[7] = 21593*
 89: 0x01D9 [0x03] Work_Zone[8] = 21602*
 90: 0x01DE [0x03] Work_Zone[9] = 21603*
 91: 0x01E3 [0x03] Work_Zone_1700[0] = 21677*
 92: 0x01E8 [0x03] Work_Zone_1700[1] = 21732*
 93: 0x01ED [0x03] Work_Zone_1700[2] = 21789*
 94: 0x01F2 [0x03] Work_Zone_1700[3] = 21842*
 95: 0x01F7 [0x03] Work_Zone_1700[4] = 21893*
 96: 0x01FC [0x03] Work_Zone_1700[5] = 21936*
 97: 0x0201 [0x03] Work_Zone_1700[6] = 21952*
 98: 0x0206 [0x03] Work_Zone_1700[7] = 21953*
 99: 0x020B [0x03] Work_Zone_1700[8] = 21991*
100: 0x0210 [0x03] Work_Zone_1700[9] = 22168*
101: 0x0215 [0x03] Work_Zone_1700[10] = 22169*
102: 0x021A [0x03] Work_Zone_1700[11] = 22170*
103: 0x021F [0xD4] MAP_QUERY_WINDOW: Prepare buffer configuration A (buffer=[02 80 02 10 D4 03 00 80...])
104: 0x023D [0xD4] MAP_QUERY_WINDOW: Prepare buffer configuration A (buffer=[2F 80 07 10 D4 03 30 80...])
105: 0x025B [0xD4] MAP_QUERY_WINDOW: Prepare buffer configuration A (buffer=[34 80 02 17 D4 03 35 80...])
106: 0x0279 [0xD4] MAP_QUERY_WINDOW: Prepare buffer configuration A (buffer=[39 80 07 17 D4 03 3A 80...])
107: 0x0297 [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=ExtData[1]->WorkLocal[0], bit_index_work_offset=20*, condition_work_offset=1*)
108: 0x029E [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=ExtData[1]->WorkLocal[0], bit_index_work_offset=21*, condition_work_offset=1*)
109: 0x02A5 [0xD4] MAP_QUERY_WINDOW: Test and open query window (flag=0x40, work=[0x0280, 0x80, 0x2500])
110: 0x02AE [0x02] IF !(Work_Zone[0] == 22*) GOTO 0x02B9
111: 0x02B6 [0x01] GOTO 0x02B9

SUBROUTINE_02B9:
112: 0x02B9 [0x20] SET_CLI_EVENT_UC_FLAG: Unlock player control
113: 0x02BB [0x21] END_EVENT
114: 0x02BC [0x00] END_REQSTACK()
```

### Event 1059

#### Metadata

| Field        | Value     |
|--------------|-----------|
| Entrypoint   | 0x02BD    |
| Data Size    | 218 bytes |
| Instructions | 33        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
02B0:                                         1E F0 FF               ...
02C0: FF 7F 1C 00 80 2C F8 FF  FF 7F F8 FF FF 7F 65 78  .....,........ex
02D0: 70 30 93 02 10 1D 42 80  23 93 02 80 2C F8 FF FF  p0....B.#...,...
02E0: 7F F8 FF FF 7F 65 78 70  31 24 43 80 00 80 02 80  .....exp1$C.....
02F0: 25 02 00 10 02 80 00 83  03 42 2C F8 FF FF 7F F8  %........B,.....
0300: FF FF 7F 6A 6F 62 30 1C  44 80 73 45 80 F8 FF FF  ...job0.D.sE....
0310: 7F F8 FF FF 7F 1C 46 80  45 47 80 F8 FF FF 7F F8  ......F.EG......
0320: FF FF 7F 66 64 6F 31 02  80 55 47 80 F8 FF FF 7F  ...fdo1..UG.....
0330: F8 FF FF 7F 66 64 6F 31  1C 46 80 45 47 80 F8 FF  ....fdo1.F.EG...
0340: FF 7F F8 FF FF 7F 66 64  69 31 02 80 55 47 80 F8  ......fdi1..UG..
0350: FF FF 7F F8 FF FF 7F 66  64 69 31 1C 48 80 55 49  .......fdi1.H.UI
0360: 80 F0 FF FF 7F F0 FF FF  7F 77 68 69 31 2C F8 FF  .........whi1,..
0370: FF 7F F8 FF FF 7F 6A 6F  62 31 03 01 10 00 80 2E  ......job1......
0380: 01 93 03 02 00 10 00 80  00 93 03 03 01 10 02 80  ................
0390: 01 93 03 20 00 21 00                              ... .!.         
```

#### Opcodes

```
  0: 0x02BD [0x1E] EventEntity looks at LocalPlayer and starts talking
  1: 0x02C2 [0x1C] WAIT(1* ticks)
  2: 0x02C5 [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "exp0" with entities [EventEntity, EventEntity]
  3: 0x02D2 [0x93] DISPLAY_ITEM_INFO(item_id=Work_Zone[2])
  4: 0x02D5 [0x1D] PRINT_EVENT_MESSAGE(message_id=11520*)
    → "Reforge the $0?"
  5: 0x02D8 [0x23] WAIT_FOR_DIALOG_INTERACTION
  6: 0x02D9 [0x93] DISPLAY_ITEM_INFO(item_id=0*)
  7: 0x02DC [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "exp1" with entities [EventEntity, EventEntity]
  8: 0x02E9 [0x24] CREATE_DIALOG(message_id=11521*, default_option=1*, option_flags=0*)
    → "Proceed with the reforging? [Yes./No.]"
  9: 0x02F0 [0x25] WAIT_DIALOG_SELECT()
 10: 0x02F1 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x0383
 11: 0x02F9 [0x42] SET_CLI_EVENT_CANCEL_DATA()
 12: 0x02FA [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "job0" with entities [EventEntity, EventEntity]
 13: 0x0307 [0x1C] WAIT(30* ticks)
 14: 0x030A [0x73] EventEntity casts magic 480* on EventEntity
 15: 0x0315 [0x1C] WAIT(120* ticks)
 16: 0x0318 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [EventEntity, EventEntity], work=[200*, 0*]
 17: 0x0329 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo1" with entities [EventEntity, EventEntity], work=200*
 18: 0x0338 [0x1C] WAIT(120* ticks)
 19: 0x033B [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [EventEntity, EventEntity], work=[200*, 0*]
 20: 0x034C [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdi1" with entities [EventEntity, EventEntity], work=200*
 21: 0x035B [0x1C] WAIT(60* ticks)
 22: 0x035E [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "whi1" with entities [LocalPlayer, LocalPlayer], work=201*
 23: 0x036D [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "job1" with entities [EventEntity, EventEntity]
 24: 0x037A [0x03] Work_Zone[1] = 1*
 25: 0x037F [0x2E] SET_CLI_EVENT_CANCEL_FLAGS()
 26: 0x0380 [0x01] GOTO 0x0393
 27: 0x0383 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x0393
 28: 0x038B [0x03] Work_Zone[1] = 0*
 29: 0x0390 [0x01] GOTO 0x0393

SUBROUTINE_0393:
 30: 0x0393 [0x20] SET_CLI_EVENT_UC_FLAG: Unlock player control
 31: 0x0395 [0x21] END_EVENT
 32: 0x0396 [0x00] END_REQSTACK()
```

### Event 1060

#### Metadata

| Field        | Value   |
|--------------|---------|
| Entrypoint   | 0x0397  |
| Data Size    | 1 bytes |
| Instructions | 1       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0390:                      00                                  .        
```

#### Opcodes

```
  0: 0x0397 [0x00] END_REQSTACK()
```
