# Event 1059

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 4/5       |
| Offset          | 0x02BD    |
| Data Size       | 218 bytes |
| Calculated Size | 218 bytes |
| Instructions    | 33        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
02B0:                                         1E F0 FF               ...
02C0: FF 7F 1C 00 80 2C F8 FF  FF 7F F8 FF FF 7F 65 78  .....,........ex
02D0: 70 30 93 02 10 1D 42 80  23 93 02 80 2C F8 FF FF  p0....B.#...,...
02E0: 7F F8 FF FF 7F 65 78 70  31 24 43 80 00 80 02 80  .....exp1$C.....
02F0: 25 02 00 10 02 80 00 83  03 42 2C F8 FF FF 7F F8  %........B,.....
0300: FF FF 7F 6A 6F 62 30 1C  44 80 73 45 80 F8 FF FF  ...job0.D.sE....
0310: 7F F8 FF FF 7F 1C 46 80  45 47 80 F8 FF FF 7F F8  ......F.EG......
0320: FF FF 7F 66 64 6F 31 02  80 55 47 80 F8 FF FF 7F  ...fdo1..UG.....
0330: F8 FF FF 7F 66 64 6F 31  1C 46 80 45 47 80 F8 FF  ....fdo1.F.EG...
0340: FF 7F F8 FF FF 7F 66 64  69 31 02 80 55 47 80 F8  ......fdi1..UG..
0350: FF FF 7F F8 FF FF 7F 66  64 69 31 1C 48 80 55 49  .......fdi1.H.UI
0360: 80 F0 FF FF 7F F0 FF FF  7F 77 68 69 31 2C F8 FF  .........whi1,..
0370: FF 7F F8 FF FF 7F 6A 6F  62 31 03 01 10 00 80 2E  ......job1......
0380: 01 93 03 02 00 10 00 80  00 93 03 03 01 10 02 80  ................
0390: 01 93 03 20 00 21 00                              ... .!.         
```

## Opcodes

```
  0: 0x02BD [0x1E] EventEntity looks at LocalPlayer and starts talking
  1: 0x02C2 [0x1C] WAIT(1* ticks)
  2: 0x02C5 [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "exp0" with entities [EventEntity, EventEntity]
  3: 0x02D2 [0x93] DISPLAY_ITEM_INFO(item_id=Work_Zone[2])
  4: 0x02D5 [0x1D] PRINT_EVENT_MESSAGE(message_id=11520*)
    → "Reforge the \u0001\u0005#\u0002\u0000\u0000\u0000?\u007F1\u0000\u0007"
  5: 0x02D8 [0x23] WAIT_FOR_DIALOG_INTERACTION
  6: 0x02D9 [0x93] DISPLAY_ITEM_INFO(item_id=0*)
  7: 0x02DC [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "exp1" with entities [EventEntity, EventEntity]
  8: 0x02E9 [0x24] CREATE_DIALOG(message_id=11521*, default_option=1*, option_flags=0*)
    → "Proceed with the reforging?\u0007\u000BYes.\u0007No.\u007F1\u0000\u0007"
  9: 0x02F0 [0x25] WAIT_DIALOG_SELECT()
 10: 0x02F1 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x0383
 11: 0x02F9 [0x42] SET_CLI_EVENT_CANCEL_DATA()
 12: 0x02FA [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "job0" with entities [EventEntity, EventEntity]
 13: 0x0307 [0x1C] WAIT(30* ticks)
 14: 0x030A [0x73] EventEntity casts magic 480* on EventEntity
 15: 0x0315 [0x1C] WAIT(120* ticks)
 16: 0x0318 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [EventEntity, EventEntity], work=[200*, 0*]
 17: 0x0329 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo1" with entities [EventEntity, EventEntity], work=200*
 18: 0x0338 [0x1C] WAIT(120* ticks)
 19: 0x033B [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [EventEntity, EventEntity], work=[200*, 0*]
 20: 0x034C [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdi1" with entities [EventEntity, EventEntity], work=200*
 21: 0x035B [0x1C] WAIT(60* ticks)
 22: 0x035E [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "whi1" with entities [LocalPlayer, LocalPlayer], work=201*
 23: 0x036D [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "job1" with entities [EventEntity, EventEntity]
 24: 0x037A [0x03] Work_Zone[1] = 1*
 25: 0x037F [0x2E] SET_CLI_EVENT_CANCEL_FLAGS()
 26: 0x0380 [0x01] GOTO 0x0393
 27: 0x0383 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x0393
 28: 0x038B [0x03] Work_Zone[1] = 0*
 29: 0x0390 [0x01] GOTO 0x0393

SUBROUTINE_0393:
 30: 0x0393 [0x20] SET_CLI_EVENT_UC_FLAG: Unlock player control
 31: 0x0395 [0x21] END_EVENT
 32: 0x0396 [0x00] END_REQSTACK()
```
