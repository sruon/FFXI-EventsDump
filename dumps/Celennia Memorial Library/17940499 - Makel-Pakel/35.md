# Event 35

## Metadata

| Field           | Value      |
|-----------------|------------|
| Event Index     | 4/6        |
| Offset          | 0x00A7     |
| Data Size       | 1052 bytes |
| Calculated Size | 1052 bytes |
| Instructions    | 65         |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
00A0:                      42  1E F0 FF FF 7F 6F 70 03         B.....op.
00B0: 05 00 03 10 03 06 00 04  10 03 07 00 05 10 06 00  ................
00C0: 00 06 04 00 06 08 00 06  02 00 66 00 80 F8 FF FF  ..........f.....
00D0: 7F F8 FF FF 7F 74 6C 6B  30 1D 0E 80 23 1D 0F 80  .....tlk0...#...
00E0: 23 02 02 00 04 80 00 C2  01 02 00 00 10 80 05 34  #..............4
00F0: 01 9D 00 63 04 01 00 00  00 9D 05 93 04 01 00 00  ...c............
0100: 00 0B 00 00 02 05 00 01  00 00 13 01 3C 03 00 00  ............<...
0110: 00 03 80 02 06 00 01 00  00 22 01 3C 03 00 00 00  .........".<....
0120: 03 80 02 07 00 01 00 00  31 01 3C 03 00 00 00 03  ........1.<.....
0130: 80 01 E9 00 24 11 80 08  00 03 00 25 02 00 10 04  ....$......%....
0140: 80 00 47 01 01 47 01 03  04 00 00 10 03 08 00 00  ..G..G..........
0150: 10 02 04 00 03 80 04 B5  01 0C 04 00 9D 00 63 04  ..............c.
0160: 01 00 04 00 93 01 00 03  02 10 04 80 1D 12 80 23  ...............#
0170: 93 04 80 24 02 80 03 80  04 80 25 02 00 10 04 80  ...$......%.....
0180: 00 A7 01 66 05 80 F8 FF  FF 7F F8 FF FF 7F 70 61  ...f..........pa
0190: 73 30 1D 13 80 23 1D 14  80 23 0B 04 00 03 01 10  s0...#...#......
01A0: 04 00 21 00 01 B2 01 02  00 10 03 80 00 B2 01 01  ..!.............
01B0: B2 01 01 BF 01 03 02 00  03 80 03 01 10 07 80 01  ................
01C0: E1 00 66 00 80 F8 FF FF  7F F8 FF FF 7F 74 6C 6B  ..f..........tlk
01D0: 31 21 00 15 80 16 80 17  80 18 80 19 80 1A 80 1B  1!..............
01E0: 80 1C 80 1D 80 1E 80 1F  80 20 80 21 80 04 80 04  ......... .!....
01F0: 80 04 80 04 80 04 80 04  80 04 80 04 80 04 80 04  ................
0200: 80 04 80 22 80 23 80 24  80 25 80 26 80 27 80 28  ...".#.$.%.&.'.(
0210: 80 29 80 2A 80 2B 80 2C  80 2D 80 04 80 04 80 04  .).*.+.,.-......
0220: 80 04 80 04 80 04 80 04  80 04 80 04 80 04 80 04  ................
0230: 80 04 80 2E 80 2F 80 30  80 31 80 32 80 33 80 34  ...../.0.1.2.3.4
0240: 80 35 80 36 80 37 80 38  80 39 80 3A 80 3B 80 3C  .5.6.7.8.9.:.;.<
0250: 80 3D 80 3E 80 3F 80 04  80 04 80 04 80 04 80 04  .=.>.?..........
0260: 80 04 80 40 80 41 80 42  80 43 80 44 80 45 80 46  ...@.A.B.C.D.E.F
0270: 80 47 80 48 80 49 80 4A  80 4B 80 4C 80 4D 80 4E  .G.H.I.J.K.L.M.N
0280: 80 4F 80 50 80 51 80 52  80 53 80 54 80 55 80 56  .O.P.Q.R.S.T.U.V
0290: 80 57 80 58 80 59 80 5A  80 04 80 04 80 04 80 04  .W.X.Y.Z........
02A0: 80 04 80 5B 80 5C 80 5D  80 5E 80 5F 80 60 80 05  ...[.\.].^._.`..
02B0: 80 61 80 62 80 63 80 64  80 65 80 66 80 67 80 68  .a.b.c.d.e.f.g.h
02C0: 80 69 80 6A 80 6B 80 04  80 04 80 04 80 04 80 04  .i.j.k..........
02D0: 80 04 80 6C 80 6D 80 6E  80 6F 80 70 80 71 80 00  ...l.m.n.o.p.q..
02E0: 80 04 80 04 80 04 80 04  80 04 80 04 80 04 80 04  ................
02F0: 80 04 80 72 80 73 80 74  80 75 80 76 80 77 80 78  ...r.s.t.u.v.w.x
0300: 80 04 80 04 80 04 80 04  80 04 80 04 80 04 80 04  ................
0310: 80 04 80 04 80 03 80 79  80 7A 80 7B 80 7C 80 7D  .......y.z.{.|.}
0320: 80 7E 80 7F 80 04 80 04  80 04 80 04 80 04 80 04  .~..............
0330: 80 04 80 04 80 04 80 04  80 04 80 04 80 04 80 04  ................
0340: 80 04 80 80 80 81 80 82  80 83 80 84 80 85 80 86  ................
0350: 80 87 80 04 80 04 80 04  80 04 80 04 80 04 80 04  ................
0360: 80 04 80 04 80 03 80 88  80 79 80 89 80 7B 80 7C  .........y...{.|
0370: 80 7F 80 8A 80 8B 80 8C  80 8D 80 8E 80 8F 80 90  ................
0380: 80 91 80 92 80 93 80 94  80 95 80 96 80 97 80 98  ................
0390: 80 99 80 04 80 04 80 04  80 04 80 04 80 04 80 04  ................
03A0: 80 04 80 04 80 03 80 88  80 89 80 7A 80 7B 80 7C  ...........z.{.|
03B0: 80 9A 80 9B 80 10 80 5B  80 5C 80 5D 80 95 80 96  .......[.\.]....
03C0: 80 97 80 05 80 61 80 9C  80 9D 80 62 80 68 80 93  .....a.....b.h..
03D0: 80 00 80 40 80 8D 80 91  80 8F 80 9E 80 9F 80 A0  ...@............
03E0: 80 A1 80 43 80 45 80 46  80 47 80 A2 80 A3 80 4C  ...C.E.F.G.....L
03F0: 80 A4 80 A5 80 4F 80 50  80 52 80 04 80 04 80 04  .....O.P.R......
0400: 80 04 80 A6 80 A7 80 7D  80 7F 80 A8 80 A9 80 48  .......}.......H
0410: 80 49 80 5E 80 5F 80 41  80 AA 80 8E 80 92 80 AB  .I.^._.A........
0420: 80 AC 80 63 80 AD 80 4D  80 51 80 53 80 AE 80 AF  ...c...M.Q.S....
0430: 80 04 80 79 80 B0 80 7E  80 B1 80 42 80 44 80 4A  ...y...~...B.D.J
0440: 80 4B 80 B2 80 94 80 8C  80 90 80 98 80 B3 80 B4  .K..............
0450: 80 60 80 64 80 65 80 4E  80 B5 80 B6 80 B7 80 04  .`.d.e.N........
0460: 80 04 80 B8 80 B9 80 BA  80 BB 80 BC 80 BD 80 BE  ................
0470: 80 BF 80 C0 80 C1 80 C2  80 C3 80 C4 80 C5 80 C6  ................
0480: 80 C7 80 C8 80 C9 80 CA  80 CB 80 CC 80 CD 80 04  ................
0490: 80 04 80 03 10 04 10 05  10 06 10 07 10 08 10 09  ................
04A0: 10 00 17 01 17 02 17 03  17 04 17 05 17 06 17 07  ................
04B0: 17 08 17 09 17 0A 17 0B  17 0C 17 0D 17 0E 17 04  ................
04C0: 80 04 80                                          ...             
```

## Opcodes

```
  0: 0x00A7 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x00A8 [0x1E] EventEntity looks at LocalPlayer and starts talking
  2: 0x00AD [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  3: 0x00AE [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
  4: 0x00AF [0x03] ExtData[1]->WorkLocal[5] = Work_Zone[3]
  5: 0x00B4 [0x03] ExtData[1]->WorkLocal[6] = Work_Zone[4]
  6: 0x00B9 [0x03] ExtData[1]->WorkLocal[7] = Work_Zone[5]
  7: 0x00BE [0x06] ExtData[1]->WorkLocal[0] = 0
  8: 0x00C1 [0x06] ExtData[1]->WorkLocal[4] = 0
  9: 0x00C4 [0x06] ExtData[1]->WorkLocal[8] = 0
 10: 0x00C7 [0x06] ExtData[1]->WorkLocal[2] = 0
 11: 0x00CA [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=49*, entity1=EventEntity, entity2=EventEntity, action="tlk0")
 12: 0x00D9 [0x1D] PRINT_EVENT_MESSAGE(message_id=7681*)
    → "Yeeeah, that's the stuff-wuff.\u007F1\u0000\u0007"
 13: 0x00DC [0x23] WAIT_FOR_DIALOG_INTERACTION
 14: 0x00DD [0x1D] PRINT_EVENT_MESSAGE(message_id=7682*)
    → "Now to fulfill my end of the deal. Quench your thirstaru for power with one of these beauties!\u007F1\u0000\u0007"
 15: 0x00E0 [0x23] WAIT_FOR_DIALOG_INTERACTION
 16: 0x00E1 [0x02] IF !(ExtData[1]->WorkLocal[2] == 0*) GOTO 0x01C2
 17: 0x00E9 [0x02] IF !(ExtData[1]->WorkLocal[0] > 22*) GOTO 0x0134
 18: 0x00F1 [0x9D] ExtData[1]->WorkLocal[1] = 0x0463[ExtData[1]->WorkLocal[0]] // Read WORD
 19: 0x00F9 [0x9D] 0x0493[ExtData[1]->WorkLocal[0] * 2] = ExtData[1]->WorkLocal[1] // Write WORD
 20: 0x0101 [0x0B] ExtData[1]->WorkLocal[0]++
 21: 0x0104 [0x02] IF !(ExtData[1]->WorkLocal[5] == ExtData[1]->WorkLocal[1]) GOTO 0x0113
 22: 0x010C [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=0x03, bit_index_work_offset=0x00, condition_work_offset=0x8003)
 23: 0x0113 [0x02] IF !(ExtData[1]->WorkLocal[6] == ExtData[1]->WorkLocal[1]) GOTO 0x0122
 24: 0x011B [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=0x03, bit_index_work_offset=0x00, condition_work_offset=0x8003)
 25: 0x0122 [0x02] IF !(ExtData[1]->WorkLocal[7] == ExtData[1]->WorkLocal[1]) GOTO 0x0131
 26: 0x012A [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=0x03, bit_index_work_offset=0x00, condition_work_offset=0x8003)
 27: 0x0131 [0x01] GOTO 0x00E9

SUBROUTINE_0134:
 28: 0x0134 [0x24] CREATE_DIALOG(message_id=7683*, default_option=0x0008, option_flags=0x03)
    → "Receive which one?\u0007\u000BNone.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0001\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0002\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0003\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0004\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0005\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0006\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0007\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0008\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002	\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002
\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u000B\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u000C\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u000E\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u000F\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0010\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0011\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0012\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0013\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0014\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0015\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0016\u0000\u0000.\u007F1\u0000\u0007"
 29: 0x013B [0x25] WAIT_DIALOG_SELECT()
 30: 0x013C [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x0147
 31: 0x0144 [0x01] GOTO 0x0147

SUBROUTINE_0147:
 32: 0x0147 [0x03] ExtData[1]->WorkLocal[4] = Work_Zone[0]
 33: 0x014C [0x03] ExtData[1]->WorkLocal[8] = Work_Zone[0]
 34: 0x0151 [0x02] IF !(ExtData[1]->WorkLocal[4] < 1*) GOTO 0x01B5
 35: 0x0159 [0x0C] ExtData[1]->WorkLocal[4]--
 36: 0x015C [0x9D] ExtData[1]->WorkLocal[1] = 0x0463[ExtData[1]->WorkLocal[4]] // Read WORD
 37: 0x0164 [0x93] DISPLAY_ITEM_INFO(item_id=ExtData[1]->WorkLocal[1])
 38: 0x0167 [0x03] Work_Zone[2] = 0*
 39: 0x016C [0x1D] PRINT_EVENT_MESSAGE(message_id=7684*)
    → "You're positive-wositive this is the one you want?\u007F1\u0000\u0007"
 40: 0x016F [0x23] WAIT_FOR_DIALOG_INTERACTION
 41: 0x0170 [0x93] DISPLAY_ITEM_INFO(item_id=0*)
 42: 0x0173 [0x24] CREATE_DIALOG(message_id=7685*, default_option=1*, option_flags=0*)
    → "Are you positive?\u0007\u000BYes.\u0007No.\u007F1\u0000\u0007"
 43: 0x017A [0x25] WAIT_DIALOG_SELECT()
 44: 0x017B [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x01A7
 45: 0x0183 [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=40*, entity1=EventEntity, entity2=EventEntity, action="pas0")
 46: 0x0192 [0x1D] PRINT_EVENT_MESSAGE(message_id=7686*)
    → "Mmm...that high thread countaru, that velvety softness... I'd rub this all over my body if you weren't here.\u007F1\u0000\u0007"
 47: 0x0195 [0x23] WAIT_FOR_DIALOG_INTERACTION
 48: 0x0196 [0x1D] PRINT_EVENT_MESSAGE(message_id=7687*)
    → "It's been great doing business-wusiness with you. Come again!\u007F1\u0000\u0007"
 49: 0x0199 [0x23] WAIT_FOR_DIALOG_INTERACTION
 50: 0x019A [0x0B] ExtData[1]->WorkLocal[4]++
 51: 0x019D [0x03] Work_Zone[1] = ExtData[1]->WorkLocal[4]
 52: 0x01A2 [0x21] END_EVENT
 53: 0x01A3 [0x00] END_REQSTACK()

SUBROUTINE_01A7:
 54: 0x01A7 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x01B2
 55: 0x01AF [0x01] GOTO 0x01B2

SUBROUTINE_01B2:
 56: 0x01B2 [0x01] GOTO 0x01BF

SUBROUTINE_01B5:
 57: 0x01B5 [0x03] ExtData[1]->WorkLocal[2] = 1*
 58: 0x01BA [0x03] Work_Zone[1] = 4294967286*
 59: 0x01BF [0x01] GOTO 0x00E1

SUBROUTINE_01C2:
 60: 0x01C2 [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=49*, entity1=EventEntity, entity2=EventEntity, action="tlk1")
 61: 0x01D1 [0x21] END_EVENT
 62: 0x01D2 [0x00] END_REQSTACK()
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x01A4 [0x01] GOTO 0x01B2
# Data Section: 0x01D3 (752 bytes)
     0x01D3: 15 80 16 80 17 80 18 80 19 80 1A 80 1B 80 1C 80
     0x01E3: 1D 80 1E 80 1F 80 20 80 21 80 04 80 04 80 04 80
     0x01F3: 04 80 04 80 04 80 04 80 04 80 04 80 04 80 04 80
     0x0203: 22 80 23 80 24 80 25 80 26 80 27 80 28 80 29 80
     0x0213: 2A 80 2B 80 2C 80 2D 80 04 80 04 80 04 80 04 80
     0x0223: 04 80 04 80 04 80 04 80 04 80 04 80 04 80 04 80
     0x0233: 2E 80 2F 80 30 80 31 80 32 80 33 80 34 80 35 80
     0x0243: 36 80 37 80 38 80 39 80 3A 80 3B 80 3C 80 3D 80
     0x0253: 3E 80 3F 80 04 80 04 80 04 80 04 80 04 80 04 80
     0x0263: 40 80 41 80 42 80 43 80 44 80 45 80 46 80 47 80
     0x0273: 48 80 49 80 4A 80 4B 80 4C 80 4D 80 4E 80 4F 80
     0x0283: 50 80 51 80 52 80 53 80 54 80 55 80 56 80 57 80
     0x0293: 58 80 59 80 5A 80 04 80 04 80 04 80 04 80 04 80
     0x02A3: 5B 80 5C 80 5D 80 5E 80 5F 80 60 80 05 80 61 80
     0x02B3: 62 80 63 80 64 80 65 80 66 80 67 80 68 80 69 80
     0x02C3: 6A 80 6B 80 04 80 04 80 04 80 04 80 04 80 04 80
     0x02D3: 6C 80 6D 80 6E 80 6F 80 70 80 71 80 00 80 04 80
     0x02E3: 04 80 04 80 04 80 04 80 04 80 04 80 04 80 04 80
     0x02F3: 72 80 73 80 74 80 75 80 76 80 77 80 78 80 04 80
     0x0303: 04 80 04 80 04 80 04 80 04 80 04 80 04 80 04 80
     0x0313: 04 80 03 80 79 80 7A 80 7B 80 7C 80 7D 80 7E 80
     0x0323: 7F 80 04 80 04 80 04 80 04 80 04 80 04 80 04 80
     0x0333: 04 80 04 80 04 80 04 80 04 80 04 80 04 80 04 80
     0x0343: 80 80 81 80 82 80 83 80 84 80 85 80 86 80 87 80
     0x0353: 04 80 04 80 04 80 04 80 04 80 04 80 04 80 04 80
     0x0363: 04 80 03 80 88 80 79 80 89 80 7B 80 7C 80 7F 80
     0x0373: 8A 80 8B 80 8C 80 8D 80 8E 80 8F 80 90 80 91 80
     0x0383: 92 80 93 80 94 80 95 80 96 80 97 80 98 80 99 80
     0x0393: 04 80 04 80 04 80 04 80 04 80 04 80 04 80 04 80
     0x03A3: 04 80 03 80 88 80 89 80 7A 80 7B 80 7C 80 9A 80
     0x03B3: 9B 80 10 80 5B 80 5C 80 5D 80 95 80 96 80 97 80
     0x03C3: 05 80 61 80 9C 80 9D 80 62 80 68 80 93 80 00 80
     0x03D3: 40 80 8D 80 91 80 8F 80 9E 80 9F 80 A0 80 A1 80
     0x03E3: 43 80 45 80 46 80 47 80 A2 80 A3 80 4C 80 A4 80
     0x03F3: A5 80 4F 80 50 80 52 80 04 80 04 80 04 80 04 80
     0x0403: A6 80 A7 80 7D 80 7F 80 A8 80 A9 80 48 80 49 80
     0x0413: 5E 80 5F 80 41 80 AA 80 8E 80 92 80 AB 80 AC 80
     0x0423: 63 80 AD 80 4D 80 51 80 53 80 AE 80 AF 80 04 80
     0x0433: 79 80 B0 80 7E 80 B1 80 42 80 44 80 4A 80 4B 80
     0x0443: B2 80 94 80 8C 80 90 80 98 80 B3 80 B4 80 60 80
     0x0453: 64 80 65 80 4E 80 B5 80 B6 80 B7 80 04 80 04 80
     0x0463: B8 80 B9 80 BA 80 BB 80 BC 80 BD 80 BE 80 BF 80
     0x0473: C0 80 C1 80 C2 80 C3 80 C4 80 C5 80 C6 80 C7 80
     0x0483: C8 80 C9 80 CA 80 CB 80 CC 80 CD 80 04 80 04 80
     0x0493: 03 10 04 10 05 10 06 10 07 10 08 10 09 10 00 17
     0x04A3: 01 17 02 17 03 17 04 17 05 17 06 17 07 17 08 17
     0x04B3: 09 17 0A 17 0B 17 0C 17 0D 17 0E 17 04 80 04 80
```