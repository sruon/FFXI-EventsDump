# Event 28

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 11/16     |
| Offset          | 0x0576    |
| Data Size       | 397 bytes |
| Calculated Size | 397 bytes |
| Instructions    | 83        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0570:                   42 1E  F0 FF FF 7F 6F 70 66 00        B.....opf.
0580: 80 F8 FF FF 7F F8 FF FF  7F 74 6C 62 30 1D 27 80  .........tlb0.'.
0590: 23 66 00 80 F8 FF FF 7F  F8 FF FF 7F 74 6C 62 31  #f..........tlb1
05A0: 06 01 00 06 03 00 06 05  00 02 05 00 0C 80 00 01  ................
05B0: 07 02 03 00 31 80 05 CF  05 9D 00 95 07 02 00 03  ....1...........
05C0: 00 9D 05 05 07 02 00 03  00 0B 03 00 01 B1 05 03  ................
05D0: 0B 17 32 80 03 0C 17 28  80 24 33 80 0C 80 06 00  ..2....(.$3.....
05E0: 25 02 00 10 0C 80 00 EC  05 01 EC 05 03 04 00 00  %...............
05F0: 10 02 04 00 34 80 05 49  06 9D 00 95 07 02 00 04  ....4..I........
0600: 00 93 02 00 03 02 10 0C  80 1D 2B 80 23 93 0C 80  ..........+.#...
0610: 24 2C 80 10 80 0C 80 25  02 00 10 0C 80 00 3E 06  $,.....%......>.
0620: 0B 04 00 03 01 10 04 00  45 1B 80 F8 FF FF 7F F8  ........E.......
0630: FF FF 7F 71 73 74 63 0C  80 21 00 01 49 06 02 00  ...qstc..!..I...
0640: 10 10 80 00 49 06 01 49  06 02 04 00 31 80 00 98  ....I..I....1...
0650: 06 03 04 00 00 10 03 02  10 10 80 1D 2B 80 23 24  ............+.#$
0660: 2C 80 10 80 0C 80 25 02  00 10 0C 80 00 8D 06 0B  ,.....%.........
0670: 04 00 03 01 10 04 00 45  1B 80 F8 FF FF 7F F8 FF  .......E........
0680: FF 7F 71 73 74 63 0C 80  21 00 01 98 06 02 00 10  ..qstc..!.......
0690: 10 80 00 98 06 01 98 06  02 04 00 35 80 00 E7 06  ...........5....
06A0: 03 04 00 00 10 03 02 10  1E 80 1D 2B 80 23 24 2C  ...........+.#$,
06B0: 80 10 80 0C 80 25 02 00  10 0C 80 00 DC 06 0B 04  .....%..........
06C0: 00 03 01 10 04 00 45 1B  80 F8 FF FF 7F F8 FF FF  ......E.........
06D0: 7F 71 73 74 63 0C 80 21  00 01 E7 06 02 00 10 10  .qstc..!........
06E0: 80 00 E7 06 01 E7 06 02  04 00 05 80 00 FE 06 1D  ................
06F0: 2F 80 23 05 05 00 0B 04  00 03 01 10 04 00 01 A9  /.#.............
0700: 05 21 00                                          .!.             
```

## Opcodes

```
  0: 0x0576 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x0577 [0x1E] EventEntity looks at LocalPlayer and starts talking
  2: 0x057C [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  3: 0x057D [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
  4: 0x057E [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlb0" with entities [EventEntity, EventEntity], work=68*
  5: 0x058D [0x1D] PRINT_EVENT_MESSAGE(message_id=7671*)
    → "There you are.\u0007I hate to admit it, but your efforts investigating the Naakuals deserve prrraise of some sort.\u007F1\u0000\u0007"
  6: 0x0590 [0x23] WAIT_FOR_DIALOG_INTERACTION
  7: 0x0591 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlb1" with entities [EventEntity, EventEntity], work=68*
  8: 0x05A0 [0x06] ExtData[1]->WorkLocal[1] = 0
  9: 0x05A3 [0x06] ExtData[1]->WorkLocal[3] = 0
 10: 0x05A6 [0x06] ExtData[1]->WorkLocal[5] = 0
 11: 0x05A9 [0x02] IF !(ExtData[1]->WorkLocal[5] == 0*) GOTO 0x0701
 12: 0x05B1 [0x02] IF !(ExtData[1]->WorkLocal[3] > 18*) GOTO 0x05CF
 13: 0x05B9 [0x9D] ExtData[1]->WorkLocal[2] = 0x0795[ExtData[1]->WorkLocal[3]] // Read WORD
 14: 0x05C1 [0x9D] 0x0705[ExtData[1]->WorkLocal[3] * 2] = ExtData[1]->WorkLocal[2] // Write WORD
 15: 0x05C9 [0x0B] ExtData[1]->WorkLocal[3]++
 16: 0x05CC [0x01] GOTO 0x05B1

SUBROUTINE_05CF:
 17: 0x05CF [0x03] Work_Zone_1700[11] = 50000*
 18: 0x05D4 [0x03] Work_Zone_1700[12] = 30000*
 19: 0x05D9 [0x24] CREATE_DIALOG(message_id=7673*, default_option=0*, option_flags=0x06)
    → "What will your reward be?\u0007\u000B\u007F\u0000\u0001\u0001\u0005#\u0002\u0001\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0002\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0003\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0004\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0005\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0006\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0007\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0008\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002	\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002
\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u000B\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u000C\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u000E\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u000F\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0010\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0011\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0012\u0000\u0000.\u0007
\u0013 bayld.\u0007
\u0014 kinetic unit\u007F\u0012\u0014[/s].\u0007Nothing for the nonce.\u007F1\u0000\u0007"
 20: 0x05E0 [0x25] WAIT_DIALOG_SELECT()
 21: 0x05E1 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x05EC
 22: 0x05E9 [0x01] GOTO 0x05EC

SUBROUTINE_05EC:
 23: 0x05EC [0x03] ExtData[1]->WorkLocal[4] = Work_Zone[0]
 24: 0x05F1 [0x02] IF !(ExtData[1]->WorkLocal[4] > 17*) GOTO 0x0649
 25: 0x05F9 [0x9D] ExtData[1]->WorkLocal[2] = 0x0795[ExtData[1]->WorkLocal[4]] // Read WORD
 26: 0x0601 [0x93] DISPLAY_ITEM_INFO(item_id=ExtData[1]->WorkLocal[2])
 27: 0x0604 [0x03] Work_Zone[2] = 0*
 28: 0x0609 [0x1D] PRINT_EVENT_MESSAGE(message_id=7674*)
    → "Hmph.\u0007You really want \u000C\u0000[that/bayld/kinetic units]? Now's your last chance to rrreconsider.\u007F1\u0000\u0007"
 29: 0x060C [0x23] WAIT_FOR_DIALOG_INTERACTION
 30: 0x060D [0x93] DISPLAY_ITEM_INFO(item_id=0*)
 31: 0x0610 [0x24] CREATE_DIALOG(message_id=7675*, default_option=1*, option_flags=0*)
    → "Keep what you chose?\u0007\u000BYes.\u0007No.\u007F1\u0000\u0007"
 32: 0x0617 [0x25] WAIT_DIALOG_SELECT()
 33: 0x0618 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x063E
 34: 0x0620 [0x0B] ExtData[1]->WorkLocal[4]++
 35: 0x0623 [0x03] Work_Zone[1] = ExtData[1]->WorkLocal[4]
 36: 0x0628 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "qstc" with entities [EventEntity, EventEntity], work=[201*, 0*]
 37: 0x0639 [0x21] END_EVENT
 38: 0x063A [0x00] END_REQSTACK()

SUBROUTINE_063E:
 39: 0x063E [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x0649
 40: 0x0646 [0x01] GOTO 0x0649

SUBROUTINE_0649:
 41: 0x0649 [0x02] IF !(ExtData[1]->WorkLocal[4] == 18*) GOTO 0x0698
 42: 0x0651 [0x03] ExtData[1]->WorkLocal[4] = Work_Zone[0]
 43: 0x0656 [0x03] Work_Zone[2] = 1*
 44: 0x065B [0x1D] PRINT_EVENT_MESSAGE(message_id=7674*)
    → "Hmph.\u0007You really want \u000C\u0000[that/bayld/kinetic units]? Now's your last chance to rrreconsider.\u007F1\u0000\u0007"
 45: 0x065E [0x23] WAIT_FOR_DIALOG_INTERACTION
 46: 0x065F [0x24] CREATE_DIALOG(message_id=7675*, default_option=1*, option_flags=0*)
    → "Keep what you chose?\u0007\u000BYes.\u0007No.\u007F1\u0000\u0007"
 47: 0x0666 [0x25] WAIT_DIALOG_SELECT()
 48: 0x0667 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x068D
 49: 0x066F [0x0B] ExtData[1]->WorkLocal[4]++
 50: 0x0672 [0x03] Work_Zone[1] = ExtData[1]->WorkLocal[4]
 51: 0x0677 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "qstc" with entities [EventEntity, EventEntity], work=[201*, 0*]
 52: 0x0688 [0x21] END_EVENT
 53: 0x0689 [0x00] END_REQSTACK()

SUBROUTINE_068D:
 54: 0x068D [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x0698
 55: 0x0695 [0x01] GOTO 0x0698

SUBROUTINE_0698:
 56: 0x0698 [0x02] IF !(ExtData[1]->WorkLocal[4] == 19*) GOTO 0x06E7
 57: 0x06A0 [0x03] ExtData[1]->WorkLocal[4] = Work_Zone[0]
 58: 0x06A5 [0x03] Work_Zone[2] = 2*
 59: 0x06AA [0x1D] PRINT_EVENT_MESSAGE(message_id=7674*)
    → "Hmph.\u0007You really want \u000C\u0000[that/bayld/kinetic units]? Now's your last chance to rrreconsider.\u007F1\u0000\u0007"
 60: 0x06AD [0x23] WAIT_FOR_DIALOG_INTERACTION
 61: 0x06AE [0x24] CREATE_DIALOG(message_id=7675*, default_option=1*, option_flags=0*)
    → "Keep what you chose?\u0007\u000BYes.\u0007No.\u007F1\u0000\u0007"
 62: 0x06B5 [0x25] WAIT_DIALOG_SELECT()
 63: 0x06B6 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x06DC
 64: 0x06BE [0x0B] ExtData[1]->WorkLocal[4]++
 65: 0x06C1 [0x03] Work_Zone[1] = ExtData[1]->WorkLocal[4]
 66: 0x06C6 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "qstc" with entities [EventEntity, EventEntity], work=[201*, 0*]
 67: 0x06D7 [0x21] END_EVENT
 68: 0x06D8 [0x00] END_REQSTACK()

SUBROUTINE_06DC:
 69: 0x06DC [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x06E7
 70: 0x06E4 [0x01] GOTO 0x06E7

SUBROUTINE_06E7:
 71: 0x06E7 [0x02] IF !(ExtData[1]->WorkLocal[4] == 20*) GOTO 0x06FE
 72: 0x06EF [0x1D] PRINT_EVENT_MESSAGE(message_id=7676*)
    → "I knew you'd pussyfoot around in the end.\u0007Just tell me what you want when you finally get arrround to deciding.\u007F1\u0000\u0007"
 73: 0x06F2 [0x23] WAIT_FOR_DIALOG_INTERACTION
 74: 0x06F3 [0x05] ExtData[1]->WorkLocal[5] = 1
 75: 0x06F6 [0x0B] ExtData[1]->WorkLocal[4]++
 76: 0x06F9 [0x03] Work_Zone[1] = ExtData[1]->WorkLocal[4]
 77: 0x06FE [0x01] GOTO 0x05A9

SUBROUTINE_0701:
 78: 0x0701 [0x21] END_EVENT
 79: 0x0702 [0x00] END_REQSTACK()
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x063B [0x01] GOTO 0x0649
# Dead code (unreachable instructions):
     0x068A [0x01] GOTO 0x0698
# Dead code (unreachable instructions):
     0x06D9 [0x01] GOTO 0x06E7
```