# Event 16

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 10/16     |
| Offset          | 0x03E4    |
| Data Size       | 402 bytes |
| Calculated Size | 402 bytes |
| Instructions    | 75        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
03E0:             42 1E F0 FF  FF 7F 6F 70 66 00 80 F8      B.....opf...
03F0: FF FF 7F F8 FF FF 7F 74  6C 62 30 1D 27 80 23 66  .......tlb0.'.#f
0400: 00 80 F8 FF FF 7F F8 FF  FF 7F 74 6C 62 31 06 01  ..........tlb1..
0410: 00 06 03 00 06 05 00 02  05 00 0C 80 00 74 05 02  .............t..
0420: 03 00 1D 80 05 3D 04 9D  00 65 07 02 00 03 00 9D  .....=...e......
0430: 05 05 07 02 00 03 00 0B  03 00 01 1F 04 03 06 17  ................
0440: 28 80 03 07 17 29 80 03  06 00 30 80 24 2A 80 0C  (....)....0.$*..
0450: 80 06 00 25 02 00 10 0C  80 00 5F 04 01 5F 04 03  ...%......_.._..
0460: 04 00 00 10 02 04 00 1D  80 05 BC 04 9D 00 65 07  ..............e.
0470: 02 00 04 00 93 02 00 03  02 10 0C 80 1D 2B 80 23  .............+.#
0480: 93 0C 80 24 2C 80 10 80  0C 80 25 02 00 10 0C 80  ...$,.....%.....
0490: 00 B1 04 0B 04 00 03 01  10 04 00 45 1B 80 F8 FF  ...........E....
04A0: FF 7F F8 FF FF 7F 71 73  74 63 0C 80 21 00 01 BC  ......qstc..!...
04B0: 04 02 00 10 10 80 00 BC  04 01 BC 04 02 04 00 1F  ................
04C0: 80 00 0B 05 03 04 00 00  10 03 02 10 10 80 1D 2B  ...............+
04D0: 80 23 24 2C 80 10 80 0C  80 25 02 00 10 0C 80 00  .#$,.....%......
04E0: 00 05 0B 04 00 03 01 10  04 00 45 1B 80 F8 FF FF  ..........E.....
04F0: 7F F8 FF FF 7F 71 73 74  63 0C 80 21 00 01 0B 05  .....qstc..!....
0500: 02 00 10 10 80 00 0B 05  01 0B 05 02 04 00 2D 80  ..............-.
0510: 00 5A 05 03 04 00 00 10  03 02 10 1E 80 1D 2B 80  .Z............+.
0520: 23 24 2C 80 10 80 0C 80  25 02 00 10 0C 80 00 4F  #$,.....%......O
0530: 05 0B 04 00 03 01 10 04  00 45 1B 80 F8 FF FF 7F  .........E......
0540: F8 FF FF 7F 71 73 74 63  0C 80 21 00 01 5A 05 02  ....qstc..!..Z..
0550: 00 10 10 80 00 5A 05 01  5A 05 02 04 00 2E 80 00  .....Z..Z.......
0560: 71 05 1D 2F 80 23 05 05  00 0B 04 00 03 01 10 04  q../.#..........
0570: 00 01 17 04 21 00                                 ....!.          
```

## Opcodes

```
  0: 0x03E4 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x03E5 [0x1E] EventEntity looks at LocalPlayer and starts talking
  2: 0x03EA [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  3: 0x03EB [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
  4: 0x03EC [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlb0" with entities [EventEntity, EventEntity], work=68*
  5: 0x03FB [0x1D] PRINT_EVENT_MESSAGE(message_id=7671*)
    → "There you are.\u0007I hate to admit it, but your efforts investigating the Naakuals deserve prrraise of some sort.\u007F1\u0000\u0007"
  6: 0x03FE [0x23] WAIT_FOR_DIALOG_INTERACTION
  7: 0x03FF [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlb1" with entities [EventEntity, EventEntity], work=68*
  8: 0x040E [0x06] ExtData[1]->WorkLocal[1] = 0
  9: 0x0411 [0x06] ExtData[1]->WorkLocal[3] = 0
 10: 0x0414 [0x06] ExtData[1]->WorkLocal[5] = 0
 11: 0x0417 [0x02] IF !(ExtData[1]->WorkLocal[5] == 0*) GOTO 0x0574
 12: 0x041F [0x02] IF !(ExtData[1]->WorkLocal[3] > 12*) GOTO 0x043D
 13: 0x0427 [0x9D] ExtData[1]->WorkLocal[2] = 0x0765[ExtData[1]->WorkLocal[3]] // Read WORD
 14: 0x042F [0x9D] 0x0705[ExtData[1]->WorkLocal[3] * 2] = ExtData[1]->WorkLocal[2] // Write WORD
 15: 0x0437 [0x0B] ExtData[1]->WorkLocal[3]++
 16: 0x043A [0x01] GOTO 0x041F
 17: 0x043D [0x03] Work_Zone_1700[6] = 30000*
 18: 0x0442 [0x03] Work_Zone_1700[7] = 20000*
 19: 0x0447 [0x03] ExtData[1]->WorkLocal[6] = 3567587328*
 20: 0x044C [0x24] CREATE_DIALOG(message_id=7672*, default_option=0*, option_flags=ExtData[1]->WorkLocal[6])
    → "What will your reward be?\u0007\u000B\u007F\u0000\u0001\u0001\u0005#\u0002\u0001\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0002\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0003\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0004\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0005\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0006\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0007\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0008\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002	\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002
\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u000B\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u000C\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0000\u0000.\u0007
\u000E bayld.\u0007
\u000F kinetic unit\u007F\u0012\u000F[/s].\u0007Nothing for the nonce.\u007F1\u0000\u0007"
 21: 0x0453 [0x25] WAIT_DIALOG_SELECT()
 22: 0x0454 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x045F
 23: 0x045C [0x01] GOTO 0x045F

SUBROUTINE_045F:
 24: 0x045F [0x03] ExtData[1]->WorkLocal[4] = Work_Zone[0]
 25: 0x0464 [0x02] IF !(ExtData[1]->WorkLocal[4] > 12*) GOTO 0x04BC
 26: 0x046C [0x9D] ExtData[1]->WorkLocal[2] = 0x0765[ExtData[1]->WorkLocal[4]] // Read WORD
 27: 0x0474 [0x93] DISPLAY_ITEM_INFO(item_id=ExtData[1]->WorkLocal[2])
 28: 0x0477 [0x03] Work_Zone[2] = 0*
 29: 0x047C [0x1D] PRINT_EVENT_MESSAGE(message_id=7674*)
    → "Hmph.\u0007You really want \u000C\u0000[that/bayld/kinetic units]? Now's your last chance to rrreconsider.\u007F1\u0000\u0007"
 30: 0x047F [0x23] WAIT_FOR_DIALOG_INTERACTION
 31: 0x0480 [0x93] DISPLAY_ITEM_INFO(item_id=0*)
 32: 0x0483 [0x24] CREATE_DIALOG(message_id=7675*, default_option=1*, option_flags=0*)
    → "Keep what you chose?\u0007\u000BYes.\u0007No.\u007F1\u0000\u0007"
 33: 0x048A [0x25] WAIT_DIALOG_SELECT()
 34: 0x048B [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x04B1
 35: 0x0493 [0x0B] ExtData[1]->WorkLocal[4]++
 36: 0x0496 [0x03] Work_Zone[1] = ExtData[1]->WorkLocal[4]
 37: 0x049B [0x45] LOAD_SCHEDULED_TASK: Load scheduler "qstc" with entities [EventEntity, EventEntity], work=[201*, 0*]
 38: 0x04AC [0x21] END_EVENT
 39: 0x04AD [0x00] END_REQSTACK()

SUBROUTINE_04BC:
 40: 0x04BC [0x02] IF !(ExtData[1]->WorkLocal[4] == 13*) GOTO 0x050B
 41: 0x04C4 [0x03] ExtData[1]->WorkLocal[4] = Work_Zone[0]
 42: 0x04C9 [0x03] Work_Zone[2] = 1*
 43: 0x04CE [0x1D] PRINT_EVENT_MESSAGE(message_id=7674*)
    → "Hmph.\u0007You really want \u000C\u0000[that/bayld/kinetic units]? Now's your last chance to rrreconsider.\u007F1\u0000\u0007"
 44: 0x04D1 [0x23] WAIT_FOR_DIALOG_INTERACTION
 45: 0x04D2 [0x24] CREATE_DIALOG(message_id=7675*, default_option=1*, option_flags=0*)
    → "Keep what you chose?\u0007\u000BYes.\u0007No.\u007F1\u0000\u0007"
 46: 0x04D9 [0x25] WAIT_DIALOG_SELECT()
 47: 0x04DA [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x0500
 48: 0x04E2 [0x0B] ExtData[1]->WorkLocal[4]++
 49: 0x04E5 [0x03] Work_Zone[1] = ExtData[1]->WorkLocal[4]
 50: 0x04EA [0x45] LOAD_SCHEDULED_TASK: Load scheduler "qstc" with entities [EventEntity, EventEntity], work=[201*, 0*]
 51: 0x04FB [0x21] END_EVENT
 52: 0x04FC [0x00] END_REQSTACK()

SUBROUTINE_050B:
 53: 0x050B [0x02] IF !(ExtData[1]->WorkLocal[4] == 14*) GOTO 0x055A
 54: 0x0513 [0x03] ExtData[1]->WorkLocal[4] = Work_Zone[0]
 55: 0x0518 [0x03] Work_Zone[2] = 2*
 56: 0x051D [0x1D] PRINT_EVENT_MESSAGE(message_id=7674*)
    → "Hmph.\u0007You really want \u000C\u0000[that/bayld/kinetic units]? Now's your last chance to rrreconsider.\u007F1\u0000\u0007"
 57: 0x0520 [0x23] WAIT_FOR_DIALOG_INTERACTION
 58: 0x0521 [0x24] CREATE_DIALOG(message_id=7675*, default_option=1*, option_flags=0*)
    → "Keep what you chose?\u0007\u000BYes.\u0007No.\u007F1\u0000\u0007"
 59: 0x0528 [0x25] WAIT_DIALOG_SELECT()
 60: 0x0529 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x054F
 61: 0x0531 [0x0B] ExtData[1]->WorkLocal[4]++
 62: 0x0534 [0x03] Work_Zone[1] = ExtData[1]->WorkLocal[4]
 63: 0x0539 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "qstc" with entities [EventEntity, EventEntity], work=[201*, 0*]
 64: 0x054A [0x21] END_EVENT
 65: 0x054B [0x00] END_REQSTACK()

SUBROUTINE_055A:
 66: 0x055A [0x02] IF !(ExtData[1]->WorkLocal[4] == 15*) GOTO 0x0571
 67: 0x0562 [0x1D] PRINT_EVENT_MESSAGE(message_id=7676*)
    → "I knew you'd pussyfoot around in the end.\u0007Just tell me what you want when you finally get arrround to deciding.\u007F1\u0000\u0007"
 68: 0x0565 [0x23] WAIT_FOR_DIALOG_INTERACTION
 69: 0x0566 [0x05] ExtData[1]->WorkLocal[5] = 1
 70: 0x0569 [0x0B] ExtData[1]->WorkLocal[4]++
 71: 0x056C [0x03] Work_Zone[1] = ExtData[1]->WorkLocal[4]
 72: 0x0571 [0x01] GOTO 0x0417
 73: 0x0574 [0x21] END_EVENT
 74: 0x0575 [0x00] END_REQSTACK()
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x04AE [0x01] GOTO 0x04BC
# Dead code (unreachable instructions):
     0x04FD [0x01] GOTO 0x050B
# Dead code (unreachable instructions):
     0x054C [0x01] GOTO 0x055A
```