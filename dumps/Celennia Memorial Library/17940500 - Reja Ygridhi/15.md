# Event 15

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 9/16      |
| Offset          | 0x0257    |
| Data Size       | 397 bytes |
| Calculated Size | 397 bytes |
| Instructions    | 83        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0250:                      42  1E F0 FF FF 7F 6F 70 66         B.....opf
0260: 00 80 F8 FF FF 7F F8 FF  FF 7F 74 6C 62 30 1D 27  ..........tlb0.'
0270: 80 23 66 00 80 F8 FF FF  7F F8 FF FF 7F 74 6C 62  .#f..........tlb
0280: 31 06 01 00 06 03 00 06  05 00 02 05 00 0C 80 00  1...............
0290: E2 03 02 03 00 1F 80 05  B0 02 9D 00 35 07 02 00  ............5...
02A0: 03 00 9D 05 05 07 02 00  03 00 0B 03 00 01 92 02  ................
02B0: 03 06 17 28 80 03 07 17  29 80 24 2A 80 0C 80 0C  ...(....).$*....
02C0: 80 25 02 00 10 0C 80 00  CD 02 01 CD 02 03 04 00  .%..............
02D0: 00 10 02 04 00 1D 80 05  2A 03 9D 00 35 07 02 00  ........*...5...
02E0: 04 00 93 02 00 03 02 10  0C 80 1D 2B 80 23 93 0C  ...........+.#..
02F0: 80 24 2C 80 10 80 0C 80  25 02 00 10 0C 80 00 1F  .$,.....%.......
0300: 03 0B 04 00 03 01 10 04  00 45 1B 80 F8 FF FF 7F  .........E......
0310: F8 FF FF 7F 71 73 74 63  0C 80 21 00 01 2A 03 02  ....qstc..!..*..
0320: 00 10 10 80 00 2A 03 01  2A 03 02 04 00 1F 80 00  .....*..*.......
0330: 79 03 03 04 00 00 10 03  02 10 10 80 1D 2B 80 23  y............+.#
0340: 24 2C 80 10 80 0C 80 25  02 00 10 0C 80 00 6E 03  $,.....%......n.
0350: 0B 04 00 03 01 10 04 00  45 1B 80 F8 FF FF 7F F8  ........E.......
0360: FF FF 7F 71 73 74 63 0C  80 21 00 01 79 03 02 00  ...qstc..!..y...
0370: 10 10 80 00 79 03 01 79  03 02 04 00 2D 80 00 C8  ....y..y....-...
0380: 03 03 04 00 00 10 03 02  10 1E 80 1D 2B 80 23 24  ............+.#$
0390: 2C 80 10 80 0C 80 25 02  00 10 0C 80 00 BD 03 0B  ,.....%.........
03A0: 04 00 03 01 10 04 00 45  1B 80 F8 FF FF 7F F8 FF  .......E........
03B0: FF 7F 71 73 74 63 0C 80  21 00 01 C8 03 02 00 10  ..qstc..!.......
03C0: 10 80 00 C8 03 01 C8 03  02 04 00 2E 80 00 DF 03  ................
03D0: 1D 2F 80 23 05 05 00 0B  04 00 03 01 10 04 00 01  ./.#............
03E0: 8A 02 21 00                                       ..!.            
```

## Opcodes

```
  0: 0x0257 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x0258 [0x1E] EventEntity looks at LocalPlayer and starts talking
  2: 0x025D [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  3: 0x025E [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
  4: 0x025F [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlb0" with entities [EventEntity, EventEntity], work=68*
  5: 0x026E [0x1D] PRINT_EVENT_MESSAGE(message_id=7671*)
    → "There you are.\u0007I hate to admit it, but your efforts investigating the Naakuals deserve prrraise of some sort.\u007F1\u0000\u0007"
  6: 0x0271 [0x23] WAIT_FOR_DIALOG_INTERACTION
  7: 0x0272 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlb1" with entities [EventEntity, EventEntity], work=68*
  8: 0x0281 [0x06] ExtData[1]->WorkLocal[1] = 0
  9: 0x0284 [0x06] ExtData[1]->WorkLocal[3] = 0
 10: 0x0287 [0x06] ExtData[1]->WorkLocal[5] = 0
 11: 0x028A [0x02] IF !(ExtData[1]->WorkLocal[5] == 0*) GOTO 0x03E2
 12: 0x0292 [0x02] IF !(ExtData[1]->WorkLocal[3] > 13*) GOTO 0x02B0
 13: 0x029A [0x9D] ExtData[1]->WorkLocal[2] = 0x0735[ExtData[1]->WorkLocal[3]] // Read WORD
 14: 0x02A2 [0x9D] 0x0705[ExtData[1]->WorkLocal[3] * 2] = ExtData[1]->WorkLocal[2] // Write WORD
 15: 0x02AA [0x0B] ExtData[1]->WorkLocal[3]++
 16: 0x02AD [0x01] GOTO 0x0292

SUBROUTINE_02B0:
 17: 0x02B0 [0x03] Work_Zone_1700[6] = 30000*
 18: 0x02B5 [0x03] Work_Zone_1700[7] = 20000*
 19: 0x02BA [0x24] CREATE_DIALOG(message_id=7672*, default_option=0*, option_flags=0*)
    → "What will your reward be?\u0007\u000B\u007F\u0000\u0001\u0001\u0005#\u0002\u0001\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0002\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0003\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0004\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0005\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0006\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0007\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0008\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002	\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002
\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u000B\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u000C\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0005#\u0002\u0000\u0000.\u0007
\u000E bayld.\u0007
\u000F kinetic unit\u007F\u0012\u000F[/s].\u0007Nothing for the nonce.\u007F1\u0000\u0007"
 20: 0x02C1 [0x25] WAIT_DIALOG_SELECT()
 21: 0x02C2 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x02CD
 22: 0x02CA [0x01] GOTO 0x02CD

SUBROUTINE_02CD:
 23: 0x02CD [0x03] ExtData[1]->WorkLocal[4] = Work_Zone[0]
 24: 0x02D2 [0x02] IF !(ExtData[1]->WorkLocal[4] > 12*) GOTO 0x032A
 25: 0x02DA [0x9D] ExtData[1]->WorkLocal[2] = 0x0735[ExtData[1]->WorkLocal[4]] // Read WORD
 26: 0x02E2 [0x93] DISPLAY_ITEM_INFO(item_id=ExtData[1]->WorkLocal[2])
 27: 0x02E5 [0x03] Work_Zone[2] = 0*
 28: 0x02EA [0x1D] PRINT_EVENT_MESSAGE(message_id=7674*)
    → "Hmph.\u0007You really want \u000C\u0000[that/bayld/kinetic units]? Now's your last chance to rrreconsider.\u007F1\u0000\u0007"
 29: 0x02ED [0x23] WAIT_FOR_DIALOG_INTERACTION
 30: 0x02EE [0x93] DISPLAY_ITEM_INFO(item_id=0*)
 31: 0x02F1 [0x24] CREATE_DIALOG(message_id=7675*, default_option=1*, option_flags=0*)
    → "Keep what you chose?\u0007\u000BYes.\u0007No.\u007F1\u0000\u0007"
 32: 0x02F8 [0x25] WAIT_DIALOG_SELECT()
 33: 0x02F9 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x031F
 34: 0x0301 [0x0B] ExtData[1]->WorkLocal[4]++
 35: 0x0304 [0x03] Work_Zone[1] = ExtData[1]->WorkLocal[4]
 36: 0x0309 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "qstc" with entities [EventEntity, EventEntity], work=[201*, 0*]
 37: 0x031A [0x21] END_EVENT
 38: 0x031B [0x00] END_REQSTACK()

SUBROUTINE_031F:
 39: 0x031F [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x032A
 40: 0x0327 [0x01] GOTO 0x032A

SUBROUTINE_032A:
 41: 0x032A [0x02] IF !(ExtData[1]->WorkLocal[4] == 13*) GOTO 0x0379
 42: 0x0332 [0x03] ExtData[1]->WorkLocal[4] = Work_Zone[0]
 43: 0x0337 [0x03] Work_Zone[2] = 1*
 44: 0x033C [0x1D] PRINT_EVENT_MESSAGE(message_id=7674*)
    → "Hmph.\u0007You really want \u000C\u0000[that/bayld/kinetic units]? Now's your last chance to rrreconsider.\u007F1\u0000\u0007"
 45: 0x033F [0x23] WAIT_FOR_DIALOG_INTERACTION
 46: 0x0340 [0x24] CREATE_DIALOG(message_id=7675*, default_option=1*, option_flags=0*)
    → "Keep what you chose?\u0007\u000BYes.\u0007No.\u007F1\u0000\u0007"
 47: 0x0347 [0x25] WAIT_DIALOG_SELECT()
 48: 0x0348 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x036E
 49: 0x0350 [0x0B] ExtData[1]->WorkLocal[4]++
 50: 0x0353 [0x03] Work_Zone[1] = ExtData[1]->WorkLocal[4]
 51: 0x0358 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "qstc" with entities [EventEntity, EventEntity], work=[201*, 0*]
 52: 0x0369 [0x21] END_EVENT
 53: 0x036A [0x00] END_REQSTACK()

SUBROUTINE_036E:
 54: 0x036E [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x0379
 55: 0x0376 [0x01] GOTO 0x0379

SUBROUTINE_0379:
 56: 0x0379 [0x02] IF !(ExtData[1]->WorkLocal[4] == 14*) GOTO 0x03C8
 57: 0x0381 [0x03] ExtData[1]->WorkLocal[4] = Work_Zone[0]
 58: 0x0386 [0x03] Work_Zone[2] = 2*
 59: 0x038B [0x1D] PRINT_EVENT_MESSAGE(message_id=7674*)
    → "Hmph.\u0007You really want \u000C\u0000[that/bayld/kinetic units]? Now's your last chance to rrreconsider.\u007F1\u0000\u0007"
 60: 0x038E [0x23] WAIT_FOR_DIALOG_INTERACTION
 61: 0x038F [0x24] CREATE_DIALOG(message_id=7675*, default_option=1*, option_flags=0*)
    → "Keep what you chose?\u0007\u000BYes.\u0007No.\u007F1\u0000\u0007"
 62: 0x0396 [0x25] WAIT_DIALOG_SELECT()
 63: 0x0397 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x03BD
 64: 0x039F [0x0B] ExtData[1]->WorkLocal[4]++
 65: 0x03A2 [0x03] Work_Zone[1] = ExtData[1]->WorkLocal[4]
 66: 0x03A7 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "qstc" with entities [EventEntity, EventEntity], work=[201*, 0*]
 67: 0x03B8 [0x21] END_EVENT
 68: 0x03B9 [0x00] END_REQSTACK()

SUBROUTINE_03BD:
 69: 0x03BD [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x03C8
 70: 0x03C5 [0x01] GOTO 0x03C8

SUBROUTINE_03C8:
 71: 0x03C8 [0x02] IF !(ExtData[1]->WorkLocal[4] == 15*) GOTO 0x03DF
 72: 0x03D0 [0x1D] PRINT_EVENT_MESSAGE(message_id=7676*)
    → "I knew you'd pussyfoot around in the end.\u0007Just tell me what you want when you finally get arrround to deciding.\u007F1\u0000\u0007"
 73: 0x03D3 [0x23] WAIT_FOR_DIALOG_INTERACTION
 74: 0x03D4 [0x05] ExtData[1]->WorkLocal[5] = 1
 75: 0x03D7 [0x0B] ExtData[1]->WorkLocal[4]++
 76: 0x03DA [0x03] Work_Zone[1] = ExtData[1]->WorkLocal[4]
 77: 0x03DF [0x01] GOTO 0x028A

SUBROUTINE_03E2:
 78: 0x03E2 [0x21] END_EVENT
 79: 0x03E3 [0x00] END_REQSTACK()
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x031C [0x01] GOTO 0x032A
# Dead code (unreachable instructions):
     0x036B [0x01] GOTO 0x0379
# Dead code (unreachable instructions):
     0x03BA [0x01] GOTO 0x03C8
```