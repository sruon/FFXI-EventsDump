# Event 152

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 70/79     |
| Offset          | 0x13A3    |
| Data Size       | 573 bytes |
| Calculated Size | 573 bytes |
| Instructions    | 74        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
13A0:          20 01 42 46 01  1E F0 FF FF 7F 5D 04 80      .BF......]..
13B0: 18 80 45 18 80 F0 FF FF  7F F0 FF FF 7F 66 64 6F  ..E..........fdo
13C0: 31 04 80 1C 18 80 75 00  19 80 75 01 6F 70 38 1A  1.....u...u.op8.
13D0: 80 37 1B 80 1C 80 1D 80  1E 80 29 0B F0 FF FF 7F  .7........).....
13E0: 0C 29 08 F0 FF FF 7F 03  29 08 F0 FF FF 7F 05 4A  .)......)......J
13F0: 2E A0 0F 01 F0 FF FF 7F  6F 76 2E A0 0F 01 79 00  ........ov....y.
1400: F0 FF FF 7F 2E A0 0F 01  5C 00 20 80 5C 01 20 80  ........\. .\. .
1410: 5D 21 80 22 80 02 09 10  27 80 00 31 14 45 23 80  ]!."....'..1.E#.
1420: F0 FF FF 7F F0 FF FF 7F  73 30 34 32 04 80 01 5E  ........s042...^
1430: 14 02 09 10 28 80 00 4D  14 45 23 80 F0 FF FF 7F  ....(..M.E#.....
1440: F0 FF FF 7F 73 30 34 32  04 80 01 5E 14 45 23 80  ....s042...^.E#.
1450: F0 FF FF 7F F0 FF FF 7F  73 30 33 32 04 80 45 18  ........s032..E.
1460: 80 F0 FF FF 7F F0 FF FF  7F 66 64 69 31 04 80 29  .........fdi1..)
1470: 08 2E A0 0F 01 03 29 0B  2E A0 0F 01 46 29 08 2E  ......).....F)..
1480: A0 0F 01 04 02 09 10 27  80 00 9E 14 52 23 80 F0  .......'....R#..
1490: FF FF 7F F0 FF FF 7F 73  30 34 32 01 C7 14 02 09  .......s042.....
14A0: 10 28 80 00 B8 14 52 23  80 F0 FF FF 7F F0 FF FF  .(....R#........
14B0: 7F 73 30 34 32 01 C7 14  52 23 80 F0 FF FF 7F F0  .s042...R#......
14C0: FF FF 7F 73 30 33 32 45  23 80 F0 FF FF 7F F0 FF  ...s032E#.......
14D0: FF 7F 73 30 33 33 04 80  29 08 2E A0 0F 01 05 29  ..s033..)......)
14E0: 0B 2E A0 0F 01 47 29 08  2E A0 0F 01 06 52 23 80  .....G)......R#.
14F0: F0 FF FF 7F F0 FF FF 7F  73 30 33 33 02 09 10 27  ........s033...'
1500: 80 00 18 15 45 23 80 F0  FF FF 7F F0 FF FF 7F 73  ....E#.........s
1510: 30 34 33 04 80 01 45 15  02 09 10 28 80 00 34 15  043...E....(..4.
1520: 45 23 80 F0 FF FF 7F F0  FF FF 7F 73 30 34 33 04  E#.........s043.
1530: 80 01 45 15 45 23 80 F0  FF FF 7F F0 FF FF 7F 73  ..E.E#.........s
1540: 30 33 34 04 80 29 0B 2E  A0 0F 01 48 5D 04 80 18  034..).....H]...
1550: 80 45 18 80 F0 FF FF 7F  F0 FF FF 7F 66 64 6F 31  .E..........fdo1
1560: 04 80 1C 18 80 02 09 10  27 80 00 7F 15 52 23 80  ........'....R#.
1570: F0 FF FF 7F F0 FF FF 7F  73 30 34 33 01 A8 15 02  ........s043....
1580: 09 10 28 80 00 99 15 52  23 80 F0 FF FF 7F F0 FF  ..(....R#.......
1590: FF 7F 73 30 34 33 01 A8  15 52 23 80 F0 FF FF 7F  ..s043...R#.....
15A0: F0 FF FF 7F 73 30 33 34  46 00 5C 00 2C 80 5C 01  ....s034F.\.,.\.
15B0: 2C 80 5D 21 80 22 80 1C  18 80 45 18 80 F0 FF FF  ,.]!."....E.....
15C0: 7F F0 FF FF 7F 66 64 69  31 04 80 45 46 80 F0 FF  .....fdi1..EF...
15D0: FF 7F F0 FF FF 7F 71 73  74 63 04 80 20 00 21 00  ......qstc.. .!.
```

## Opcodes

```
  0: 0x13A3 [0x20] SET_CLI_EVENT_UC_FLAG: Lock player control
  1: 0x13A5 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  2: 0x13A6 [0x46] CAMERA_CONTROL: Disable user control
  3: 0x13A8 [0x1E] EventEntity looks at LocalPlayer and starts talking
  4: 0x13AD [0x5D] SET_MUSIC_VOLUME(volume=0*, fade_time=200*)
  5: 0x13B2 [0x45] LOAD_SCHEDULED_TASK(work_offset1=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdo1", work_offset2=0*)
  6: 0x13C3 [0x1C] WAIT(200* ticks)
  7: 0x13C6 [0x75] LOAD_ROOM(Load indoor room, room=505*)
  8: 0x13CA [0x75] LOAD_ROOM(No action)
  9: 0x13CC [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 10: 0x13CD [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
 11: 0x13CE [0x38] SET_CLIENT_EVENT_MODE(mode=2051*)
 12: 0x13D1 [0x37] UPDATE_EVENT_POSITION_AND_DIR: x=61.000*, z=-34.397*, y=-12.000*, direction=131.0Â°*
 13: 0x13DA [0x29] REQ_SET_WAIT(priority=0x0B, entity_id=LocalPlayer, tag_num=0x0C)
 14: 0x13E1 [0x29] REQ_SET_WAIT(priority=0x08, entity_id=LocalPlayer, tag_num=0x03)
 15: 0x13E8 [0x29] REQ_SET_WAIT(priority=0x08, entity_id=LocalPlayer, tag_num=0x05)
 16: 0x13EF [0x4A] Magriffon (ID: 17801262/0x010FA02E) looks at LocalPlayer
 17: 0x13F8 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 18: 0x13F9 [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until Magriffon (ID: 17801262/0x010FA02E) Render.Flags0 and Render.Flags3 conditions are met
 19: 0x13FE [0x79] LocalPlayer looks at Magriffon (ID: 17801262/0x010FA02E) (Basic look)
 20: 0x1408 [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 104*
 21: 0x140C [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 104*
 22: 0x1410 [0x5D] SET_MUSIC_VOLUME(volume=127*, fade_time=1*)
 23: 0x1415 [0x02] IF !(Work_Zone[9] == 5*) GOTO 0x1431
 24: 0x141D [0x45] LOAD_SCHEDULED_TASK(work_offset1=150*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="s042", work_offset2=0*)
 25: 0x142E [0x01] GOTO 0x145E

SUBROUTINE_1431:
 26: 0x1431 [0x02] IF !(Work_Zone[9] == 6*) GOTO 0x144D
 27: 0x1439 [0x45] LOAD_SCHEDULED_TASK(work_offset1=150*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="s042", work_offset2=0*)
 28: 0x144A [0x01] GOTO 0x145E

SUBROUTINE_144D:
 29: 0x144D [0x45] LOAD_SCHEDULED_TASK(work_offset1=150*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="s032", work_offset2=0*)
 30: 0x145E [0x45] LOAD_SCHEDULED_TASK(work_offset1=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdi1", work_offset2=0*)
 31: 0x146F [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Magriffon (ID: 17801262/0x010FA02E), tag_num=0x03)
 32: 0x1476 [0x29] REQ_SET_WAIT(priority=0x0B, entity_id=Magriffon (ID: 17801262/0x010FA02E), tag_num=0x46)
 33: 0x147D [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Magriffon (ID: 17801262/0x010FA02E), tag_num=0x04)
 34: 0x1484 [0x02] IF !(Work_Zone[9] == 5*) GOTO 0x149E
 35: 0x148C [0x52] END_LOAD_SCHEDULER: End scheduler "s042" with entities [LocalPlayer, LocalPlayer], work=150*
 36: 0x149B [0x01] GOTO 0x14C7

SUBROUTINE_149E:
 37: 0x149E [0x02] IF !(Work_Zone[9] == 6*) GOTO 0x14B8
 38: 0x14A6 [0x52] END_LOAD_SCHEDULER: End scheduler "s042" with entities [LocalPlayer, LocalPlayer], work=150*
 39: 0x14B5 [0x01] GOTO 0x14C7

SUBROUTINE_14B8:
 40: 0x14B8 [0x52] END_LOAD_SCHEDULER: End scheduler "s032" with entities [LocalPlayer, LocalPlayer], work=150*
 41: 0x14C7 [0x45] LOAD_SCHEDULED_TASK(work_offset1=150*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="s033", work_offset2=0*)
 42: 0x14D8 [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Magriffon (ID: 17801262/0x010FA02E), tag_num=0x05)
 43: 0x14DF [0x29] REQ_SET_WAIT(priority=0x0B, entity_id=Magriffon (ID: 17801262/0x010FA02E), tag_num=0x47)
 44: 0x14E6 [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Magriffon (ID: 17801262/0x010FA02E), tag_num=0x06)
 45: 0x14ED [0x52] END_LOAD_SCHEDULER: End scheduler "s033" with entities [LocalPlayer, LocalPlayer], work=150*
 46: 0x14FC [0x02] IF !(Work_Zone[9] == 5*) GOTO 0x1518
 47: 0x1504 [0x45] LOAD_SCHEDULED_TASK(work_offset1=150*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="s043", work_offset2=0*)
 48: 0x1515 [0x01] GOTO 0x1545

SUBROUTINE_1518:
 49: 0x1518 [0x02] IF !(Work_Zone[9] == 6*) GOTO 0x1534
 50: 0x1520 [0x45] LOAD_SCHEDULED_TASK(work_offset1=150*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="s043", work_offset2=0*)
 51: 0x1531 [0x01] GOTO 0x1545

SUBROUTINE_1534:
 52: 0x1534 [0x45] LOAD_SCHEDULED_TASK(work_offset1=150*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="s034", work_offset2=0*)
 53: 0x1545 [0x29] REQ_SET_WAIT(priority=0x0B, entity_id=Magriffon (ID: 17801262/0x010FA02E), tag_num=0x48)
 54: 0x154C [0x5D] SET_MUSIC_VOLUME(volume=0*, fade_time=200*)
 55: 0x1551 [0x45] LOAD_SCHEDULED_TASK(work_offset1=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdo1", work_offset2=0*)
 56: 0x1562 [0x1C] WAIT(200* ticks)
 57: 0x1565 [0x02] IF !(Work_Zone[9] == 5*) GOTO 0x157F
 58: 0x156D [0x52] END_LOAD_SCHEDULER: End scheduler "s043" with entities [LocalPlayer, LocalPlayer], work=150*
 59: 0x157C [0x01] GOTO 0x15A8

SUBROUTINE_157F:
 60: 0x157F [0x02] IF !(Work_Zone[9] == 6*) GOTO 0x1599
 61: 0x1587 [0x52] END_LOAD_SCHEDULER: End scheduler "s043" with entities [LocalPlayer, LocalPlayer], work=150*
 62: 0x1596 [0x01] GOTO 0x15A8

SUBROUTINE_1599:
 63: 0x1599 [0x52] END_LOAD_SCHEDULER: End scheduler "s034" with entities [LocalPlayer, LocalPlayer], work=150*
 64: 0x15A8 [0x46] CAMERA_CONTROL: Restore default settings
 65: 0x15AA [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 135*
 66: 0x15AE [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 135*
 67: 0x15B2 [0x5D] SET_MUSIC_VOLUME(volume=127*, fade_time=1*)
 68: 0x15B7 [0x1C] WAIT(200* ticks)
 69: 0x15BA [0x45] LOAD_SCHEDULED_TASK(work_offset1=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdi1", work_offset2=0*)
 70: 0x15CB [0x45] LOAD_SCHEDULED_TASK(work_offset1=201*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="qstc", work_offset2=0*)
 71: 0x15DC [0x20] SET_CLI_EVENT_UC_FLAG: Unlock player control
 72: 0x15DE [0x21] END_EVENT
 73: 0x15DF [0x00] END_REQSTACK()
```
