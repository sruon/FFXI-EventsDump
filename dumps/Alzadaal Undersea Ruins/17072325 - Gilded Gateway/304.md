# Event 304

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 3/3       |
| Offset          | 0x0556    |
| Data Size       | 163 bytes |
| Calculated Size | 163 bytes |
| Instructions    | 35        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0550:                   20 01  24 32 80 04 80 02 80 25         .$2.....%
0560: 02 00 10 02 80 00 E5 05  43 00 43 01 46 01 42 45  ........C.C.F.BE
0570: 1F 80 F0 FF FF 7F F0 FF  FF 7F 66 64 6F 31 02 80  ..........fdo1..
0580: 1C 25 80 38 33 80 29 01  F0 FF FF 7F 29 45 1F 80  .%.83.).....)E..
0590: F0 FF FF 7F F0 FF FF 7F  66 64 69 31 02 80 1C 25  ........fdi1...%
05A0: 80 4C 1C 24 80 29 01 C4  80 04 01 01 1C 25 80 27  .L.$.).......%.'
05B0: 01 F0 FF FF 7F 2A 1C 26  80 29 01 C4 80 04 01 02  .....*.&.)......
05C0: 1C 34 80 4D 1C 25 80 45  1F 80 F0 FF FF 7F F0 FF  .4.M.%.E........
05D0: FF 7F 66 64 6F 31 02 80  1C 25 80 03 01 10 04 80  ..fdo1...%......
05E0: 46 00 01 F5 05 02 00 10  04 80 00 F5 05 03 01 10  F...............
05F0: 02 80 01 F5 05 20 00 21  00                       ..... .!.       
```

## Opcodes

```
  0: 0x0556 [0x20] SET_CLI_EVENT_UC_FLAG: Lock player control
  1: 0x0558 [0x24] CREATE_DIALOG(message_id=7263*, default_option=1*, option_flags=0*)
    â†’ "Pass through the gate?\u0007\u000BYes.\u0007No.\u007F1\u0000\u0007"
  2: 0x055F [0x25] WAIT_DIALOG_SELECT()
  3: 0x0560 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x05E5
  4: 0x0568 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
  5: 0x056A [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
  6: 0x056C [0x46] CAMERA_CONTROL: Disable user control
  7: 0x056E [0x42] SET_CLI_EVENT_CANCEL_DATA()
  8: 0x056F [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
  9: 0x0580 [0x1C] WAIT(60* ticks)
 10: 0x0583 [0x38] SET_CLIENT_EVENT_MODE(mode=19*)
 11: 0x0586 [0x29] REQ_SET_WAIT(priority=0x01, entity_id=LocalPlayer, tag_num=0x29)
 12: 0x058D [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 13: 0x059E [0x1C] WAIT(60* ticks)
 14: 0x05A1 [0x4C] EventEntity->StatusEvent = 8 // Open door
 15: 0x05A2 [0x1C] WAIT(180* ticks)
 16: 0x05A5 [0x29] REQ_SET_WAIT(priority=0x01, entity_id=_20o (ID: 17072324/0x010480C4), tag_num=0x01)
 17: 0x05AC [0x1C] WAIT(60* ticks)
 18: 0x05AF [0x27] REQ_SET(priority=0x01, entity_id=LocalPlayer, tag_num=0x2A)
 19: 0x05B6 [0x1C] WAIT(240* ticks)
 20: 0x05B9 [0x29] REQ_SET_WAIT(priority=0x01, entity_id=_20o (ID: 17072324/0x010480C4), tag_num=0x02)
 21: 0x05C0 [0x1C] WAIT(90* ticks)
 22: 0x05C3 [0x4D] EventEntity->StatusEvent = 9 // Close door
 23: 0x05C4 [0x1C] WAIT(60* ticks)
 24: 0x05C7 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 25: 0x05D8 [0x1C] WAIT(60* ticks)
 26: 0x05DB [0x03] Work_Zone[1] = 1*
 27: 0x05E0 [0x46] CAMERA_CONTROL: Restore default settings
 28: 0x05E2 [0x01] GOTO 0x05F5

SUBROUTINE_05E5:
 29: 0x05E5 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x05F5
 30: 0x05ED [0x03] Work_Zone[1] = 0*
 31: 0x05F2 [0x01] GOTO 0x05F5

SUBROUTINE_05F5:
 32: 0x05F5 [0x20] SET_CLI_EVENT_UC_FLAG: Unlock player control
 33: 0x05F7 [0x21] END_EVENT
 34: 0x05F8 [0x00] END_REQSTACK()
```
