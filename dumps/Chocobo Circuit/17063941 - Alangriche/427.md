# Event 427

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 9/14      |
| Offset          | 0x0368    |
| Data Size       | 666 bytes |
| Calculated Size | 666 bytes |
| Instructions    | 135       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0360:                          03 41 10 00 80 42 45 4D          .A...BEM
0370: 80 F8 FF FF 7F F8 FF FF  7F 66 64 6F 31 00 80 55  .........fdo1..U
0380: 4D 80 F8 FF FF 7F F8 FF  FF 7F 66 64 6F 31 46 01  M.........fdo1F.
0390: 38 4E 80 92 01 F8 FF FF  7F 80 F8 FF FF 7F 1A 54  8N.............T
03A0: 1B 1C 4F 80 45 4D 80 F8  FF FF 7F F8 FF FF 7F 66  ..O.EM.........f
03B0: 64 69 30 00 80 1C 50 80  1A 34 06 02 1B 00 00 80  di0...P..4......
03C0: 00 C7 03 1D 51 80 23 06  17 00 02 17 00 00 80 00  ....Q.#.........
03D0: 00 06 1A 34 06 02 1B 00  00 80 01 1A 04 03 01 10  ...4............
03E0: 52 80 43 00 43 01 03 0D  00 02 10 03 0E 00 03 10  R.C.C...........
03F0: 02 0E 00 0E 80 00 FE 03  1A 9F 0D 01 17 04 02 0E  ................
0400: 00 00 80 00 0C 04 1A 8B  11 01 17 04 02 0E 00 14  ................
0410: 80 00 17 04 01 1A 04 01  FD 05 03 02 10 09 00 02  ................
0420: 0A 00 53 80 03 32 04 9D  00 E1 24 15 00 0A 00 01  ..S..2....$.....
0430: 37 04 03 15 00 54 80 03  03 10 15 00 03 0D 00 02  7....T..........
0440: 00 0C 0D 00 9D 00 71 23  16 00 0D 00 03 04 10 16  ......q#........
0450: 00 03 05 10 01 00 24 55  80 00 80 18 00 25 02 00  ......$U.....%..
0460: 10 00 80 00 F4 04 02 09  00 00 80 00 89 04 03 02  ................
0470: 10 02 80 03 03 10 0F 80  1A 6D 08 1D 56 80 23 1D  .........m..V.#.
0480: 57 80 23 1A 6E 08 01 F1  04 03 20 00 00 80 03 1C  W.#.n..... .....
0490: 00 00 80 03 1E 00 00 80  1A 26 09 45 4D 80 F8 FF  .........&.EM...
04A0: FF 7F F8 FF FF 7F 66 64  6F 31 00 80 55 4D 80 F8  ......fdo1..UM..
04B0: FF FF 7F F8 FF FF 7F 66  64 6F 31 7A 00 27 60 04  .......fdo1z.'`.
04C0: 01 4E 01 27 60 04 01 2F  01 27 60 04 01 7A 00 28  .N.'`../.'`..z.(
04D0: 60 04 01 27 05 28 60 04  01 08 1A 49 1B 1C 4F 80  `..'.(`....I..O.
04E0: 45 4D 80 F8 FF FF 7F F8  FF FF 7F 66 64 69 32 00  EM.........fdi2.
04F0: 80 01 FD 05 02 00 10 0E  80 00 02 05 1A EB 0A 01  ................
0500: FD 05 02 00 10 14 80 00  4C 05 02 09 00 00 80 00  ........L.......
0510: 1F 05 1A 6D 08 1D 58 80  23 1A 6E 08 01 49 05 03  ...m..X.#.n..I..
0520: 01 10 59 80 40 5A 80 5B  80 01 10 15 00 43 00 43  ..Y.@Z.[.....C.C
0530: 01 02 02 10 00 80 00 3F  05 1A 9F 0D 01 49 05 1A  .......?.....I..
0540: 6D 08 1D 5C 80 23 1A 6E  08 01 FD 05 02 00 10 19  m..\.#.n........
0550: 80 00 91 05 02 09 00 00  80 00 69 05 1A 6D 08 1D  ..........i..m..
0560: 58 80 23 1A 6E 08 01 8E  05 02 16 00 01 00 05 84  X.#.n...........
0570: 05 02 08 00 5A 80 03 81  05 03 19 00 02 00 1A 8B  ....Z...........
0580: 11 01 8E 05 1A 6D 08 1D  5D 80 23 1A 6E 08 01 FD  .....m..].#.n...
0590: 05 02 00 10 1D 80 00 B4  05 02 09 00 00 80 00 AE  ................
05A0: 05 1A 6D 08 1D 58 80 23  1A 6E 08 01 B1 05 1A 6F  ..m..X.#.n.....o
05B0: 08 01 FD 05 02 00 10 25  80 00 C2 05 1A 22 07 01  .......%....."..
05C0: FD 05 45 4D 80 F8 FF FF  7F F8 FF FF 7F 66 64 6F  ..EM.........fdo
05D0: 31 00 80 55 4D 80 F8 FF  FF 7F F8 FF FF 7F 66 64  1..UM.........fd
05E0: 6F 31 1A 6A 1D 46 00 1C  50 80 45 4D 80 F8 FF FF  o1.j.F..P.EM....
05F0: 7F F8 FF FF 7F 66 64 69  32 00 80 21 00 01 CA 03  .....fdi2..!....
0600: 21 00                                             !.              
```

## Opcodes

```
  0: 0x0368 [0x03] Work_Zone[65] = 0*
  1: 0x036D [0x42] SET_CLI_EVENT_CANCEL_DATA()
  2: 0x036E [0x45] LOAD_SCHEDULED_TASK(work_offset1=200*, entity1=EventEntity, entity2=EventEntity, scheduler_id="fdo1", work_offset2=0*)
  3: 0x037F [0x55] WAIT_LOAD_SCHEDULER(work_offset=200*, entity1=EventEntity, entity2=EventEntity, scheduler_id="fdo1")
  4: 0x038E [0x46] CAMERA_CONTROL: Disable user control
  5: 0x0390 [0x38] SET_CLIENT_EVENT_MODE(mode=27*)
  6: 0x0393 [0x92] EventEntity->Render.Flags3 ^= 0x01
  7: 0x0399 [0x80] LOAD_WAIT(entity=EventEntity)
  8: 0x039E [0x1A] CALL_SUBROUTINE(address=0x1B54)
  9: 0x03A1 [0x1C] WAIT(15* ticks)
 10: 0x03A4 [0x45] LOAD_SCHEDULED_TASK(work_offset1=200*, entity1=EventEntity, entity2=EventEntity, scheduler_id="fdi0", work_offset2=0*)
 11: 0x03B5 [0x1C] WAIT(60* ticks)
 12: 0x03B8 [0x1A] CALL_SUBROUTINE(address=0x0634)
 13: 0x03BB [0x02] IF !(ExtData[1]->WorkLocal[27] == 0*) GOTO 0x03C7
 14: 0x03C3 [0x1D] PRINT_EVENT_MESSAGE(message_id=8964*)
    → "Hello! What might I interest you in today?\u007F1\u0000\u0007"
 15: 0x03C6 [0x23] WAIT_FOR_DIALOG_INTERACTION
 16: 0x03C7 [0x06] ExtData[1]->WorkLocal[23] = 0
 17: 0x03CA [0x02] IF !(ExtData[1]->WorkLocal[23] == 0*) GOTO 0x0600
 18: 0x03D2 [0x1A] CALL_SUBROUTINE(address=0x0634)
 19: 0x03D5 [0x02] IF !(ExtData[1]->WorkLocal[27] == 0*) GOTO 0x041A
 20: 0x03DD [0x03] Work_Zone[1] = 14*
 21: 0x03E2 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
 22: 0x03E4 [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
 23: 0x03E6 [0x03] ExtData[1]->WorkLocal[13] = Work_Zone[2]
 24: 0x03EB [0x03] ExtData[1]->WorkLocal[14] = Work_Zone[3]
 25: 0x03F0 [0x02] IF !(ExtData[1]->WorkLocal[14] == 1*) GOTO 0x03FE
 26: 0x03F8 [0x1A] CALL_SUBROUTINE(address=0x0D9F)
 27: 0x03FB [0x01] GOTO 0x0417

SUBROUTINE_03FE:
 28: 0x03FE [0x02] IF !(ExtData[1]->WorkLocal[14] == 0*) GOTO 0x040C
 29: 0x0406 [0x1A] CALL_SUBROUTINE(address=0x118B)
 30: 0x0409 [0x01] GOTO 0x0417

SUBROUTINE_040C:
 31: 0x040C [0x02] IF !(ExtData[1]->WorkLocal[14] == 2*) GOTO 0x0417
 32: 0x0414 [0x01] GOTO 0x041A

SUBROUTINE_0417:
 33: 0x0417 [0x01] GOTO 0x05FD

SUBROUTINE_041A:
 34: 0x041A [0x03] Work_Zone[2] = ExtData[1]->WorkLocal[9]
 35: 0x041F [0x02] IF !(ExtData[1]->WorkLocal[10] >= 64*) GOTO 0x0432
 36: 0x0427 [0x9D] ExtData[1]->WorkLocal[21] = 0x24E1[ExtData[1]->WorkLocal[10]] // Read WORD
 37: 0x042F [0x01] GOTO 0x0437

SUBROUTINE_0432:
 38: 0x0432 [0x03] ExtData[1]->WorkLocal[21] = 100000*
 39: 0x0437 [0x03] Work_Zone[3] = ExtData[1]->WorkLocal[21]
 40: 0x043C [0x03] ExtData[1]->WorkLocal[13] = ExtData[1]->WorkLocal[2]
 41: 0x0441 [0x0C] ExtData[1]->WorkLocal[13]--
 42: 0x0444 [0x9D] ExtData[1]->WorkLocal[22] = 0x2371[ExtData[1]->WorkLocal[13]] // Read WORD
 43: 0x044C [0x03] Work_Zone[4] = ExtData[1]->WorkLocal[22]
 44: 0x0451 [0x03] Work_Zone[5] = ExtData[1]->WorkLocal[1]
 45: 0x0456 [0x24] CREATE_DIALOG(message_id=8965*, default_option=0*, option_flags=0x18)
    → "(You have 
\u0003 \u007F\u0012\u0003[chocobuck/chocobucks].)\u0007\u000BChocobo \u000C\u0000[registration/confirmation].\u0007Item confirmation.\u0007Free run (
\u0001 gil).\u0007Official race (
\u0002 \u007F\u0012\u0002[chocobuck/chocobucks]).\u0007Re-run.\u0007Rule confirmation.\u0007Nothing.\u007F1\u0000\u0007"
 46: 0x045D [0x25] WAIT_DIALOG_SELECT()
 47: 0x045E [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x04F4
 48: 0x0466 [0x02] IF !(ExtData[1]->WorkLocal[9] == 0*) GOTO 0x0489
 49: 0x046E [0x03] Work_Zone[2] = 2313*
 50: 0x0473 [0x03] Work_Zone[3] = 2402*
 51: 0x0478 [0x1A] CALL_SUBROUTINE(address=0x086D)
 52: 0x047B [0x1D] PRINT_EVENT_MESSAGE(message_id=8968*)
    → "To register your chocobo, you must first bring me either \u0001\u0001\u0001 \u0001\u0005$\u0002\u0000\u0000\u0000 or \u0001\u0001\u0001 \u0001\u0005$\u0002\u0001\u0000\u0000.\u007F1\u0000\u0007"
 53: 0x047E [0x23] WAIT_FOR_DIALOG_INTERACTION
 54: 0x047F [0x1D] PRINT_EVENT_MESSAGE(message_id=8969*)
    → "You can only register one chocobo at a time, but you may always register a new one whenever you wish.\u007F1\u0000\u0007"
 55: 0x0482 [0x23] WAIT_FOR_DIALOG_INTERACTION
 56: 0x0483 [0x1A] CALL_SUBROUTINE(address=0x086E)
 57: 0x0486 [0x01] GOTO 0x04F1

SUBROUTINE_0489:
 58: 0x0489 [0x03] ExtData[1]->WorkLocal[32] = 0*
 59: 0x048E [0x03] ExtData[1]->WorkLocal[28] = 0*
 60: 0x0493 [0x03] ExtData[1]->WorkLocal[30] = 0*
 61: 0x0498 [0x1A] CALL_SUBROUTINE(address=0x0926)
 62: 0x049B [0x45] LOAD_SCHEDULED_TASK(work_offset1=200*, entity1=EventEntity, entity2=EventEntity, scheduler_id="fdo1", work_offset2=0*)
 63: 0x04AC [0x55] WAIT_LOAD_SCHEDULER(work_offset=200*, entity1=EventEntity, entity2=EventEntity, scheduler_id="fdo1")
 64: 0x04BB [0x7A] VM_CONTROL: Reset VM for Unnamed NPC (ID: 17063975/0x01046027)
 65: 0x04C1 [0x4E] SET_ENTITY_HIDE_FLAG: Hide Unnamed NPC (ID: 17063975/0x01046027)
 66: 0x04C7 [0x2F] Unnamed NPC (ID: 17063975/0x01046027)->Render.Flags0 |= 0x80000 // Bit 19
 67: 0x04CD [0x7A] VM_CONTROL: Reset VM for cameraA (ID: 17063976/0x01046028)
 68: 0x04D3 [0x27] REQ_SET(priority=0x05, entity_id=cameraA (ID: 17063976/0x01046028), tag_num=0x08)
 69: 0x04DA [0x1A] CALL_SUBROUTINE(address=0x1B49)
 70: 0x04DD [0x1C] WAIT(15* ticks)
 71: 0x04E0 [0x45] LOAD_SCHEDULED_TASK(work_offset1=200*, entity1=EventEntity, entity2=EventEntity, scheduler_id="fdi2", work_offset2=0*)
 72: 0x04F1 [0x01] GOTO 0x05FD

SUBROUTINE_04F4:
 73: 0x04F4 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x0502
 74: 0x04FC [0x1A] CALL_SUBROUTINE(address=0x0AEB)
 75: 0x04FF [0x01] GOTO 0x05FD

SUBROUTINE_0502:
 76: 0x0502 [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x054C
 77: 0x050A [0x02] IF !(ExtData[1]->WorkLocal[9] == 0*) GOTO 0x051F
 78: 0x0512 [0x1A] CALL_SUBROUTINE(address=0x086D)
 79: 0x0515 [0x1D] PRINT_EVENT_MESSAGE(message_id=8967*)
    → "You cannot access this menu until you have registered a chocobo to race.\u007F1\u0000\u0007"
 80: 0x0518 [0x23] WAIT_FOR_DIALOG_INTERACTION
 81: 0x0519 [0x1A] CALL_SUBROUTINE(address=0x086E)
 82: 0x051C [0x01] GOTO 0x0549

SUBROUTINE_051F:
 83: 0x051F [0x03] Work_Zone[1] = 16*
 84: 0x0524 [0x40] SET_BIT_WORK_RANGE(start_bit=8*, end_bit=31*, target=Work_Zone[1], source=ExtData[1]->WorkLocal[21])
 85: 0x052D [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
 86: 0x052F [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
 87: 0x0531 [0x02] IF !(Work_Zone[2] == 0*) GOTO 0x053F
 88: 0x0539 [0x1A] CALL_SUBROUTINE(address=0x0D9F)
 89: 0x053C [0x01] GOTO 0x0549

SUBROUTINE_053F:
 90: 0x053F [0x1A] CALL_SUBROUTINE(address=0x086D)
 91: 0x0542 [0x1D] PRINT_EVENT_MESSAGE(message_id=9025*)
    → "I am so, so sorry, but it seems that you do not possess enough gil to enter your chocobo in the next race.\u007F1\u0000\u0007"
 92: 0x0545 [0x23] WAIT_FOR_DIALOG_INTERACTION
 93: 0x0546 [0x1A] CALL_SUBROUTINE(address=0x086E)
 94: 0x0549 [0x01] GOTO 0x05FD

SUBROUTINE_054C:
 95: 0x054C [0x02] IF !(Work_Zone[0] == 3*) GOTO 0x0591
 96: 0x0554 [0x02] IF !(ExtData[1]->WorkLocal[9] == 0*) GOTO 0x0569
 97: 0x055C [0x1A] CALL_SUBROUTINE(address=0x086D)
 98: 0x055F [0x1D] PRINT_EVENT_MESSAGE(message_id=8967*)
    → "You cannot access this menu until you have registered a chocobo to race.\u007F1\u0000\u0007"
 99: 0x0562 [0x23] WAIT_FOR_DIALOG_INTERACTION
100: 0x0563 [0x1A] CALL_SUBROUTINE(address=0x086E)
101: 0x0566 [0x01] GOTO 0x058E

SUBROUTINE_0569:
102: 0x0569 [0x02] IF !(ExtData[1]->WorkLocal[22] > ExtData[1]->WorkLocal[1]) GOTO 0x0584
103: 0x0571 [0x02] IF !(ExtData[1]->WorkLocal[8] >= 8*) GOTO 0x0581
104: 0x0579 [0x03] ExtData[1]->WorkLocal[25] = ExtData[1]->WorkLocal[2]
105: 0x057E [0x1A] CALL_SUBROUTINE(address=0x118B)
106: 0x0581 [0x01] GOTO 0x058E

SUBROUTINE_0584:
107: 0x0584 [0x1A] CALL_SUBROUTINE(address=0x086D)
108: 0x0587 [0x1D] PRINT_EVENT_MESSAGE(message_id=9024*)
    → "I am so sorry, but it seems you do not possess enough chocobucks to participate in the next race.\u007F1\u0000\u0007"
109: 0x058A [0x23] WAIT_FOR_DIALOG_INTERACTION
110: 0x058B [0x1A] CALL_SUBROUTINE(address=0x086E)
111: 0x058E [0x01] GOTO 0x05FD

SUBROUTINE_0591:
112: 0x0591 [0x02] IF !(Work_Zone[0] == 4*) GOTO 0x05B4
113: 0x0599 [0x02] IF !(ExtData[1]->WorkLocal[9] == 0*) GOTO 0x05AE
114: 0x05A1 [0x1A] CALL_SUBROUTINE(address=0x086D)
115: 0x05A4 [0x1D] PRINT_EVENT_MESSAGE(message_id=8967*)
    → "You cannot access this menu until you have registered a chocobo to race.\u007F1\u0000\u0007"
116: 0x05A7 [0x23] WAIT_FOR_DIALOG_INTERACTION
117: 0x05A8 [0x1A] CALL_SUBROUTINE(address=0x086E)
118: 0x05AB [0x01] GOTO 0x05B1

SUBROUTINE_05AE:
119: 0x05AE [0x1A] CALL_SUBROUTINE(address=0x086F)
120: 0x05B1 [0x01] GOTO 0x05FD

SUBROUTINE_05B4:
121: 0x05B4 [0x02] IF !(Work_Zone[0] == 5*) GOTO 0x05C2
122: 0x05BC [0x1A] CALL_SUBROUTINE(address=0x0722)
123: 0x05BF [0x01] GOTO 0x05FD

SUBROUTINE_05C2:
124: 0x05C2 [0x45] LOAD_SCHEDULED_TASK(work_offset1=200*, entity1=EventEntity, entity2=EventEntity, scheduler_id="fdo1", work_offset2=0*)
125: 0x05D3 [0x55] WAIT_LOAD_SCHEDULER(work_offset=200*, entity1=EventEntity, entity2=EventEntity, scheduler_id="fdo1")
126: 0x05E2 [0x1A] CALL_SUBROUTINE(address=0x1D6A)
127: 0x05E5 [0x46] CAMERA_CONTROL: Restore default settings
128: 0x05E7 [0x1C] WAIT(60* ticks)
129: 0x05EA [0x45] LOAD_SCHEDULED_TASK(work_offset1=200*, entity1=EventEntity, entity2=EventEntity, scheduler_id="fdi2", work_offset2=0*)
130: 0x05FB [0x21] END_EVENT
131: 0x05FC [0x00] END_REQSTACK()

SUBROUTINE_05FD:
132: 0x05FD [0x01] GOTO 0x03CA

SUBROUTINE_0600:
133: 0x0600 [0x21] END_EVENT
134: 0x0601 [0x00] END_REQSTACK()
```
