# Event 640

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 12/30     |
| Offset          | 0x0CBB    |
| Data Size       | 272 bytes |
| Calculated Size | 272 bytes |
| Instructions    | 59        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0CB0:                                   03 19 00 02 10             .....
0CC0: 03 1B 00 06 10 03 1C 00  07 10 03 16 00 08 10 03  ................
0CD0: 22 00 09 10 42 4A F8 FF  FF 7F F0 FF FF 7F 4A F0  "...BJ........J.
0CE0: FF FF 7F F8 FF FF 7F 6F  70 66 01 80 F8 FF FF 7F  .......opf......
0CF0: F8 FF FF 7F 74 6C 6B 30  1D 81 80 23 66 01 80 F8  ....tlk0...#f...
0D00: FF FF 7F F8 FF FF 7F 74  6C 6B 31 1D 82 80 23 03  .......tlk1...#.
0D10: 06 10 1B 00 03 07 10 1C  00 66 01 80 F8 FF FF 7F  .........f......
0D20: F8 FF FF 7F 74 68 6B 31  1D 83 80 23 66 01 80 F8  ....thk1...#f...
0D30: FF FF 7F F8 FF FF 7F 74  68 6B 32 66 01 80 F8 FF  .......thk2f....
0D40: FF 7F F8 FF FF 7F 74 6C  6B 30 1D 84 80 23 1D 85  ......tlk0...#..
0D50: 80 23 1D 86 80 23 1D 87  80 23 1D 88 80 23 1D 89  .#...#...#...#..
0D60: 80 23 1D 8A 80 23 1D 8B  80 23 66 01 80 F8 FF FF  .#...#...#f.....
0D70: 7F F8 FF FF 7F 74 6C 6B  31 03 02 10 00 80 1D 8C  .....tlk1.......
0D80: 80 23 03 01 10 0D 80 43  00 43 01 02 09 10 00 80  .#.....C.C......
0D90: 03 95 0D 21 00 03 1B 00  02 10 03 1C 00 03 10 03  ...!............
0DA0: 23 00 04 10 1A 14 17 66  01 80 F8 FF FF 7F F8 FF  #......f........
0DB0: FF 7F 74 6C 6B 30 1D 8D  80 23 66 01 80 F8 FF FF  ..tlk0...#f.....
0DC0: 7F F8 FF FF 7F 74 6C 6B  31 21 00                 .....tlk1!.     
```

## Opcodes

```
  0: 0x0CBB [0x03] ExtData[1]->WorkLocal[25] = Work_Zone[2]
  1: 0x0CC0 [0x03] ExtData[1]->WorkLocal[27] = Work_Zone[6]
  2: 0x0CC5 [0x03] ExtData[1]->WorkLocal[28] = Work_Zone[7]
  3: 0x0CCA [0x03] ExtData[1]->WorkLocal[22] = Work_Zone[8]
  4: 0x0CCF [0x03] ExtData[1]->WorkLocal[34] = Work_Zone[9]
  5: 0x0CD4 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  6: 0x0CD5 [0x4A] EventEntity looks at LocalPlayer
  7: 0x0CDE [0x4A] LocalPlayer looks at EventEntity
  8: 0x0CE7 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  9: 0x0CE8 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
 10: 0x0CE9 [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=9*, entity1=EventEntity, entity2=EventEntity, action="tlk0")
 11: 0x0CF8 [0x1D] PRINT_EVENT_MESSAGE(message_id=16592*)
    → "Ahh... There you are. Shall we go over the next recipe, then?\u007F1\u0000\u0007"
 12: 0x0CFB [0x23] WAIT_FOR_DIALOG_INTERACTION
 13: 0x0CFC [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=9*, entity1=EventEntity, entity2=EventEntity, action="tlk1")
 14: 0x0D0B [0x1D] PRINT_EVENT_MESSAGE(message_id=16593*)
    → "Oh, you already know it? Forgive me.\u007F1\u0000\u0007"
 15: 0x0D0E [0x23] WAIT_FOR_DIALOG_INTERACTION
 16: 0x0D0F [0x03] Work_Zone[6] = ExtData[1]->WorkLocal[27]
 17: 0x0D14 [0x03] Work_Zone[7] = ExtData[1]->WorkLocal[28]
 18: 0x0D19 [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=9*, entity1=EventEntity, entity2=EventEntity, action="thk1")
 19: 0x0D28 [0x1D] PRINT_EVENT_MESSAGE(message_id=16594*)
    → "Okay, you would like to know how to obtain the \u0001\u0005#\u0002\u0004\u0000\u0000 and \u0001\u0005#\u0002\u0005\u0000\u0000? Very well. Listen carefully.\u007F1\u0000\u0007"
 20: 0x0D2B [0x23] WAIT_FOR_DIALOG_INTERACTION
 21: 0x0D2C [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=9*, entity1=EventEntity, entity2=EventEntity, action="thk2")
 22: 0x0D3B [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=9*, entity1=EventEntity, entity2=EventEntity, action="tlk0")
 23: 0x0D4A [0x1D] PRINT_EVENT_MESSAGE(message_id=16595*)
    → "Our guild has received an order for a particular item, but I need you to fulfill the order for me.\u007F1\u0000\u0007"
 24: 0x0D4D [0x23] WAIT_FOR_DIALOG_INTERACTION
 25: 0x0D4E [0x1D] PRINT_EVENT_MESSAGE(message_id=16596*)
    → "However, this one's a bit of a strange request, you see... Although there are a few exceptions, you need to craft the item close to the customer that placed the order.\u007F1\u0000\u0007"
 26: 0x0D51 [0x23] WAIT_FOR_DIALOG_INTERACTION
 27: 0x0D52 [0x1D] PRINT_EVENT_MESSAGE(message_id=16597*)
    → "Apparently, they want to make sure you know what you're doing and also keep an eye on the quality of the finished product. They won't accept items crafted anywhere else, so be sure to keep that in mind.\u007F1\u0000\u0007"
 28: 0x0D55 [0x23] WAIT_FOR_DIALOG_INTERACTION
 29: 0x0D56 [0x1D] PRINT_EVENT_MESSAGE(message_id=16598*)
    → "You'll need to gather the materials necessary to make the requested item. I'll leave how you obtain them up to you.\u007F1\u0000\u0007"
 30: 0x0D59 [0x23] WAIT_FOR_DIALOG_INTERACTION
 31: 0x0D5A [0x1D] PRINT_EVENT_MESSAGE(message_id=16599*)
    → "It's still in the trial phase, but an agreement between the guilds has enabled you to purchase certain products that were previously unavailable.\u007F1\u0000\u0007"
 32: 0x0D5D [0x23] WAIT_FOR_DIALOG_INTERACTION
 33: 0x0D5E [0x1D] PRINT_EVENT_MESSAGE(message_id=16600*)
    → "You can purchase the products from the vendor responsible for selling crafting sets in each guild.\u007F1\u0000\u0007"
 34: 0x0D61 [0x23] WAIT_FOR_DIALOG_INTERACTION
 35: 0x0D62 [0x1D] PRINT_EVENT_MESSAGE(message_id=16601*)
    → "However, each guild has its own set of guidelines. You may not be able to purchase the item you need, but you might get lucky from time to time.\u007F1\u0000\u0007"
 36: 0x0D65 [0x23] WAIT_FOR_DIALOG_INTERACTION
 37: 0x0D66 [0x1D] PRINT_EVENT_MESSAGE(message_id=16602*)
    → "Once you've delivered the goods, I'll give you the \u0001\u0005#\u0002\u0004\u0000\u0000 and \u0001\u0005#\u0002\u0005\u0000\u0000.\u007F1\u0000\u0007"
 38: 0x0D69 [0x23] WAIT_FOR_DIALOG_INTERACTION
 39: 0x0D6A [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=9*, entity1=EventEntity, entity2=EventEntity, action="tlk1")
 40: 0x0D79 [0x03] Work_Zone[2] = 0*
 41: 0x0D7E [0x1D] PRINT_EVENT_MESSAGE(message_id=16603*)
    → "Did you get all that? This is the \u000C\u0000[first/next/final] request.\u007F1\u0000\u0007"
 42: 0x0D81 [0x23] WAIT_FOR_DIALOG_INTERACTION
 43: 0x0D82 [0x03] Work_Zone[1] = 1*
 44: 0x0D87 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
 45: 0x0D89 [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
 46: 0x0D8B [0x02] IF !(Work_Zone[9] >= 0*) GOTO 0x0D95
 47: 0x0D93 [0x21] END_EVENT
 48: 0x0D94 [0x00] END_REQSTACK()

SUBROUTINE_0D95:
 49: 0x0D95 [0x03] ExtData[1]->WorkLocal[27] = Work_Zone[2]
 50: 0x0D9A [0x03] ExtData[1]->WorkLocal[28] = Work_Zone[3]
 51: 0x0D9F [0x03] ExtData[1]->WorkLocal[35] = Work_Zone[4]
 52: 0x0DA4 [0x1A] CALL_SUBROUTINE(address=0x1714)
 53: 0x0DA7 [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=9*, entity1=EventEntity, entity2=EventEntity, action="tlk0")
 54: 0x0DB6 [0x1D] PRINT_EVENT_MESSAGE(message_id=16609*)
    → "Remember to report back to me after you've completed the request.\u007F1\u0000\u0007"
 55: 0x0DB9 [0x23] WAIT_FOR_DIALOG_INTERACTION
 56: 0x0DBA [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=9*, entity1=EventEntity, entity2=EventEntity, action="tlk1")
 57: 0x0DC9 [0x21] END_EVENT
 58: 0x0DCA [0x00] END_REQSTACK()
```
