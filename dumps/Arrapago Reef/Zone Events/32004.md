# Event 32004

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 32/84     |
| Offset          | 0x0F67    |
| Data Size       | 854 bytes |
| Calculated Size | 854 bytes |
| Instructions    | 2         |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0F60:                      21  00 24 35 80 1F 80 02 80         !.$5.....
0F70: 25 02 00 10 02 80 00 7F  0F 05 02 00 01 7F 0F 1B  %...............
0F80: 02 04 00 32 80 80 8B 0F  01 4F 10 79 00 F0 FF FF  ...2.....O.y....
0F90: 7F F0 FF FF 7F 42 46 01  37 19 80 1A 80 1B 80 18  .....BF.7.......
0FA0: 80 45 83 80 F0 FF FF 7F  F0 FF FF 7F 62 63 35 34  .E..........bc54
0FB0: 02 80 1C 43 80 45 04 80  F0 FF FF 7F F0 FF FF 7F  ...C.E..........
0FC0: 66 64 69 31 02 80 48 84  80 23 27 03 3C 62 03 01  fdi1..H..#'.<b..
0FD0: 03 1C 85 80 27 04 3C 62  03 01 04 32 0A 80 1F 00  ....'.<b...2....
0FE0: 1C 80 1D 80 1E 80 1F 01  2A 04 3C 62 03 01 03 02  ........*.<b....
0FF0: 10 86 80 03 03 10 87 80  48 88 80 23 92 01 F0 FF  ........H..#....
1000: FF 7F 02 01 00 1F 80 80  16 10 37 3A 80 3B 80 3C  ..........7:.;.<
1010: 80 18 80 01 16 10 45 89  80 F0 FF FF 7F F0 FF FF  ......E.........
1020: 7F 62 61 63 6B 02 80 45  04 80 F0 FF FF 7F F0 FF  .back..E........
1030: FF 7F 66 64 69 31 02 80  55 04 80 F0 FF FF 7F F0  ..fdi1..U.......
1040: FF FF 7F 66 64 69 31 92  00 F0 FF FF 7F 46 00 1B  ...fdi1......F..
1050: 02 16 00 32 80 80 5B 10  01 D9 10 46 01 45 04 80  ...2..[....F.E..
1060: F0 FF FF 7F F0 FF FF 7F  66 64 6F 32 02 80 55 04  ........fdo2..U.
1070: 80 F0 FF FF 7F F0 FF FF  7F 66 64 6F 32 92 01 F0  .........fdo2...
1080: FF FF 7F 37 3A 80 59 80  5A 80 15 80 1A 16 12 1C  ...7:.Y.Z.......
1090: 43 80 5C 00 58 80 5C 01  58 80 5C 02 8A 80 5C 03  C.\.X.\.X.\...\.
10A0: 8B 80 9A 45 04 80 F0 FF  FF 7F F0 FF FF 7F 66 64  ...E..........fd
10B0: 69 31 02 80 55 04 80 F0  FF FF 7F F0 FF FF 7F 66  i1..U..........f
10C0: 64 69 31 62 2A 80 F0 FF  FF 7F F0 FF FF 7F 6D 61  di1b*.........ma
10D0: 69 6E 02 80 1C 27 80 46  00 1B 24 8C 80 1F 80 02  in...'.F..$.....
10E0: 80 25 02 00 10 02 80 00  F0 10 05 1A 00 01 F0 10  .%..............
10F0: 1B 05 1B 00 1B 46 01 37  3A 80 8D 80 8E 80 18 80  .....F.7:.......
1100: 1A 16 12 1C 1F 80 45 04  80 F0 FF FF 7F F0 FF FF  ......E.........
1110: 7F 66 64 69 31 02 80 62  1F 80 F0 FF FF 7F F0 FF  .fdi1..b........
1120: FF 7F 6D 61 69 6E 02 80  1C 05 80 45 04 80 F0 FF  ..main.....E....
1130: FF 7F F0 FF FF 7F 66 64  6F 32 02 80 55 04 80 F0  ......fdo2..U...
1140: FF FF 7F F0 FF FF 7F 66  64 6F 32 92 01 F0 FF FF  .......fdo2.....
1150: 7F 37 3A 80 59 80 5A 80  15 80 1A 16 12 5C 00 58  .7:.Y.Z......\.X
1160: 80 5C 01 58 80 5C 02 8A  80 5C 03 8B 80 9A 45 04  .\.X.\...\....E.
1170: 80 F0 FF FF 7F F0 FF FF  7F 66 64 69 31 02 80 55  .........fdi1..U
1180: 04 80 F0 FF FF 7F F0 FF  FF 7F 66 64 69 31 62 2A  ..........fdi1b*
1190: 80 F0 FF FF 7F F0 FF FF  7F 6D 61 69 6E 02 80 1C  .........main...
11A0: 27 80 46 00 1B 6C F0 FF  FF 7F 02 80 1F 80 46 01  '.F..l........F.
11B0: 92 01 F0 FF FF 7F 37 3A  80 59 80 5A 80 15 80 1A  ......7:.Y.Z....
11C0: 16 12 5C 00 58 80 5C 01  58 80 5C 02 8A 80 5C 03  ..\.X.\.X.\...\.
11D0: 8B 80 9A 45 04 80 F0 FF  FF 7F F0 FF FF 7F 66 64  ...E..........fd
11E0: 69 31 02 80 55 04 80 F0  FF FF 7F F0 FF FF 7F 66  i1..U..........f
11F0: 64 69 31 62 2A 80 F0 FF  FF 7F F0 FF FF 7F 6D 61  di1b*.........ma
1200: 69 6E 02 80 1C 27 80 46  00 1B 02 04 00 02 80 80  in...'.F........
1210: 15 12 01 15 12 1B 6C F0  FF FF 7F 5E 80 1F 80 1C  ......l....^....
1220: 1F 80 45 89 80 F0 FF FF  7F F0 FF FF 7F 62 61 63  ..E..........bac
1230: 6B 02 80 1C 1F 80 6C F0  FF FF 7F 02 80 1F 80 1B  k.....l.........
1240: 02 01 00 1F 80 80 5F 12  03 0A 00 3A 80 03 0B 00  ......_....:....
1250: 3B 80 03 0C 00 3C 80 03  0D 00 18 80 01 BC 12 02  ;....<..........
1260: 01 00 2A 80 80 7E 12 03  0A 00 02 80 03 0B 00 02  ..*..~..........
1270: 80 03 0C 00 02 80 03 0D  00 02 80 01 BC 12 02 01  ................
1280: 00 2C 80 80 9D 12 03 0A  00 02 80 03 0B 00 02 80  .,..............
1290: 03 0C 00 02 80 03 0D 00  02 80 01 BC 12 02 01 00  ................
12A0: 38 80 80 BC 12 03 0A 00  02 80 03 0B 00 02 80 03  8...............
12B0: 0C 00 02 80 03 0D 00 02  80 01 BC 12 1B           .............   
```

## Opcodes

```
  0: 0x0F67 [0x21] END_EVENT
  1: 0x0F68 [0x00] END_REQSTACK()
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x0F69 [0x24] CREATE_DIALOG(message_id=7549*, default_option=1*, option_flags=0*)
    → "Enter the battlefield?\u0007\u000BEnter.\u0007Decline.\u007F1\u0000\u0007"
     0x0F70 [0x25] WAIT_DIALOG_SELECT()
     0x0F71 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x0F7F
     0x0F79 [0x05] ExtData[1]->WorkLocal[2] = 1
     0x0F7C [0x01] GOTO 0x0F7F
     0x0F7F [0x1B] RETURN
     0x0F80 [0x02] IF !(ExtData[1]->WorkLocal[4] == 31*) GOTO 0x0F8B
     0x0F88 [0x01] GOTO 0x104F
     0x0F8B [0x79] LocalPlayer looks at LocalPlayer (Basic look)
     0x0F95 [0x42] SET_CLI_EVENT_CANCEL_DATA()
     0x0F96 [0x46] CAMERA_CONTROL: Disable user control
     0x0F98 [0x37] UPDATE_EVENT_POSITION_AND_DIR: x=-59.971*, z=-362.605*, y=-7.767*, direction=270.0°*
     0x0FA1 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "bc54" with entities [LocalPlayer, LocalPlayer], work=[217*, 0*]
     0x0FB2 [0x1C] WAIT(10* ticks)
     0x0FB5 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x0FC6 [0x48] [System] [8006*]:
    → "All of a sudden, the tiny Merrow and Lamia begin to sing...\u0007\u00072Eternal love...awaits you...after the dream.\u00073\u0007The other side of the gate grows silent, and then you hear a voice...\u0007\u00072Enter, repulsive ones who would peddle their souls...\u00073\u007F1\u0000\u0007"
     0x0FC9 [0x23] WAIT_FOR_DIALOG_INTERACTION
     0x0FCA [0x27] REQ_SET(priority=0x03, entity_id=Tidal Gate (ID: 16998972/0x0103623C), tag_num=0x03)
     0x0FD1 [0x1C] WAIT(90* ticks)
     0x0FD4 [0x27] REQ_SET(priority=0x04, entity_id=Tidal Gate (ID: 16998972/0x0103623C), tag_num=0x04)
     0x0FDB [0x32] ExtData[1]->MainSpeed = 13* * 0.1
     0x0FDE [0x1F] MOVE_ENTITY: EventEntity moves to X=-60.059*, Z=-355.628*, Y=-7.755*
     0x0FE6 [0x1F] MOVE_ENTITY: Update entity position (mode=1)
     0x0FE8 [0x2A] GET_REQ_LEVEL(level=4, entity_id=Tidal Gate (ID: 16998972/0x0103623C))
     0x0FEE [0x03] Work_Zone[2] = 803*
     0x0FF3 [0x03] Work_Zone[3] = 804*
     0x0FF8 [0x48] [System] [8007*]:
    → "The \u0001\u00053\u0002\u0000\u0000\u0000 and \u0001\u00053\u0002\u0001\u0000\u0000 run away snickering as the flasks simultaneously crumble into dust...\u007F1\u0000\u0007"
     0x0FFB [0x23] WAIT_FOR_DIALOG_INTERACTION
     0x0FFC [0x92] LocalPlayer->Render.Flags3 ^= 0x01
     0x1002 [0x02] IF !(ExtData[1]->WorkLocal[1] == 1*) GOTO 0x1016
     0x100A [0x37] UPDATE_EVENT_POSITION_AND_DIR: x=-60.000*, z=-348.000*, y=-7.750*, direction=270.0°*
     0x1013 [0x01] GOTO 0x1016
     0x1016 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "back" with entities [LocalPlayer, LocalPlayer], work=[108*, 0*]
     0x1027 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x1038 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=200*
     0x1047 [0x92] LocalPlayer->Render.Flags3 = Flags3  // No change (flag=0)
     0x104D [0x46] CAMERA_CONTROL: Restore default settings
     0x104F [0x1B] RETURN
     0x1050 [0x02] IF !(ExtData[1]->WorkLocal[22] == 31*) GOTO 0x105B
     0x1058 [0x01] GOTO 0x10D9
     0x105B [0x46] CAMERA_CONTROL: Disable user control
     0x105D [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo2" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x106E [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo2" with entities [LocalPlayer, LocalPlayer], work=200*
     0x107D [0x92] LocalPlayer->Render.Flags3 ^= 0x01
     0x1083 [0x37] UPDATE_EVENT_POSITION_AND_DIR: x=-60.000*, z=-380.000*, y=-8.000*, direction=90.0°*
     0x108C [0x1A] CALL_SUBROUTINE(address=0x1216)
     0x108F [0x1C] WAIT(10* ticks)
     0x1092 [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 150*
     0x1096 [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 150*
     0x109A [0x5C] MUSIC_CONTROL: Set Combat (Solo) music to song 115*
     0x109E [0x5C] MUSIC_CONTROL: Set Combat (Party) music to song 139*
     0x10A2 [0x9A] WAIT_MUSIC_SERVER()
     0x10A3 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x10B4 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=200*
     0x10C3 [0x62] LOAD_EVENT_SCHEDULER: Load scheduler "main" with entities [LocalPlayer, LocalPlayer], work=[2*, 0*]
     0x10D4 [0x1C] WAIT(120* ticks)
     0x10D7 [0x46] CAMERA_CONTROL: Restore default settings
     0x10D9 [0x1B] RETURN
     0x10DA [0x24] CREATE_DIALOG(message_id=7550*, default_option=1*, option_flags=0*)
    → "Leave the battlefield?\u0007\u000BRun away.\u0007Stay.\u007F1\u0000\u0007"
     0x10E1 [0x25] WAIT_DIALOG_SELECT()
     0x10E2 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x10F0
     0x10EA [0x05] ExtData[1]->WorkLocal[26] = 1
     0x10ED [0x01] GOTO 0x10F0
     0x10F0 [0x1B] RETURN
     0x10F1 [0x05] ExtData[1]->WorkLocal[27] = 1
     0x10F4 [0x1B] RETURN
     0x10F5 [0x46] CAMERA_CONTROL: Disable user control
     0x10F7 [0x37] UPDATE_EVENT_POSITION_AND_DIR: x=-60.000*, z=-355.500*, y=-8.200*, direction=270.0°*
     0x1100 [0x1A] CALL_SUBROUTINE(address=0x1216)
     0x1103 [0x1C] WAIT(1* ticks)
     0x1106 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x1117 [0x62] LOAD_EVENT_SCHEDULER: Load scheduler "main" with entities [LocalPlayer, LocalPlayer], work=[1*, 0*]
     0x1128 [0x1C] WAIT(60* ticks)
     0x112B [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo2" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x113C [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo2" with entities [LocalPlayer, LocalPlayer], work=200*
     0x114B [0x92] LocalPlayer->Render.Flags3 ^= 0x01
     0x1151 [0x37] UPDATE_EVENT_POSITION_AND_DIR: x=-60.000*, z=-380.000*, y=-8.000*, direction=90.0°*
     0x115A [0x1A] CALL_SUBROUTINE(address=0x1216)
     0x115D [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 150*
     0x1161 [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 150*
     0x1165 [0x5C] MUSIC_CONTROL: Set Combat (Solo) music to song 115*
     0x1169 [0x5C] MUSIC_CONTROL: Set Combat (Party) music to song 139*
     0x116D [0x9A] WAIT_MUSIC_SERVER()
     0x116E [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x117F [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=200*
     0x118E [0x62] LOAD_EVENT_SCHEDULER: Load scheduler "main" with entities [LocalPlayer, LocalPlayer], work=[2*, 0*]
     0x119F [0x1C] WAIT(120* ticks)
     0x11A2 [0x46] CAMERA_CONTROL: Restore default settings
     0x11A4 [0x1B] RETURN
     0x11A5 [0x6C] FADE_ENTITY_COLOR(entity_id=LocalPlayer, end_alpha=0*, fade_time=1*)
     0x11AE [0x46] CAMERA_CONTROL: Disable user control
     0x11B0 [0x92] LocalPlayer->Render.Flags3 ^= 0x01
     0x11B6 [0x37] UPDATE_EVENT_POSITION_AND_DIR: x=-60.000*, z=-380.000*, y=-8.000*, direction=90.0°*
     0x11BF [0x1A] CALL_SUBROUTINE(address=0x1216)
     0x11C2 [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 150*
     0x11C6 [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 150*
     0x11CA [0x5C] MUSIC_CONTROL: Set Combat (Solo) music to song 115*
     0x11CE [0x5C] MUSIC_CONTROL: Set Combat (Party) music to song 139*
     0x11D2 [0x9A] WAIT_MUSIC_SERVER()
     0x11D3 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x11E4 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=200*
     0x11F3 [0x62] LOAD_EVENT_SCHEDULER: Load scheduler "main" with entities [LocalPlayer, LocalPlayer], work=[2*, 0*]
     0x1204 [0x1C] WAIT(120* ticks)
     0x1207 [0x46] CAMERA_CONTROL: Restore default settings
     0x1209 [0x1B] RETURN
     0x120A [0x02] IF !(ExtData[1]->WorkLocal[4] == 0*) GOTO 0x1215
     0x1212 [0x01] GOTO 0x1215
     0x1215 [0x1B] RETURN
     0x1216 [0x6C] FADE_ENTITY_COLOR(entity_id=LocalPlayer, end_alpha=128*, fade_time=1*)
     0x121F [0x1C] WAIT(1* ticks)
     0x1222 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "back" with entities [LocalPlayer, LocalPlayer], work=[108*, 0*]
     0x1233 [0x1C] WAIT(1* ticks)
     0x1236 [0x6C] FADE_ENTITY_COLOR(entity_id=LocalPlayer, end_alpha=0*, fade_time=1*)
     0x123F [0x1B] RETURN
     0x1240 [0x02] IF !(ExtData[1]->WorkLocal[1] == 1*) GOTO 0x125F
     0x1248 [0x03] ExtData[1]->WorkLocal[10] = 4294907296*
     0x124D [0x03] ExtData[1]->WorkLocal[11] = 4294619296*
     0x1252 [0x03] ExtData[1]->WorkLocal[12] = 4294959546*
     0x1257 [0x03] ExtData[1]->WorkLocal[13] = 3072*
     0x125C [0x01] GOTO 0x12BC
     0x125F [0x02] IF !(ExtData[1]->WorkLocal[1] == 2*) GOTO 0x127E
     0x1267 [0x03] ExtData[1]->WorkLocal[10] = 0*
     0x126C [0x03] ExtData[1]->WorkLocal[11] = 0*
     0x1271 [0x03] ExtData[1]->WorkLocal[12] = 0*
     0x1276 [0x03] ExtData[1]->WorkLocal[13] = 0*
     0x127B [0x01] GOTO 0x12BC
     0x127E [0x02] IF !(ExtData[1]->WorkLocal[1] == 3*) GOTO 0x129D
     0x1286 [0x03] ExtData[1]->WorkLocal[10] = 0*
     0x128B [0x03] ExtData[1]->WorkLocal[11] = 0*
     0x1290 [0x03] ExtData[1]->WorkLocal[12] = 0*
     0x1295 [0x03] ExtData[1]->WorkLocal[13] = 0*
     0x129A [0x01] GOTO 0x12BC
     0x129D [0x02] IF !(ExtData[1]->WorkLocal[1] == 4*) GOTO 0x12BC
     0x12A5 [0x03] ExtData[1]->WorkLocal[10] = 0*
     0x12AA [0x03] ExtData[1]->WorkLocal[11] = 0*
     0x12AF [0x03] ExtData[1]->WorkLocal[12] = 0*
     0x12B4 [0x03] ExtData[1]->WorkLocal[13] = 0*
     0x12B9 [0x01] GOTO 0x12BC
     0x12BC [0x1B] RETURN
```