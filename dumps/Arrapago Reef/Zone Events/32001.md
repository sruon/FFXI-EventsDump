# Event 32001

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 30/84     |
| Offset          | 0x0BB1    |
| Data Size       | 515 bytes |
| Calculated Size | 515 bytes |
| Instructions    | 84        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0BB0:    79 00 F0 FF FF 7F F0  FF FF 7F 03 1E 00 02 10   y..............
0BC0: 03 17 00 03 10 03 18 00  05 10 03 1D 00 06 10 03  ................
0BD0: 16 00 07 10 03 14 00 08  10 03 19 00 09 10 20 01  .............. .
0BE0: 42 3B F0 FF FF 7F 20 10  21 10 22 10 3A F0 FF FF  B;.... .!.".:...
0BF0: 7F 23 10 02 1D 00 5C 80  01 FE 0B 1C 5D 80 45 01  .#....\.....].E.
0C00: 80 F0 FF FF 7F F0 FF FF  7F 77 68 69 31 02 80 45  .........whi1..E
0C10: 04 80 F0 FF FF 7F F0 FF  FF 7F 62 6C 6F 66 02 80  ..........blof..
0C20: 45 04 80 F0 FF FF 7F F0  FF FF 7F 66 64 6F 31 02  E..........fdo1.
0C30: 80 55 04 80 F0 FF FF 7F  F0 FF FF 7F 66 64 6F 31  .U..........fdo1
0C40: 6C F0 FF FF 7F 5E 80 1F  80 06 01 10 02 14 00 02  l....^..........
0C50: 80 03 57 0C 01 6E 0C 02  1D 00 5B 80 80 62 0C 01  ..W..n....[..b..
0C60: 6E 0C 47 00 3A 80 59 80  5A 80 15 80 47 01 38 37  n.G.:.Y.Z...G.87
0C70: 80 02 14 00 1F 80 00 D0  0C 1C 30 80 24 55 80 1F  ..........0.$U..
0C80: 80 02 80 25 02 00 10 02  80 00 D0 0C 37 3A 80 59  ...%........7:.Y
0C90: 80 5A 80 15 80 80 F0 FF  FF 7F 62 2A 80 F0 FF FF  .Z........b*....
0CA0: 7F F0 FF FF 7F 6D 61 69  6E 02 80 45 04 80 F0 FF  .....main..E....
0CB0: FF 7F F0 FF FF 7F 66 64  69 32 02 80 46 02 10 00  ......fdi2..F...
0CC0: 02 10 00 02 80 00 CA 0C  46 00 01 F7 0C 01 D0 0C  ........F.......
0CD0: 02 14 00 33 80 04 E9 0C  5C 00 56 80 5C 01 56 80  ...3....\.V.\.V.
0CE0: 5C 02 56 80 5C 03 56 80  9A 1A 50 10 02 14 00 02  \.V.\.V...P.....
0CF0: 80 03 F7 0C 01 4C 0D 03  05 10 18 00 02 05 10 02  .....L..........
0D00: 80 02 4C 0D 02 05 10 05  80 04 1B 0D 3F 04 10 05  ..L.........?...
0D10: 10 05 80 15 05 10 05 80  01 1B 0D 02 18 00 17 00  ................
0D20: 05 2B 0D 03 07 10 16 00  01 4C 0D 02 17 00 05 80  .+.......L......
0D30: 04 47 0D 03 05 10 17 00  3F 04 10 05 10 05 80 15  .G......?.......
0D40: 05 10 05 80 01 4C 0D 03  05 10 17 00 02 15 00 02  .....L..........
0D50: 80 00 64 0D 5C 00 58 80  5C 01 58 80 5C 02 56 80  ..d.\.X.\.X.\.V.
0D60: 5C 03 56 80 02 14 00 02  80 03 8D 0D 45 04 80 F0  \.V.........E...
0D70: FF FF 7F F0 FF FF 7F 66  64 69 32 02 80 5C 00 58  .......fdi2..\.X
0D80: 80 5C 01 58 80 5C 02 56  80 5C 03 56 80 06 15 00  .\.X.\.V.\.V....
0D90: 45 01 80 F0 FF FF 7F F0  FF FF 7F 77 68 69 31 02  E..........whi1.
0DA0: 80 45 04 80 F0 FF FF 7F  F0 FF FF 7F 62 6C 6F 66  .E..........blof
0DB0: 02 80 21 00                                       ..!.            
```

## Opcodes

```
  0: 0x0BB1 [0x79] LocalPlayer looks at LocalPlayer (Basic look)
  1: 0x0BBB [0x03] ExtData[1]->WorkLocal[30] = Work_Zone[2]
  2: 0x0BC0 [0x03] ExtData[1]->WorkLocal[23] = Work_Zone[3]
  3: 0x0BC5 [0x03] ExtData[1]->WorkLocal[24] = Work_Zone[5]
  4: 0x0BCA [0x03] ExtData[1]->WorkLocal[29] = Work_Zone[6]
  5: 0x0BCF [0x03] ExtData[1]->WorkLocal[22] = Work_Zone[7]
  6: 0x0BD4 [0x03] ExtData[1]->WorkLocal[20] = Work_Zone[8]
  7: 0x0BD9 [0x03] ExtData[1]->WorkLocal[25] = Work_Zone[9]
  8: 0x0BDE [0x20] SET_CLI_EVENT_UC_FLAG: Lock player control
  9: 0x0BE0 [0x42] SET_CLI_EVENT_CANCEL_DATA()
 10: 0x0BE1 [0x3B] GET_ENTITY_POSITION(entity=LocalPlayer, x_destination=Work_Zone[32], y_destination=Work_Zone[33], z_destination=Work_Zone[34])
 11: 0x0BEC [0x3A] CONVERT_YAW_TO_BYTE(entity=LocalPlayer, result_destination=Work_Zone[35])
 12: 0x0BF3 [0x02] IF !(ExtData[1]->WorkLocal[29] == 180*) GOTO 0x0BFE
 13: 0x0BFB [0x1C] WAIT(300* ticks)
 14: 0x0BFE [0x45] LOAD_SCHEDULED_TASK: Load scheduler "whi1" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
 15: 0x0C0F [0x45] LOAD_SCHEDULED_TASK: Load scheduler "blof" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 16: 0x0C20 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 17: 0x0C31 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=200*
 18: 0x0C40 [0x6C] FADE_ENTITY_COLOR(entity_id=LocalPlayer, end_alpha=128*, fade_time=1*)
 19: 0x0C49 [0x06] Work_Zone[1] = 0
 20: 0x0C4C [0x02] IF !(ExtData[1]->WorkLocal[20] >= 0*) GOTO 0x0C57
 21: 0x0C54 [0x01] GOTO 0x0C6E
 22: 0x0C57 [0x02] IF !(ExtData[1]->WorkLocal[29] == 999*) GOTO 0x0C62
 23: 0x0C5F [0x01] GOTO 0x0C6E
 24: 0x0C62 [0x47] UPDATE_PLAYER_POS(-60.000*, -380.000*, -8.000*, yaw=90.0°*)
 25: 0x0C6C [0x47] WAIT_PLAYER_POS_UPDATE
 26: 0x0C6E [0x38] SET_CLIENT_EVENT_MODE(mode=19*)
 27: 0x0C71 [0x02] IF !(ExtData[1]->WorkLocal[20] == 1*) GOTO 0x0CD0
 28: 0x0C79 [0x1C] WAIT(15* ticks)
 29: 0x0C7C [0x24] CREATE_DIALOG(message_id=7888*, default_option=1*, option_flags=0*)
    → "Skip the event?\u0007\u000BYes.\u0007No.\u007F1\u0000\u0007"
 30: 0x0C83 [0x25] WAIT_DIALOG_SELECT()
 31: 0x0C84 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x0CD0
 32: 0x0C8C [0x37] UPDATE_EVENT_POSITION_AND_DIR: x=-60.000*, z=-380.000*, y=-8.000*, direction=90.0°*
 33: 0x0C95 [0x80] LOAD_WAIT(entity=LocalPlayer)
 34: 0x0C9A [0x62] LOAD_EVENT_SCHEDULER: Load scheduler "main" with entities [LocalPlayer, LocalPlayer], work=[2*, 0*]
 35: 0x0CAB [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi2" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 36: 0x0CBC [0x46] CAMERA_CONTROL: Query status
 37: 0x0CBE [0x10] 0x0200 <<= ExtData[1]->WorkLocal[16]
 38: 0x0CC3 [0x02] IF !(0x80 & 0x0CCA) GOTO 0x0100
 39: 0x0CCB [0xF7] UNKNOWN_OPCODE_0xF7
 40: 0x0CCC [0x0C] 0xD001--
 41: 0x0CCF [0x0C] 0x1402--
 42: 0x0CD2 [0x00] END_REQSTACK()
 43: 0x0CD3 [0x33] EventEntity->Render.Flags0 ^= 0x200000 // Bit 21 (flag=0x80)
 44: 0x0CD5 [0x04] DEPRECATED_NOP(unused=0x0CE9)
 45: 0x0CD8 [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 143*
 46: 0x0CDC [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 143*
 47: 0x0CE0 [0x5C] MUSIC_CONTROL: Set Combat (Solo) music to song 143*
 48: 0x0CE4 [0x5C] MUSIC_CONTROL: Set Combat (Party) music to song 143*
 49: 0x0CE8 [0x9A] WAIT_MUSIC_SERVER()
 50: 0x0CE9 [0x1A] CALL_SUBROUTINE(address=0x1050)
 51: 0x0CEC [0x02] IF !(ExtData[1]->WorkLocal[20] >= 0*) GOTO 0x0CF7
 52: 0x0CF4 [0x01] GOTO 0x0D4C
 53: 0x0CF7 [0x03] Work_Zone[5] = ExtData[1]->WorkLocal[24]
 54: 0x0CFC [0x02] IF !(Work_Zone[5] <= 0*) GOTO 0x0D4C
 55: 0x0D04 [0x02] IF !(Work_Zone[5] < 60*) GOTO 0x0D1B
 56: 0x0D0C [0x3F] Work_Zone[4] = Work_Zone[5] % 60*
 57: 0x0D13 [0x15] Work_Zone[5] /= 60*
 58: 0x0D18 [0x01] GOTO 0x0D1B

SUBROUTINE_0D1B:
 59: 0x0D1B [0x02] IF !(ExtData[1]->WorkLocal[24] > ExtData[1]->WorkLocal[23]) GOTO 0x0D2B
 60: 0x0D23 [0x03] Work_Zone[7] = ExtData[1]->WorkLocal[22]
 61: 0x0D28 [0x01] GOTO 0x0D4C
 62: 0x0D2B [0x02] IF !(ExtData[1]->WorkLocal[23] < 60*) GOTO 0x0D47
 63: 0x0D33 [0x03] Work_Zone[5] = ExtData[1]->WorkLocal[23]
 64: 0x0D38 [0x3F] Work_Zone[4] = Work_Zone[5] % 60*
 65: 0x0D3F [0x15] Work_Zone[5] /= 60*
 66: 0x0D44 [0x01] GOTO 0x0D4C
 67: 0x0D47 [0x03] Work_Zone[5] = ExtData[1]->WorkLocal[23]
 68: 0x0D4C [0x02] IF !(ExtData[1]->WorkLocal[21] == 0*) GOTO 0x0D64
 69: 0x0D54 [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 150*
 70: 0x0D58 [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 150*
 71: 0x0D5C [0x5C] MUSIC_CONTROL: Set Combat (Solo) music to song 143*
 72: 0x0D60 [0x5C] MUSIC_CONTROL: Set Combat (Party) music to song 143*
 73: 0x0D64 [0x02] IF !(ExtData[1]->WorkLocal[20] >= 0*) GOTO 0x0D8D
 74: 0x0D6C [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi2" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 75: 0x0D7D [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 150*
 76: 0x0D81 [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 150*
 77: 0x0D85 [0x5C] MUSIC_CONTROL: Set Combat (Solo) music to song 143*
 78: 0x0D89 [0x5C] MUSIC_CONTROL: Set Combat (Party) music to song 143*
 79: 0x0D8D [0x06] ExtData[1]->WorkLocal[21] = 0
 80: 0x0D90 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "whi1" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
 81: 0x0DA1 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "blof" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 82: 0x0DB2 [0x21] END_EVENT
 83: 0x0DB3 [0x00] END_REQSTACK()
```
