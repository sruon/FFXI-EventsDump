# Event 24

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 3/4       |
| Offset          | 0x0002    |
| Data Size       | 338 bytes |
| Calculated Size | 338 bytes |
| Instructions    | 66        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000:       24 00 80 01 80 01  80 25 02 00 10 02 80 00    $......%......
0010: 26 00 03 01 10 03 80 47  00 04 80 05 80 06 80 07  &......G........
0020: 80 47 01 01 54 00 02 00  10 08 80 00 46 00 45 09  .G..T.......F.E.
0030: 80 F0 FF FF 7F F0 FF FF  7F 00 FE FE FE 01 80 48  ...............H
0040: 0A 80 23 01 54 00 02 00  10 0B 80 00 54 00 1A 56  ..#.T.......T..V
0050: 00 01 54 00 21 00 5C 00  01 80 5C 01 01 80 5C 02  ..T.!.\...\...\.
0060: 01 80 5C 03 01 80 9A 46  01 24 0C 80 02 80 01 80  ..\....F.$......
0070: 25 02 00 10 01 80 00 7F  00 1A 54 01 01 51 01 02  %.........T..Q..
0080: 00 10 02 80 00 BC 00 42  1A 01 15 46 01 38 0D 80  .......B...F.8..
0090: AB 09 79 00 F0 FF FF 7F  F0 FF FF 7F 27 10 4B 81  ..y.........'.K.
00A0: 0B 01 04 27 10 4C 81 0B  01 04 92 01 4B 81 0B 01  ...'.L......K...
00B0: 92 01 4C 81 0B 01 1A BC  03 01 51 01 02 00 10 08  ..L.......Q.....
00C0: 80 00 43 01 42 1A 43 15  46 01 38 0D 80 79 00 F0  ..C.B.C.F.8..y..
00D0: FF FF 7F F0 FF FF 7F 27  10 4B 81 0B 01 04 27 10  .......'.K....'.
00E0: 4C 81 0B 01 04 92 01 4B  81 0B 01 92 01 4C 81 0B  L......K.....L..
00F0: 01 34 0E 80 77 0F 80 08  80 1C 10 80 2D F8 FF FF  .4..w.......-...
0100: 7F F8 FF FF 7F 30 31 6F  6E 2D F8 FF FF 7F F8 FF  .....01on-......
0110: FF 7F 30 32 6F 6E 2D F8  FF FF 7F F8 FF FF 7F 33  ..02on-........3
0120: 6F 66 66 2D F8 FF FF 7F  F8 FF FF 7F 30 34 6F 6E  off-........04on
0130: 2D F8 FF FF 7F F8 FF FF  7F 30 35 6F 6E 1A 32 11  -........05on.2.
0140: 01 51 01 02 00 10 0B 80  00 51 01 1A 9D 14 01 51  .Q.......Q.....Q
0150: 01 46 00 1B                                       .F..            
```

## Opcodes

```
  0: 0x0002 [0x24] CREATE_DIALOG(message_id=7508*, default_option=0*, option_flags=0*)
    → "\u000CB\u0010l\u0003f\u0003o\u0003b\u0003O\u0017p\u0003\u0001\u0003j\u0003\u0005\u0001[\u0007\u000B\u0003L\u0003\u0003\u0003\u0013\u0003Z\u0003\u000B\u0007\u0003\u000F\u0001[\u0003v\u0007\u0003J\u0003\u0001\u0003	\u0007\u0003C\u0003x\u0003\u0013\u0003g\u007F1\u0000\u0007"
  1: 0x0009 [0x25] WAIT_DIALOG_SELECT()
  2: 0x000A [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x0026
  3: 0x0012 [0x03] Work_Zone[1] = 90*
  4: 0x0017 [0x47] UPDATE_PLAYER_POS(12.286*, -113.219*, -35.101*, yaw=246.5°*)
  5: 0x0021 [0x47] WAIT_PLAYER_POS_UPDATE
  6: 0x0023 [0x01] GOTO 0x0054

SUBROUTINE_0026:
  7: 0x0026 [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x0046
  8: 0x002E [0x45] LOAD_SCHEDULED_TASK: Load scheduler 0xFEFEFE00 with entities [LocalPlayer, LocalPlayer], work=[154*, 0*]
  9: 0x003F [0x48] [System] [7510*]:
    → "\u0003{\u0003^\u0003\u0013	\u001F\u00027\u0002F\u000E\u001F\u0002V\u0010i\u0002]\u0002\\u00027\u007F1\u0000\u0007"
 10: 0x0042 [0x23] WAIT_FOR_DIALOG_INTERACTION
 11: 0x0043 [0x01] GOTO 0x0054

SUBROUTINE_0046:
 12: 0x0046 [0x02] IF !(Work_Zone[0] == 3*) GOTO 0x0054
 13: 0x004E [0x1A] CALL_SUBROUTINE(address=0x0056)
 14: 0x0051 [0x01] GOTO 0x0054

SUBROUTINE_0054:
 15: 0x0054 [0x21] END_EVENT
 16: 0x0055 [0x00] END_REQSTACK()

SUBROUTINE_0056:
 17: 0x0056 [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 0*
 18: 0x005A [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 0*
 19: 0x005E [0x5C] MUSIC_CONTROL: Set Combat (Solo) music to song 0*
 20: 0x0062 [0x5C] MUSIC_CONTROL: Set Combat (Party) music to song 0*
 21: 0x0066 [0x9A] WAIT_MUSIC_SERVER()
 22: 0x0067 [0x46] CAMERA_CONTROL: Disable user control
 23: 0x0069 [0x24] CREATE_DIALOG(message_id=7509*, default_option=1*, option_flags=0*)
    → "\u0003C\u0003x\u0003\u0013\u0003g\u0002p\u0011I\u0011p\u0007\u000B\u0011O\u0010U\u0002h\u0007\u0011O\u0014<\u0007\u000Cc\u0014<\u0007\u00122\u0010.\u0017p\u007F1\u0000\u0007"
 24: 0x0070 [0x25] WAIT_DIALOG_SELECT()
 25: 0x0071 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x007F
 26: 0x0079 [0x1A] CALL_SUBROUTINE(address=0x0154)
 27: 0x007C [0x01] GOTO 0x0151

SUBROUTINE_007F:
 28: 0x007F [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x00BC
 29: 0x0087 [0x42] SET_CLI_EVENT_CANCEL_DATA()
 30: 0x0088 [0x1A] CALL_SUBROUTINE(address=0x1501)
 31: 0x008B [0x46] CAMERA_CONTROL: Disable user control
 32: 0x008D [0x38] SET_CLIENT_EVENT_MODE(mode=19*)
 33: 0x0090 [0xAB] EventEntity->UnknownFlag = 1 // Enable unknown flag
 34: 0x0092 [0x79] LocalPlayer looks at LocalPlayer (Basic look)
 35: 0x009C [0x27] REQ_SET(priority=0x10, entity_id=Tenzen (ID: 17531211/0x010B814B), tag_num=0x04)
 36: 0x00A3 [0x27] REQ_SET(priority=0x10, entity_id=Nag'molada (ID: 17531212/0x010B814C), tag_num=0x04)
 37: 0x00AA [0x92] Tenzen (ID: 17531211/0x010B814B)->Render.Flags3 ^= 0x01
 38: 0x00B0 [0x92] Nag'molada (ID: 17531212/0x010B814C)->Render.Flags3 ^= 0x01
 39: 0x00B6 [0x1A] CALL_SUBROUTINE(address=0x03BC)
 40: 0x00B9 [0x01] GOTO 0x0151

SUBROUTINE_00BC:
 41: 0x00BC [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x0143
 42: 0x00C4 [0x42] SET_CLI_EVENT_CANCEL_DATA()
 43: 0x00C5 [0x1A] CALL_SUBROUTINE(address=0x1543)
 44: 0x00C8 [0x46] CAMERA_CONTROL: Disable user control
 45: 0x00CA [0x38] SET_CLIENT_EVENT_MODE(mode=19*)
 46: 0x00CD [0x79] LocalPlayer looks at LocalPlayer (Basic look)
 47: 0x00D7 [0x27] REQ_SET(priority=0x10, entity_id=Tenzen (ID: 17531211/0x010B814B), tag_num=0x04)
 48: 0x00DE [0x27] REQ_SET(priority=0x10, entity_id=Nag'molada (ID: 17531212/0x010B814C), tag_num=0x04)
 49: 0x00E5 [0x92] Tenzen (ID: 17531211/0x010B814B)->Render.Flags3 ^= 0x01
 50: 0x00EB [0x92] Nag'molada (ID: 17531212/0x010B814C)->Render.Flags3 ^= 0x01
 51: 0x00F1 [0x34] LOAD_UNLOAD_ZONE(zone_id=540*)
 52: 0x00F4 [0x77] SET_EVENT_TIME_WEATHER(hour=12*, weather=2*)
 53: 0x00F9 [0x1C] WAIT(15* ticks)
 54: 0x00FC [0x2D] CREATE_ZONE_SCHEDULER_TASK: Create scheduler "01on" with entities [EventEntity, EventEntity]
 55: 0x0109 [0x2D] CREATE_ZONE_SCHEDULER_TASK: Create scheduler "02on" with entities [EventEntity, EventEntity]
 56: 0x0116 [0x2D] CREATE_ZONE_SCHEDULER_TASK: Create scheduler "3off" with entities [EventEntity, EventEntity]
 57: 0x0123 [0x2D] CREATE_ZONE_SCHEDULER_TASK: Create scheduler "04on" with entities [EventEntity, EventEntity]
 58: 0x0130 [0x2D] CREATE_ZONE_SCHEDULER_TASK: Create scheduler "05on" with entities [EventEntity, EventEntity]
 59: 0x013D [0x1A] CALL_SUBROUTINE(address=0x1132)
 60: 0x0140 [0x01] GOTO 0x0151

SUBROUTINE_0143:
 61: 0x0143 [0x02] IF !(Work_Zone[0] == 3*) GOTO 0x0151
 62: 0x014B [0x1A] CALL_SUBROUTINE(address=0x149D)
 63: 0x014E [0x01] GOTO 0x0151

SUBROUTINE_0151:
 64: 0x0151 [0x46] CAMERA_CONTROL: Restore default settings
 65: 0x0153 [0x1B] RETURN
```
