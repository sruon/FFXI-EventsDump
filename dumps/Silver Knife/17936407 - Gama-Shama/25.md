# Event 25

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 5/92      |
| Offset          | 0x0085    |
| Data Size       | 466 bytes |
| Calculated Size | 466 bytes |
| Instructions    | 73        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0080:                03 04 00  09 80 03 01 00 02 10 03       ...........
0090: 03 00 03 10 03 05 00 04  10 3C 06 00 0A 80 0A 80  .........<......
00A0: 3E 05 00 0B 80 AE 00 3D  06 00 0A 80 0A 80 1E F0  >......=........
00B0: FF FF 7F 6F 70 24 0C 80  09 80 06 00 25 02 00 10  ...op$......%...
00C0: 09 80 00 1C 02 03 01 10  09 80 27 10 17 B0 11 01  ..........'.....
00D0: 58 03 02 10 01 00 1D 0D  80 23 27 10 17 B0 11 01  X........#'.....
00E0: 5A 29 10 17 B0 11 01 5B  03 00 00 09 80 02 00 00  Z).....[........
00F0: 0E 80 03 15 01 9D 0A 22  09 02 00 00 00 0E 80 9D  ......."........
0100: 0F 62 09 02 00 00 00 0E  80 D4 03 00 00 02 00 0B  .b..............
0110: 00 00 01 ED 00 D4 02 0F  80 04 00 09 80 25 02 00  .............%..
0120: 10 0E 80 00 33 01 03 01  10 10 80 03 04 00 01 10  ....3...........
0130: 01 38 01 03 04 00 00 10  02 04 00 10 80 00 43 01  .8............C.
0140: 01 19 02 02 03 00 09 80  00 CB 01 02 01 00 05 80  ................
0150: 04 AF 01 27 10 17 B0 11  01 58 9D 0A 22 09 02 10  ...'.....X.."...
0160: 04 00 0E 80 03 03 10 05  80 1D 11 80 23 27 10 17  ............#'..
0170: B0 11 01 5A 29 10 17 B0  11 01 5B 03 02 10 01 00  ...Z).....[.....
0180: 24 12 80 0A 80 09 80 25  02 00 10 09 80 00 9C 01  $......%........
0190: 1D 13 80 23 03 01 10 04  00 01 AC 01 02 00 10 0A  ...#............
01A0: 80 00 AC 01 03 01 10 10  80 01 AC 01 01 C8 01 27  ...............'
01B0: 10 17 B0 11 01 58 1D 14  80 23 27 10 17 B0 11 01  .....X...#'.....
01C0: 5A 29 10 17 B0 11 01 5B  01 19 02 27 10 17 B0 11  Z).....[...'....
01D0: 01 58 03 02 10 03 00 03  07 00 09 80 02 07 00 15  .X..............
01E0: 80 05 07 02 9D 0A 22 09  08 00 07 00 0E 80 0B 08  ......".........
01F0: 00 02 02 10 08 00 00 01  02 0C 02 10 03 07 00 10  ................
0200: 80 0B 07 00 01 DC 01 1D  16 80 23 27 10 17 B0 11  ..........#'....
0210: 01 5A 29 10 17 B0 11 01  5B 01 55 02 02 00 10 0A  .Z).....[.U.....
0220: 80 00 45 02 27 10 17 B0  11 01 58 1D 17 80 23 27  ..E.'.....X...#'
0230: 10 17 B0 11 01 5A 29 10  17 B0 11 01 5B 03 01 10  .....Z).....[...
0240: 10 80 01 55 02 02 00 10  18 80 00 55 02 03 01 10  ...U.......U....
0250: 10 80 01 55 02 21 00                              ...U.!.         
```

## Opcodes

```
  0: 0x0085 [0x03] ExtData[1]->WorkLocal[4] = 0*
  1: 0x008A [0x03] ExtData[1]->WorkLocal[1] = Work_Zone[2]
  2: 0x008F [0x03] ExtData[1]->WorkLocal[3] = Work_Zone[3]
  3: 0x0094 [0x03] ExtData[1]->WorkLocal[5] = Work_Zone[4]
  4: 0x0099 [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=ExtData[1]->WorkLocal[6], bit_index_work_offset=1*, condition_work_offset=1*)
  5: 0x00A0 [0x3E] IF !(ExtData[1]->WorkLocal[5] bit 6*) GOTO 0x00AE
  6: 0x00A7 [0x3D] CLEAR_BIT_FLAG_CONDITIONAL(target_work_offset=ExtData[1]->WorkLocal[6], bit_index_work_offset=1*, condition_work_offset=1*)
  7: 0x00AE [0x1E] EventEntity looks at LocalPlayer and starts talking
  8: 0x00B3 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  9: 0x00B4 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
 10: 0x00B5 [0x24] CREATE_DIALOG(message_id=7273*, default_option=0*, option_flags=ExtData[1]->WorkLocal[6])
    → "Ask about what?\u0007\u000BForging a Prime Weapon.\u0007Tempering a Prime Weapon.\u0007Nothing.\u007F1\u0000\u0007"
 11: 0x00BC [0x25] WAIT_DIALOG_SELECT()
 12: 0x00BD [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x021C
 13: 0x00C5 [0x03] Work_Zone[1] = 0*
 14: 0x00CA [0x27] REQ_SET(priority=0x10, entity_id=Gama-Shama (ID: 17936407/0x0111B017), tag_num=0x58)
 15: 0x00D1 [0x03] Work_Zone[2] = ExtData[1]->WorkLocal[1]
 16: 0x00D6 [0x1D] PRINT_EVENT_MESSAGE(message_id=7263*)
    → "Which Prime Weapon would you like?\u007F1\u0000\u0007"
 17: 0x00D9 [0x23] WAIT_FOR_DIALOG_INTERACTION
 18: 0x00DA [0x27] REQ_SET(priority=0x10, entity_id=Gama-Shama (ID: 17936407/0x0111B017), tag_num=0x5A)
 19: 0x00E1 [0x29] REQ_SET_WAIT(priority=0x10, entity_id=Gama-Shama (ID: 17936407/0x0111B017), tag_num=0x5B)
 20: 0x00E8 [0x03] ExtData[1]->WorkLocal[0] = 0*
 21: 0x00ED [0x02] IF !(ExtData[1]->WorkLocal[0] >= 16*) GOTO 0x0115
 22: 0x00F5 [0x9D] IF (0x0922) ExtData[1]->WorkLocal[0] = ExtData[1]->WorkLocal[2] // extra=0x800E
 23: 0x00FF [0x9D] Table[0x0962] = ExtData[1]->WorkLocal[2] // p3=ExtData[1]->WorkLocal[0], p4=0x800E
 24: 0x0109 [0xD4] MAP_QUERY_WINDOW: Prepare buffer configuration A (buffer=[00 00 02 00 0B 00 00 01...])
 25: 0x0127 [0x01] GOTO 0x1010
 26: 0x012A [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 16778243/0x01000403))
 27: 0x012F [0x10] 0x3801 <<= 0x0301
 28: 0x0134 [0x04] DEPRECATED_NOP(unused=0x00)
 29: 0x0137 [0x10] 0x0402 <<= Work_Zone[0]
 30: 0x013C [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 16859904/0x01014300))
 31: 0x0141 [0x19] SWAP(0x0202, ExtData[1]->WorkLocal[3])
 32: 0x0146 [0x09] 0x80 |= (1 << 0x01CB)
 33: 0x014B [0x02] IF !(ExtData[1]->WorkLocal[1] < 10000*) GOTO 0x01AF
 34: 0x0153 [0x27] REQ_SET(priority=0x10, entity_id=Gama-Shama (ID: 17936407/0x0111B017), tag_num=0x58)
 35: 0x015A [0x9D] IF (0x0922) ExtData[1]->WorkLocal[4] = Work_Zone[2] // extra=0x800E
 36: 0x0164 [0x03] Work_Zone[3] = 10000*
 37: 0x0169 [0x1D] PRINT_EVENT_MESSAGE(message_id=7265*)
    → "You wantaru the \u0001\u0005#\u0002\u0000\u0000\u0000? It'll run you 
\u0001 gallimaufry.\u007F1\u0000\u0007"
 38: 0x016C [0x23] WAIT_FOR_DIALOG_INTERACTION
 39: 0x016D [0x27] REQ_SET(priority=0x10, entity_id=Gama-Shama (ID: 17936407/0x0111B017), tag_num=0x5A)
 40: 0x0174 [0x29] REQ_SET_WAIT(priority=0x10, entity_id=Gama-Shama (ID: 17936407/0x0111B017), tag_num=0x5B)
 41: 0x017B [0x03] Work_Zone[2] = ExtData[1]->WorkLocal[1]
 42: 0x0180 [0x24] CREATE_DIALOG(message_id=7266*, default_option=1*, option_flags=0*)
    → "Are you sure? (
\u0000 gall.)\u0007\u000BPositive.\u0007Hang on...\u007F1\u0000\u0007"
 43: 0x0187 [0x25] WAIT_DIALOG_SELECT()
 44: 0x0188 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x019C
 45: 0x0190 [0x1D] PRINT_EVENT_MESSAGE(message_id=7267*)
    → "A deal's a deal! Make sure to come back tomorrow.\u007F1\u0000\u0007"
 46: 0x0193 [0x23] WAIT_FOR_DIALOG_INTERACTION
 47: 0x0194 [0x03] Work_Zone[1] = ExtData[1]->WorkLocal[4]
 48: 0x0199 [0x01] GOTO 0x01AC
 49: 0x019C [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x01AC
 50: 0x01A4 [0x03] Work_Zone[1] = 255*
 51: 0x01A9 [0x01] GOTO 0x01AC

SUBROUTINE_01AC:
 52: 0x01AC [0x01] GOTO 0x01C8
 53: 0x01AF [0x27] REQ_SET(priority=0x10, entity_id=Gama-Shama (ID: 17936407/0x0111B017), tag_num=0x58)
 54: 0x01B6 [0x1D] PRINT_EVENT_MESSAGE(message_id=7269*)
    → "Hey, that's not enough-wough gallimaufry!\u007F1\u0000\u0007"
 55: 0x01B9 [0x23] WAIT_FOR_DIALOG_INTERACTION
 56: 0x01BA [0x27] REQ_SET(priority=0x10, entity_id=Gama-Shama (ID: 17936407/0x0111B017), tag_num=0x5A)
 57: 0x01C1 [0x29] REQ_SET_WAIT(priority=0x10, entity_id=Gama-Shama (ID: 17936407/0x0111B017), tag_num=0x5B)

SUBROUTINE_01C8:
 58: 0x01C8 [0x01] GOTO 0x0219

SUBROUTINE_0219:
 59: 0x0219 [0x01] GOTO 0x0255
 60: 0x021C [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x0245
 61: 0x0224 [0x27] REQ_SET(priority=0x10, entity_id=Gama-Shama (ID: 17936407/0x0111B017), tag_num=0x58)
 62: 0x022B [0x1D] PRINT_EVENT_MESSAGE(message_id=7277*)
    → "Can you bring-wing me the Prime Weapon you are interested in knowing the materials for?\u007F1\u0000\u0007"
 63: 0x022E [0x23] WAIT_FOR_DIALOG_INTERACTION
 64: 0x022F [0x27] REQ_SET(priority=0x10, entity_id=Gama-Shama (ID: 17936407/0x0111B017), tag_num=0x5A)
 65: 0x0236 [0x29] REQ_SET_WAIT(priority=0x10, entity_id=Gama-Shama (ID: 17936407/0x0111B017), tag_num=0x5B)
 66: 0x023D [0x03] Work_Zone[1] = 255*
 67: 0x0242 [0x01] GOTO 0x0255
 68: 0x0245 [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x0255
 69: 0x024D [0x03] Work_Zone[1] = 255*
 70: 0x0252 [0x01] GOTO 0x0255

SUBROUTINE_0255:
 71: 0x0255 [0x21] END_EVENT
 72: 0x0256 [0x00] END_REQSTACK()
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x01CB [0x27] REQ_SET(priority=0x10, entity_id=Gama-Shama (ID: 17936407/0x0111B017), tag_num=0x58)
     0x01D2 [0x03] Work_Zone[2] = ExtData[1]->WorkLocal[3]
     0x01D7 [0x03] ExtData[1]->WorkLocal[7] = 0*
     0x01DC [0x02] IF !(ExtData[1]->WorkLocal[7] > 15*) GOTO 0x0207
     0x01E4 [0x9D] IF (0x0922) ExtData[1]->WorkLocal[7] = ExtData[1]->WorkLocal[8] // extra=0x800E
     0x01EE [0x0B] ExtData[1]->WorkLocal[8]++
     0x01F1 [0x02] IF !(Work_Zone[2] == ExtData[1]->WorkLocal[8]) GOTO 0x0201
     0x01F9 [0x0C] Work_Zone[2]--
     0x01FC [0x03] ExtData[1]->WorkLocal[7] = 255*
     0x0201 [0x0B] ExtData[1]->WorkLocal[7]++
     0x0204 [0x01] GOTO 0x01DC
     0x0207 [0x1D] PRINT_EVENT_MESSAGE(message_id=7268*)
    → "I'm currently requisitioning your \u0001\u0005#\u0002\u0000\u0000\u0000. One weapon at a time!\u007F1\u0000\u0007"
     0x020A [0x23] WAIT_FOR_DIALOG_INTERACTION
     0x020B [0x27] REQ_SET(priority=0x10, entity_id=Gama-Shama (ID: 17936407/0x0111B017), tag_num=0x5A)
     0x0212 [0x29] REQ_SET_WAIT(priority=0x10, entity_id=Gama-Shama (ID: 17936407/0x0111B017), tag_num=0x5B)
```