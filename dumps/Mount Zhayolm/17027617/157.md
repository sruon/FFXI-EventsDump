# Event 157

## Metadata

| Field           | Value      |
|-----------------|------------|
| Event Index     | 5/6        |
| Offset          | 0x17A8     |
| Data Size       | 1039 bytes |
| Calculated Size | 1039 bytes |
| Instructions    | 123        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
17A0:                          42 45 00 80 F8 FF FF 7F          BE......
17B0: F8 FF FF 7F 66 64 6F 31  01 80 55 00 80 F8 FF FF  ....fdo1..U.....
17C0: 7F F8 FF FF 7F 66 64 6F  31 46 01 38 08 80 27 10  .....fdo1F.8..'.
17D0: 22 D2 03 01 04 92 01 22  D2 03 01 94 01 F0 FF FF  "......"........
17E0: 7F 94 01 22 D2 03 01 BA  F0 FF FF 7F 09 80 0A 80  ..."............
17F0: 0B 80 0C 80 BA 22 D2 03  01 0D 80 0E 80 0B 80 0F  ....."..........
1800: 80 7B F0 FF FF 7F 7B 22  D2 03 01 80 F0 FF FF 7F  .{....{"........
1810: 80 22 D2 03 01 59 04 22  D2 03 01 12 80 1C 13 80  ."...Y."........
1820: 5C 00 11 80 5C 01 11 80  9A 27 10 22 D2 03 01 0C  \...\....'."....
1830: 27 10 22 D2 03 01 0C 1C  13 80 9A 45 47 80 F0 FF  '."........EG...
1840: FF 7F F0 FF FF 7F 6D 31  30 31 01 80 1A 43 00 1C  ......m101...C..
1850: 17 80 52 47 80 F0 FF FF  7F F0 FF FF 7F 6D 31 30  ..RG.........m10
1860: 31 45 47 80 F0 FF FF 7F  F0 FF FF 7F 6D 31 30 32  1EG.........m102
1870: 01 80 5B 07 80 22 D2 03  01 22 D2 03 01 74 6C 6B  ..[.."..."...tlk
1880: 30 2B 22 D2 03 01 53 80  23 29 10 F0 FF FF 7F 22  0+"...S.#)....."
1890: 02 02 10 03 80 80 BB 18  52 47 80 F0 FF FF 7F F0  ........RG......
18A0: FF FF 7F 6D 31 30 32 45  14 80 F0 FF FF 7F F0 FF  ...m102E........
18B0: FF 7F 6E 68 6D 31 01 80  01 E8 19 02 02 10 05 80  ..nhm1..........
18C0: 80 E6 18 52 47 80 F0 FF  FF 7F F0 FF FF 7F 6D 31  ...RG.........m1
18D0: 30 32 45 14 80 F0 FF FF  7F F0 FF FF 7F 6E 68 6D  02E..........nhm
18E0: 31 01 80 01 E8 19 02 02  10 1B 80 80 11 19 52 47  1.............RG
18F0: 80 F0 FF FF 7F F0 FF FF  7F 6D 31 30 32 45 14 80  .........m102E..
1900: F0 FF FF 7F F0 FF FF 7F  6E 65 6D 31 01 80 01 E8  ........nem1....
1910: 19 02 02 10 1C 80 80 3C  19 52 47 80 F0 FF FF 7F  .......<.RG.....
1920: F0 FF FF 7F 6D 31 30 32  45 14 80 F0 FF FF 7F F0  ....m102E.......
1930: FF FF 7F 6E 65 6D 31 01  80 01 E8 19 02 02 10 1D  ...nem1.........
1940: 80 80 67 19 52 47 80 F0  FF FF 7F F0 FF FF 7F 6D  ..g.RG.........m
1950: 31 30 32 45 14 80 F0 FF  FF 7F F0 FF FF 7F 6E 74  102E..........nt
1960: 72 31 01 80 01 E8 19 02  02 10 1E 80 80 92 19 52  r1.............R
1970: 47 80 F0 FF FF 7F F0 FF  FF 7F 6D 31 30 32 45 14  G.........m102E.
1980: 80 F0 FF FF 7F F0 FF FF  7F 6E 74 72 31 01 80 01  .........ntr1...
1990: E8 19 02 02 10 1F 80 80  BD 19 52 47 80 F0 FF FF  ..........RG....
19A0: 7F F0 FF FF 7F 6D 31 30  32 45 14 80 F0 FF FF 7F  .....m102E......
19B0: F0 FF FF 7F 6E 6D 74 31  01 80 01 E8 19 02 02 10  ....nmt1........
19C0: 20 80 80 E8 19 52 47 80  F0 FF FF 7F F0 FF FF 7F   ....RG.........
19D0: 6D 31 30 32 45 14 80 F0  FF FF 7F F0 FF FF 7F 6E  m102E..........n
19E0: 67 6C 31 01 80 01 E8 19  6E F0 FF FF 7F 1F 80 99  gl1.....n.......
19F0: F0 FF FF 7F 1C 54 80 52  14 80 F0 FF FF 7F F0 FF  .....T.R........
1A00: FF 7F 6E 68 6D 31 52 14  80 F0 FF FF 7F F0 FF FF  ..nhm1R.........
1A10: 7F 6E 65 6D 31 52 14 80  F0 FF FF 7F F0 FF FF 7F  .nem1R..........
1A20: 6E 74 72 31 52 14 80 F0  FF FF 7F F0 FF FF 7F 6E  ntr1R..........n
1A30: 6D 74 31 52 14 80 F0 FF  FF 7F F0 FF FF 7F 6E 67  mt1R..........ng
1A40: 6C 31 45 47 80 F0 FF FF  7F F0 FF FF 7F 6D 31 30  l1EG.........m10
1A50: 37 01 80 5B 07 80 22 D2  03 01 22 D2 03 01 74 6C  7..[.."..."...tl
1A60: 6B 65 2B 22 D2 03 01 55  80 23 52 47 80 F0 FF FF  ke+"...U.#RG....
1A70: 7F F0 FF FF 7F 6D 31 30  37 45 47 80 F0 FF FF 7F  .....m107EG.....
1A80: F0 FF FF 7F 6D 31 30 33  01 80 03 02 10 18 80 2B  ....m103.......+
1A90: 22 D2 03 01 56 80 23 5B  07 80 22 D2 03 01 22 D2  "...V.#[.."...".
1AA0: 03 01 74 6C 6B 30 2B 22  D2 03 01 57 80 23 52 47  ..tlk0+"...W.#RG
1AB0: 80 F0 FF FF 7F F0 FF FF  7F 6D 31 30 33 45 47 80  .........m103EG.
1AC0: F0 FF FF 7F F0 FF FF 7F  6D 31 30 34 01 80 2B 22  ........m104..+"
1AD0: D2 03 01 58 80 23 2B 22  D2 03 01 59 80 23 52 47  ...X.#+"...Y.#RG
1AE0: 80 F0 FF FF 7F F0 FF FF  7F 6D 31 30 34 45 47 80  .........m104EG.
1AF0: F0 FF FF 7F F0 FF FF 7F  6D 31 30 35 01 80 5B 07  ........m105..[.
1B00: 80 22 D2 03 01 22 D2 03  01 74 6C 6B 65 2B 22 D2  ."..."...tlke+".
1B10: 03 01 5A 80 23 2B 22 D2  03 01 5B 80 23 52 47 80  ..Z.#+"...[.#RG.
1B20: F0 FF FF 7F F0 FF FF 7F  6D 31 30 35 45 47 80 F0  ........m105EG..
1B30: FF FF 7F F0 FF FF 7F 6D  31 30 36 01 80 2B 22 D2  .......m106..+".
1B40: 03 01 5C 80 23 27 10 22  D2 03 01 0D 1C 33 80 52  ..\.#'.".....3.R
1B50: 47 80 F0 FF FF 7F F0 FF  FF 7F 6D 31 30 36 45 47  G.........m106EG
1B60: 80 F0 FF FF 7F F0 FF FF  7F 6D 31 30 38 01 80 1C  .........m108...
1B70: 15 80 5D 01 80 15 80 1A  64 00 52 47 80 F0 FF FF  ..].....d.RG....
1B80: 7F F0 FF FF 7F 6D 31 30  38 78 1C 13 80 AB 09 1C  .....m108x......
1B90: 13 80 AB 11 01 80 1C 03  80 5C 00 01 80 5C 01 01  .........\...\..
1BA0: 80 9A 46 00 45 00 80 F0  FF FF 7F F0 FF FF 7F 66  ..F.E..........f
1BB0: 64 69 32 01 80 21 00                              di2..!.         
```

## Opcodes

```
  0: 0x17A8 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x17A9 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [EventEntity, EventEntity], work=[200*, 0*]
  2: 0x17BA [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo1" with entities [EventEntity, EventEntity], work=200*
  3: 0x17C9 [0x46] CAMERA_CONTROL: Disable user control
  4: 0x17CB [0x38] SET_CLIENT_EVENT_MODE(mode=19*)
  5: 0x17CE [0x27] REQ_SET(priority=0x10, entity_id=Megomak (ID: 17027618/0x0103D222), tag_num=0x04)
  6: 0x17D5 [0x92] Megomak (ID: 17027618/0x0103D222)->Render.Flags3 ^= 0x01
  7: 0x17DB [0x94] LocalPlayer->Render.Flags3 ^= 0x01
  8: 0x17E1 [0x94] Megomak (ID: 17027618/0x0103D222)->Render.Flags3 ^= 0x01
  9: 0x17E7 [0xBA] SET_ENTITY_POSITION(entity_id=LocalPlayer, pos_x=275.689*, pos_z=-87.726*, pos_y=-32.000*, direction=178.7°*)
 10: 0x17F4 [0xBA] SET_ENTITY_POSITION(entity_id=References[16994850], pos_x=270.433*, pos_z=-88.078*, pos_y=-32.000*, direction=351.6°*)
 11: 0x1801 [0x7B] LocalPlayer stops talking
 12: 0x1806 [0x7B] Megomak (ID: 17027618/0x0103D222) stops talking
 13: 0x180B [0x80] LOAD_WAIT(entity=LocalPlayer)
 14: 0x1810 [0x80] LOAD_WAIT(entity=Megomak (ID: 17027618/0x0103D222))
 15: 0x1815 [0x59] UPDATE_ENTITY_DATA: Set Megomak (ID: 17027618/0x0103D222) main speed = 13* * 0.1
 16: 0x181D [0x1C] WAIT(15* ticks)
 17: 0x1820 [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 163*
 18: 0x1824 [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 163*
 19: 0x1828 [0x9A] WAIT_MUSIC_SERVER()
 20: 0x1829 [0x27] REQ_SET(priority=0x10, entity_id=Megomak (ID: 17027618/0x0103D222), tag_num=0x0C)
 21: 0x1830 [0x27] REQ_SET(priority=0x10, entity_id=Megomak (ID: 17027618/0x0103D222), tag_num=0x0C)
 22: 0x1837 [0x1C] WAIT(15* ticks)
 23: 0x183A [0x9A] WAIT_MUSIC_SERVER()
 24: 0x183B [0x45] LOAD_SCHEDULED_TASK: Load scheduler "m101" with entities [LocalPlayer, LocalPlayer], work=[495*, 0*]
 25: 0x184C [0x1A] CALL_SUBROUTINE(address=0x0043)
 26: 0x184F [0x1C] WAIT(150* ticks)
 27: 0x1852 [0x52] END_LOAD_SCHEDULER: End scheduler "m101" with entities [LocalPlayer, LocalPlayer], work=495*
 28: 0x1861 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "m102" with entities [LocalPlayer, LocalPlayer], work=[495*, 0*]
 29: 0x1872 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tlk0" with entities [Megomak (ID: 17027618/0x0103D222), Megomak (ID: 17027618/0x0103D222)], work=215*
 30: 0x1881 [0x2B] Megomak (ID: 17027618/0x0103D222) [7857*]:
    → "Well, well, if it isn't the maundering mercenary.\u0007Let me guess...you find yourself needing the sort of goods that only I can provide.\u007F1\u0000\u0007"
 31: 0x1888 [0x23] WAIT_FOR_DIALOG_INTERACTION
 32: 0x1889 [0x29] REQ_SET_WAIT(priority=0x10, entity_id=LocalPlayer, tag_num=0x22)
 33: 0x1890 [0x02] IF !(Work_Zone[2] == 1*) GOTO 0x18BB
 34: 0x1898 [0x52] END_LOAD_SCHEDULER: End scheduler "m102" with entities [LocalPlayer, LocalPlayer], work=495*
 35: 0x18A7 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "nhm1" with entities [LocalPlayer, LocalPlayer], work=[450*, 0*]
 36: 0x18B8 [0x01] GOTO 0x19E8
 37: 0x18BB [0x02] IF !(Work_Zone[2] == 2*) GOTO 0x18E6
 38: 0x18C3 [0x52] END_LOAD_SCHEDULER: End scheduler "m102" with entities [LocalPlayer, LocalPlayer], work=495*
 39: 0x18D2 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "nhm1" with entities [LocalPlayer, LocalPlayer], work=[450*, 0*]
 40: 0x18E3 [0x01] GOTO 0x19E8
 41: 0x18E6 [0x02] IF !(Work_Zone[2] == 3*) GOTO 0x1911
 42: 0x18EE [0x52] END_LOAD_SCHEDULER: End scheduler "m102" with entities [LocalPlayer, LocalPlayer], work=495*
 43: 0x18FD [0x45] LOAD_SCHEDULED_TASK: Load scheduler "nem1" with entities [LocalPlayer, LocalPlayer], work=[450*, 0*]
 44: 0x190E [0x01] GOTO 0x19E8
 45: 0x1911 [0x02] IF !(Work_Zone[2] == 4*) GOTO 0x193C
 46: 0x1919 [0x52] END_LOAD_SCHEDULER: End scheduler "m102" with entities [LocalPlayer, LocalPlayer], work=495*
 47: 0x1928 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "nem1" with entities [LocalPlayer, LocalPlayer], work=[450*, 0*]
 48: 0x1939 [0x01] GOTO 0x19E8
 49: 0x193C [0x02] IF !(Work_Zone[2] == 5*) GOTO 0x1967
 50: 0x1944 [0x52] END_LOAD_SCHEDULER: End scheduler "m102" with entities [LocalPlayer, LocalPlayer], work=495*
 51: 0x1953 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "ntr1" with entities [LocalPlayer, LocalPlayer], work=[450*, 0*]
 52: 0x1964 [0x01] GOTO 0x19E8
 53: 0x1967 [0x02] IF !(Work_Zone[2] == 6*) GOTO 0x1992
 54: 0x196F [0x52] END_LOAD_SCHEDULER: End scheduler "m102" with entities [LocalPlayer, LocalPlayer], work=495*
 55: 0x197E [0x45] LOAD_SCHEDULED_TASK: Load scheduler "ntr1" with entities [LocalPlayer, LocalPlayer], work=[450*, 0*]
 56: 0x198F [0x01] GOTO 0x19E8
 57: 0x1992 [0x02] IF !(Work_Zone[2] == 7*) GOTO 0x19BD
 58: 0x199A [0x52] END_LOAD_SCHEDULER: End scheduler "m102" with entities [LocalPlayer, LocalPlayer], work=495*
 59: 0x19A9 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "nmt1" with entities [LocalPlayer, LocalPlayer], work=[450*, 0*]
 60: 0x19BA [0x01] GOTO 0x19E8
 61: 0x19BD [0x02] IF !(Work_Zone[2] == 8*) GOTO 0x19E8
 62: 0x19C5 [0x52] END_LOAD_SCHEDULER: End scheduler "m102" with entities [LocalPlayer, LocalPlayer], work=495*
 63: 0x19D4 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "ngl1" with entities [LocalPlayer, LocalPlayer], work=[450*, 0*]
 64: 0x19E5 [0x01] GOTO 0x19E8

SUBROUTINE_19E8:
 65: 0x19E8 [0x6E] LocalPlayer uses emote 7*
 66: 0x19EF [0x99] Wait for LocalPlayer animation to complete
 67: 0x19F4 [0x1C] WAIT(140* ticks)
 68: 0x19F7 [0x52] END_LOAD_SCHEDULER: End scheduler "nhm1" with entities [LocalPlayer, LocalPlayer], work=450*
 69: 0x1A06 [0x52] END_LOAD_SCHEDULER: End scheduler "nem1" with entities [LocalPlayer, LocalPlayer], work=450*
 70: 0x1A15 [0x52] END_LOAD_SCHEDULER: End scheduler "ntr1" with entities [LocalPlayer, LocalPlayer], work=450*
 71: 0x1A24 [0x52] END_LOAD_SCHEDULER: End scheduler "nmt1" with entities [LocalPlayer, LocalPlayer], work=450*
 72: 0x1A33 [0x52] END_LOAD_SCHEDULER: End scheduler "ngl1" with entities [LocalPlayer, LocalPlayer], work=450*
 73: 0x1A42 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "m107" with entities [LocalPlayer, LocalPlayer], work=[495*, 0*]
 74: 0x1A53 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tlke" with entities [Megomak (ID: 17027618/0x0103D222), Megomak (ID: 17027618/0x0103D222)], work=215*
 75: 0x1A62 [0x2B] Megomak (ID: 17027618/0x0103D222) [7858*]:
    → "How did I know it? Once my customers discover Megomak quality, they're hooked for life.\u0007I have to call in the Trolls to keep them away! Bwahahaha!\u007F1\u0000\u0007"
 76: 0x1A69 [0x23] WAIT_FOR_DIALOG_INTERACTION
 77: 0x1A6A [0x52] END_LOAD_SCHEDULER: End scheduler "m107" with entities [LocalPlayer, LocalPlayer], work=495*
 78: 0x1A79 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "m103" with entities [LocalPlayer, LocalPlayer], work=[495*, 0*]
 79: 0x1A8A [0x03] Work_Zone[2] = 1246*
 80: 0x1A8F [0x2B] Megomak (ID: 17027618/0x0103D222) [7859*]:
    → "But not you. No, you're one of my...<ahem>...valued customers.\u007F1\u0000\u0007"
 81: 0x1A96 [0x23] WAIT_FOR_DIALOG_INTERACTION
 82: 0x1A97 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tlk0" with entities [Megomak (ID: 17027618/0x0103D222), Megomak (ID: 17027618/0x0103D222)], work=215*
 83: 0x1AA6 [0x2B] Megomak (ID: 17027618/0x0103D222) [7860*]:
    → "So revel and rejoice!\u0007Megomak the Magnificent will fashion you \u0001\u00056\u0002\u0000\u0000\u0000 the likes of which you haven't seen...er, since the last time we did this.\u007F1\u0000\u0007"
 84: 0x1AAD [0x23] WAIT_FOR_DIALOG_INTERACTION
 85: 0x1AAE [0x52] END_LOAD_SCHEDULER: End scheduler "m103" with entities [LocalPlayer, LocalPlayer], work=495*
 86: 0x1ABD [0x45] LOAD_SCHEDULED_TASK: Load scheduler "m104" with entities [LocalPlayer, LocalPlayer], work=[495*, 0*]
 87: 0x1ACE [0x2B] Megomak (ID: 17027618/0x0103D222) [7861*]:
    → "After you bring me the necessary materials, of course.\u0007You didn't lose my shopping list, did you?\u007F1\u0000\u0007"
 88: 0x1AD5 [0x23] WAIT_FOR_DIALOG_INTERACTION
 89: 0x1AD6 [0x2B] Megomak (ID: 17027618/0x0103D222) [7862*]:
    → "Hmmmmmmmmm? You have a problem with that?\u007F1\u0000\u0007"
 90: 0x1ADD [0x23] WAIT_FOR_DIALOG_INTERACTION
 91: 0x1ADE [0x52] END_LOAD_SCHEDULER: End scheduler "m104" with entities [LocalPlayer, LocalPlayer], work=495*
 92: 0x1AED [0x45] LOAD_SCHEDULED_TASK: Load scheduler "m105" with entities [LocalPlayer, LocalPlayer], work=[495*, 0*]
 93: 0x1AFE [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tlke" with entities [Megomak (ID: 17027618/0x0103D222), Megomak (ID: 17027618/0x0103D222)], work=215*
 94: 0x1B0D [0x2B] Megomak (ID: 17027618/0x0103D222) [7863*]:
    → "Why, you should consider yourself fortunate that one of my genius would even associate with a simple-minded sellsword such as yourself.\u007F1\u0000\u0007"
 95: 0x1B14 [0x23] WAIT_FOR_DIALOG_INTERACTION
 96: 0x1B15 [0x2B] Megomak (ID: 17027618/0x0103D222) [7864*]:
    → "Now be off with you. I have more pressing matters to attend to!\u007F1\u0000\u0007"
 97: 0x1B1C [0x23] WAIT_FOR_DIALOG_INTERACTION
 98: 0x1B1D [0x52] END_LOAD_SCHEDULER: End scheduler "m105" with entities [LocalPlayer, LocalPlayer], work=495*
 99: 0x1B2C [0x45] LOAD_SCHEDULED_TASK: Load scheduler "m106" with entities [LocalPlayer, LocalPlayer], work=[495*, 0*]
100: 0x1B3D [0x2B] Megomak (ID: 17027618/0x0103D222) [7865*]:
    → "(Just sit pretty, my pet! Daddy's on his way, and he's got fresh apkallu eggs for you today!)\u007F1\u0000\u0007"
101: 0x1B44 [0x23] WAIT_FOR_DIALOG_INTERACTION
102: 0x1B45 [0x27] REQ_SET(priority=0x10, entity_id=Megomak (ID: 17027618/0x0103D222), tag_num=0x0D)
103: 0x1B4C [0x1C] WAIT(10* ticks)
104: 0x1B4F [0x52] END_LOAD_SCHEDULER: End scheduler "m106" with entities [LocalPlayer, LocalPlayer], work=495*
105: 0x1B5E [0x45] LOAD_SCHEDULED_TASK: Load scheduler "m108" with entities [LocalPlayer, LocalPlayer], work=[495*, 0*]
106: 0x1B6F [0x1C] WAIT(120* ticks)
107: 0x1B72 [0x5D] SET_MUSIC_VOLUME(volume=0*, fade_time=120*)
108: 0x1B77 [0x1A] CALL_SUBROUTINE(address=0x0064)
109: 0x1B7A [0x52] END_LOAD_SCHEDULER: End scheduler "m108" with entities [LocalPlayer, LocalPlayer], work=495*
110: 0x1B89 [0x78] ENABLE_GAME_TIMER_RESET_WEATHER()
111: 0x1B8A [0x1C] WAIT(15* ticks)
112: 0x1B8D [0xAB] EventEntity->UnknownFlag = 1 // Enable unknown flag
113: 0x1B8F [0x1C] WAIT(15* ticks)
114: 0x1B92 [0xAB] EventEntity->DespawnValue = 0* // Set despawn value
115: 0x1B96 [0x1C] WAIT(1* ticks)
116: 0x1B99 [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 0*
117: 0x1B9D [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 0*
118: 0x1BA1 [0x9A] WAIT_MUSIC_SERVER()
119: 0x1BA2 [0x46] CAMERA_CONTROL: Restore default settings
120: 0x1BA4 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi2" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
121: 0x1BB5 [0x21] END_EVENT
122: 0x1BB6 [0x00] END_REQSTACK()
```
