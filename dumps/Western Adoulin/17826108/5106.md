# Event 5106

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 12/12     |
| Offset          | 0x3FE9    |
| Data Size       | 634 bytes |
| Calculated Size | 634 bytes |
| Instructions    | 102       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
3FE0:                             42 03 04 00 03 10 06           B......
3FF0: 01 10 45 00 80 F0 FF FF  7F F0 FF FF 7F 66 64 6F  ..E..........fdo
4000: 31 01 80 55 00 80 F0 FF  FF 7F F0 FF FF 7F 66 64  1..U..........fd
4010: 6F 31 46 01 38 4A 80 4E  00 F0 FF FF 7F 27 10 45  o1F.8J.N.....'.E
4020: 01 10 01 04 92 01 45 01  10 01 94 01 45 01 10 01  ......E.....E...
4030: 94 01 F0 FF FF 7F 29 10  45 01 10 01 25 BA 45 01  ......).E...%.E.
4040: 10 01 F5 80 F6 80 F7 80  F8 80 BA F0 FF FF 7F F1  ................
4050: 80 F2 80 F3 80 F4 80 4A  45 01 10 01 F0 FF FF 7F  .......JE.......
4060: 4A F0 FF FF 7F 45 01 10  01 6F 70 6F 70 80 45 01  J....E...opop.E.
4070: 10 01 80 F0 FF FF 7F 45  DD 80 F8 FF FF 7F F8 FF  .......E........
4080: FF 7F 73 30 30 32 01 80  45 00 80 F0 FF FF 7F F0  ..s002..E.......
4090: FF FF 7F 66 64 69 31 01  80 1C F9 80 5D 93 80 95  ...fdi1.....]...
40A0: 80 02 04 00 03 80 80 D8  40 03 01 10 03 80 03 02  ........@.......
40B0: 10 04 81 CC 01 02 10 05  80 2D 81 01 80 2B 45 01  .........-...+E.
40C0: 10 01 2E 81 23 93 01 80  03 03 10 0D 81 2B 45 01  ....#........+E.
40D0: 10 01 2F 81 23 01 B9 41  02 04 00 05 80 80 14 41  ../.#..A.......A
40E0: 03 01 10 05 80 03 02 10  05 81 CC 01 02 10 05 80  ................
40F0: 30 81 01 80 2B 45 01 10  01 2E 81 23 93 01 80 03  0...+E.....#....
4100: 03 10 13 81 03 04 10 14  81 2B 45 01 10 01 31 81  .........+E...1.
4110: 23 01 B9 41 02 04 00 77  80 80 4B 41 03 01 10 77  #..A...w..KA...w
4120: 80 03 02 10 06 81 CC 01  02 10 05 80 32 81 01 80  ............2...
4130: 2B 45 01 10 01 2E 81 23  93 01 80 03 03 10 16 81  +E.....#........
4140: 2B 45 01 10 01 33 81 23  01 B9 41 02 04 00 43 80  +E...3.#..A...C.
4150: 80 82 41 03 01 10 43 80  03 02 10 07 81 CC 01 02  ..A...C.........
4160: 10 05 80 34 81 01 80 2B  45 01 10 01 2E 81 23 93  ...4...+E.....#.
4170: 01 80 03 03 10 18 81 2B  45 01 10 01 35 81 23 01  .......+E...5.#.
4180: B9 41 02 04 00 62 80 80  B9 41 03 01 10 62 80 03  .A...b...A...b..
4190: 02 10 08 81 CC 01 02 10  05 80 36 81 01 80 2B 45  ..........6...+E
41A0: 01 10 01 2E 81 23 93 01  80 03 03 10 1A 81 2B 45  .....#........+E
41B0: 01 10 01 37 81 23 01 B9  41 52 DD 80 F8 FF FF 7F  ...7.#..AR......
41C0: F8 FF FF 7F 73 30 30 32  45 DD 80 F8 FF FF 7F F8  ....s002E.......
41D0: FF FF 7F 73 30 30 39 01  80 66 38 81 45 01 10 01  ...s009..f8.E...
41E0: 45 01 10 01 70 61 73 30  2B 45 01 10 01 39 81 23  E...pas0+E...9.#
41F0: 53 45 01 10 01 45 01 10  01 70 61 73 30 45 00 80  SE...E...pas0E..
4200: F0 FF FF 7F F0 FF FF 7F  66 64 6F 31 01 80 55 00  ........fdo1..U.
4210: 80 F0 FF FF 7F F0 FF FF  7F 66 64 6F 31 52 DD 80  .........fdo1R..
4220: F8 FF FF 7F F8 FF FF 7F  73 30 30 39 5D 2A 80 E7  ........s009]*..
4230: 80 1C 0E 80 AB 11 01 80  1C 03 80 AB 0A 46 00 45  .............F.E
4240: 02 80 F8 FF FF 7F F8 FF  FF 7F 71 73 74 63 01 80  ..........qstc..
4250: 45 00 80 F0 FF FF 7F F0  FF FF 7F 66 64 69 32 01  E..........fdi2.
4260: 80 21 00                                          .!.             
```

## Opcodes

```
  0: 0x3FE9 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x3FEA [0x03] ExtData[1]->WorkLocal[4] = Work_Zone[3]
  2: 0x3FEF [0x06] Work_Zone[1] = 0
  3: 0x3FF2 [0x45] LOAD_SCHEDULED_TASK(work_offset1=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdo1", work_offset2=0*)
  4: 0x4003 [0x55] WAIT_LOAD_SCHEDULER(work_offset=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdo1")
  5: 0x4012 [0x46] CAMERA_CONTROL: Disable user control
  6: 0x4014 [0x38] SET_CLIENT_EVENT_MODE(mode=27*)
  7: 0x4017 [0x4E] SET_ENTITY_HIDE_FLAG: Show LocalPlayer
  8: 0x401D [0x27] REQ_SET(priority=0x10, entity_id=Unnamed NPC (ID: 17826117/0x01100145), tag_num=0x04)
  9: 0x4024 [0x92] Unnamed NPC (ID: 17826117/0x01100145)->Render.Flags3 ^= 0x01
 10: 0x402A [0x94] Unnamed NPC (ID: 17826117/0x01100145)->Render.Flags3 ^= 0x01
 11: 0x4030 [0x94] LocalPlayer->Render.Flags3 ^= 0x01
 12: 0x4036 [0x29] REQ_SET_WAIT(priority=0x10, entity_id=Unnamed NPC (ID: 17826117/0x01100145), tag_num=0x25)
 13: 0x403D [0xBA] SET_ENTITY_POSITION(entity_id=Unnamed NPC (ID: 17826117/0x01100145), pos_x=51.806*, pos_z=162.364*, pos_y=27.999*, direction=125.2°*)
 14: 0x404A [0xBA] SET_ENTITY_POSITION(entity_id=LocalPlayer, pos_x=54.099*, pos_z=158.511*, pos_y=31.999*, direction=245.0°*)
 15: 0x4057 [0x4A] Unnamed NPC (ID: 17826117/0x01100145) looks at LocalPlayer
 16: 0x4060 [0x4A] LocalPlayer looks at Unnamed NPC (ID: 17826117/0x01100145)
 17: 0x4069 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 18: 0x406A [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
 19: 0x406B [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 20: 0x406C [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
 21: 0x406D [0x80] LOAD_WAIT(entity=Unnamed NPC (ID: 17826117/0x01100145))
 22: 0x4072 [0x80] LOAD_WAIT(entity=LocalPlayer)
 23: 0x4077 [0x45] LOAD_SCHEDULED_TASK(work_offset1=617*, entity1=EventEntity, entity2=EventEntity, scheduler_id="s002", work_offset2=0*)
 24: 0x4088 [0x45] LOAD_SCHEDULED_TASK(work_offset1=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdi1", work_offset2=0*)
 25: 0x4099 [0x1C] WAIT(75* ticks)
 26: 0x409C [0x5D] SET_MUSIC_VOLUME(volume=31*, fade_time=240*)
 27: 0x40A1 [0x02] IF !(ExtData[1]->WorkLocal[4] == 1*) GOTO 0x40D8
 28: 0x40A9 [0x03] Work_Zone[1] = 1*
 29: 0x40AE [0x03] Work_Zone[2] = 26666*
 30: 0x40B3 [0xCC] ITEM_INFO_WINDOW_HANDLER(case=0x01 - Open item info window (with chase), check_value=Work_Zone[2], buffer1=2*, buffer2=1454*, buffer3=0*)
 31: 0x40BD [0x2B] Unnamed NPC (ID: 17826117/0x01100145) [11580*]:
    → "Here you go, your new \u0001\u0005#\u0002\u0000\u0000\u0000. And since I was in such a good mood toward the end, I engrave-waved some arcane glyptics to sweeten the deal.\u007F1\u0000\u0007"
 32: 0x40C4 [0x23] WAIT_FOR_DIALOG_INTERACTION
 33: 0x40C5 [0x93] DISPLAY_ITEM_INFO(item_id=0*)
 34: 0x40C8 [0x03] Work_Zone[3] = 4024*
 35: 0x40CD [0x2B] Unnamed NPC (ID: 17826117/0x01100145) [11581*]:
    → "This \u0001\u0005#\u0002\u0000\u0000\u0000 resonatarus with your runes to create a membrane of protective magic. While it may be as thin as my patience with greenhorns, it'll stop the brunt of any physical attack.\u007F1\u0000\u0007"
 36: 0x40D4 [0x23] WAIT_FOR_DIALOG_INTERACTION
 37: 0x40D5 [0x01] GOTO 0x41B9

SUBROUTINE_40D8:
 38: 0x40D8 [0x02] IF !(ExtData[1]->WorkLocal[4] == 2*) GOTO 0x4114
 39: 0x40E0 [0x03] Work_Zone[1] = 2*
 40: 0x40E5 [0x03] Work_Zone[2] = 26842*
 41: 0x40EA [0xCC] ITEM_INFO_WINDOW_HANDLER(case=0x01 - Open item info window (with chase), check_value=Work_Zone[2], buffer1=2*, buffer2=3349*, buffer3=0*)
 42: 0x40F4 [0x2B] Unnamed NPC (ID: 17826117/0x01100145) [11580*]:
    → "Here you go, your new \u0001\u0005#\u0002\u0000\u0000\u0000. And since I was in such a good mood toward the end, I engrave-waved some arcane glyptics to sweeten the deal.\u007F1\u0000\u0007"
 43: 0x40FB [0x23] WAIT_FOR_DIALOG_INTERACTION
 44: 0x40FC [0x93] DISPLAY_ITEM_INFO(item_id=0*)
 45: 0x40FF [0x03] Work_Zone[3] = 1993*
 46: 0x4104 [0x03] Work_Zone[4] = 4029*
 47: 0x4109 [0x2B] Unnamed NPC (ID: 17826117/0x01100145) [11582*]:
    → "It's no plate mail, but the \u0001\u0005#\u0002\u0001\u0000\u0000 and \u0001\u0005#\u0002\u0002\u0000\u0000 within it work together to amplify your runes' defensive powers by several magnitude-wagnitudes.\u007F1\u0000\u0007"
 48: 0x4110 [0x23] WAIT_FOR_DIALOG_INTERACTION
 49: 0x4111 [0x01] GOTO 0x41B9

SUBROUTINE_4114:
 50: 0x4114 [0x02] IF !(ExtData[1]->WorkLocal[4] == 3*) GOTO 0x414B
 51: 0x411C [0x03] Work_Zone[1] = 3*
 52: 0x4121 [0x03] Work_Zone[2] = 27018*
 53: 0x4126 [0xCC] ITEM_INFO_WINDOW_HANDLER(case=0x01 - Open item info window (with chase), check_value=Work_Zone[2], buffer1=2*, buffer2=1457*, buffer3=0*)
 54: 0x4130 [0x2B] Unnamed NPC (ID: 17826117/0x01100145) [11580*]:
    → "Here you go, your new \u0001\u0005#\u0002\u0000\u0000\u0000. And since I was in such a good mood toward the end, I engrave-waved some arcane glyptics to sweeten the deal.\u007F1\u0000\u0007"
 55: 0x4137 [0x23] WAIT_FOR_DIALOG_INTERACTION
 56: 0x4138 [0x93] DISPLAY_ITEM_INFO(item_id=0*)
 57: 0x413B [0x03] Work_Zone[3] = 8708*
 58: 0x4140 [0x2B] Unnamed NPC (ID: 17826117/0x01100145) [11583*]:
    → "Gloves of grace, these. The \u0001\u0005#\u0002\u0001\u0000\u0000 I used to fashion them should be supple-wupple enough to enhance the \u00072Swordplay\u00073 of even the clumsiest fencer.\u007F1\u0000\u0007"
 59: 0x4147 [0x23] WAIT_FOR_DIALOG_INTERACTION
 60: 0x4148 [0x01] GOTO 0x41B9

SUBROUTINE_414B:
 61: 0x414B [0x02] IF !(ExtData[1]->WorkLocal[4] == 4*) GOTO 0x4182
 62: 0x4153 [0x03] Work_Zone[1] = 4*
 63: 0x4158 [0x03] Work_Zone[2] = 27194*
 64: 0x415D [0xCC] ITEM_INFO_WINDOW_HANDLER(case=0x01 - Open item info window (with chase), check_value=Work_Zone[2], buffer1=2*, buffer2=3504*, buffer3=0*)
 65: 0x4167 [0x2B] Unnamed NPC (ID: 17826117/0x01100145) [11580*]:
    → "Here you go, your new \u0001\u0005#\u0002\u0000\u0000\u0000. And since I was in such a good mood toward the end, I engrave-waved some arcane glyptics to sweeten the deal.\u007F1\u0000\u0007"
 66: 0x416E [0x23] WAIT_FOR_DIALOG_INTERACTION
 67: 0x416F [0x93] DISPLAY_ITEM_INFO(item_id=0*)
 68: 0x4172 [0x03] Work_Zone[3] = 1992*
 69: 0x4177 [0x2B] Unnamed NPC (ID: 17826117/0x01100145) [11584*]:
    → "The \u0001\u0005#\u0002\u0001\u0000\u0000 from which I sewed them acts to buttress the varied magicks that aid your companion-wanions. Never before has such a thing been attempted, making my accomplishmentaru all the more savory.\u007F1\u0000\u0007"
 70: 0x417E [0x23] WAIT_FOR_DIALOG_INTERACTION
 71: 0x417F [0x01] GOTO 0x41B9

SUBROUTINE_4182:
 72: 0x4182 [0x02] IF !(ExtData[1]->WorkLocal[4] == 5*) GOTO 0x41B9
 73: 0x418A [0x03] Work_Zone[1] = 5*
 74: 0x418F [0x03] Work_Zone[2] = 27370*
 75: 0x4194 [0xCC] ITEM_INFO_WINDOW_HANDLER(case=0x01 - Open item info window (with chase), check_value=Work_Zone[2], buffer1=2*, buffer2=1455*, buffer3=0*)
 76: 0x419E [0x2B] Unnamed NPC (ID: 17826117/0x01100145) [11580*]:
    → "Here you go, your new \u0001\u0005#\u0002\u0000\u0000\u0000. And since I was in such a good mood toward the end, I engrave-waved some arcane glyptics to sweeten the deal.\u007F1\u0000\u0007"
 77: 0x41A5 [0x23] WAIT_FOR_DIALOG_INTERACTION
 78: 0x41A6 [0x93] DISPLAY_ITEM_INFO(item_id=0*)
 79: 0x41A9 [0x03] Work_Zone[3] = 2199*
 80: 0x41AE [0x2B] Unnamed NPC (ID: 17826117/0x01100145) [11585*]:
    → "The \u0001\u0005#\u0002\u0001\u0000\u0000 I imbued this piece with enables you to deflectaru weapons as deftly as a princess does to unfit suitors at a ball.\u007F1\u0000\u0007"
 81: 0x41B5 [0x23] WAIT_FOR_DIALOG_INTERACTION
 82: 0x41B6 [0x01] GOTO 0x41B9

SUBROUTINE_41B9:
 83: 0x41B9 [0x52] END_LOAD_SCHEDULER: End scheduler "s002" with entities [EventEntity, EventEntity], work=617*
 84: 0x41C8 [0x45] LOAD_SCHEDULED_TASK(work_offset1=617*, entity1=EventEntity, entity2=EventEntity, scheduler_id="s009", work_offset2=0*)
 85: 0x41D9 [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=111*, entity1=Unnamed NPC (ID: 17826117/0x01100145), entity2=Unnamed NPC (ID: 17826117/0x01100145), action="pas0")
 86: 0x41E8 [0x2B] Unnamed NPC (ID: 17826117/0x01100145) [11586*]:
    → "Take it now.\u0007If I hold onto this piece of perfection any longer, my heart'll meltaru and I'll never be able to give it up.\u007F1\u0000\u0007"
 87: 0x41EF [0x23] WAIT_FOR_DIALOG_INTERACTION
 88: 0x41F0 [0x53] WAIT_SCHEDULER_TASK(entity1=Unnamed NPC (ID: 17826117/0x01100145), entity2=Unnamed NPC (ID: 17826117/0x01100145), action_id="pas0")
 89: 0x41FD [0x45] LOAD_SCHEDULED_TASK(work_offset1=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdo1", work_offset2=0*)
 90: 0x420E [0x55] WAIT_LOAD_SCHEDULER(work_offset=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdo1")
 91: 0x421D [0x52] END_LOAD_SCHEDULER: End scheduler "s009" with entities [EventEntity, EventEntity], work=617*
 92: 0x422C [0x5D] SET_MUSIC_VOLUME(volume=127*, fade_time=120*)
 93: 0x4231 [0x1C] WAIT(15* ticks)
 94: 0x4234 [0xAB] EventEntity->DespawnValue = 0* // Set despawn value
 95: 0x4238 [0x1C] WAIT(1* ticks)
 96: 0x423B [0xAB] EventEntity->UnknownFlag = 0 // Disable unknown flag
 97: 0x423D [0x46] CAMERA_CONTROL: Restore default settings
 98: 0x423F [0x45] LOAD_SCHEDULED_TASK(work_offset1=201*, entity1=EventEntity, entity2=EventEntity, scheduler_id="qstc", work_offset2=0*)
 99: 0x4250 [0x45] LOAD_SCHEDULED_TASK(work_offset1=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdi2", work_offset2=0*)
100: 0x4261 [0x21] END_EVENT
101: 0x4262 [0x00] END_REQSTACK()
```
