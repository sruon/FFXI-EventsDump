# Event 5021

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 14/32     |
| Offset          | 0x4E66    |
| Data Size       | 752 bytes |
| Calculated Size | 752 bytes |
| Instructions    | 89        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
4E60:                   42 45  00 80 F0 FF FF 7F F0 FF        BE........
4E70: FF 7F 66 64 6F 31 01 80  55 00 80 F0 FF FF 7F F0  ..fdo1..U.......
4E80: FF FF 7F 66 64 6F 31 46  01 38 11 80 1C 10 80 34  ...fdo1F.8.....4
4E90: D3 81 77 8C 80 10 80 1C  10 80 2F 00 C1 00 10 01  ..w......./.....
4EA0: 2F 00 C2 00 10 01 4E 00  C1 00 10 01 4E 00 C2 00  /.....N.....N...
4EB0: 10 01 94 01 C1 00 10 01  94 01 F0 FF FF 7F 94 01  ................
4EC0: C2 00 10 01 BA F0 FF FF  7F 07 80 03 82 01 80 04  ................
4ED0: 82 BA C1 00 10 01 05 82  06 82 01 80 04 82 BA C2  ................
4EE0: 00 10 01 08 82 09 82 01  80 0A 82 80 F0 FF FF 7F  ................
4EF0: 80 C1 00 10 01 4A C1 00  10 01 F0 FF FF 7F 4A F0  .....J........J.
4F00: FF FF 7F C1 00 10 01 1C  07 80 45 E3 81 F8 FF FF  ..........E.....
4F10: 7F F8 FF FF 7F 73 31 30  33 01 80 1C 09 80 45 00  .....s103.....E.
4F20: 80 F0 FF FF 7F F0 FF FF  7F 66 64 69 31 01 80 66  .........fdi1..f
4F30: 11 80 C1 00 10 01 C1 00  10 01 74 6C 6B 30 2B C1  ..........tlk0+.
4F40: 00 10 01 0B 82 23 66 11  80 C1 00 10 01 C1 00 10  .....#f.........
4F50: 01 74 6C 6B 31 52 E3 81  F8 FF FF 7F F8 FF FF 7F  .tlk1R..........
4F60: 73 31 30 33 02 87 7F 26  80 80 80 4F 45 E3 81 F8  s103...&...OE...
4F70: FF FF 7F F8 FF FF 7F 73  31 30 35 01 80 01 AD 4F  .......s105....O
4F80: 02 87 7F 36 80 80 9C 4F  45 E3 81 F8 FF FF 7F F8  ...6...OE.......
4F90: FF FF 7F 73 31 30 35 01  80 01 AD 4F 45 E3 81 F8  ...s105....OE...
4FA0: FF FF 7F F8 FF FF 7F 73  31 30 34 01 80 27 05 F0  .......s104..'..
4FB0: FF FF 7F 06 1C 65 80 66  11 80 C1 00 10 01 C1 00  .....e.f........
4FC0: 10 01 74 68 6B 31 2B C1  00 10 01 0C 82 23 66 11  ..thk1+......#f.
4FD0: 80 C1 00 10 01 C1 00 10  01 74 68 6B 32 52 E3 81  .........thk2R..
4FE0: F8 FF FF 7F F8 FF FF 7F  73 31 30 34 52 E3 81 F8  ........s104R...
4FF0: FF FF 7F F8 FF FF 7F 73  31 30 35 45 E3 81 F8 FF  .......s105E....
5000: FF 7F F8 FF FF 7F 73 31  30 36 01 80 2B C1 00 10  ......s106..+...
5010: 01 0D 82 23 6E C1 00 10  01 3D 80 99 C1 00 10 01  ...#n....=......
5020: 2B C1 00 10 01 0E 82 23  52 E3 81 F8 FF FF 7F F8  +......#R.......
5030: FF FF 7F 73 31 30 36 45  E3 81 F8 FF FF 7F F8 FF  ...s106E........
5040: FF 7F 73 31 30 37 01 80  66 0F 82 C1 00 10 01 C1  ..s107..f.......
5050: 00 10 01 70 61 73 30 2B  C1 00 10 01 10 82 23 53  ...pas0+......#S
5060: C1 00 10 01 C1 00 10 01  70 61 73 30 4B C1 00 10  ........pas0K...
5070: 01 04 82 1C 07 80 2C F8  00 10 01 F8 00 10 01 6F  ......,........o
5080: 70 65 6E 1C 3F 80 27 05  C1 00 10 01 04 1C 07 80  pen.?.'.........
5090: 52 E3 81 F8 FF FF 7F F8  FF FF 7F 73 31 30 37 45  R..........s107E
50A0: E3 81 F8 FF FF 7F F8 FF  FF 7F 73 31 30 38 01 80  ..........s108..
50B0: 79 00 C2 00 10 01 C1 00  10 01 1C 3F 80 4A C2 00  y..........?.J..
50C0: 10 01 C1 00 10 01 1C 65  80 52 E3 81 F8 FF FF 7F  .......e.R......
50D0: F8 FF FF 7F 73 31 30 38  45 E3 81 F8 FF FF 7F F8  ....s108E.......
50E0: FF FF 7F 73 31 30 39 01  80 1C 07 80 7C 00 C2 00  ...s109.....|...
50F0: 10 01 2B C2 00 10 01 11  82 23 45 00 80 F0 FF FF  ..+......#E.....
5100: 7F F0 FF FF 7F 66 64 6F  31 01 80 55 00 80 F0 FF  .....fdo1..U....
5110: FF 7F F0 FF FF 7F 66 64  6F 31 52 E3 81 F8 FF FF  ......fdo1R.....
5120: 7F F8 FF FF 7F 73 31 30  39 35 A2 80 78 1C 10 80  .....s1095..x...
5130: 45 7A 81 F8 FF FF 7F F8  FF FF 7F 71 73 74 63 01  Ez.........qstc.
5140: 80 46 00 45 00 80 F0 FF  FF 7F F0 FF FF 7F 66 64  .F.E..........fd
5150: 69 32 01 80 21 00                                 i2..!.          
```

## Opcodes

```
  0: 0x4E66 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x4E67 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
  2: 0x4E78 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=200*
  3: 0x4E87 [0x46] CAMERA_CONTROL: Disable user control
  4: 0x4E89 [0x38] SET_CLIENT_EVENT_MODE(mode=19*)
  5: 0x4E8C [0x1C] WAIT(1* ticks)
  6: 0x4E8F [0x34] LOAD_UNLOAD_ZONE(zone_id=593*)
  7: 0x4E92 [0x77] SET_EVENT_TIME_WEATHER(hour=255*, weather=1*)
  8: 0x4E97 [0x1C] WAIT(1* ticks)
  9: 0x4E9A [0x2F] Alianne (ID: 17825985/0x011000C1)->Render.Flags0 &= ~0x80000 // Bit 19
 10: 0x4EA0 [0x2F] Othellius (ID: 17825986/0x011000C2)->Render.Flags0 &= ~0x80000 // Bit 19
 11: 0x4EA6 [0x4E] SET_ENTITY_HIDE_FLAG: Show Alianne (ID: 17825985/0x011000C1)
 12: 0x4EAC [0x4E] SET_ENTITY_HIDE_FLAG: Show Othellius (ID: 17825986/0x011000C2)
 13: 0x4EB2 [0x94] Alianne (ID: 17825985/0x011000C1)->Render.Flags3 ^= 0x01
 14: 0x4EB8 [0x94] LocalPlayer->Render.Flags3 ^= 0x01
 15: 0x4EBE [0x94] Othellius (ID: 17825986/0x011000C2)->Render.Flags3 ^= 0x01
 16: 0x4EC4 [0xBA] SET_ENTITY_POSITION(entity_id=LocalPlayer, pos_x=0.030*, pos_z=-22.374*, pos_y=0.000*, direction=263.1°*)
 17: 0x4ED1 [0xBA] SET_ENTITY_POSITION(entity_id=Alianne (ID: 17825985/0x011000C1), pos_x=0.091*, pos_z=-19.928*, pos_y=0.000*, direction=263.1°*)
 18: 0x4EDE [0xBA] SET_ENTITY_POSITION(entity_id=Othellius (ID: 17825986/0x011000C2), pos_x=1.751*, pos_z=-14.068*, pos_y=0.000*, direction=135.8°*)
 19: 0x4EEB [0x80] LOAD_WAIT(entity=LocalPlayer)
 20: 0x4EF0 [0x80] LOAD_WAIT(entity=Alianne (ID: 17825985/0x011000C1))
 21: 0x4EF5 [0x4A] Alianne (ID: 17825985/0x011000C1) looks at LocalPlayer
 22: 0x4EFE [0x4A] LocalPlayer looks at Alianne (ID: 17825985/0x011000C1)
 23: 0x4F07 [0x1C] WAIT(30* ticks)
 24: 0x4F0A [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s103" with entities [EventEntity, EventEntity], work=[621*, 0*]
 25: 0x4F1B [0x1C] WAIT(15* ticks)
 26: 0x4F1E [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 27: 0x4F2F [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [Alianne (ID: 17825985/0x011000C1), Alianne (ID: 17825985/0x011000C1)], work=19*
 28: 0x4F3E [0x2B] Alianne (ID: 17825985/0x011000C1) [9474*]:
    → "That face...\u007F6\u0001\u0007Now I remember. You came here earlier looking for Mistress Svenja, did you not?\u007F1\u0000\u0007"
 29: 0x4F45 [0x23] WAIT_FOR_DIALOG_INTERACTION
 30: 0x4F46 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk1" with entities [Alianne (ID: 17825985/0x011000C1), Alianne (ID: 17825985/0x011000C1)], work=19*
 31: 0x4F55 [0x52] END_LOAD_SCHEDULER: End scheduler "s103" with entities [EventEntity, EventEntity], work=621*
 32: 0x4F64 [0x02] IF !(LocalPlayer->Race == 5*) GOTO 0x4F80
 33: 0x4F6C [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s105" with entities [EventEntity, EventEntity], work=[621*, 0*]
 34: 0x4F7D [0x01] GOTO 0x4FAD

SUBROUTINE_4F80:
 35: 0x4F80 [0x02] IF !(LocalPlayer->Race == 6*) GOTO 0x4F9C
 36: 0x4F88 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s105" with entities [EventEntity, EventEntity], work=[621*, 0*]
 37: 0x4F99 [0x01] GOTO 0x4FAD

SUBROUTINE_4F9C:
 38: 0x4F9C [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s104" with entities [EventEntity, EventEntity], work=[621*, 0*]
 39: 0x4FAD [0x27] REQ_SET(priority=0x05, entity_id=LocalPlayer, tag_num=0x06)
 40: 0x4FB4 [0x1C] WAIT(120* ticks)
 41: 0x4FB7 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "thk1" with entities [Alianne (ID: 17825985/0x011000C1), Alianne (ID: 17825985/0x011000C1)], work=19*
 42: 0x4FC6 [0x2B] Alianne (ID: 17825985/0x011000C1) [9475*]:
    → "What an odd plant you have brought with you. What would you have me do with it?\u007F1\u0000\u0007"
 43: 0x4FCD [0x23] WAIT_FOR_DIALOG_INTERACTION
 44: 0x4FCE [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "thk2" with entities [Alianne (ID: 17825985/0x011000C1), Alianne (ID: 17825985/0x011000C1)], work=19*
 45: 0x4FDD [0x52] END_LOAD_SCHEDULER: End scheduler "s104" with entities [EventEntity, EventEntity], work=621*
 46: 0x4FEC [0x52] END_LOAD_SCHEDULER: End scheduler "s105" with entities [EventEntity, EventEntity], work=621*
 47: 0x4FFB [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s106" with entities [EventEntity, EventEntity], work=[621*, 0*]
 48: 0x500C [0x2B] Alianne (ID: 17825985/0x011000C1) [9476*]:
    → "You mean it has curative properties that will help some poor young lad make a full recovery?\u007F1\u0000\u0007"
 49: 0x5013 [0x23] WAIT_FOR_DIALOG_INTERACTION
 50: 0x5014 [0x6E] Alianne (ID: 17825985/0x011000C1) uses emote 7*
 51: 0x501B [0x99] Wait for Alianne (ID: 17825985/0x011000C1) animation to complete
 52: 0x5020 [0x2B] Alianne (ID: 17825985/0x011000C1) [9477*]:
    → "These are the very words of our mistress herself? Then I shall see that she receives it right away.\u007F1\u0000\u0007"
 53: 0x5027 [0x23] WAIT_FOR_DIALOG_INTERACTION
 54: 0x5028 [0x52] END_LOAD_SCHEDULER: End scheduler "s106" with entities [EventEntity, EventEntity], work=621*
 55: 0x5037 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s107" with entities [EventEntity, EventEntity], work=[621*, 0*]
 56: 0x5048 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "pas0" with entities [Alianne (ID: 17825985/0x011000C1), Alianne (ID: 17825985/0x011000C1)], work=81*
 57: 0x5057 [0x2B] Alianne (ID: 17825985/0x011000C1) [9478*]:
    → "Your efforts to aid our order are greatly appreciated, and most certainly deserve proper remuneration.\u007F1\u0000\u0007"
 58: 0x505E [0x23] WAIT_FOR_DIALOG_INTERACTION
 59: 0x505F [0x53] WAIT_SCHEDULER_TASK: Wait for scheduler "pas0" with entities [Alianne (ID: 17825985/0x011000C1), Alianne (ID: 17825985/0x011000C1)]
 60: 0x506C [0x4B] UPDATE_ENTITY_YAW(entity=Alianne (ID: 17825985/0x011000C1), yaw=16.45°*)
 61: 0x5073 [0x1C] WAIT(30* ticks)
 62: 0x5076 [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "open" with entities [Unnamed NPC (ID: 17826040/0x011000F8), Unnamed NPC (ID: 17826040/0x011000F8)]
 63: 0x5083 [0x1C] WAIT(60* ticks)
 64: 0x5086 [0x27] REQ_SET(priority=0x05, entity_id=Alianne (ID: 17825985/0x011000C1), tag_num=0x04)
 65: 0x508D [0x1C] WAIT(30* ticks)
 66: 0x5090 [0x52] END_LOAD_SCHEDULER: End scheduler "s107" with entities [EventEntity, EventEntity], work=621*
 67: 0x509F [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s108" with entities [EventEntity, EventEntity], work=[621*, 0*]
 68: 0x50B0 [0x79] Othellius (ID: 17825986/0x011000C2) looks at Alianne (ID: 17825985/0x011000C1) (Basic look)
 69: 0x50BA [0x1C] WAIT(60* ticks)
 70: 0x50BD [0x4A] Othellius (ID: 17825986/0x011000C2) looks at Alianne (ID: 17825985/0x011000C1)
 71: 0x50C6 [0x1C] WAIT(120* ticks)
 72: 0x50C9 [0x52] END_LOAD_SCHEDULER: End scheduler "s108" with entities [EventEntity, EventEntity], work=621*
 73: 0x50D8 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s109" with entities [EventEntity, EventEntity], work=[621*, 0*]
 74: 0x50E9 [0x1C] WAIT(30* ticks)
 75: 0x50EC [0x7C] Othellius (ID: 17825986/0x011000C2)->Render.Flags2 |= 0x00
 76: 0x50F2 [0x2B] Othellius (ID: 17825986/0x011000C2) [9479*]:
    → "...\u007F1\u0000\u0007"
 77: 0x50F9 [0x23] WAIT_FOR_DIALOG_INTERACTION
 78: 0x50FA [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 79: 0x510B [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=200*
 80: 0x511A [0x52] END_LOAD_SCHEDULER: End scheduler "s109" with entities [EventEntity, EventEntity], work=621*
 81: 0x5129 [0x35] LOAD_ZONE_NO_CLOSE(zone_id=700*)
 82: 0x512C [0x78] ENABLE_GAME_TIMER_RESET_WEATHER()
 83: 0x512D [0x1C] WAIT(1* ticks)
 84: 0x5130 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "qstc" with entities [EventEntity, EventEntity], work=[201*, 0*]
 85: 0x5141 [0x46] CAMERA_CONTROL: Restore default settings
 86: 0x5143 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi2" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 87: 0x5154 [0x21] END_EVENT
 88: 0x5155 [0x00] END_REQSTACK()
```
