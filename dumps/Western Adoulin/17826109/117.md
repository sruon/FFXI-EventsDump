# Event 117

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 12/19     |
| Offset          | 0x0D20    |
| Data Size       | 307 bytes |
| Calculated Size | 307 bytes |
| Instructions    | 48        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0D20: 42 1A 64 00 46 01 38 0C  80 27 10 45 01 10 01 04  B.d.F.8..'.E....
0D30: 92 01 45 01 10 01 94 01  45 01 10 01 29 10 45 01  ..E.....E...).E.
0D40: 10 01 25 BA 45 01 10 01  59 80 5A 80 5B 80 10 80  ..%.E...Y.Z.[...
0D50: BA F0 FF FF 7F 3A 80 3B  80 13 80 14 80 4A F0 FF  .....:.;.....J..
0D60: FF 7F 45 01 10 01 80 F0  FF FF 7F 80 45 01 10 01  ..E.........E...
0D70: 27 10 45 01 10 01 27 1C  5C 80 45 15 80 F0 FF FF  '.E...'.\.E.....
0D80: 7F F0 FF FF 7F 73 31 32  30 01 80 1A 43 00 2A 10  .....s120...C.*.
0D90: 45 01 10 01 1C 20 80 7B  45 01 10 01 4A 45 01 10  E.... .{E...JE..
0DA0: 01 F0 FF FF 7F 6F 70 2B  45 01 10 01 5D 80 23 66  .....op+E...].#f
0DB0: 5E 80 45 01 10 01 45 01  10 01 70 61 73 30 1C 34  ^.E...E...pas0.4
0DC0: 80 52 15 80 F0 FF FF 7F  F0 FF FF 7F 73 31 32 30  .R..........s120
0DD0: 45 15 80 F0 FF FF 7F F0  FF FF 7F 73 31 35 32 01  E..........s152.
0DE0: 80 6E F0 FF FF 7F 5F 80  99 F0 FF FF 7F 1C 34 80  .n...._.......4.
0DF0: 27 10 F0 FF FF 7F 6B 1C  60 80 66 28 80 45 01 10  '.....k.`.f(.E..
0E00: 01 45 01 10 01 73 68 61  30 1C 3C 80 1A 64 00 1C  .E...sha0.<..d..
0E10: 06 80 52 15 80 F0 FF FF  7F F0 FF FF 7F 73 31 35  ..R..........s15
0E20: 32 1C 20 80 AB 11 01 80  1C 03 80 AB 0A 46 00 45  2. ..........F.E
0E30: 02 80 F8 FF FF 7F F8 FF  FF 7F 71 73 74 63 01 80  ..........qstc..
0E40: 45 00 80 F0 FF FF 7F F0  FF FF 7F 66 64 69 32 01  E..........fdi2.
0E50: 80 21 00                                          .!.             
```

## Opcodes

```
  0: 0x0D20 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x0D21 [0x1A] CALL_SUBROUTINE(address=0x0064)
  2: 0x0D24 [0x46] CAMERA_CONTROL: Disable user control
  3: 0x0D26 [0x38] SET_CLIENT_EVENT_MODE(mode=19*)
  4: 0x0D29 [0x27] REQ_SET(priority=0x10, entity_id=Unnamed NPC (ID: 17826117/0x01100145), tag_num=0x04)
  5: 0x0D30 [0x92] Unnamed NPC (ID: 17826117/0x01100145)->Render.Flags3 ^= 0x01
  6: 0x0D36 [0x94] Unnamed NPC (ID: 17826117/0x01100145)->Render.Flags3 ^= 0x01
  7: 0x0D3C [0x29] REQ_SET_WAIT(priority=0x10, entity_id=Unnamed NPC (ID: 17826117/0x01100145), tag_num=0x25)
  8: 0x0D43 [0xBA] SET_ENTITY_POSITION(entity_id=Unnamed NPC (ID: 17826117/0x01100145), pos_x=52.660*, pos_z=162.965*, pos_y=28.000*, direction=142.4°*)
  9: 0x0D50 [0xBA] SET_ENTITY_POSITION(entity_id=LocalPlayer, pos_x=54.099*, pos_z=158.511*, pos_y=31.999*, direction=245.0°*)
 10: 0x0D5D [0x4A] LocalPlayer looks at Unnamed NPC (ID: 17826117/0x01100145)
 11: 0x0D66 [0x80] LOAD_WAIT(entity=LocalPlayer)
 12: 0x0D6B [0x80] LOAD_WAIT(entity=Unnamed NPC (ID: 17826117/0x01100145))
 13: 0x0D70 [0x27] REQ_SET(priority=0x10, entity_id=Unnamed NPC (ID: 17826117/0x01100145), tag_num=0x27)
 14: 0x0D77 [0x1C] WAIT(20* ticks)
 15: 0x0D7A [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s120" with entities [LocalPlayer, LocalPlayer], work=[611*, 0*]
 16: 0x0D8B [0x1A] CALL_SUBROUTINE(address=0x0043)
 17: 0x0D8E [0x2A] GET_REQ_LEVEL(level=16, entity_id=Unnamed NPC (ID: 17826117/0x01100145))
 18: 0x0D94 [0x1C] WAIT(15* ticks)
 19: 0x0D97 [0x7B] Unnamed NPC (ID: 17826117/0x01100145) stops talking
 20: 0x0D9C [0x4A] Unnamed NPC (ID: 17826117/0x01100145) looks at LocalPlayer
 21: 0x0DA5 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 22: 0x0DA6 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
 23: 0x0DA7 [0x2B] Unnamed NPC (ID: 17826117/0x01100145) [12561*]:
    → "And, finally... Here you go.\u0007What a mastarupiece it is, if I may say so myself.\u007F1\u0000\u0007"
 24: 0x0DAE [0x23] WAIT_FOR_DIALOG_INTERACTION
 25: 0x0DAF [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "pas0" with entities [Unnamed NPC (ID: 17826117/0x01100145), Unnamed NPC (ID: 17826117/0x01100145)], work=111*
 26: 0x0DBE [0x1C] WAIT(120* ticks)
 27: 0x0DC1 [0x52] END_LOAD_SCHEDULER: End scheduler "s120" with entities [LocalPlayer, LocalPlayer], work=611*
 28: 0x0DD0 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s152" with entities [LocalPlayer, LocalPlayer], work=[611*, 0*]
 29: 0x0DE1 [0x6E] LocalPlayer uses emote 11*
 30: 0x0DE8 [0x99] Wait for LocalPlayer animation to complete
 31: 0x0DED [0x1C] WAIT(120* ticks)
 32: 0x0DF0 [0x27] REQ_SET(priority=0x10, entity_id=LocalPlayer, tag_num=0x6B)
 33: 0x0DF7 [0x1C] WAIT(180* ticks)
 34: 0x0DFA [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "sha0" with entities [Unnamed NPC (ID: 17826117/0x01100145), Unnamed NPC (ID: 17826117/0x01100145)], work=49*
 35: 0x0E09 [0x1C] WAIT(75* ticks)
 36: 0x0E0C [0x1A] CALL_SUBROUTINE(address=0x0064)
 37: 0x0E0F [0x1C] WAIT(30* ticks)
 38: 0x0E12 [0x52] END_LOAD_SCHEDULER: End scheduler "s152" with entities [LocalPlayer, LocalPlayer], work=611*
 39: 0x0E21 [0x1C] WAIT(15* ticks)
 40: 0x0E24 [0xAB] EventEntity->DespawnValue = 0* // Set despawn value
 41: 0x0E28 [0x1C] WAIT(1* ticks)
 42: 0x0E2B [0xAB] EventEntity->UnknownFlag = 0 // Disable unknown flag
 43: 0x0E2D [0x46] CAMERA_CONTROL: Restore default settings
 44: 0x0E2F [0x45] LOAD_SCHEDULED_TASK: Load scheduler "qstc" with entities [EventEntity, EventEntity], work=[201*, 0*]
 45: 0x0E40 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi2" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 46: 0x0E51 [0x21] END_EVENT
 47: 0x0E52 [0x00] END_REQSTACK()
```
