# Event 10158

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 8/102     |
| Offset          | 0x14D8    |
| Data Size       | 514 bytes |
| Calculated Size | 514 bytes |
| Instructions    | 91        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
14D0:                          42 41 39 80 39 80 09 10          BA9.9...
14E0: 2D 00 3D 09 10 39 80 0F  80 03 02 00 06 10 03 03  -.=..9..........
14F0: 00 07 10 03 04 00 08 10  03 01 00 09 10 03 06 00  ................
1500: 02 10 03 07 00 03 10 03  08 00 04 10 03 05 00 05  ................
1510: 10 1E F0 FF FF 7F 79 00  F8 FF FF 7F F0 FF FF 7F  ......y.........
1520: 29 80 EB 30 0F 01 09 1C  03 80 02 2D 00 0F 80 00  )..0.......-....
1530: 3A 15 03 02 10 00 80 01  3F 15 03 02 10 0A 80 1D  :.......?.......
1540: 98 82 23 1D 9A 82 23 02  02 00 08 80 00 7F 15 02  ..#...#.........
1550: 03 00 08 80 00 72 15 02  04 00 08 80 00 65 15 93  .....r.......e..
1560: 01 00 01 6F 15 CC 01 01  00 02 00 03 00 04 00 01  ...o............
1570: 7C 15 CC 01 01 00 02 00  03 00 04 00 01 89 15 CC  |...............
1580: 01 01 00 02 00 03 00 04  00 1D 9B 82 23 02 02 00  ............#...
1590: 08 80 00 C5 15 02 03 00  08 80 00 B8 15 02 04 00  ................
15A0: 08 80 00 AB 15 93 08 80  01 B5 15 CC 01 08 80 08  ................
15B0: 80 08 80 08 80 01 C2 15  CC 01 08 80 08 80 08 80  ................
15C0: 08 80 01 CF 15 CC 01 08  80 08 80 08 80 08 80 2C  ...............,
15D0: F8 FF FF 7F F8 FF FF 7F  6A 6F 62 30 AD 02 9C 82  ........job0....
15E0: F8 FF FF 7F F0 FF FF 7F  1C 9D 82 73 9E 82 F8 FF  ...........s....
15F0: FF 7F F0 FF FF 7F 27 80  EB 30 0F 01 07 1C 96 82  ......'..0......
1600: 1A 52 1D 2C F8 FF FF 7F  F8 FF FF 7F 6A 6F 62 31  .R.,........job1
1610: 1C 96 82 03 02 10 01 00  48 9F 82 23 03 01 10 40  ........H..#...@
1620: 80 43 00 43 01 02 02 10  08 80 01 35 16 02 03 10  .C.C.......5....
1630: 08 80 00 35 16 1A 31 1D  02 06 00 08 80 00 70 16  ...5..1.......p.
1640: 02 07 00 08 80 00 63 16  02 08 00 08 80 00 56 16  ......c.......V.
1650: 93 05 00 01 60 16 CC 01  05 00 06 00 07 00 08 00  ....`...........
1660: 01 6D 16 CC 01 05 00 06  00 07 00 08 00 01 7A 16  .m............z.
1670: CC 01 05 00 06 00 07 00  08 00 1D A0 82 23 02 06  .............#..
1680: 00 08 80 00 B6 16 02 07  00 08 80 00 A9 16 02 08  ................
1690: 00 08 80 00 9C 16 93 08  80 01 A6 16 CC 01 08 80  ................
16A0: 08 80 08 80 08 80 01 B3  16 CC 01 08 80 08 80 08  ................
16B0: 80 08 80 01 C0 16 CC 01  08 80 08 80 08 80 08 80  ................
16C0: 1D 71 80 23 45 10 80 F0  FF FF 7F F0 FF FF 7F 71  .q.#E..........q
16D0: 73 74 63 08 80 1C A1 82  21 00                    stc.....!.      
```

## Opcodes

```
  0: 0x14D8 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x14D9 [0x41] GET_BIT_WORK_RANGE(start_bit=31*, end_bit=31*, source=Work_Zone[9], result=ExtData[1]->WorkLocal[45])
  2: 0x14E2 [0x3D] CLEAR_BIT_FLAG_CONDITIONAL(target_work_offset=0x1009, bit_index_work_offset=0x8039, condition_work_offset=0x800F)
  3: 0x14E9 [0x03] ExtData[1]->WorkLocal[2] = Work_Zone[6]
  4: 0x14EE [0x03] ExtData[1]->WorkLocal[3] = Work_Zone[7]
  5: 0x14F3 [0x03] ExtData[1]->WorkLocal[4] = Work_Zone[8]
  6: 0x14F8 [0x03] ExtData[1]->WorkLocal[1] = Work_Zone[9]
  7: 0x14FD [0x03] ExtData[1]->WorkLocal[6] = Work_Zone[2]
  8: 0x1502 [0x03] ExtData[1]->WorkLocal[7] = Work_Zone[3]
  9: 0x1507 [0x03] ExtData[1]->WorkLocal[8] = Work_Zone[4]
 10: 0x150C [0x03] ExtData[1]->WorkLocal[5] = Work_Zone[5]
 11: 0x1511 [0x1E] EventEntity looks at LocalPlayer and starts talking
 12: 0x1516 [0x79] EventEntity looks at LocalPlayer (Basic look)
 13: 0x1520 [0x29] REQ_SET_WAIT(priority=0x80, entity_id=Unnamed NPC (ID: 17772779/0x010F30EB), tag_num=0x09)
 14: 0x1527 [0x1C] WAIT(60* ticks)
 15: 0x152A [0x02] IF !(ExtData[1]->WorkLocal[45] == 1*) GOTO 0x153A
 16: 0x1532 [0x03] Work_Zone[2] = 1767*
 17: 0x1537 [0x01] GOTO 0x153F

SUBROUTINE_153A:
 18: 0x153A [0x03] Work_Zone[2] = 1261*
 19: 0x153F [0x1D] PRINT_EVENT_MESSAGE(message_id=14732*)
    → "Well, look who's managed to complete their trial!\u0007That \u0001\u00053\u0002\u0000\u0000\u0000 is just boiling to the brim with moogle magic!\u007F1\u0000\u0007"
 20: 0x1542 [0x23] WAIT_FOR_DIALOG_INTERACTION
 21: 0x1543 [0x1D] PRINT_EVENT_MESSAGE(message_id=14733*)
    → "I certainly hope I remember the incantation the elders taught me.\u007F1\u0000\u0007"
 22: 0x1546 [0x23] WAIT_FOR_DIALOG_INTERACTION
 23: 0x1547 [0x02] IF !(ExtData[1]->WorkLocal[2] == 0*) GOTO 0x157F
 24: 0x154F [0x02] IF !(ExtData[1]->WorkLocal[3] == 0*) GOTO 0x1572
 25: 0x1557 [0x02] IF !(ExtData[1]->WorkLocal[4] == 0*) GOTO 0x1565
 26: 0x155F [0x93] DISPLAY_ITEM_INFO(item_id=ExtData[1]->WorkLocal[1])
 27: 0x1562 [0x01] GOTO 0x156F

SUBROUTINE_1565:
 28: 0x1565 [0xCC] ITEM_INFO_WINDOW_HANDLER(case=0x01 - Open item info window (with chase), check_value=ExtData[1]->WorkLocal[1], buffer1=ExtData[1]->WorkLocal[2], buffer2=ExtData[1]->WorkLocal[3], buffer3=ExtData[1]->WorkLocal[4])
 29: 0x156F [0x01] GOTO 0x157C

SUBROUTINE_1572:
 30: 0x1572 [0xCC] ITEM_INFO_WINDOW_HANDLER(case=0x01 - Open item info window (with chase), check_value=ExtData[1]->WorkLocal[1], buffer1=ExtData[1]->WorkLocal[2], buffer2=ExtData[1]->WorkLocal[3], buffer3=ExtData[1]->WorkLocal[4])
 31: 0x157C [0x01] GOTO 0x1589

SUBROUTINE_157F:
 32: 0x157F [0xCC] ITEM_INFO_WINDOW_HANDLER(case=0x01 - Open item info window (with chase), check_value=ExtData[1]->WorkLocal[1], buffer1=ExtData[1]->WorkLocal[2], buffer2=ExtData[1]->WorkLocal[3], buffer3=ExtData[1]->WorkLocal[4])
 33: 0x1589 [0x1D] PRINT_EVENT_MESSAGE(message_id=14734*)
    → "Kupolius...augmentus!\u007F1\u0000\u0007"
 34: 0x158C [0x23] WAIT_FOR_DIALOG_INTERACTION
 35: 0x158D [0x02] IF !(ExtData[1]->WorkLocal[2] == 0*) GOTO 0x15C5
 36: 0x1595 [0x02] IF !(ExtData[1]->WorkLocal[3] == 0*) GOTO 0x15B8
 37: 0x159D [0x02] IF !(ExtData[1]->WorkLocal[4] == 0*) GOTO 0x15AB
 38: 0x15A5 [0x93] DISPLAY_ITEM_INFO(item_id=0*)
 39: 0x15A8 [0x01] GOTO 0x15B5

SUBROUTINE_15AB:
 40: 0x15AB [0xCC] ITEM_INFO_WINDOW_HANDLER(case=0x01 - Open item info window (with chase), check_value=0*, buffer1=0*, buffer2=0*, buffer3=0*)
 41: 0x15B5 [0x01] GOTO 0x15C2

SUBROUTINE_15B8:
 42: 0x15B8 [0xCC] ITEM_INFO_WINDOW_HANDLER(case=0x01 - Open item info window (with chase), check_value=0*, buffer1=0*, buffer2=0*, buffer3=0*)
 43: 0x15C2 [0x01] GOTO 0x15CF

SUBROUTINE_15C5:
 44: 0x15C5 [0xCC] ITEM_INFO_WINDOW_HANDLER(case=0x01 - Open item info window (with chase), check_value=0*, buffer1=0*, buffer2=0*, buffer3=0*)
 45: 0x15CF [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "job0" with entities [EventEntity, EventEntity]
 46: 0x15DC [0xAD] DUAL_ENTITY_SCHEDULER_HANDLER: Execute sub-case 2 with entities [EventEntity, LocalPlayer], work=204*
 47: 0x15E8 [0x1C] WAIT(240* ticks)
 48: 0x15EB [0x73] EventEntity casts magic 259* on LocalPlayer
 49: 0x15F6 [0x27] REQ_SET(priority=0x80, entity_id=Unnamed NPC (ID: 17772779/0x010F30EB), tag_num=0x07)
 50: 0x15FD [0x1C] WAIT(120* ticks)
 51: 0x1600 [0x1A] CALL_SUBROUTINE(address=0x1D52)
 52: 0x1603 [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "job1" with entities [EventEntity, EventEntity]
 53: 0x1610 [0x1C] WAIT(120* ticks)
 54: 0x1613 [0x03] Work_Zone[2] = ExtData[1]->WorkLocal[1]
 55: 0x1618 [0x48] [System] [14735*]:
    → "There is a sudden flash of light as potent moogle magic surges through the \u0001\u0005#\u0002\u0000\u0000\u0000!\u007F1\u0000\u0007"
 56: 0x161B [0x23] WAIT_FOR_DIALOG_INTERACTION
 57: 0x161C [0x03] Work_Zone[1] = 15*
 58: 0x1621 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
 59: 0x1623 [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
 60: 0x1625 [0x02] IF !(Work_Zone[2] == 0*) GOTO 0x1635
 61: 0x162D [0x02] IF !(Work_Zone[3] == 0*) GOTO 0x1635
 62: 0x1635 [0x1A] CALL_SUBROUTINE(address=0x1D31)
 63: 0x1638 [0x02] IF !(ExtData[1]->WorkLocal[6] == 0*) GOTO 0x1670
 64: 0x1640 [0x02] IF !(ExtData[1]->WorkLocal[7] == 0*) GOTO 0x1663
 65: 0x1648 [0x02] IF !(ExtData[1]->WorkLocal[8] == 0*) GOTO 0x1656
 66: 0x1650 [0x93] DISPLAY_ITEM_INFO(item_id=ExtData[1]->WorkLocal[5])
 67: 0x1653 [0x01] GOTO 0x1660

SUBROUTINE_1656:
 68: 0x1656 [0xCC] ITEM_INFO_WINDOW_HANDLER(case=0x01 - Open item info window (with chase), check_value=ExtData[1]->WorkLocal[5], buffer1=ExtData[1]->WorkLocal[6], buffer2=ExtData[1]->WorkLocal[7], buffer3=ExtData[1]->WorkLocal[8])
 69: 0x1660 [0x01] GOTO 0x166D

SUBROUTINE_1663:
 70: 0x1663 [0xCC] ITEM_INFO_WINDOW_HANDLER(case=0x01 - Open item info window (with chase), check_value=ExtData[1]->WorkLocal[5], buffer1=ExtData[1]->WorkLocal[6], buffer2=ExtData[1]->WorkLocal[7], buffer3=ExtData[1]->WorkLocal[8])
 71: 0x166D [0x01] GOTO 0x167A

SUBROUTINE_1670:
 72: 0x1670 [0xCC] ITEM_INFO_WINDOW_HANDLER(case=0x01 - Open item info window (with chase), check_value=ExtData[1]->WorkLocal[5], buffer1=ExtData[1]->WorkLocal[6], buffer2=ExtData[1]->WorkLocal[7], buffer3=ExtData[1]->WorkLocal[8])
 73: 0x167A [0x1D] PRINT_EVENT_MESSAGE(message_id=14738*)
    → "Well, this was perfect practice for both of us, wouldn't you say?\u0007Come back any time you're ready for another trial, kupo!\u007F1\u0000\u0007"
 74: 0x167D [0x23] WAIT_FOR_DIALOG_INTERACTION
 75: 0x167E [0x02] IF !(ExtData[1]->WorkLocal[6] == 0*) GOTO 0x16B6
 76: 0x1686 [0x02] IF !(ExtData[1]->WorkLocal[7] == 0*) GOTO 0x16A9
 77: 0x168E [0x02] IF !(ExtData[1]->WorkLocal[8] == 0*) GOTO 0x169C
 78: 0x1696 [0x93] DISPLAY_ITEM_INFO(item_id=0*)
 79: 0x1699 [0x01] GOTO 0x16A6

SUBROUTINE_169C:
 80: 0x169C [0xCC] ITEM_INFO_WINDOW_HANDLER(case=0x01 - Open item info window (with chase), check_value=0*, buffer1=0*, buffer2=0*, buffer3=0*)
 81: 0x16A6 [0x01] GOTO 0x16B3

SUBROUTINE_16A9:
 82: 0x16A9 [0xCC] ITEM_INFO_WINDOW_HANDLER(case=0x01 - Open item info window (with chase), check_value=0*, buffer1=0*, buffer2=0*, buffer3=0*)
 83: 0x16B3 [0x01] GOTO 0x16C0

SUBROUTINE_16B6:
 84: 0x16B6 [0xCC] ITEM_INFO_WINDOW_HANDLER(case=0x01 - Open item info window (with chase), check_value=0*, buffer1=0*, buffer2=0*, buffer3=0*)
 85: 0x16C0 [0x1D] PRINT_EVENT_MESSAGE(message_id=14739*)
    → "Ta-ta, kupo!\u007F1\u0000\u0007"
 86: 0x16C3 [0x23] WAIT_FOR_DIALOG_INTERACTION
 87: 0x16C4 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "qstc" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
 88: 0x16D5 [0x1C] WAIT(30* ticks)
 89: 0x16D8 [0x21] END_EVENT
 90: 0x16D9 [0x00] END_REQSTACK()
```
