# Event 10133

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 2/20      |
| Offset          | 0x000B    |
| Data Size       | 767 bytes |
| Calculated Size | 767 bytes |
| Instructions    | 127       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000:                                   42 4A F0 FF FF             BJ...
0010: 7F F8 FF FF 7F 2C F8 FF  FF 7F F8 FF FF 7F 6F 70  .....,........op
0020: 65 6E 1C 01 80 03 03 00  02 80 02 03 00 00 80 04  en..............
0030: 60 01 02 03 00 02 80 80  FB 00 03 08 00 03 80 03  `...............
0040: 0A 00 00 80 1A 72 01 02  07 00 00 80 00 56 00 3C  .....r.......V.<
0050: 0A 00 04 80 05 80 02 07  00 08 00 00 65 00 3C 0A  ............e.<.
0060: 00 06 80 05 80 24 07 80  09 00 0A 00 25 02 00 10  .....$......%...
0070: 04 80 00 88 00 02 07 00  00 80 02 85 00 0C 07 00  ................
0080: 03 09 00 00 80 01 F8 00  02 00 10 06 80 00 A3 00  ................
0090: 02 07 00 03 80 03 A0 00  0B 07 00 03 09 00 00 80  ................
00A0: 01 F8 00 02 00 10 08 80  00 B8 00 03 01 10 09 80  ................
00B0: 03 03 00 0A 80 01 F8 00  02 00 10 04 80 03 EE 00  ................
00C0: 03 06 00 00 80 03 05 00  07 00 14 05 00 04 80 07  ................
00D0: 05 00 00 10 9D 00 AA 02  17 17 05 00 03 04 00 03  ................
00E0: 00 03 03 00 0B 80 03 09  00 00 10 01 F8 00 03 01  ................
00F0: 10 09 80 03 03 00 0A 80  01 5D 01 02 03 00 0B 80  .........]......
0100: 80 15 01 93 17 17 48 0C  80 23 93 00 80 03 03 00  ......H..#......
0110: 0D 80 01 5D 01 02 03 00  0D 80 80 5D 01 24 0E 80  ...].......].$..
0120: 05 80 00 80 25 02 00 10  00 80 00 4A 01 06 01 10  ....%......J....
0130: 40 00 80 05 80 01 10 06  00 40 03 80 0F 80 01 10  @........@......
0140: 05 00 03 03 00 0A 80 01  5A 01 02 00 10 05 80 00  ........Z.......
0150: 5A 01 03 03 00 04 00 01  5A 01 01 5D 01 01 2A 00  Z.......Z..]..*.
0160: 2C F8 FF FF 7F F8 FF FF  7F 63 6C 6F 73 1C 01 80  ,........clos...
0170: 21 00 03 01 00 00 80 03  02 00 07 00 14 02 00 04  !...............
0180: 80 02 01 00 04 80 03 A9  02 9D 00 AA 02 00 00 02  ................
0190: 00 02 00 00 00 80 00 A0  01 3C 0A 00 01 00 05 80  .........<......
01A0: 02 01 00 00 80 80 B0 01  03 02 10 00 00 01 A0 02  ................
01B0: 02 01 00 05 80 80 C0 01  03 03 10 00 00 01 A0 02  ................
01C0: 02 01 00 03 80 80 D0 01  03 04 10 00 00 01 A0 02  ................
01D0: 02 01 00 10 80 80 E0 01  03 05 10 00 00 01 A0 02  ................
01E0: 02 01 00 11 80 80 F0 01  03 06 10 00 00 01 A0 02  ................
01F0: 02 01 00 12 80 80 00 02  03 07 10 00 00 01 A0 02  ................
0200: 02 01 00 13 80 80 10 02  03 08 10 00 00 01 A0 02  ................
0210: 02 01 00 14 80 80 20 02  03 09 10 00 00 01 A0 02  ...... .........
0220: 02 01 00 15 80 80 30 02  03 00 17 00 00 01 A0 02  ......0.........
0230: 02 01 00 0F 80 80 40 02  03 01 17 00 00 01 A0 02  ......@.........
0240: 02 01 00 02 80 80 50 02  03 02 17 00 00 01 A0 02  ......P.........
0250: 02 01 00 16 80 80 60 02  03 03 17 00 00 01 A0 02  ......`.........
0260: 02 01 00 17 80 80 70 02  03 04 17 00 00 01 A0 02  ......p.........
0270: 02 01 00 18 80 80 80 02  03 05 17 00 00 01 A0 02  ................
0280: 02 01 00 19 80 80 90 02  03 06 17 00 00 01 A0 02  ................
0290: 02 01 00 1A 80 80 A0 02  03 07 17 00 00 01 A0 02  ................
02A0: 0B 01 00 0B 02 00 01 81  01 1B 1B 80 1C 80 1D 80  ................
02B0: 1E 80 1F 80 20 80 21 80  22 80 23 80 24 80 25 80  .... .!.".#.$.%.
02C0: 26 80 27 80 28 80 00 80  00 80 29 80 2A 80 2B 80  &.'.(.....).*.+.
02D0: 2C 80 2D 80 2E 80 2F 80  30 80 31 80 32 80 33 80  ,.-.../.0.1.2.3.
02E0: 34 80 35 80 36 80 00 80  00 80 37 80 38 80 39 80  4.5.6.....7.8.9.
02F0: 3A 80 3B 80 3C 80 3D 80  3E 80 3F 80 40 80 41 80  :.;.<.=.>.?.@.A.
0300: 42 80 43 80 44 80 00 80  00 80                    B.C.D.....      
```

## Opcodes

```
  0: 0x000B [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x000C [0x4A] LocalPlayer looks at EventEntity
  2: 0x0015 [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "open" with entities [EventEntity, EventEntity]
  3: 0x0022 [0x1C] WAIT(120* ticks)
  4: 0x0025 [0x03] ExtData[1]->WorkLocal[3] = 10*
  5: 0x002A [0x02] IF !(ExtData[1]->WorkLocal[3] < 0*) GOTO 0x0160
  6: 0x0032 [0x02] IF !(ExtData[1]->WorkLocal[3] == 10*) GOTO 0x00FB
  7: 0x003A [0x03] ExtData[1]->WorkLocal[8] = 2*
  8: 0x003F [0x03] ExtData[1]->WorkLocal[10] = 0*
  9: 0x0044 [0x1A] CALL_SUBROUTINE(address=0x0172)
 10: 0x0047 [0x02] IF !(ExtData[1]->WorkLocal[7] == 0*) GOTO 0x0056
 11: 0x004F [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=ExtData[1]->WorkLocal[10], bit_index_work_offset=16*, condition_work_offset=1*)
 12: 0x0056 [0x02] IF !(ExtData[1]->WorkLocal[7] == ExtData[1]->WorkLocal[8]) GOTO 0x0065
 13: 0x005E [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=ExtData[1]->WorkLocal[10], bit_index_work_offset=17*, condition_work_offset=1*)
 14: 0x0065 [0x24] CREATE_DIALOG(message_id=14568*, default_option=ExtData[1]->WorkLocal[9], option_flags=ExtData[1]->WorkLocal[10])
    → "Retrieve which item?\u0007\u000B\u007F\u0000\u0001\u0001\u0001\u0001 \u0001\u0005$\u0002\u0000\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0001\u0001 \u0001\u0005$\u0002\u0001\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0001\u0001 \u0001\u0005$\u0002\u0002\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0001\u0001 \u0001\u0005$\u0002\u0003\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0001\u0001 \u0001\u0005$\u0002\u0004\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0001\u0001 \u0001\u0005$\u0002\u0005\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0001\u0001 \u0001\u0005$\u0002\u0006\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0001\u0001 \u0001\u0005$\u0002\u0007\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0001\u0001 \u0001\u0005$\u0002\u0008\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0001\u0001 \u0001\u0005$\u0002	\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0001\u0001 \u0001\u0005$\u0002
\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0001\u0001 \u0001\u0005$\u0002\u000B\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0001\u0001 \u0001\u0005$\u0002\u000C\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0001\u0001 \u0001\u0005$\u0002\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0001\u0001 \u0001\u0005$\u0002\u000E\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0001\u0001 \u0001\u0005$\u0002\u000F\u0000\u0000.\u0007Return one page.\u0007Advance one page.\u0007Cancel.\u007F1\u0000\u0007"
 15: 0x006C [0x25] WAIT_DIALOG_SELECT()
 16: 0x006D [0x02] IF !(Work_Zone[0] == 16*) GOTO 0x0088
 17: 0x0075 [0x02] IF !(ExtData[1]->WorkLocal[7] <= 0*) GOTO 0x0085
 18: 0x007D [0x0C] ExtData[1]->WorkLocal[7]--
 19: 0x0080 [0x03] ExtData[1]->WorkLocal[9] = 0*
 20: 0x0085 [0x01] GOTO 0x00F8
 21: 0x0088 [0x02] IF !(Work_Zone[0] == 17*) GOTO 0x00A3
 22: 0x0090 [0x02] IF !(ExtData[1]->WorkLocal[7] >= 2*) GOTO 0x00A0
 23: 0x0098 [0x0B] ExtData[1]->WorkLocal[7]++
 24: 0x009B [0x03] ExtData[1]->WorkLocal[9] = 0*
 25: 0x00A0 [0x01] GOTO 0x00F8
 26: 0x00A3 [0x02] IF !(Work_Zone[0] == 18*) GOTO 0x00B8
 27: 0x00AB [0x03] Work_Zone[1] = 1073741824*
 28: 0x00B0 [0x03] ExtData[1]->WorkLocal[3] = 4294967295*
 29: 0x00B5 [0x01] GOTO 0x00F8
 30: 0x00B8 [0x02] IF !(Work_Zone[0] >= 16*) GOTO 0x00EE
 31: 0x00C0 [0x03] ExtData[1]->WorkLocal[6] = 0*
 32: 0x00C5 [0x03] ExtData[1]->WorkLocal[5] = ExtData[1]->WorkLocal[7]
 33: 0x00CA [0x14] ExtData[1]->WorkLocal[5] *= 16*
 34: 0x00CF [0x07] ExtData[1]->WorkLocal[5] += Work_Zone[0]
 35: 0x00D4 [0x9D] Work_Zone_1700[23] = 0x02AA[ExtData[1]->WorkLocal[5]] // Read WORD
 36: 0x00DC [0x03] ExtData[1]->WorkLocal[4] = ExtData[1]->WorkLocal[3]
 37: 0x00E1 [0x03] ExtData[1]->WorkLocal[3] = 30*
 38: 0x00E6 [0x03] ExtData[1]->WorkLocal[9] = Work_Zone[0]
 39: 0x00EB [0x01] GOTO 0x00F8
 40: 0x00EE [0x03] Work_Zone[1] = 1073741824*
 41: 0x00F3 [0x03] ExtData[1]->WorkLocal[3] = 4294967295*

SUBROUTINE_00F8:
 42: 0x00F8 [0x01] GOTO 0x015D
 43: 0x00FB [0x02] IF !(ExtData[1]->WorkLocal[3] == 30*) GOTO 0x0115
 44: 0x0103 [0x93] DISPLAY_ITEM_INFO(item_id=Work_Zone_1700[23])
 45: 0x0106 [0x48] [System] [14569*]:
    → "You take the \u0001\u0005#\u0002\u001F\u0000\u0000 in hand...\u007F1\u0000\u0007"
 46: 0x0109 [0x23] WAIT_FOR_DIALOG_INTERACTION
 47: 0x010A [0x93] DISPLAY_ITEM_INFO(item_id=0*)
 48: 0x010D [0x03] ExtData[1]->WorkLocal[3] = 40*
 49: 0x0112 [0x01] GOTO 0x015D
 50: 0x0115 [0x02] IF !(ExtData[1]->WorkLocal[3] == 40*) GOTO 0x015D
 51: 0x011D [0x24] CREATE_DIALOG(message_id=14570*, default_option=1*, option_flags=0*)
    → "Obtain \u0001\u0001\u0001 \u0001\u0005$\u0002\u001F\u0000\u0000?\u0007\u000BTake it.\u0007Leave it.\u007F1\u0000\u0007"
 52: 0x0124 [0x25] WAIT_DIALOG_SELECT()
 53: 0x0125 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x014A
 54: 0x012D [0x06] Work_Zone[1] = 0
 55: 0x0130 [0x40] SET_BIT_WORK_RANGE(start_bit=0*, end_bit=1*, target=Work_Zone[1], source=ExtData[1]->WorkLocal[6])
 56: 0x0139 [0x40] SET_BIT_WORK_RANGE(start_bit=2*, end_bit=9*, target=Work_Zone[1], source=ExtData[1]->WorkLocal[5])
 57: 0x0142 [0x03] ExtData[1]->WorkLocal[3] = 4294967295*
 58: 0x0147 [0x01] GOTO 0x015A
 59: 0x014A [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x015A
 60: 0x0152 [0x03] ExtData[1]->WorkLocal[3] = ExtData[1]->WorkLocal[4]
 61: 0x0157 [0x01] GOTO 0x015A

SUBROUTINE_015A:
 62: 0x015A [0x01] GOTO 0x015D

SUBROUTINE_015D:
 63: 0x015D [0x01] GOTO 0x002A
 64: 0x0160 [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "clos" with entities [EventEntity, EventEntity]
 65: 0x016D [0x1C] WAIT(120* ticks)
 66: 0x0170 [0x21] END_EVENT
 67: 0x0171 [0x00] END_REQSTACK()

SUBROUTINE_0172:
 68: 0x0172 [0x03] ExtData[1]->WorkLocal[1] = 0*
 69: 0x0177 [0x03] ExtData[1]->WorkLocal[2] = ExtData[1]->WorkLocal[7]
 70: 0x017C [0x14] ExtData[1]->WorkLocal[2] *= 16*

SUBROUTINE_0181:
 71: 0x0181 [0x02] IF !(ExtData[1]->WorkLocal[1] >= 16*) GOTO 0x02A9
 72: 0x0189 [0x9D] ExtData[1]->WorkLocal[0] = 0x02AA[ExtData[1]->WorkLocal[2]] // Read WORD
 73: 0x0191 [0x02] IF !(ExtData[1]->WorkLocal[0] == 0*) GOTO 0x01A0
 74: 0x0199 [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=ExtData[1]->WorkLocal[10], bit_index_work_offset=ExtData[1]->WorkLocal[1], condition_work_offset=1*)
 75: 0x01A0 [0x02] IF !(ExtData[1]->WorkLocal[1] == 0*) GOTO 0x01B0
 76: 0x01A8 [0x03] Work_Zone[2] = ExtData[1]->WorkLocal[0]
 77: 0x01AD [0x01] GOTO 0x02A0
 78: 0x01B0 [0x02] IF !(ExtData[1]->WorkLocal[1] == 1*) GOTO 0x01C0
 79: 0x01B8 [0x03] Work_Zone[3] = ExtData[1]->WorkLocal[0]
 80: 0x01BD [0x01] GOTO 0x02A0
 81: 0x01C0 [0x02] IF !(ExtData[1]->WorkLocal[1] == 2*) GOTO 0x01D0
 82: 0x01C8 [0x03] Work_Zone[4] = ExtData[1]->WorkLocal[0]
 83: 0x01CD [0x01] GOTO 0x02A0
 84: 0x01D0 [0x02] IF !(ExtData[1]->WorkLocal[1] == 3*) GOTO 0x01E0
 85: 0x01D8 [0x03] Work_Zone[5] = ExtData[1]->WorkLocal[0]
 86: 0x01DD [0x01] GOTO 0x02A0
 87: 0x01E0 [0x02] IF !(ExtData[1]->WorkLocal[1] == 4*) GOTO 0x01F0
 88: 0x01E8 [0x03] Work_Zone[6] = ExtData[1]->WorkLocal[0]
 89: 0x01ED [0x01] GOTO 0x02A0
 90: 0x01F0 [0x02] IF !(ExtData[1]->WorkLocal[1] == 5*) GOTO 0x0200
 91: 0x01F8 [0x03] Work_Zone[7] = ExtData[1]->WorkLocal[0]
 92: 0x01FD [0x01] GOTO 0x02A0
 93: 0x0200 [0x02] IF !(ExtData[1]->WorkLocal[1] == 6*) GOTO 0x0210
 94: 0x0208 [0x03] Work_Zone[8] = ExtData[1]->WorkLocal[0]
 95: 0x020D [0x01] GOTO 0x02A0
 96: 0x0210 [0x02] IF !(ExtData[1]->WorkLocal[1] == 7*) GOTO 0x0220
 97: 0x0218 [0x03] Work_Zone[9] = ExtData[1]->WorkLocal[0]
 98: 0x021D [0x01] GOTO 0x02A0
 99: 0x0220 [0x02] IF !(ExtData[1]->WorkLocal[1] == 8*) GOTO 0x0230
100: 0x0228 [0x03] Work_Zone_1700[0] = ExtData[1]->WorkLocal[0]
101: 0x022D [0x01] GOTO 0x02A0
102: 0x0230 [0x02] IF !(ExtData[1]->WorkLocal[1] == 9*) GOTO 0x0240
103: 0x0238 [0x03] Work_Zone_1700[1] = ExtData[1]->WorkLocal[0]
104: 0x023D [0x01] GOTO 0x02A0
105: 0x0240 [0x02] IF !(ExtData[1]->WorkLocal[1] == 10*) GOTO 0x0250
106: 0x0248 [0x03] Work_Zone_1700[2] = ExtData[1]->WorkLocal[0]
107: 0x024D [0x01] GOTO 0x02A0
108: 0x0250 [0x02] IF !(ExtData[1]->WorkLocal[1] == 11*) GOTO 0x0260
109: 0x0258 [0x03] Work_Zone_1700[3] = ExtData[1]->WorkLocal[0]
110: 0x025D [0x01] GOTO 0x02A0
111: 0x0260 [0x02] IF !(ExtData[1]->WorkLocal[1] == 12*) GOTO 0x0270
112: 0x0268 [0x03] Work_Zone_1700[4] = ExtData[1]->WorkLocal[0]
113: 0x026D [0x01] GOTO 0x02A0
114: 0x0270 [0x02] IF !(ExtData[1]->WorkLocal[1] == 13*) GOTO 0x0280
115: 0x0278 [0x03] Work_Zone_1700[5] = ExtData[1]->WorkLocal[0]
116: 0x027D [0x01] GOTO 0x02A0
117: 0x0280 [0x02] IF !(ExtData[1]->WorkLocal[1] == 14*) GOTO 0x0290
118: 0x0288 [0x03] Work_Zone_1700[6] = ExtData[1]->WorkLocal[0]
119: 0x028D [0x01] GOTO 0x02A0
120: 0x0290 [0x02] IF !(ExtData[1]->WorkLocal[1] == 15*) GOTO 0x02A0
121: 0x0298 [0x03] Work_Zone_1700[7] = ExtData[1]->WorkLocal[0]
122: 0x029D [0x01] GOTO 0x02A0

SUBROUTINE_02A0:
123: 0x02A0 [0x0B] ExtData[1]->WorkLocal[1]++
124: 0x02A3 [0x0B] ExtData[1]->WorkLocal[2]++
125: 0x02A6 [0x01] GOTO 0x0181
126: 0x02A9 [0x1B] RETURN
```

## Data or dead code:

```
# Data Section: 0x02AA (96 bytes)
     0x02AA: 1B 80 1C 80 1D 80 1E 80 1F 80 20 80 21 80 22 80
     0x02BA: 23 80 24 80 25 80 26 80 27 80 28 80 00 80 00 80
     0x02CA: 29 80 2A 80 2B 80 2C 80 2D 80 2E 80 2F 80 30 80
     0x02DA: 31 80 32 80 33 80 34 80 35 80 36 80 00 80 00 80
     0x02EA: 37 80 38 80 39 80 3A 80 3B 80 3C 80 3D 80 3E 80
     0x02FA: 3F 80 40 80 41 80 42 80 43 80 44 80 00 80 00 80
```