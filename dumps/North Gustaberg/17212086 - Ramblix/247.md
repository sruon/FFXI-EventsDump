# Event 247

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 2/2       |
| Offset          | 0x0001    |
| Data Size       | 484 bytes |
| Calculated Size | 484 bytes |
| Instructions    | 102       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000:    20 01 42 22 00 1E F0  FF FF 7F 4A F0 FF FF 7F    .B"......J....
0010: B6 A2 06 01 03 00 00 00  80 02 02 10 01 80 01 28  ...............(
0020: 00 3D 00 00 02 80 02 80  02 03 10 01 80 01 37 00  .=............7.
0030: 3D 00 00 03 80 02 80 02  04 10 01 80 01 46 00 3D  =............F.=
0040: 00 00 04 80 02 80 02 05  10 01 80 01 55 00 3D 00  ............U.=.
0050: 00 05 80 02 80 03 09 10  06 80 1D 07 80 23 1D 08  .............#..
0060: 80 23 1D 09 80 23 02 00  00 0A 80 00 71 00 01 A2  .#...#......q...
0070: 00 02 00 00 0B 80 00 7C  00 01 E6 00 02 00 00 0C  .......|........
0080: 80 00 87 00 01 2A 01 02  00 00 0D 80 00 92 00 01  .....*..........
0090: 6E 01 24 0E 80 0F 80 00  00 25 02 00 10 02 80 00  n.$......%......
00A0: DE 00 24 10 80 0F 80 02  10 25 02 00 10 0F 80 00  ..$......%......
00B0: D1 00 03 01 10 11 80 9F  12 80 F8 FF FF 7F F8 FF  ................
00C0: FF 7F 6D 61 69 6E 0F 80  1D 13 80 23 21 00 01 DB  ..main.....#!...
00D0: 00 03 01 10 0F 80 0E 01  10 00 10 01 C6 01 02 00  ................
00E0: 10 03 80 00 22 01 24 14  80 0F 80 03 10 25 02 00  ....".$......%..
00F0: 10 0F 80 00 15 01 03 01  10 11 80 9F 12 80 F8 FF  ................
0100: FF 7F F8 FF FF 7F 6D 61  69 6E 0F 80 1D 13 80 23  ......main.....#
0110: 21 00 01 1F 01 03 01 10  15 80 0E 01 10 00 10 01  !...............
0120: C6 01 02 00 10 04 80 00  66 01 24 16 80 0F 80 04  ........f.$.....
0130: 10 25 02 00 10 0F 80 00  59 01 03 01 10 11 80 9F  .%......Y.......
0140: 12 80 F8 FF FF 7F F8 FF  FF 7F 6D 61 69 6E 0F 80  ..........main..
0150: 1D 13 80 23 21 00 01 63  01 03 01 10 17 80 0E 01  ...#!..c........
0160: 10 00 10 01 C6 01 02 00  10 05 80 00 AA 01 24 18  ..............$.
0170: 80 0F 80 05 10 25 02 00  10 0F 80 00 9D 01 03 01  .....%..........
0180: 10 11 80 9F 12 80 F8 FF  FF 7F F8 FF FF 7F 6D 61  ..............ma
0190: 69 6E 0F 80 1D 13 80 23  21 00 01 A7 01 03 01 10  in.....#!.......
01A0: 19 80 0E 01 10 00 10 01  C6 01 03 01 10 11 80 9F  ................
01B0: 12 80 F8 FF FF 7F F8 FF  FF 7F 6D 61 69 6E 0F 80  ..........main..
01C0: 1D 13 80 23 21 00 1D 1A  80 23 43 00 43 01 45 1B  ...#!....#C.C.E.
01D0: 80 F8 FF FF 7F F8 FF FF  7F 66 64 6F 31 0F 80 1C  .........fdo1...
01E0: 1C 80 30 21 00                                    ..0!.           
```

## Opcodes

```
  0: 0x0001 [0x20] SET_CLI_EVENT_UC_FLAG: Lock player control
  1: 0x0003 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  2: 0x0004 [0x22] ENTITY_HIDE_FLAG(enabled=0x00)
  3: 0x0006 [0x1E] EventEntity looks at LocalPlayer and starts talking
  4: 0x000B [0x4A] LocalPlayer looks at Ramblix (ID: 17212086/0x0106A2B6)
  5: 0x0014 [0x03] ExtData[1]->WorkLocal[0] = 30*
  6: 0x0019 [0x02] IF !(Work_Zone[2] == 4294967294*) GOTO 0x0028
  7: 0x0021 [0x3D] CLEAR_BIT_FLAG_CONDITIONAL(target_work_offset=0x00, bit_index_work_offset=0x8002, condition_work_offset=0x8002)
  8: 0x0028 [0x02] IF !(Work_Zone[3] == 4294967294*) GOTO 0x0037
  9: 0x0030 [0x3D] CLEAR_BIT_FLAG_CONDITIONAL(target_work_offset=0x00, bit_index_work_offset=0x8003, condition_work_offset=0x8002)
 10: 0x0037 [0x02] IF !(Work_Zone[4] == 4294967294*) GOTO 0x0046
 11: 0x003F [0x3D] CLEAR_BIT_FLAG_CONDITIONAL(target_work_offset=0x00, bit_index_work_offset=0x8004, condition_work_offset=0x8002)
 12: 0x0046 [0x02] IF !(Work_Zone[5] == 4294967294*) GOTO 0x0055
 13: 0x004E [0x3D] CLEAR_BIT_FLAG_CONDITIONAL(target_work_offset=0x00, bit_index_work_offset=0x8005, condition_work_offset=0x8002)
 14: 0x0055 [0x03] Work_Zone[9] = 1126*
 15: 0x005A [0x1D] PRINT_EVENT_MESSAGE(message_id=7853*)
    → "Oh my Gob! You're one of those adventurerurers, aren't ya?\u0007You got nothin' on me, \u007F\u0005[man./lady.] I was just mindin' my own businesesess, lookin' for junk an' stuff.\u007F1\u0000\u0007"
 16: 0x005D [0x23] WAIT_FOR_DIALOG_INTERACTION
 17: 0x005E [0x1D] PRINT_EVENT_MESSAGE(message_id=7854*)
    → "Hey, watch out. You don't wanna fight me. I'll turn you into meat jerky!\u0007Wait, how about you and me be friends instead? Sound good?\u007F1\u0000\u0007"
 18: 0x0061 [0x23] WAIT_FOR_DIALOG_INTERACTION
 19: 0x0062 [0x1D] PRINT_EVENT_MESSAGE(message_id=7855*)
    → "I travel all over the world and hear lots of differererent stories. I even hear your stories. I can tell you one, if you want.\u007F1\u0000\u0007"
 20: 0x0065 [0x23] WAIT_FOR_DIALOG_INTERACTION
 21: 0x0066 [0x02] IF !(ExtData[1]->WorkLocal[0] == 28*) GOTO 0x0071
 22: 0x006E [0x01] GOTO 0x00A2

SUBROUTINE_0071:
 23: 0x0071 [0x02] IF !(ExtData[1]->WorkLocal[0] == 26*) GOTO 0x007C
 24: 0x0079 [0x01] GOTO 0x00E6

SUBROUTINE_007C:
 25: 0x007C [0x02] IF !(ExtData[1]->WorkLocal[0] == 22*) GOTO 0x0087
 26: 0x0084 [0x01] GOTO 0x012A

SUBROUTINE_0087:
 27: 0x0087 [0x02] IF !(ExtData[1]->WorkLocal[0] == 14*) GOTO 0x0092
 28: 0x008F [0x01] GOTO 0x016E

SUBROUTINE_0092:
 29: 0x0092 [0x24] CREATE_DIALOG(message_id=7863*, default_option=0*, option_flags=0x00)
    → "Do you want to hear a story?\u0007\u000BNo, thank you.\u0007Let's hear one.\u007F1\u0000\u0007"
 30: 0x0099 [0x25] WAIT_DIALOG_SELECT()
 31: 0x009A [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x00DE
 32: 0x00A2 [0x24] CREATE_DIALOG(message_id=7864*, default_option=0*, option_flags=0x1002)
    → "What story would you like to be told?\u0007\u000BOn second thought, maybe later.\u0007As Thick as Thieves.\u0007The Gustaberg Tour.\u0007Apocalypse.\u0007An Ulcerous Uragnite(pt.1).\u0007An Ulcerous Uragnite(pt.2).\u007F1\u0000\u0007"
 33: 0x00A9 [0x25] WAIT_DIALOG_SELECT()
 34: 0x00AA [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x00D1
 35: 0x00B2 [0x03] Work_Zone[1] = 1073741824*
 36: 0x00B7 [0x9F] LOAD_SCHEDULED_TASK_ALT: Load scheduler "main" with entities [EventEntity, EventEntity], work=[230*, 0*]
 37: 0x00C8 [0x1D] PRINT_EVENT_MESSAGE(message_id=7857*)
    → "Oh...\u0007Well, if that's the case, I'm outta here.\u007F1\u0000\u0007"
 38: 0x00CB [0x23] WAIT_FOR_DIALOG_INTERACTION
 39: 0x00CC [0x21] END_EVENT
 40: 0x00CD [0x00] END_REQSTACK()

SUBROUTINE_00D1:
 41: 0x00D1 [0x03] Work_Zone[1] = 0*
 42: 0x00D6 [0x0E] Work_Zone[1] |= Work_Zone[0]
 43: 0x00DB [0x01] GOTO 0x01C6

SUBROUTINE_00DE:
 44: 0x00DE [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x0122
 45: 0x00E6 [0x24] CREATE_DIALOG(message_id=7865*, default_option=0*, option_flags=0x1003)
    → "\u007F1\u0000\u0007"
 46: 0x00ED [0x25] WAIT_DIALOG_SELECT()
 47: 0x00EE [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x0115
 48: 0x00F6 [0x03] Work_Zone[1] = 1073741824*
 49: 0x00FB [0x9F] LOAD_SCHEDULED_TASK_ALT: Load scheduler "main" with entities [EventEntity, EventEntity], work=[230*, 0*]
 50: 0x010C [0x1D] PRINT_EVENT_MESSAGE(message_id=7857*)
    → "Oh...\u0007Well, if that's the case, I'm outta here.\u007F1\u0000\u0007"
 51: 0x010F [0x23] WAIT_FOR_DIALOG_INTERACTION
 52: 0x0110 [0x21] END_EVENT
 53: 0x0111 [0x00] END_REQSTACK()

SUBROUTINE_0115:
 54: 0x0115 [0x03] Work_Zone[1] = 32*
 55: 0x011A [0x0E] Work_Zone[1] |= Work_Zone[0]
 56: 0x011F [0x01] GOTO 0x01C6

SUBROUTINE_0122:
 57: 0x0122 [0x02] IF !(Work_Zone[0] == 3*) GOTO 0x0166
 58: 0x012A [0x24] CREATE_DIALOG(message_id=7866*, default_option=0*, option_flags=0x1004)
    → "\u007F1\u0000\u0007"
 59: 0x0131 [0x25] WAIT_DIALOG_SELECT()
 60: 0x0132 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x0159
 61: 0x013A [0x03] Work_Zone[1] = 1073741824*
 62: 0x013F [0x9F] LOAD_SCHEDULED_TASK_ALT: Load scheduler "main" with entities [EventEntity, EventEntity], work=[230*, 0*]
 63: 0x0150 [0x1D] PRINT_EVENT_MESSAGE(message_id=7857*)
    → "Oh...\u0007Well, if that's the case, I'm outta here.\u007F1\u0000\u0007"
 64: 0x0153 [0x23] WAIT_FOR_DIALOG_INTERACTION
 65: 0x0154 [0x21] END_EVENT
 66: 0x0155 [0x00] END_REQSTACK()

SUBROUTINE_0159:
 67: 0x0159 [0x03] Work_Zone[1] = 64*
 68: 0x015E [0x0E] Work_Zone[1] |= Work_Zone[0]
 69: 0x0163 [0x01] GOTO 0x01C6

SUBROUTINE_0166:
 70: 0x0166 [0x02] IF !(Work_Zone[0] == 4*) GOTO 0x01AA
 71: 0x016E [0x24] CREATE_DIALOG(message_id=7867*, default_option=0*, option_flags=0x1005)
    → "\u007F1\u0000\u0007"
 72: 0x0175 [0x25] WAIT_DIALOG_SELECT()
 73: 0x0176 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x019D
 74: 0x017E [0x03] Work_Zone[1] = 1073741824*
 75: 0x0183 [0x9F] LOAD_SCHEDULED_TASK_ALT: Load scheduler "main" with entities [EventEntity, EventEntity], work=[230*, 0*]
 76: 0x0194 [0x1D] PRINT_EVENT_MESSAGE(message_id=7857*)
    → "Oh...\u0007Well, if that's the case, I'm outta here.\u007F1\u0000\u0007"
 77: 0x0197 [0x23] WAIT_FOR_DIALOG_INTERACTION
 78: 0x0198 [0x21] END_EVENT
 79: 0x0199 [0x00] END_REQSTACK()

SUBROUTINE_019D:
 80: 0x019D [0x03] Work_Zone[1] = 96*
 81: 0x01A2 [0x0E] Work_Zone[1] |= Work_Zone[0]
 82: 0x01A7 [0x01] GOTO 0x01C6

SUBROUTINE_01AA:
 83: 0x01AA [0x03] Work_Zone[1] = 1073741824*
 84: 0x01AF [0x9F] LOAD_SCHEDULED_TASK_ALT: Load scheduler "main" with entities [EventEntity, EventEntity], work=[230*, 0*]
 85: 0x01C0 [0x1D] PRINT_EVENT_MESSAGE(message_id=7857*)
    → "Oh...\u0007Well, if that's the case, I'm outta here.\u007F1\u0000\u0007"
 86: 0x01C3 [0x23] WAIT_FOR_DIALOG_INTERACTION
 87: 0x01C4 [0x21] END_EVENT
 88: 0x01C5 [0x00] END_REQSTACK()

SUBROUTINE_01C6:
 89: 0x01C6 [0x1D] PRINT_EVENT_MESSAGE(message_id=7856*)
    → "Now, listen close...\u007F1\u0000\u0007"
 90: 0x01C9 [0x23] WAIT_FOR_DIALOG_INTERACTION
 91: 0x01CA [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
 92: 0x01CC [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
 93: 0x01CE [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [EventEntity, EventEntity], work=[200*, 0*]
 94: 0x01DF [0x1C] WAIT(60* ticks)
 95: 0x01E2 [0x30] SET_UCOFF_CONTINUE_ZERO()
 96: 0x01E3 [0x21] END_EVENT
 97: 0x01E4 [0x00] END_REQSTACK()
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x00CE [0x01] GOTO 0x00DB
# Dead code (unreachable instructions):
     0x0112 [0x01] GOTO 0x011F
# Dead code (unreachable instructions):
     0x0156 [0x01] GOTO 0x0163
# Dead code (unreachable instructions):
     0x019A [0x01] GOTO 0x01A7
```