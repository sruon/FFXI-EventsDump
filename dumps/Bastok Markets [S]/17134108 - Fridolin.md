# 17134108 - Fridolin

## Common Data

| Field            | Value                       |
|------------------|-----------------------------|
| Zone             | Bastok Markets [S] (ID: 87) |
| Block Size       | 256 bytes                   |
| Total Events     | 7                           |
| References Count | 13                          |

## List of Events

| Event ID              | Entrypoint   |   Size |   Instructions |
|-----------------------|--------------|--------|----------------|
| [65535](#event-65535) | 0x0000       |      1 |              1 |
| [359](#event-359)     | 0x0001       |      1 |              1 |
| [360](#event-360)     | 0x0002       |      1 |              1 |
| [2](#event-2)         | 0x0003       |     17 |              7 |
| [3](#event-3)         | 0x0014       |     17 |              7 |
| [5](#event-5)         | 0x0025       |     21 |              9 |
| [4](#event-4)         | 0x003A       |    100 |             30 |

## DAT References (imed_data)

|   Index | Hex Value   |   Dec Value |
|---------|-------------|-------------|
|       0 | 0x2EFA      |       12026 |
|       1 | 0x2EF7      |       12023 |
|       2 | 0x2EFD      |       12029 |
|       3 | 0x2F00      |       12032 |
|       4 | 0x2F03      |       12035 |
|       5 | 0x2F05      |       12037 |
|       6 | 0x0078      |         120 |
|       7 | 0x0001      |           1 |
|       8 | 0x2F07      |       12039 |
|       9 | 0x2F08      |       12040 |
|      10 | 0x0000      |           0 |
|      11 | 0x40000000  |  1073741824 |
|      12 | 0x2F09      |       12041 |

## String References

- **12023**: Looking to join the Fighting Fourth? Speak to Centurion Adelbrecht. He'll assist you.
- **12026**: Give 'em hell, <Player>!
- **12029**: I see you're working for another nation.
- **12032**: If you're looking to join the Fighting Fourth, speak to Centurion Adelbrecht. He'll assist you.
- **12035**: Though if you want to rejoin the fourth, I think something can be worked out. You have some Allied Notes, don't you?
- **12037**: Please note that upon changing allegiance, you will be required to return the two most prestigious campaign medals you possess. There is no penalty if you have yet to earn any medals.
- **12039**: Exchange $2 Allied [Note/Notes] to transfer from [/the Knights of the Iron Ram/the Fourth Division/the Cobra Unit] to [/the Knights of the Iron Ram/the Fourth Division/the Cobra Unit]? You currently possess $3 [Allied Note/Allied Notes].
- **12040**: Proceed with the transaction? [Yes./No.]
- **12041**: Are you absolutely sure? [Yes./No.]

## Events

### Event 65535

#### Metadata

| Field        | Value   |
|--------------|---------|
| Entrypoint   | 0x0000  |
| Data Size    | 1 bytes |
| Instructions | 1       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000: 00                                                .               
```

#### Opcodes

```
  0: 0x0000 [0x00] END_REQSTACK()
```

### Event 359

#### Metadata

| Field        | Value   |
|--------------|---------|
| Entrypoint   | 0x0001  |
| Data Size    | 1 bytes |
| Instructions | 1       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000:    00                                              .              
```

#### Opcodes

```
  0: 0x0001 [0x00] END_REQSTACK()
```

### Event 360

#### Metadata

| Field        | Value   |
|--------------|---------|
| Entrypoint   | 0x0002  |
| Data Size    | 1 bytes |
| Instructions | 1       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000:       00                                            .             
```

#### Opcodes

```
  0: 0x0002 [0x00] END_REQSTACK()
```

### Event 2

#### Metadata

| Field        | Value    |
|--------------|----------|
| Entrypoint   | 0x0003   |
| Data Size    | 17 bytes |
| Instructions | 7        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000:          1E F0 FF FF 7F  6F 76 F8 FF FF 7F 1D 00     .....ov......
0010: 80 23 21 00                                       .#!.            
```

#### Opcodes

```
  0: 0x0003 [0x1E] EventEntity looks at LocalPlayer and starts talking
  1: 0x0008 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  2: 0x0009 [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until EventEntity Render.Flags0 and Render.Flags3 conditions are met
  3: 0x000E [0x1D] PRINT_EVENT_MESSAGE(message_id=12026*)
    → "Give 'em hell, <Player>!"
  4: 0x0011 [0x23] WAIT_FOR_DIALOG_INTERACTION
  5: 0x0012 [0x21] END_EVENT
  6: 0x0013 [0x00] END_REQSTACK()
```

### Event 3

#### Metadata

| Field        | Value    |
|--------------|----------|
| Entrypoint   | 0x0014   |
| Data Size    | 17 bytes |
| Instructions | 7        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0010:             1E F0 FF FF  7F 6F 76 F8 FF FF 7F 1D      .....ov.....
0020: 01 80 23 21 00                                    ..#!.           
```

#### Opcodes

```
  0: 0x0014 [0x1E] EventEntity looks at LocalPlayer and starts talking
  1: 0x0019 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  2: 0x001A [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until EventEntity Render.Flags0 and Render.Flags3 conditions are met
  3: 0x001F [0x1D] PRINT_EVENT_MESSAGE(message_id=12023*)
    → "Looking to join the Fighting Fourth? Speak to Centurion Adelbrecht. He'll assist you."
  4: 0x0022 [0x23] WAIT_FOR_DIALOG_INTERACTION
  5: 0x0023 [0x21] END_EVENT
  6: 0x0024 [0x00] END_REQSTACK()
```

### Event 5

#### Metadata

| Field        | Value    |
|--------------|----------|
| Entrypoint   | 0x0025   |
| Data Size    | 21 bytes |
| Instructions | 9        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0020:                1E F0 FF  FF 7F 6F 76 F8 FF FF 7F       .....ov....
0030: 1D 02 80 23 1D 03 80 23  21 00                    ...#...#!.      
```

#### Opcodes

```
  0: 0x0025 [0x1E] EventEntity looks at LocalPlayer and starts talking
  1: 0x002A [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  2: 0x002B [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until EventEntity Render.Flags0 and Render.Flags3 conditions are met
  3: 0x0030 [0x1D] PRINT_EVENT_MESSAGE(message_id=12029*)
    → "I see you're working for another nation."
  4: 0x0033 [0x23] WAIT_FOR_DIALOG_INTERACTION
  5: 0x0034 [0x1D] PRINT_EVENT_MESSAGE(message_id=12032*)
    → "If you're looking to join the Fighting Fourth, speak to Centurion Adelbrecht. He'll assist you."
  6: 0x0037 [0x23] WAIT_FOR_DIALOG_INTERACTION
  7: 0x0038 [0x21] END_EVENT
  8: 0x0039 [0x00] END_REQSTACK()
```

### Event 4

#### Metadata

| Field        | Value     |
|--------------|-----------|
| Entrypoint   | 0x003A    |
| Data Size    | 100 bytes |
| Instructions | 28        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0030:                                42 1E F0 FF FF 7F            B.....
0040: 6F 76 F8 FF FF 7F 1D 02  80 23 1D 04 80 23 48 05  ov.......#...#H.
0050: 80 1C 06 80 03 01 10 07  80 43 00 43 01 48 08 80  .........C.C.H..
0060: 23 24 09 80 07 80 0A 80  25 02 00 10 07 80 00 7C  #$......%......|
0070: 00 03 01 10 0B 80 01 9C  00 01 7C 00 24 0C 80 07  ..........|.$...
0080: 80 0A 80 25 02 00 10 07  80 00 97 00 03 01 10 0B  ...%............
0090: 80 01 9C 00 01 97 00 03  01 10 07 80 21 00        ............!.  
```

#### Opcodes

```
  0: 0x003A [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x003B [0x1E] EventEntity looks at LocalPlayer and starts talking
  2: 0x0040 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  3: 0x0041 [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until EventEntity Render.Flags0 and Render.Flags3 conditions are met
  4: 0x0046 [0x1D] PRINT_EVENT_MESSAGE(message_id=12029*)
    → "I see you're working for another nation."
  5: 0x0049 [0x23] WAIT_FOR_DIALOG_INTERACTION
  6: 0x004A [0x1D] PRINT_EVENT_MESSAGE(message_id=12035*)
    → "Though if you want to rejoin the fourth, I think something can be worked out. You have some Allied Notes, don't you?"
  7: 0x004D [0x23] WAIT_FOR_DIALOG_INTERACTION
  8: 0x004E [0x48] [System] [12037*]:
    → "Please note that upon changing allegiance, you will be required to return the two most prestigious campaign medals you possess. There is no penalty if you have yet to earn any medals."
  9: 0x0051 [0x1C] WAIT(120* ticks)
 10: 0x0054 [0x03] Work_Zone[1] = 1*
 11: 0x0059 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
 12: 0x005B [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
 13: 0x005D [0x48] [System] [12039*]:
    → "Exchange $2 Allied [Note/Notes] to transfer from [/the Knights of the Iron Ram/the Fourth Division/the Cobra Unit] to [/the Knights of the Iron Ram/the Fourth Division/the Cobra Unit]? You currently possess $3 [Allied Note/Allied Notes]."
 14: 0x0060 [0x23] WAIT_FOR_DIALOG_INTERACTION
 15: 0x0061 [0x24] CREATE_DIALOG(message_id=12040*, default_option=1*, option_flags=0*)
    → "Proceed with the transaction? [Yes./No.]"
 16: 0x0068 [0x25] WAIT_DIALOG_SELECT()
 17: 0x0069 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x007C
 18: 0x0071 [0x03] Work_Zone[1] = 1073741824*
 19: 0x0076 [0x01] GOTO 0x009C

SUBROUTINE_007C:
 20: 0x007C [0x24] CREATE_DIALOG(message_id=12041*, default_option=1*, option_flags=0*)
    → "Are you absolutely sure? [Yes./No.]"
 21: 0x0083 [0x25] WAIT_DIALOG_SELECT()
 22: 0x0084 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x0097
 23: 0x008C [0x03] Work_Zone[1] = 1073741824*
 24: 0x0091 [0x01] GOTO 0x009C

SUBROUTINE_0097:
 25: 0x0097 [0x03] Work_Zone[1] = 1*

SUBROUTINE_009C:
 26: 0x009C [0x21] END_EVENT
 27: 0x009D [0x00] END_REQSTACK()
```

#### Data or dead code:

```
# Dead code (unreachable instructions):
     0x0079 [0x01] GOTO 0x007C
# Dead code (unreachable instructions):
     0x0094 [0x01] GOTO 0x0097
```
