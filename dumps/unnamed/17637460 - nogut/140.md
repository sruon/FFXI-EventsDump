# Event 140

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 2/2       |
| Offset          | 0x0001    |
| Data Size       | 686 bytes |
| Calculated Size | 686 bytes |
| Instructions    | 55        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000:    42 45 00 80 F0 FF FF  7F F0 FF FF 7F 66 64 6F   BE..........fdo
0010: 31 01 80 55 00 80 F0 FF  FF 7F F0 FF FF 7F 66 64  1..U..........fd
0020: 6F 31 46 01 38 02 80 77  03 80 01 80 4E 01 F0 FF  o1F.8..w....N...
0030: FF 7F 29 08 55 20 0D 01  02 92 01 54 20 0D 01 92  ..).U .....T ...
0040: 01 55 20 0D 01 5B 04 80  F8 FF FF 7F F8 FF FF 7F  .U ..[..........
0050: 62 72 75 30 45 05 80 F8  FF FF 7F F8 FF FF 7F 73  bru0E..........s
0060: 30 35 36 01 80 1C 06 80  45 00 80 F0 FF FF 7F F0  056.....E.......
0070: FF FF 7F 66 64 69 31 01  80 24 07 80 00 10 01 80  ...fdi1..$......
0080: 25 02 00 10 01 80 00 8C  00 01 58 02 02 00 10 08  %.........X.....
0090: 80 00 EF 00 52 05 80 F8  FF FF 7F F8 FF FF 7F 73  ....R..........s
00A0: 30 35 36 45 05 80 F8 FF  FF 7F F8 FF FF 7F 30 62  056E..........0b
00B0: 6C 74 01 80 48 09 80 23  52 05 80 F8 FF FF 7F F8  lt..H..#R.......
00C0: FF FF 7F 30 62 6C 74 45  05 80 F8 FF FF 7F F8 FF  ...0bltE........
00D0: FF 7F 30 62 6C 66 01 80  45 05 80 F8 FF FF 7F F8  ..0blf..E.......
00E0: FF FF 7F 73 30 35 36 01  80 01 79 00 01 58 02 02  ...s056...y..X..
00F0: 00 10 0A 80 00 41 01 52  05 80 F8 FF FF 7F F8 FF  .....A.R........
0100: FF 7F 73 30 35 36 45 05  80 F8 FF FF 7F F8 FF FF  ..s056E.........
0110: 7F 30 6F 76 74 01 80 48  09 80 23 52 05 80 F8 FF  .0ovt..H..#R....
0120: FF 7F F8 FF FF 7F 30 6F  76 74 45 05 80 F8 FF FF  ......0ovtE.....
0130: 7F F8 FF FF 7F 73 30 35  36 01 80 01 79 00 01 58  .....s056...y..X
0140: 02 02 00 10 0B 80 00 A4  01 52 05 80 F8 FF FF 7F  .........R......
0150: F8 FF FF 7F 73 30 35 36  45 05 80 F8 FF FF 7F F8  ....s056E.......
0160: FF FF 7F 30 73 63 74 01  80 48 09 80 23 52 05 80  ...0sct..H..#R..
0170: F8 FF FF 7F F8 FF FF 7F  30 73 63 74 45 05 80 F8  ........0sctE...
0180: FF FF 7F F8 FF FF 7F 30  73 63 66 01 80 45 05 80  .......0scf..E..
0190: F8 FF FF 7F F8 FF FF 7F  73 30 35 36 01 80 01 79  ........s056...y
01A0: 00 01 58 02 02 00 10 0C  80 00 58 02 52 05 80 F8  ..X.......X.R...
01B0: FF FF 7F F8 FF FF 7F 73  30 35 36 06 00 10 24 0D  .......s056...$.
01C0: 80 00 10 01 80 25 02 00  10 01 80 00 E2 01 5C 00  .....%........\.
01D0: 01 80 5C 01 01 80 5C 02  01 80 5C 03 01 80 9A 01  ..\...\...\.....
01E0: 55 02 02 00 10 08 80 00  F9 01 5C 00 0E 80 5C 01  U.........\...\.
01F0: 0E 80 9A 01 BE 01 01 55  02 02 00 10 0A 80 00 10  .......U........
0200: 02 5C 00 0F 80 5C 01 0F  80 9A 01 BE 01 01 55 02  .\...\........U.
0210: 02 00 10 0B 80 00 27 02  5C 00 10 80 5C 01 10 80  ......'.\...\...
0220: 9A 01 BE 01 01 55 02 02  00 10 0C 80 00 3E 02 5C  .....U.......>.\
0230: 00 11 80 5C 01 11 80 9A  01 BE 01 01 55 02 02 00  ...\........U...
0240: 10 12 80 00 55 02 5C 00  13 80 5C 01 13 80 9A 01  ....U.\...\.....
0250: BE 01 01 55 02 01 58 02  45 00 80 F0 FF FF 7F F0  ...U..X.E.......
0260: FF FF 7F 66 64 6F 31 01  80 55 00 80 F0 FF FF 7F  ...fdo1..U......
0270: F0 FF FF 7F 66 64 6F 31  52 05 80 F8 FF FF 7F F8  ....fdo1R.......
0280: FF FF 7F 73 30 35 36 1C  14 80 AB 11 01 80 1C 08  ...s056.........
0290: 80 78 4E 01 55 20 0D 01  AB 0A 46 00 45 00 80 F0  .xN.U ....F.E...
02A0: FF FF 7F F0 FF FF 7F 66  64 69 32 01 80 21 00     .......fdi2..!. 
```

## Opcodes

```
  0: 0x0001 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x0002 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
  2: 0x0013 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=200*
  3: 0x0022 [0x46] CAMERA_CONTROL: Disable user control
  4: 0x0024 [0x38] SET_CLIENT_EVENT_MODE(mode=27*)
  5: 0x0027 [0x77] SET_EVENT_TIME_WEATHER(hour=12*, weather=0*)
  6: 0x002C [0x4E] SET_ENTITY_HIDE_FLAG: Hide LocalPlayer
  7: 0x0032 [0x29] REQ_SET_WAIT(priority=0x08, entity_id=Scheck (ID: 17637461/0x010D2055), tag_num=0x02)
  8: 0x0039 [0x92] nogut (ID: 17637460/0x010D2054)->Render.Flags3 ^= 0x01
  9: 0x003F [0x92] Scheck (ID: 17637461/0x010D2055)->Render.Flags3 ^= 0x01
 10: 0x0045 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "bru0" with entities [EventEntity, EventEntity], work=252*
 11: 0x0054 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s056" with entities [EventEntity, EventEntity], work=[703*, 0*]
 12: 0x0065 [0x1C] WAIT(10* ticks)
 13: 0x0068 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 14: 0x0079 [0x24] CREATE_DIALOG(message_id=9056*, default_option=Work_Zone[0], option_flags=0*)
    → "Select a scene.\u0007\u000BEnding.\u0007blur effect.\u0007Overwrap effect.\u0007Screen color change.\u0007Sound test.\u007F1\u0000\u0007"
 15: 0x0080 [0x25] WAIT_DIALOG_SELECT()
 16: 0x0081 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x008C
 17: 0x0089 [0x01] GOTO 0x0258
 18: 0x008C [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x00EF
 19: 0x0094 [0x52] END_LOAD_SCHEDULER: End scheduler "s056" with entities [EventEntity, EventEntity], work=703*
 20: 0x00A3 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "0blt" with entities [EventEntity, EventEntity], work=[703*, 0*]
 21: 0x00B4 [0x48] [System] [7664*]:
    → "Press confirm button to proceed.\u007F1\u0000\u0007"
 22: 0x00B7 [0x23] WAIT_FOR_DIALOG_INTERACTION
 23: 0x00B8 [0x52] END_LOAD_SCHEDULER: End scheduler "0blt" with entities [EventEntity, EventEntity], work=703*
 24: 0x00C7 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "0blf" with entities [EventEntity, EventEntity], work=[703*, 0*]
 25: 0x00D8 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s056" with entities [EventEntity, EventEntity], work=[703*, 0*]
 26: 0x00E9 [0x01] GOTO 0x0079

SUBROUTINE_01BE:
 27: 0x01BE [0x24] CREATE_DIALOG(message_id=9057*, default_option=Work_Zone[0], option_flags=0*)
    → "Select BGM.\u0007\u000BOff.\u0007Iroha.\u0007Escha.\u0007Desuetia.\u0007Cloud of Darkness.\u0007Rhapsodies of Vana'diel.\u007F1\u0000\u0007"
 28: 0x01C5 [0x25] WAIT_DIALOG_SELECT()
 29: 0x01C6 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x01E2
 30: 0x01CE [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 0*
 31: 0x01D2 [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 0*
 32: 0x01D6 [0x5C] MUSIC_CONTROL: Set Combat (Solo) music to song 0*
 33: 0x01DA [0x5C] MUSIC_CONTROL: Set Combat (Party) music to song 0*
 34: 0x01DE [0x9A] WAIT_MUSIC_SERVER()
 35: 0x01DF [0x01] GOTO 0x0255
 36: 0x01E2 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x01F9
 37: 0x01EA [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 79*
 38: 0x01EE [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 79*
 39: 0x01F2 [0x9A] WAIT_MUSIC_SERVER()
 40: 0x01F3 [0x01] GOTO 0x01BE

SUBROUTINE_0255:
 41: 0x0255 [0x01] GOTO 0x0258

SUBROUTINE_0258:
 42: 0x0258 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 43: 0x0269 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=200*
 44: 0x0278 [0x52] END_LOAD_SCHEDULER: End scheduler "s056" with entities [EventEntity, EventEntity], work=703*
 45: 0x0287 [0x1C] WAIT(15* ticks)
 46: 0x028A [0xAB] EventEntity->DespawnValue = 0* // Set despawn value
 47: 0x028E [0x1C] WAIT(1* ticks)
 48: 0x0291 [0x78] ENABLE_GAME_TIMER_RESET_WEATHER()
 49: 0x0292 [0x4E] SET_ENTITY_HIDE_FLAG: Hide Scheck (ID: 17637461/0x010D2055)
 50: 0x0298 [0xAB] EventEntity->UnknownFlag = 0 // Disable unknown flag
 51: 0x029A [0x46] CAMERA_CONTROL: Restore default settings
 52: 0x029C [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi2" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 53: 0x02AD [0x21] END_EVENT
 54: 0x02AE [0x00] END_REQSTACK()
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x00EC [0x01] GOTO 0x0258
     0x013E [0x01] GOTO 0x0258
     0x01A1 [0x01] GOTO 0x0258
# Dead code (unreachable instructions):
     0x01F6 [0x01] GOTO 0x0255
     0x020D [0x01] GOTO 0x0255
     0x0224 [0x01] GOTO 0x0255
     0x023B [0x01] GOTO 0x0255
     0x0252 [0x01] GOTO 0x0255
```