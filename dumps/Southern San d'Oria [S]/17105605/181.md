# Event 181

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 8/10      |
| Offset          | 0x1099    |
| Data Size       | 475 bytes |
| Calculated Size | 475 bytes |
| Instructions    | 84        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
1090:                             42 6A 01 80 02 80 03           Bj.....
10A0: 80 1A 8C 18 46 01 38 04  80 43 00 43 01 03 00 00  ....F.8..C.C....
10B0: 09 10 5C 00 11 80 5C 01  11 80 9A 34 3B 80 AB 09  ..\...\....4;...
10C0: 77 3C 80 1F 80 1C 1F 80  2F 00 C8 02 05 01 2F 00  w<....../...../.
10D0: CA 02 05 01 4E 00 C8 02  05 01 4E 00 CA 02 05 01  ....N.....N.....
10E0: 92 01 C8 02 05 01 92 01  CA 02 05 01 BA C8 02 05  ................
10F0: 01 90 80 91 80 92 80 93  80 BA CA 02 05 01 94 80  ................
1100: 95 80 96 80 93 80 94 01  C8 02 05 01 94 01 CA 02  ................
1110: 05 01 80 C8 02 05 01 80  CA 02 05 01 1C 22 80 4B  .............".K
1120: CA 02 05 01 97 80 6F 76  CA 02 05 01 4B C8 02 05  ......ov....K...
1130: 01 98 80 6F 76 C8 02 05  01 45 12 80 F8 FF FF 7F  ...ov....E......
1140: F8 FF FF 7F 73 30 35 32  00 80 1A E3 18 55 12 80  ....s052.....U..
1150: F8 FF FF 7F F8 FF FF 7F  73 30 35 32 45 12 80 F8  ........s052E...
1160: FF FF 7F F8 FF FF 7F 73  30 36 33 00 80 29 10 CA  .......s063..)..
1170: 02 05 01 05 1C 0F 80 66  10 80 CA 02 05 01 CA 02  .......f........
1180: 05 01 73 68 61 30 53 CA  02 05 01 CA 02 05 01 73  ..sha0S........s
1190: 68 61 30 1C 16 80 52 12  80 F8 FF FF 7F F8 FF FF  ha0...R.........
11A0: 7F 73 30 36 33 1A 6B 18  34 99 80 AB 09 77 3C 80  .s063.k.4....w<.
11B0: 1F 80 1C 1F 80 2F 00 CB  02 05 01 4E 00 CB 02 05  ...../.....N....
11C0: 01 92 01 CB 02 05 01 94  01 CB 02 05 01 BA CB 02  ................
11D0: 05 01 9A 80 9B 80 9C 80  9D 80 80 CB 02 05 01 1C  ................
11E0: 0F 80 5B 9E 80 CB 02 05  01 CB 02 05 01 30 73 63  ..[..........0sc
11F0: 30 53 CB 02 05 01 CB 02  05 01 30 73 63 30 1C 34  0S........0sc0.4
1200: 80 45 12 80 F8 FF FF 7F  F8 FF FF 7F 73 30 35 37  .E..........s057
1210: 00 80 1A E3 18 2B C7 02  05 01 9F 80 23 2B C7 02  .....+......#+..
1220: 05 01 A0 80 23 1C A1 80  52 12 80 F8 FF FF 7F F8  ....#...R.......
1230: FF FF 7F 73 30 35 37 1A  4A 18 1C 0F 80 AB 11 00  ...s057.J.......
1240: 80 1C 1F 80 35 52 80 78  1C 0F 80 AB 0A 02 00 00  ....5R.x........
1250: 00 80 00 58 12 30 21 00  6A 38 80 02 80 2F 80 46  ...X.0!.j8.../.F
1260: 00 45 39 80 F0 FF FF 7F  F0 FF FF 7F 66 64 69 32  .E9.........fdi2
1270: 00 80 21 00                                       ..!.            
```

## Opcodes

```
  0: 0x1099 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x109A [0x6A] CHANGE_SOUND_VOLUME: Set Effects/Zone volume to 300*, fade_time=120*
  2: 0x10A1 [0x1A] CALL_SUBROUTINE(address=0x188C)
  3: 0x10A4 [0x46] CAMERA_CONTROL: Disable user control
  4: 0x10A6 [0x38] SET_CLIENT_EVENT_MODE(mode=19*)
  5: 0x10A9 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
  6: 0x10AB [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
  7: 0x10AD [0x03] ExtData[1]->WorkLocal[0] = Work_Zone[9]
  8: 0x10B2 [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 254*
  9: 0x10B6 [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 254*
 10: 0x10BA [0x9A] WAIT_MUSIC_SERVER()
 11: 0x10BB [0x34] LOAD_UNLOAD_ZONE(zone_id=89*)
 12: 0x10BE [0xAB] EventEntity->UnknownFlag = 1 // Enable unknown flag
 13: 0x10C0 [0x77] SET_EVENT_TIME_WEATHER(hour=17*, weather=1*)
 14: 0x10C5 [0x1C] WAIT(1* ticks)
 15: 0x10C8 [0x2F] Unnamed NPC (ID: 17105608/0x010502C8)->Render.Flags0 &= ~0x80000 // Bit 19
 16: 0x10CE [0x2F] Unnamed NPC (ID: 17105610/0x010502CA)->Render.Flags0 &= ~0x80000 // Bit 19
 17: 0x10D4 [0x4E] SET_ENTITY_HIDE_FLAG: Show Unnamed NPC (ID: 17105608/0x010502C8)
 18: 0x10DA [0x4E] SET_ENTITY_HIDE_FLAG: Show Unnamed NPC (ID: 17105610/0x010502CA)
 19: 0x10E0 [0x92] Unnamed NPC (ID: 17105608/0x010502C8)->Render.Flags3 ^= 0x01
 20: 0x10E6 [0x92] Unnamed NPC (ID: 17105610/0x010502CA)->Render.Flags3 ^= 0x01
 21: 0x10EC [0xBA] SET_ENTITY_POSITION(entity_id=Unnamed NPC (ID: 17105608/0x010502C8), pos_x=-169.713*, pos_z=-356.217*, pos_y=-25.449*, direction=82.4°*)
 22: 0x10F9 [0xBA] SET_ENTITY_POSITION(entity_id=Unnamed NPC (ID: 17105610/0x010502CA), pos_x=-162.423*, pos_z=-349.920*, pos_y=-23.741*, direction=82.4°*)
 23: 0x1106 [0x94] Unnamed NPC (ID: 17105608/0x010502C8)->Render.Flags3 ^= 0x01
 24: 0x110C [0x94] Unnamed NPC (ID: 17105610/0x010502CA)->Render.Flags3 ^= 0x01
 25: 0x1112 [0x80] LOAD_WAIT(entity=Unnamed NPC (ID: 17105608/0x010502C8))
 26: 0x1117 [0x80] LOAD_WAIT(entity=Unnamed NPC (ID: 17105610/0x010502CA))
 27: 0x111C [0x1C] WAIT(25* ticks)
 28: 0x111F [0x4B] UPDATE_ENTITY_YAW(entity=Unnamed NPC (ID: 17105610/0x010502CA), yaw=8.70°*)
 29: 0x1126 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 30: 0x1127 [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until Unnamed NPC (ID: 17105610/0x010502CA) Render.Flags0 and Render.Flags3 conditions are met
 31: 0x112C [0x4B] UPDATE_ENTITY_YAW(entity=Unnamed NPC (ID: 17105608/0x010502C8), yaw=19.95°*)
 32: 0x1133 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 33: 0x1134 [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until Unnamed NPC (ID: 17105608/0x010502C8) Render.Flags0 and Render.Flags3 conditions are met
 34: 0x1139 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s052" with entities [EventEntity, EventEntity], work=[388*, 0*]
 35: 0x114A [0x1A] CALL_SUBROUTINE(address=0x18E3)
 36: 0x114D [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "s052" with entities [EventEntity, EventEntity], work=388*
 37: 0x115C [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s063" with entities [EventEntity, EventEntity], work=[388*, 0*]
 38: 0x116D [0x29] REQ_SET_WAIT(priority=0x10, entity_id=Unnamed NPC (ID: 17105610/0x010502CA), tag_num=0x05)
 39: 0x1174 [0x1C] WAIT(15* ticks)
 40: 0x1177 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "sha0" with entities [Unnamed NPC (ID: 17105610/0x010502CA), Unnamed NPC (ID: 17105610/0x010502CA)], work=29*
 41: 0x1186 [0x53] WAIT_SCHEDULER_TASK: Wait for scheduler "sha0" with entities [Unnamed NPC (ID: 17105610/0x010502CA), Unnamed NPC (ID: 17105610/0x010502CA)]
 42: 0x1193 [0x1C] WAIT(90* ticks)
 43: 0x1196 [0x52] END_LOAD_SCHEDULER: End scheduler "s063" with entities [EventEntity, EventEntity], work=388*
 44: 0x11A5 [0x1A] CALL_SUBROUTINE(address=0x186B)
 45: 0x11A8 [0x34] LOAD_UNLOAD_ZONE(zone_id=231*)
 46: 0x11AB [0xAB] EventEntity->UnknownFlag = 1 // Enable unknown flag
 47: 0x11AD [0x77] SET_EVENT_TIME_WEATHER(hour=17*, weather=1*)
 48: 0x11B2 [0x1C] WAIT(1* ticks)
 49: 0x11B5 [0x2F] Unnamed NPC (ID: 17105611/0x010502CB)->Render.Flags0 &= ~0x80000 // Bit 19
 50: 0x11BB [0x4E] SET_ENTITY_HIDE_FLAG: Show Unnamed NPC (ID: 17105611/0x010502CB)
 51: 0x11C1 [0x92] Unnamed NPC (ID: 17105611/0x010502CB)->Render.Flags3 ^= 0x01
 52: 0x11C7 [0x94] Unnamed NPC (ID: 17105611/0x010502CB)->Render.Flags3 ^= 0x01
 53: 0x11CD [0xBA] SET_ENTITY_POSITION(entity_id=Unnamed NPC (ID: 17105611/0x010502CB), pos_x=127.000*, pos_z=110.363*, pos_y=6.500*, direction=43.9°*)
 54: 0x11DA [0x80] LOAD_WAIT(entity=Unnamed NPC (ID: 17105611/0x010502CB))
 55: 0x11DF [0x1C] WAIT(15* ticks)
 56: 0x11E2 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "0sc0" with entities [Unnamed NPC (ID: 17105611/0x010502CB), Unnamed NPC (ID: 17105611/0x010502CB)], work=1323*
 57: 0x11F1 [0x53] WAIT_SCHEDULER_TASK: Wait for scheduler "0sc0" with entities [Unnamed NPC (ID: 17105611/0x010502CB), Unnamed NPC (ID: 17105611/0x010502CB)]
 58: 0x11FE [0x1C] WAIT(20* ticks)
 59: 0x1201 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s057" with entities [EventEntity, EventEntity], work=[388*, 0*]
 60: 0x1212 [0x1A] CALL_SUBROUTINE(address=0x18E3)
 61: 0x1215 [0x2B] Nichais (ID: 17105607/0x010502C7) [13607*]:
    → "The text I discovered, however, was extremely cryptic. A riddle, one might say... Do listen.\u007F1\u0000\u0007"
 62: 0x121C [0x23] WAIT_FOR_DIALOG_INTERACTION
 63: 0x121D [0x2B] Nichais (ID: 17105607/0x010502C7) [13608*]:
    → "It read, \u00072An ageless armor, impenetrable, and yet of no metal wrought.\u0007To lay at rest only the comfort of anvil-hard beds are sought.\u0007Protected from without, protecting from within, yielding naught.\u00073\u007F1\u0000\u0007"
 64: 0x1224 [0x23] WAIT_FOR_DIALOG_INTERACTION
 65: 0x1225 [0x1C] WAIT(160* ticks)
 66: 0x1228 [0x52] END_LOAD_SCHEDULER: End scheduler "s057" with entities [EventEntity, EventEntity], work=388*
 67: 0x1237 [0x1A] CALL_SUBROUTINE(address=0x184A)
 68: 0x123A [0x1C] WAIT(15* ticks)
 69: 0x123D [0xAB] EventEntity->DespawnValue = 0* // Set despawn value
 70: 0x1241 [0x1C] WAIT(1* ticks)
 71: 0x1244 [0x35] LOAD_ZONE_NO_CLOSE(zone_id=80*)
 72: 0x1247 [0x78] ENABLE_GAME_TIMER_RESET_WEATHER()
 73: 0x1248 [0x1C] WAIT(15* ticks)
 74: 0x124B [0xAB] EventEntity->UnknownFlag = 0 // Disable unknown flag
 75: 0x124D [0x02] IF !(ExtData[1]->WorkLocal[0] == 0*) GOTO 0x1258
 76: 0x1255 [0x30] SET_UCOFF_CONTINUE_ZERO()
 77: 0x1256 [0x21] END_EVENT
 78: 0x1257 [0x00] END_REQSTACK()
 79: 0x1258 [0x6A] CHANGE_SOUND_VOLUME: Set Effects/System/Zone volume to 999*, fade_time=120*
 80: 0x125F [0x46] CAMERA_CONTROL: Restore default settings
 81: 0x1261 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi2" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 82: 0x1272 [0x21] END_EVENT
 83: 0x1273 [0x00] END_REQSTACK()
```
