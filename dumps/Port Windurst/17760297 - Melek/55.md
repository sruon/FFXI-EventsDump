# Event 55

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 22/39     |
| Offset          | 0x0459    |
| Data Size       | 286 bytes |
| Calculated Size | 286 bytes |
| Instructions    | 44        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0450:                             46 01 42 5D 00 80 06           F.B]...
0460: 80 45 06 80 F0 FF FF 7F  F0 FF FF 7F 66 64 6F 31  .E..........fdo1
0470: 00 80 1C 0C 80 75 00 07  80 75 01 38 08 80 29 08  .....u...u.8..).
0480: F0 FF FF 7F 0A 29 0B F0  FF FF 7F 31 1E F0 FF FF  .....).....1....
0490: 7F 6F 70 4A F0 FF FF 7F  29 00 0F 01 5C 00 09 80  .opJ....)...\...
04A0: 5C 01 09 80 5D 0A 80 0B  80 1C 0C 80 45 0D 80 F0  \...].......E...
04B0: FF FF 7F F0 FF FF 7F 73  30 31 31 00 80 45 06 80  .......s011..E..
04C0: F0 FF FF 7F F0 FF FF 7F  66 64 69 31 00 80 1C 1C  ........fdi1....
04D0: 80 29 0B 29 00 0F 01 16  02 09 10 0E 80 00 F4 04  .).)............
04E0: 45 0D 80 F0 FF FF 7F F0  FF FF 7F 73 31 30 32 00  E..........s102.
04F0: 80 01 05 05 45 0D 80 F0  FF FF 7F F0 FF FF 7F 73  ....E..........s
0500: 30 31 34 00 80 29 0B 29  00 0F 01 17 45 0D 80 F0  014..).)....E...
0510: FF FF 7F F0 FF FF 7F 73  30 31 31 00 80 29 0B 29  .......s011..).)
0520: 00 0F 01 18 5D 00 80 06  80 42 45 06 80 F8 FF FF  ....]....BE.....
0530: 7F F8 FF FF 7F 66 64 6F  31 00 80 1C 0C 80 5C 00  .....fdo1.....\.
0540: 0F 80 5C 01 0F 80 5D 0A  80 0B 80 1C 0C 80 46 00  ..\...].......F.
0550: 2E 45 06 80 F8 FF FF 7F  F8 FF FF 7F 66 64 69 31  .E..........fdi1
0560: 00 80 45 1D 80 F0 FF FF  7F F0 FF FF 7F 71 73 74  ..E..........qst
0570: 63 00 80 20 00 21 00                              c.. .!.         
```

## Opcodes

```
  0: 0x0459 [0x46] CAMERA_CONTROL: Disable user control
  1: 0x045B [0x42] SET_CLI_EVENT_CANCEL_DATA()
  2: 0x045C [0x5D] SET_MUSIC_VOLUME(volume=0*, fade_time=200*)
  3: 0x0461 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
  4: 0x0472 [0x1C] WAIT(120* ticks)
  5: 0x0475 [0x75] LOAD_ROOM(Load indoor room, room=410*)
  6: 0x0479 [0x75] LOAD_ROOM(No action)
  7: 0x047B [0x38] SET_CLIENT_EVENT_MODE(mode=3*)
  8: 0x047E [0x29] REQ_SET_WAIT(priority=0x08, entity_id=LocalPlayer, tag_num=0x0A)
  9: 0x0485 [0x29] REQ_SET_WAIT(priority=0x0B, entity_id=LocalPlayer, tag_num=0x31)
 10: 0x048C [0x1E] EventEntity looks at LocalPlayer and starts talking
 11: 0x0491 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 12: 0x0492 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
 13: 0x0493 [0x4A] LocalPlayer looks at Melek (ID: 17760297/0x010F0029)
 14: 0x049C [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 154*
 15: 0x04A0 [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 154*
 16: 0x04A4 [0x5D] SET_MUSIC_VOLUME(volume=127*, fade_time=1*)
 17: 0x04A9 [0x1C] WAIT(120* ticks)
 18: 0x04AC [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s011" with entities [LocalPlayer, LocalPlayer], work=[140*, 0*]
 19: 0x04BD [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 20: 0x04CE [0x1C] WAIT(60* ticks)
 21: 0x04D1 [0x29] REQ_SET_WAIT(priority=0x0B, entity_id=Melek (ID: 17760297/0x010F0029), tag_num=0x16)
 22: 0x04D8 [0x02] IF !(Work_Zone[9] == 8*) GOTO 0x04F4
 23: 0x04E0 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s102" with entities [LocalPlayer, LocalPlayer], work=[140*, 0*]
 24: 0x04F1 [0x01] GOTO 0x0505

SUBROUTINE_04F4:
 25: 0x04F4 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s014" with entities [LocalPlayer, LocalPlayer], work=[140*, 0*]
 26: 0x0505 [0x29] REQ_SET_WAIT(priority=0x0B, entity_id=Melek (ID: 17760297/0x010F0029), tag_num=0x17)
 27: 0x050C [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s011" with entities [LocalPlayer, LocalPlayer], work=[140*, 0*]
 28: 0x051D [0x29] REQ_SET_WAIT(priority=0x0B, entity_id=Melek (ID: 17760297/0x010F0029), tag_num=0x18)
 29: 0x0524 [0x5D] SET_MUSIC_VOLUME(volume=0*, fade_time=200*)
 30: 0x0529 [0x42] SET_CLI_EVENT_CANCEL_DATA()
 31: 0x052A [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [EventEntity, EventEntity], work=[200*, 0*]
 32: 0x053B [0x1C] WAIT(120* ticks)
 33: 0x053E [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 151*
 34: 0x0542 [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 151*
 35: 0x0546 [0x5D] SET_MUSIC_VOLUME(volume=127*, fade_time=1*)
 36: 0x054B [0x1C] WAIT(120* ticks)
 37: 0x054E [0x46] CAMERA_CONTROL: Restore default settings
 38: 0x0550 [0x2E] SET_CLI_EVENT_CANCEL_FLAGS()
 39: 0x0551 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [EventEntity, EventEntity], work=[200*, 0*]
 40: 0x0562 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "qstc" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
 41: 0x0573 [0x20] SET_CLI_EVENT_UC_FLAG: Unlock player control
 42: 0x0575 [0x21] END_EVENT
 43: 0x0576 [0x00] END_REQSTACK()
```
