# Event 8

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 11/27     |
| Offset          | 0x03B6    |
| Data Size       | 326 bytes |
| Calculated Size | 326 bytes |
| Instructions    | 60        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
03B0:                   24 00  80 01 80 02 80 25 02 00        $......%..
03C0: 10 02 80 00 E8 04 20 01  42 43 00 43 01 62 01 80  ...... .BC.C.b..
03D0: F8 FF FF 7F F8 FF FF 7F  6D 61 69 6E 02 80 1C 03  ........main....
03E0: 80 13 03 00 26 80 02 03  00 02 80 80 FD 03 47 00  ....&.........G.
03F0: 27 80 28 80 29 80 2A 80  47 01 01 CC 04 02 03 00  '.(.).*.G.......
0400: 01 80 80 14 04 47 00 2B  80 2C 80 2D 80 2E 80 47  .....G.+.,.-...G
0410: 01 01 CC 04 02 03 00 08  80 80 2B 04 47 00 2F 80  ..........+.G./.
0420: 30 80 31 80 32 80 47 01  01 CC 04 02 03 00 33 80  0.1.2.G.......3.
0430: 80 42 04 47 00 34 80 35  80 36 80 37 80 47 01 01  .B.G.4.5.6.7.G..
0440: CC 04 02 03 00 38 80 80  59 04 47 00 39 80 3A 80  .....8..Y.G.9.:.
0450: 3B 80 3C 80 47 01 01 CC  04 02 03 00 3D 80 80 70  ;.<.G.......=..p
0460: 04 47 00 3E 80 3F 80 40  80 41 80 47 01 01 CC 04  .G.>.?.@.A.G....
0470: 02 03 00 42 80 80 87 04  47 00 43 80 44 80 45 80  ...B....G.C.D.E.
0480: 46 80 47 01 01 CC 04 02  03 00 47 80 80 9E 04 47  F.G.......G....G
0490: 00 48 80 49 80 36 80 4A  80 47 01 01 CC 04 02 03  .H.I.6.J.G......
04A0: 00 4B 80 80 B5 04 47 00  4C 80 4D 80 4E 80 4F 80  .K....G.L.M.N.O.
04B0: 47 01 01 CC 04 02 03 00  26 80 80 CC 04 47 00 50  G.......&....G.P
04C0: 80 51 80 29 80 52 80 47  01 01 CC 04 62 08 80 F8  .Q.).R.G....b...
04D0: FF FF 7F F8 FF FF 7F 6D  61 69 6E 02 80 1C 03 80  .......main.....
04E0: 03 01 10 01 80 01 F8 04  02 00 10 01 80 00 F8 04  ................
04F0: 03 01 10 01 80 01 F8 04  20 00 21 00              ........ .!.    
```

## Opcodes

```
  0: 0x03B6 [0x24] CREATE_DIALOG(message_id=7327*, default_option=1*, option_flags=0*)
    → "Use the portal?\u0007\u000BYes.\u0007No.\u007F1\u0000\u0007"
  1: 0x03BD [0x25] WAIT_DIALOG_SELECT()
  2: 0x03BE [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x04E8
  3: 0x03C6 [0x20] SET_CLI_EVENT_UC_FLAG: Lock player control
  4: 0x03C8 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  5: 0x03C9 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
  6: 0x03CB [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
  7: 0x03CD [0x62] LOAD_EVENT_SCHEDULER: Load scheduler "main" with entities [EventEntity, EventEntity], work=[1*, 0*]
  8: 0x03DE [0x1C] WAIT(180* ticks)
  9: 0x03E1 [0x13] ExtData[1]->WorkLocal[3] = rand() % 9*
 10: 0x03E6 [0x02] IF !(ExtData[1]->WorkLocal[3] == 0*) GOTO 0x03FD
 11: 0x03EE [0x47] UPDATE_PLAYER_POS(829.950*, 112.024*, 0.112*, yaw=82.4°*)
 12: 0x03F8 [0x47] WAIT_PLAYER_POS_UPDATE
 13: 0x03FA [0x01] GOTO 0x04CC
 14: 0x03FD [0x02] IF !(ExtData[1]->WorkLocal[3] == 1*) GOTO 0x0414
 15: 0x0405 [0x47] UPDATE_PLAYER_POS(810.005*, 111.883*, 0.118*, yaw=109.3°*)
 16: 0x040F [0x47] WAIT_PLAYER_POS_UPDATE
 17: 0x0411 [0x01] GOTO 0x04CC
 18: 0x0414 [0x02] IF !(ExtData[1]->WorkLocal[3] == 2*) GOTO 0x042B
 19: 0x041C [0x47] UPDATE_PLAYER_POS(790.022*, 111.964*, 0.115*, yaw=82.4°*)
 20: 0x0426 [0x47] WAIT_PLAYER_POS_UPDATE
 21: 0x0428 [0x01] GOTO 0x04CC
 22: 0x042B [0x02] IF !(ExtData[1]->WorkLocal[3] == 3*) GOTO 0x0442
 23: 0x0433 [0x47] UPDATE_PLAYER_POS(769.967*, 112.011*, 0.113*, yaw=93.4°*)
 24: 0x043D [0x47] WAIT_PLAYER_POS_UPDATE
 25: 0x043F [0x01] GOTO 0x04CC
 26: 0x0442 [0x02] IF !(ExtData[1]->WorkLocal[3] == 4*) GOTO 0x0459
 27: 0x044A [0x47] UPDATE_PLAYER_POS(770.071*, 71.916*, 0.116*, yaw=90.7°*)
 28: 0x0454 [0x47] WAIT_PLAYER_POS_UPDATE
 29: 0x0456 [0x01] GOTO 0x04CC
 30: 0x0459 [0x02] IF !(ExtData[1]->WorkLocal[3] == 5*) GOTO 0x0470
 31: 0x0461 [0x47] UPDATE_PLAYER_POS(790.006*, 71.986*, 0.114*, yaw=98.0°*)
 32: 0x046B [0x47] WAIT_PLAYER_POS_UPDATE
 33: 0x046D [0x01] GOTO 0x04CC
 34: 0x0470 [0x02] IF !(ExtData[1]->WorkLocal[3] == 6*) GOTO 0x0487
 35: 0x0478 [0x47] UPDATE_PLAYER_POS(769.928*, 7.910*, 0.109*, yaw=264.1°*)
 36: 0x0482 [0x47] WAIT_PLAYER_POS_UPDATE
 37: 0x0484 [0x01] GOTO 0x04CC
 38: 0x0487 [0x02] IF !(ExtData[1]->WorkLocal[3] == 7*) GOTO 0x049E
 39: 0x048F [0x47] UPDATE_PLAYER_POS(789.921*, 7.998*, 0.113*, yaw=277.0°*)
 40: 0x0499 [0x47] WAIT_PLAYER_POS_UPDATE
 41: 0x049B [0x01] GOTO 0x04CC
 42: 0x049E [0x02] IF !(ExtData[1]->WorkLocal[3] == 8*) GOTO 0x04B5
 43: 0x04A6 [0x47] UPDATE_PLAYER_POS(809.994*, 7.930*, 0.110*, yaw=272.8°*)
 44: 0x04B0 [0x47] WAIT_PLAYER_POS_UPDATE
 45: 0x04B2 [0x01] GOTO 0x04CC
 46: 0x04B5 [0x02] IF !(ExtData[1]->WorkLocal[3] == 9*) GOTO 0x04CC
 47: 0x04BD [0x47] UPDATE_PLAYER_POS(829.942*, 7.990*, 0.112*, yaw=265.2°*)
 48: 0x04C7 [0x47] WAIT_PLAYER_POS_UPDATE
 49: 0x04C9 [0x01] GOTO 0x04CC

SUBROUTINE_04CC:
 50: 0x04CC [0x62] LOAD_EVENT_SCHEDULER: Load scheduler "main" with entities [EventEntity, EventEntity], work=[2*, 0*]
 51: 0x04DD [0x1C] WAIT(180* ticks)
 52: 0x04E0 [0x03] Work_Zone[1] = 1*
 53: 0x04E5 [0x01] GOTO 0x04F8
 54: 0x04E8 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x04F8
 55: 0x04F0 [0x03] Work_Zone[1] = 1*
 56: 0x04F5 [0x01] GOTO 0x04F8

SUBROUTINE_04F8:
 57: 0x04F8 [0x20] SET_CLI_EVENT_UC_FLAG: Unlock player control
 58: 0x04FA [0x21] END_EVENT
 59: 0x04FB [0x00] END_REQSTACK()
```
