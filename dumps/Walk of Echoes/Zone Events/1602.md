# Event 1602

## Metadata

| Field           | Value      |
|-----------------|------------|
| Event Index     | 89/95      |
| Offset          | 0x2B98     |
| Data Size       | 1670 bytes |
| Calculated Size | 1670 bytes |
| Instructions    | 39         |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
2B90:                          03 3F 00 03 10 03 40 00          .?....@.
2BA0: 04 10 24 4A 81 01 80 01  80 25 02 00 10 01 80 00  ..$J.....%......
2BB0: BA 2B 03 01 10 40 81 01  80 2C 02 00 10 05 80 00  .+...@...,......
2BC0: D7 2B 40 01 80 06 80 01  10 1F 80 40 07 80 08 80  .+@........@....
2BD0: 01 10 01 80 01 80 2C 02  00 10 0D 80 00 F4 2B 40  ......,.......+@
2BE0: 01 80 06 80 01 10 20 80  40 07 80 08 80 01 10 01  ...... .@.......
2BF0: 80 01 80 2C 02 00 10 0E  80 00 3A 2C 71 12 05 80  ...,......:,q...
2C00: 0E 80 71 13 3E 00 02 3E  00 B2 80 02 13 2C 03 3E  ..q.>..>.....,.>
2C10: 00 B2 80 02 3E 00 01 80  03 20 2C 03 3E 00 01 80  ....>.... ,.>...
2C20: 15 3E 00 0C 80 40 01 80  06 80 01 10 0F 80 40 07  .>...@........@.
2C30: 80 08 80 01 10 3E 00 01  80 2C 02 00 10 0F 80 00  .....>...,......
2C40: 80 2C 71 12 05 80 0E 80  71 13 3E 00 02 3E 00 32  .,q.....q.>..>.2
2C50: 80 02 59 2C 03 3E 00 32  80 02 3E 00 01 80 03 66  ..Y,.>.2..>....f
2C60: 2C 03 3E 00 01 80 15 3E  00 0C 80 40 01 80 06 80  ,.>....>...@....
2C70: 01 10 0C 80 40 07 80 08  80 01 10 3E 00 01 80 2C  ....@......>...,
2C80: 21 00 24 10 80 05 80 01  80 25 02 00 10 01 80 00  !.$......%......
2C90: 98 2C 05 01 00 01 98 2C  1B 42 1A 73 2F 46 01 79  .,.....,.B.s/F.y
2CA0: 00 F0 FF FF 7F F0 FF FF  7F 02 03 00 01 80 80 B4  ................
2CB0: 2C 01 33 2D 02 03 00 05  80 80 BF 2C 01 33 2D 02  ,.3-.......,.3-.
2CC0: 03 00 0D 80 80 CA 2C 01  33 2D 02 03 00 0E 80 80  ......,.3-......
2CD0: E1 2C 03 02 10 01 80 29  08 91 62 0B 01 05 01 33  .,.....)..b....3
2CE0: 2D 37 4B 81 4C 81 18 80  4D 81 27 10 0E 62 0B 01  -7K.L...M.'..b..
2CF0: 03 45 00 80 F0 FF FF 7F  F0 FF FF 7F 61 74 69 30  .E..........ati0
2D00: 01 80 1A 52 2F 2A 10 0E  62 0B 01 32 23 80 1F 00  ...R/*..b..2#...
2D10: F9 80 FA 80 18 80 1F 01  27 10 0E 62 0B 01 04 1F  ........'..b....
2D20: 00 FB 80 FC 80 18 80 1F  01 6F 2A 10 0E 62 0B 01  .........o*..b..
2D30: 1A 73 2F 78 37 16 80 17  80 18 80 19 80 52 00 80  .s/x7........R..
2D40: F0 FF FF 7F F0 FF FF 7F  61 74 69 30 45 00 80 F0  ........ati0E...
2D50: FF FF 7F F0 FF FF 7F 61  74 69 31 01 80 1A 4D 30  .......ati1...M0
2D60: 55 00 80 F0 FF FF 7F F0  FF FF 7F 61 74 69 31 46  U..........ati1F
2D70: 00 1B 02 18 00 01 80 80  9F 2D 03 01 10 0C 80 43  .........-.....C
2D80: 00 43 01 02 02 10 05 80  00 8D 2D 30 1B 37 16 80  .C........-0.7..
2D90: 4D 80 4E 80 4F 80 1A FE  2E 1A FC 2D 01 F9 2D 02  M.N.O......-..-.
2DA0: 18 00 05 80 80 CC 2D 03  01 10 1F 80 43 00 43 01  ......-.....C.C.
2DB0: 02 02 10 05 80 00 BA 2D  30 1B 37 16 80 4D 80 4E  .......-0.7..M.N
2DC0: 80 4F 80 1A FE 2E 1A FC  2D 01 F9 2D 02 18 00 0D  .O......-..-....
2DD0: 80 80 F9 2D 03 01 10 20  80 43 00 43 01 02 02 10  ...-... .C.C....
2DE0: 05 80 00 E7 2D 30 1B 37  16 80 4D 80 4E 80 4F 80  ....-0.7..M.N.O.
2DF0: 1A FE 2E 1A FC 2D 01 F9  2D 46 00 1B 45 00 80 F0  .....-..-F..E...
2E00: FF FF 7F F0 FF FF 7F 66  64 69 32 01 80 02 16 00  .......fdi2.....
2E10: 09 80 01 26 2E 62 0D 80  F0 FF FF 7F F0 FF FF 7F  ...&.b..........
2E20: 6D 61 69 6E 01 80 55 00  80 F0 FF FF 7F F0 FF FF  main..U.........
2E30: 7F 66 64 69 32 1B 24 4E  81 05 80 01 80 25 02 00  .fdi2.$N.....%..
2E40: 10 01 80 00 4C 2E 05 1C  00 01 4C 2E 1B 05 1D 00  ....L.....L.....
2E50: 1B 42 1A 31 2F 46 01 37  4F 81 50 81 18 80 51 81  .B.1/F.7O.P...Q.
2E60: 27 10 11 62 0B 01 05 45  00 80 F0 FF FF 7F F0 FF  '..b...E........
2E70: FF 7F 61 74 6F 30 01 80  1A 10 2F 2A 10 11 62 0B  ..ato0..../*..b.
2E80: 01 32 9A 80 1F 00 52 81  53 81 54 81 1F 01 27 10  .2....R.S.T...'.
2E90: 11 62 0B 01 06 1F 00 55  81 56 81 54 81 1F 01 6F  .b.....U.V.T...o
2EA0: 2A 10 11 62 0B 01 1A 73  2F 37 57 81 58 81 4E 80  *..b...s/7W.X.N.
2EB0: 4F 80 52 00 80 F0 FF FF  7F F0 FF FF 7F 61 74 6F  O.R..........ato
2EC0: 30 45 00 80 F0 FF FF 7F  F0 FF FF 7F 61 74 6F 31  0E..........ato1
2ED0: 01 80 1A 4D 30 55 00 80  F0 FF FF 7F F0 FF FF 7F  ...M0U..........
2EE0: 61 74 6F 31 46 00 1B 46  01 1A FE 2E 1A 4D 30 46  ato1F..F.....M0F
2EF0: 00 1B 02 03 00 01 80 80  FD 2E 01 FD 2E 1B 45 A4  ..............E.
2F00: 80 F0 FF FF 7F F0 FF FF  7F 62 61 63 6B 01 80 1B  .........back...
2F10: 45 00 80 F0 FF FF 7F F0  FF FF 7F 66 64 69 30 01  E..........fdi0.
2F20: 80 55 00 80 F0 FF FF 7F  F0 FF FF 7F 66 64 69 30  .U..........fdi0
2F30: 1B 45 00 80 F0 FF FF 7F  F0 FF FF 7F 66 64 6F 30  .E..........fdo0
2F40: 01 80 55 00 80 F0 FF FF  7F F0 FF FF 7F 66 64 6F  ..U..........fdo
2F50: 30 1B 45 00 80 F0 FF FF  7F F0 FF FF 7F 66 64 69  0.E..........fdi
2F60: 31 01 80 55 00 80 F0 FF  FF 7F F0 FF FF 7F 66 64  1..U..........fd
2F70: 69 31 1B 45 00 80 F0 FF  FF 7F F0 FF FF 7F 66 64  i1.E..........fd
2F80: 6F 31 01 80 55 00 80 F0  FF FF 7F F0 FF FF 7F 66  o1..U..........f
2F90: 64 6F 31 1B 45 37 80 F0  FF FF 7F F0 FF FF 7F 77  do1.E7.........w
2FA0: 68 69 31 01 80 55 37 80  F0 FF FF 7F F0 FF FF 7F  hi1..U7.........
2FB0: 77 68 69 31 1B 45 37 80  F0 FF FF 7F F0 FF FF 7F  whi1.E7.........
2FC0: 77 68 6F 31 01 80 55 37  80 F0 FF FF 7F F0 FF FF  who1..U7........
2FD0: 7F 77 68 6F 31 1B 45 37  80 F0 FF FF 7F F0 FF FF  .who1.E7........
2FE0: 7F 77 68 6F 32 01 80 55  37 80 F0 FF FF 7F F0 FF  .who2..U7.......
2FF0: FF 7F 77 68 6F 32 1B 45  37 80 F0 FF FF 7F F0 FF  ..who2.E7.......
3000: FF 7F 77 68 6F 33 01 80  55 37 80 F0 FF FF 7F F0  ..who3..U7......
3010: FF FF 7F 77 68 6F 33 1B  62 05 80 F0 FF FF 7F F0  ...who3.b.......
3020: FF FF 7F 6D 61 69 6E 01  80 1C 59 81 45 00 80 F0  ...main...Y.E...
3030: FF FF 7F F0 FF FF 7F 66  64 6F 31 01 80 55 00 80  .......fdo1..U..
3040: F0 FF FF 7F F0 FF FF 7F  66 64 6F 31 1B 45 00 80  ........fdo1.E..
3050: F0 FF FF 7F F0 FF FF 7F  66 64 69 31 01 80 62 0D  ........fdi1..b.
3060: 80 F0 FF FF 7F F0 FF FF  7F 6D 61 69 6E 01 80 1C  .........main...
3070: 03 80 55 00 80 F0 FF FF  7F F0 FF FF 7F 66 64 69  ..U..........fdi
3080: 31 1B 45 00 80 F0 FF FF  7F F0 FF FF 7F 62 6C 6F  1.E..........blo
3090: 6E 01 80 45 37 80 F0 FF  FF 7F F0 FF FF 7F 62 6C  n..E7.........bl
30A0: 6F 6E 01 80 1B 45 37 80  F0 FF FF 7F F0 FF FF 7F  on...E7.........
30B0: 77 68 69 30 01 80 55 37  80 F0 FF FF 7F F0 FF FF  whi0..U7........
30C0: 7F 77 68 69 30 1B 45 37  80 F0 FF FF 7F F0 FF FF  .whi0.E7........
30D0: 7F 77 68 6F 30 01 80 55  37 80 F0 FF FF 7F F0 FF  .who0..U7.......
30E0: FF 7F 77 68 6F 30 1B 45  5A 81 F0 FF FF 7F F0 FF  ..who0.EZ.......
30F0: FF 7F 65 66 6F 6E 01 80  55 5A 81 F0 FF FF 7F F0  ..efon..UZ......
3100: FF FF 7F 65 66 6F 6E 1B  45 00 80 F0 FF FF 7F F0  ...efon.E.......
3110: FF FF 7F 66 64 69 73 01  80 1B 45 00 80 F0 FF FF  ...fdis...E.....
3120: 7F F0 FF FF 7F 66 64 6F  73 01 80 55 00 80 F0 FF  .....fdos..U....
3130: FF 7F F0 FF FF 7F 66 64  6F 73 1B 45 00 80 F0 FF  ......fdos.E....
3140: FF 7F F0 FF FF 7F 66 64  69 66 01 80 1B 45 00 80  ......fdif...E..
3150: F0 FF FF 7F F0 FF FF 7F  66 64 6F 66 01 80 55 00  ........fdof..U.
3160: 80 F0 FF FF 7F F0 FF FF  7F 66 64 6F 66 1B 45 00  .........fdof.E.
3170: 80 F0 FF FF 7F F0 FF FF  7F 66 64 69 70 01 80 1B  .........fdip...
3180: 45 00 80 F0 FF FF 7F F0  FF FF 7F 66 64 6F 70 01  E..........fdop.
3190: 80 55 00 80 F0 FF FF 7F  F0 FF FF 7F 66 64 6F 70  .U..........fdop
31A0: 1B 02 00 00 05 80 80 C0  31 03 09 00 16 80 03 0A  ........1.......
31B0: 00 17 80 03 0B 00 18 80  03 0C 00 19 80 01 1D 32  ...............2
31C0: 02 00 00 0D 80 80 DF 31  03 09 00 01 80 03 0A 00  .......1........
31D0: 01 80 03 0B 00 01 80 03  0C 00 01 80 01 1D 32 02  ..............2.
31E0: 00 00 0E 80 80 FE 31 03  09 00 01 80 03 0A 00 01  ......1.........
31F0: 80 03 0B 00 01 80 03 0C  00 01 80 01 1D 32 02 00  .............2..
3200: 00 0F 80 80 1D 32 03 09  00 01 80 03 0A 00 01 80  .....2..........
3210: 03 0B 00 01 80 03 0C 00  01 80 01 1D 32 1B        ............2.  
```

## Opcodes

```
  0: 0x2B98 [0x03] ExtData[1]->WorkLocal[63] = Work_Zone[3]
  1: 0x2B9D [0x03] ExtData[1]->WorkLocal[64] = Work_Zone[4]
  2: 0x2BA2 [0x24] CREATE_DIALOG(message_id=7299*, default_option=0*, option_flags=0*)
    → "Do what? (\u000C\u0001[pre-pop/popped/combat/post-combat] \u000C\u0002[\u0001\u0019\u0001\u0019/\u0001\u001A\u0001\u0019/\u0001\u0019\u0001\u001A/\u0001\u001A\u0001\u001A]).\u0007\u000BNothing.\u0007Restart normal battle.\u0007Restart surgebattle.\u0007Set endowed rate.\u0007Set surge rate.\u007F1\u0000\u0007"
  3: 0x2BA9 [0x25] WAIT_DIALOG_SELECT()
  4: 0x2BAA [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x2BBA
  5: 0x2BB2 [0x03] Work_Zone[1] = 1073741824*
  6: 0x2BB7 [0x01] GOTO 0x2C80
  7: 0x2BBA [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x2BD7
  8: 0x2BC2 [0x40] SET_BIT_WORK_RANGE(start_bit=0*, end_bit=15*, target=Work_Zone[1], source=6*)
  9: 0x2BCB [0x40] SET_BIT_WORK_RANGE(start_bit=16*, end_bit=31*, target=Work_Zone[1], source=0*)
 10: 0x2BD4 [0x01] GOTO 0x2C80
 11: 0x2BD7 [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x2BF4
 12: 0x2BDF [0x40] SET_BIT_WORK_RANGE(start_bit=0*, end_bit=15*, target=Work_Zone[1], source=7*)
 13: 0x2BE8 [0x40] SET_BIT_WORK_RANGE(start_bit=16*, end_bit=31*, target=Work_Zone[1], source=0*)
 14: 0x2BF1 [0x01] GOTO 0x2C80
 15: 0x2BF4 [0x02] IF !(Work_Zone[0] == 3*) GOTO 0x2C3A
 16: 0x2BFC [0x71] USER_INPUT_HANDLER: Open numerical input with params (work=[1*, 3*])
 17: 0x2C02 [0x71] USER_INPUT_HANDLER: Process numerical input B (work=ExtData[1]->WorkLocal[62])
 18: 0x2C06 [0x02] IF !(ExtData[1]->WorkLocal[62] <= 50*) GOTO 0x2C13
 19: 0x2C0E [0x03] ExtData[1]->WorkLocal[62] = 50*
 20: 0x2C13 [0x02] IF !(ExtData[1]->WorkLocal[62] >= 0*) GOTO 0x2C20
 21: 0x2C1B [0x03] ExtData[1]->WorkLocal[62] = 0*
 22: 0x2C20 [0x15] ExtData[1]->WorkLocal[62] /= 5*
 23: 0x2C25 [0x40] SET_BIT_WORK_RANGE(start_bit=0*, end_bit=15*, target=Work_Zone[1], source=4*)
 24: 0x2C2E [0x40] SET_BIT_WORK_RANGE(start_bit=16*, end_bit=31*, target=Work_Zone[1], source=ExtData[1]->WorkLocal[62])
 25: 0x2C37 [0x01] GOTO 0x2C80
 26: 0x2C3A [0x02] IF !(Work_Zone[0] == 4*) GOTO 0x2C80
 27: 0x2C42 [0x71] USER_INPUT_HANDLER: Open numerical input with params (work=[1*, 3*])
 28: 0x2C48 [0x71] USER_INPUT_HANDLER: Process numerical input B (work=ExtData[1]->WorkLocal[62])
 29: 0x2C4C [0x02] IF !(ExtData[1]->WorkLocal[62] <= 100*) GOTO 0x2C59
 30: 0x2C54 [0x03] ExtData[1]->WorkLocal[62] = 100*
 31: 0x2C59 [0x02] IF !(ExtData[1]->WorkLocal[62] >= 0*) GOTO 0x2C66
 32: 0x2C61 [0x03] ExtData[1]->WorkLocal[62] = 0*
 33: 0x2C66 [0x15] ExtData[1]->WorkLocal[62] /= 5*
 34: 0x2C6B [0x40] SET_BIT_WORK_RANGE(start_bit=0*, end_bit=15*, target=Work_Zone[1], source=5*)
 35: 0x2C74 [0x40] SET_BIT_WORK_RANGE(start_bit=16*, end_bit=31*, target=Work_Zone[1], source=ExtData[1]->WorkLocal[62])
 36: 0x2C7D [0x01] GOTO 0x2C80

SUBROUTINE_2C80:
 37: 0x2C80 [0x21] END_EVENT
 38: 0x2C81 [0x00] END_REQSTACK()
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x2C82 [0x24] CREATE_DIALOG(message_id=7308*, default_option=1*, option_flags=0*)
    → "Enter the battlefield?\u0007\u000BEnter.\u0007Decline.\u007F1\u0000\u0007"
     0x2C89 [0x25] WAIT_DIALOG_SELECT()
     0x2C8A [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x2C98
     0x2C92 [0x05] ExtData[1]->WorkLocal[1] = 1
     0x2C95 [0x01] GOTO 0x2C98
     0x2C98 [0x1B] RETURN
     0x2C99 [0x42] SET_CLI_EVENT_CANCEL_DATA()
     0x2C9A [0x1A] CALL_SUBROUTINE(address=0x2F73)
     0x2C9D [0x46] CAMERA_CONTROL: Disable user control
     0x2C9F [0x79] LocalPlayer looks at LocalPlayer (Basic look)
     0x2CA9 [0x02] IF !(ExtData[1]->WorkLocal[3] == 0*) GOTO 0x2CB4
     0x2CB1 [0x01] GOTO 0x2D33
     0x2CB4 [0x02] IF !(ExtData[1]->WorkLocal[3] == 1*) GOTO 0x2CBF
     0x2CBC [0x01] GOTO 0x2D33
     0x2CBF [0x02] IF !(ExtData[1]->WorkLocal[3] == 2*) GOTO 0x2CCA
     0x2CC7 [0x01] GOTO 0x2D33
     0x2CCA [0x02] IF !(ExtData[1]->WorkLocal[3] == 3*) GOTO 0x2CE1
     0x2CD2 [0x03] Work_Zone[2] = 0*
     0x2CD7 [0x29] REQ_SET_WAIT(priority=0x08, entity_id=??? (ID: 17523345/0x010B6291), tag_num=0x05)
     0x2CDE [0x01] GOTO 0x2D33
     0x2CE1 [0x37] UPDATE_EVENT_POSITION_AND_DIR: x=-700.239*, z=-306.379*, y=-18.000*, direction=273.2°*
     0x2CEA [0x27] REQ_SET(priority=0x10, entity_id=Ornate Door (ID: 17523214/0x010B620E), tag_num=0x03)
     0x2CF1 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "ati0" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x2D02 [0x1A] CALL_SUBROUTINE(address=0x2F52)
     0x2D05 [0x2A] GET_REQ_LEVEL(level=16, entity_id=Ornate Door (ID: 17523214/0x010B620E))
     0x2D0B [0x32] ExtData[1]->MainSpeed = 13* * 0.1
     0x2D0E [0x1F] MOVE_ENTITY: EventEntity moves to X=-700.092*, Z=-301.148*, Y=-18.000*
     0x2D16 [0x1F] MOVE_ENTITY: Update entity position (mode=1)
     0x2D18 [0x27] REQ_SET(priority=0x10, entity_id=Ornate Door (ID: 17523214/0x010B620E), tag_num=0x04)
     0x2D1F [0x1F] MOVE_ENTITY: EventEntity moves to X=-700.048*, Z=-298.882*, Y=-18.000*
     0x2D27 [0x1F] MOVE_ENTITY: Update entity position (mode=1)
     0x2D29 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
     0x2D2A [0x2A] GET_REQ_LEVEL(level=16, entity_id=Ornate Door (ID: 17523214/0x010B620E))
     0x2D30 [0x1A] CALL_SUBROUTINE(address=0x2F73)
     0x2D33 [0x78] ENABLE_GAME_TIMER_RESET_WEATHER()
     0x2D34 [0x37] UPDATE_EVENT_POSITION_AND_DIR: x=-700.000*, z=-180.000*, y=-18.000*, direction=270.0°*
     0x2D3D [0x52] END_LOAD_SCHEDULER: End scheduler "ati0" with entities [LocalPlayer, LocalPlayer], work=200*
     0x2D4C [0x45] LOAD_SCHEDULED_TASK: Load scheduler "ati1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x2D5D [0x1A] CALL_SUBROUTINE(address=0x304D)
     0x2D60 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "ati1" with entities [LocalPlayer, LocalPlayer], work=200*
     0x2D6F [0x46] CAMERA_CONTROL: Restore default settings
     0x2D71 [0x1B] RETURN
     0x2D72 [0x02] IF !(ExtData[1]->WorkLocal[24] == 0*) GOTO 0x2D9F
     0x2D7A [0x03] Work_Zone[1] = 5*
     0x2D7F [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
     0x2D81 [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
     0x2D83 [0x02] IF !(Work_Zone[2] == 1*) GOTO 0x2D8D
     0x2D8B [0x30] SET_UCOFF_CONTINUE_ZERO()
     0x2D8C [0x1B] RETURN
     0x2D8D [0x37] UPDATE_EVENT_POSITION_AND_DIR: x=-700.000*, z=-335.000*, y=-17.600*, direction=90.0°*
     0x2D96 [0x1A] CALL_SUBROUTINE(address=0x2EFE)
     0x2D99 [0x1A] CALL_SUBROUTINE(address=0x2DFC)
     0x2D9C [0x01] GOTO 0x2DF9
     0x2D9F [0x02] IF !(ExtData[1]->WorkLocal[24] == 1*) GOTO 0x2DCC
     0x2DA7 [0x03] Work_Zone[1] = 6*
     0x2DAC [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
     0x2DAE [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
     0x2DB0 [0x02] IF !(Work_Zone[2] == 1*) GOTO 0x2DBA
     0x2DB8 [0x30] SET_UCOFF_CONTINUE_ZERO()
     0x2DB9 [0x1B] RETURN
     0x2DBA [0x37] UPDATE_EVENT_POSITION_AND_DIR: x=-700.000*, z=-335.000*, y=-17.600*, direction=90.0°*
     0x2DC3 [0x1A] CALL_SUBROUTINE(address=0x2EFE)
     0x2DC6 [0x1A] CALL_SUBROUTINE(address=0x2DFC)
     0x2DC9 [0x01] GOTO 0x2DF9
     0x2DCC [0x02] IF !(ExtData[1]->WorkLocal[24] == 2*) GOTO 0x2DF9
     0x2DD4 [0x03] Work_Zone[1] = 7*
     0x2DD9 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
     0x2DDB [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
     0x2DDD [0x02] IF !(Work_Zone[2] == 1*) GOTO 0x2DE7
     0x2DE5 [0x30] SET_UCOFF_CONTINUE_ZERO()
     0x2DE6 [0x1B] RETURN
     0x2DE7 [0x37] UPDATE_EVENT_POSITION_AND_DIR: x=-700.000*, z=-335.000*, y=-17.600*, direction=90.0°*
     0x2DF0 [0x1A] CALL_SUBROUTINE(address=0x2EFE)
     0x2DF3 [0x1A] CALL_SUBROUTINE(address=0x2DFC)
     0x2DF6 [0x01] GOTO 0x2DF9
     0x2DF9 [0x46] CAMERA_CONTROL: Restore default settings
     0x2DFB [0x1B] RETURN
     0x2DFC [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi2" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x2E0D [0x02] IF !(ExtData[1]->WorkLocal[22] == 4294967295*) GOTO 0x2E26
     0x2E15 [0x62] LOAD_EVENT_SCHEDULER: Load scheduler "main" with entities [LocalPlayer, LocalPlayer], work=[2*, 0*]
     0x2E26 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdi2" with entities [LocalPlayer, LocalPlayer], work=200*
     0x2E35 [0x1B] RETURN
     0x2E36 [0x24] CREATE_DIALOG(message_id=7309*, default_option=1*, option_flags=0*)
    → "Leave the battlefield?\u0007\u000BRun away.\u0007Stay.\u007F1\u0000\u0007"
     0x2E3D [0x25] WAIT_DIALOG_SELECT()
     0x2E3E [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x2E4C
     0x2E46 [0x05] ExtData[1]->WorkLocal[28] = 1
     0x2E49 [0x01] GOTO 0x2E4C
     0x2E4C [0x1B] RETURN
     0x2E4D [0x05] ExtData[1]->WorkLocal[29] = 1
     0x2E50 [0x1B] RETURN
     0x2E51 [0x42] SET_CLI_EVENT_CANCEL_DATA()
     0x2E52 [0x1A] CALL_SUBROUTINE(address=0x2F31)
     0x2E55 [0x46] CAMERA_CONTROL: Disable user control
     0x2E57 [0x37] UPDATE_EVENT_POSITION_AND_DIR: x=-699.984*, z=-180.155*, y=-18.000*, direction=90.3°*
     0x2E60 [0x27] REQ_SET(priority=0x10, entity_id=Towering Portcullis (ID: 17523217/0x010B6211), tag_num=0x05)
     0x2E67 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "ato0" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x2E78 [0x1A] CALL_SUBROUTINE(address=0x2F10)
     0x2E7B [0x2A] GET_REQ_LEVEL(level=16, entity_id=Towering Portcullis (ID: 17523217/0x010B6211))
     0x2E81 [0x32] ExtData[1]->MainSpeed = 40* * 0.1
     0x2E84 [0x1F] MOVE_ENTITY: EventEntity moves to X=-699.783*, Z=-185.322*, Y=-18.047*
     0x2E8C [0x1F] MOVE_ENTITY: Update entity position (mode=1)
     0x2E8E [0x27] REQ_SET(priority=0x10, entity_id=Towering Portcullis (ID: 17523217/0x010B6211), tag_num=0x06)
     0x2E95 [0x1F] MOVE_ENTITY: EventEntity moves to X=-699.878*, Z=-190.235*, Y=-18.047*
     0x2E9D [0x1F] MOVE_ENTITY: Update entity position (mode=1)
     0x2E9F [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
     0x2EA0 [0x2A] GET_REQ_LEVEL(level=16, entity_id=Towering Portcullis (ID: 17523217/0x010B6211))
     0x2EA6 [0x1A] CALL_SUBROUTINE(address=0x2F73)
     0x2EA9 [0x37] UPDATE_EVENT_POSITION_AND_DIR: x=-700.063*, z=-331.903*, y=-17.600*, direction=90.0°*
     0x2EB2 [0x52] END_LOAD_SCHEDULER: End scheduler "ato0" with entities [LocalPlayer, LocalPlayer], work=200*
     0x2EC1 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "ato1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x2ED2 [0x1A] CALL_SUBROUTINE(address=0x304D)
     0x2ED5 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "ato1" with entities [LocalPlayer, LocalPlayer], work=200*
     0x2EE4 [0x46] CAMERA_CONTROL: Restore default settings
     0x2EE6 [0x1B] RETURN
     0x2EE7 [0x46] CAMERA_CONTROL: Disable user control
     0x2EE9 [0x1A] CALL_SUBROUTINE(address=0x2EFE)
     0x2EEC [0x1A] CALL_SUBROUTINE(address=0x304D)
     0x2EEF [0x46] CAMERA_CONTROL: Restore default settings
     0x2EF1 [0x1B] RETURN
     0x2EF2 [0x02] IF !(ExtData[1]->WorkLocal[3] == 0*) GOTO 0x2EFD
     0x2EFA [0x01] GOTO 0x2EFD
     0x2EFD [0x1B] RETURN
     0x2EFE [0x45] LOAD_SCHEDULED_TASK: Load scheduler "back" with entities [LocalPlayer, LocalPlayer], work=[108*, 0*]
     0x2F0F [0x1B] RETURN
     0x2F10 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi0" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x2F21 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdi0" with entities [LocalPlayer, LocalPlayer], work=200*
     0x2F30 [0x1B] RETURN
     0x2F31 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo0" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x2F42 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo0" with entities [LocalPlayer, LocalPlayer], work=200*
     0x2F51 [0x1B] RETURN
     0x2F52 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x2F63 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=200*
     0x2F72 [0x1B] RETURN
     0x2F73 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x2F84 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=200*
     0x2F93 [0x1B] RETURN
     0x2F94 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "whi1" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
     0x2FA5 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "whi1" with entities [LocalPlayer, LocalPlayer], work=201*
     0x2FB4 [0x1B] RETURN
     0x2FB5 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "who1" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
     0x2FC6 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "who1" with entities [LocalPlayer, LocalPlayer], work=201*
     0x2FD5 [0x1B] RETURN
     0x2FD6 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "who2" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
     0x2FE7 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "who2" with entities [LocalPlayer, LocalPlayer], work=201*
     0x2FF6 [0x1B] RETURN
     0x2FF7 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "who3" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
     0x3008 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "who3" with entities [LocalPlayer, LocalPlayer], work=201*
     0x3017 [0x1B] RETURN
     0x3018 [0x62] LOAD_EVENT_SCHEDULER: Load scheduler "main" with entities [LocalPlayer, LocalPlayer], work=[1*, 0*]
     0x3029 [0x1C] WAIT(45* ticks)
     0x302C [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x303D [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=200*
     0x304C [0x1B] RETURN
     0x304D [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x305E [0x62] LOAD_EVENT_SCHEDULER: Load scheduler "main" with entities [LocalPlayer, LocalPlayer], work=[2*, 0*]
     0x306F [0x1C] WAIT(30* ticks)
     0x3072 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=200*
     0x3081 [0x1B] RETURN
     0x3082 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "blon" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x3093 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "blon" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
     0x30A4 [0x1B] RETURN
     0x30A5 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "whi0" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
     0x30B6 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "whi0" with entities [LocalPlayer, LocalPlayer], work=201*
     0x30C5 [0x1B] RETURN
     0x30C6 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "who0" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
     0x30D7 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "who0" with entities [LocalPlayer, LocalPlayer], work=201*
     0x30E6 [0x1B] RETURN
     0x30E7 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "efon" with entities [LocalPlayer, LocalPlayer], work=[215*, 0*]
     0x30F8 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "efon" with entities [LocalPlayer, LocalPlayer], work=215*
     0x3107 [0x1B] RETURN
     0x3108 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdis" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x3119 [0x1B] RETURN
     0x311A [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdos" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x312B [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdos" with entities [LocalPlayer, LocalPlayer], work=200*
     0x313A [0x1B] RETURN
     0x313B [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdif" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x314C [0x1B] RETURN
     0x314D [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdof" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x315E [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdof" with entities [LocalPlayer, LocalPlayer], work=200*
     0x316D [0x1B] RETURN
     0x316E [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdip" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x317F [0x1B] RETURN
     0x3180 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdop" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x3191 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdop" with entities [LocalPlayer, LocalPlayer], work=200*
     0x31A0 [0x1B] RETURN
     0x31A1 [0x02] IF !(ExtData[1]->WorkLocal[0] == 1*) GOTO 0x31C0
     0x31A9 [0x03] ExtData[1]->WorkLocal[9] = 4294267296*
     0x31AE [0x03] ExtData[1]->WorkLocal[10] = 4294787296*
     0x31B3 [0x03] ExtData[1]->WorkLocal[11] = 4294949296*
     0x31B8 [0x03] ExtData[1]->WorkLocal[12] = 3072*
     0x31BD [0x01] GOTO 0x321D
     0x31C0 [0x02] IF !(ExtData[1]->WorkLocal[0] == 2*) GOTO 0x31DF
     0x31C8 [0x03] ExtData[1]->WorkLocal[9] = 0*
     0x31CD [0x03] ExtData[1]->WorkLocal[10] = 0*
     0x31D2 [0x03] ExtData[1]->WorkLocal[11] = 0*
     0x31D7 [0x03] ExtData[1]->WorkLocal[12] = 0*
     0x31DC [0x01] GOTO 0x321D
     0x31DF [0x02] IF !(ExtData[1]->WorkLocal[0] == 3*) GOTO 0x31FE
     0x31E7 [0x03] ExtData[1]->WorkLocal[9] = 0*
     0x31EC [0x03] ExtData[1]->WorkLocal[10] = 0*
     0x31F1 [0x03] ExtData[1]->WorkLocal[11] = 0*
     0x31F6 [0x03] ExtData[1]->WorkLocal[12] = 0*
     0x31FB [0x01] GOTO 0x321D
     0x31FE [0x02] IF !(ExtData[1]->WorkLocal[0] == 4*) GOTO 0x321D
     0x3206 [0x03] ExtData[1]->WorkLocal[9] = 0*
     0x320B [0x03] ExtData[1]->WorkLocal[10] = 0*
     0x3210 [0x03] ExtData[1]->WorkLocal[11] = 0*
     0x3215 [0x03] ExtData[1]->WorkLocal[12] = 0*
     0x321A [0x01] GOTO 0x321D
     0x321D [0x1B] RETURN
```