# Event 1601

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 2/2       |
| Offset          | 0x0001    |
| Data Size       | 641 bytes |
| Calculated Size | 641 bytes |
| Instructions    | 125       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000:    03 01 00 00 80 41 00  80 01 80 03 10 0F 00 41   .....A........A
0010: 02 80 03 80 03 10 10 00  41 00 80 01 80 04 10 11  ........A.......
0020: 00 41 02 80 03 80 04 10  12 00 41 00 80 01 80 05  .A........A.....
0030: 10 13 00 41 02 80 03 80  05 10 14 00 41 00 80 01  ...A........A...
0040: 80 06 10 15 00 41 02 80  03 80 06 10 16 00 41 00  .....A........A.
0050: 80 01 80 07 10 17 00 41  02 80 03 80 07 10 18 00  .......A........
0060: 03 00 00 08 10 05 01 00  03 1A 00 00 80 42 1A 2E  .............B..
0070: 02 02 01 00 00 80 02 8A  01 03 03 10 0F 00 03 04  ................
0080: 10 10 00 03 05 10 11 00  03 06 10 12 00 03 07 10  ................
0090: 13 00 03 08 10 14 00 03  09 10 15 00 03 00 17 16  ................
00A0: 00 03 01 17 17 00 03 02  17 18 00 1A 8F 01 24 04  ..............$.
00B0: 80 00 80 00 00 25 02 00  10 00 80 00 C9 00 06 01  .....%..........
00C0: 00 03 02 00 00 80 01 CE  00 03 02 00 00 10 02 02  ................
00D0: 00 05 80 04 87 01 02 02  00 06 80 05 29 01 9D 00  ............)...
00E0: 62 02 19 00 02 00 93 19  00 48 07 80 23 93 00 80  b........H..#...
00F0: 03 02 10 19 00 24 08 80  05 80 00 80 25 02 00 10  .....$......%...
0100: 00 80 00 26 01 03 01 10  02 00 43 00 43 01 03 00  ...&......C.C...
0110: 00 08 10 02 09 10 00 80  01 23 01 03 01 10 02 00  .........#......
0120: 06 01 00 01 26 01 01 87  01 02 02 00 09 80 80 63  ....&..........c
0130: 01 24 0A 80 05 80 00 80  25 02 00 10 00 80 00 55  .$......%......U
0140: 01 03 01 10 02 00 43 00  43 01 03 01 10 02 00 06  ......C.C.......
0150: 01 00 01 60 01 02 00 10  05 80 00 60 01 01 60 01  ...`.......`..`.
0160: 01 87 01 02 02 00 0B 80  80 87 01 03 01 10 02 00  ................
0170: 43 00 43 01 02 09 10 00  80 01 84 01 03 01 10 02  C.C.............
0180: 00 06 01 00 01 87 01 01  71 00 1A 44 02 21 00 06  ........q..D.!..
0190: 19 00 3E 00 00 05 80 9C  01 01 9F 01 0B 19 00 3E  ..>............>
01A0: 00 00 0C 80 A9 01 01 AC  01 0B 19 00 3E 00 00 0D  ............>...
01B0: 80 B6 01 01 B9 01 0B 19  00 3E 00 00 0E 80 C3 01  .........>......
01C0: 01 C6 01 0B 19 00 3E 00  00 0F 80 D0 01 01 D3 01  ......>.........
01D0: 0B 19 00 3E 00 00 10 80  DD 01 01 E0 01 0B 19 00  ...>............
01E0: 3E 00 00 11 80 EA 01 01  ED 01 0B 19 00 3E 00 00  >............>..
01F0: 12 80 F7 01 01 FA 01 0B  19 00 3E 00 00 13 80 04  ..........>.....
0200: 02 01 07 02 0B 19 00 3E  00 00 06 80 11 02 01 14  .......>........
0210: 02 0B 19 00 02 19 00 05  80 00 26 02 3C 00 00 0B  ..........&.<...
0220: 80 05 80 01 2D 02 3D 00  00 0B 80 05 80 1B 2C F8  ....-.=.......,.
0230: FF FF 7F F8 FF FF 7F 6F  70 65 6E 1C 14 80 03 1A  .......open.....
0240: 00 05 80 1B 02 1A 00 05  80 00 61 02 2C F8 FF FF  ..........a.,...
0250: 7F F8 FF FF 7F 63 6C 6F  73 1C 14 80 03 1A 00 00  .....clos.......
0260: 80 1B 00 80 0F 00 10 00  11 00 12 00 13 00 14 00  ................
0270: 15 00 16 00 17 00 18 00  00 80 00 80 00 80 00 80  ................
0280: 00 80                                             ..              
```

## Opcodes

```
  0: 0x0001 [0x03] ExtData[1]->WorkLocal[1] = 0*
  1: 0x0006 [0x41] ExtData[1]->WorkLocal[15] = Work_Zone[3] (bits 0*-15*)
  2: 0x000F [0x41] ExtData[1]->WorkLocal[16] = Work_Zone[3] (bits 16*-31*)
  3: 0x0018 [0x41] ExtData[1]->WorkLocal[17] = Work_Zone[4] (bits 0*-15*)
  4: 0x0021 [0x41] ExtData[1]->WorkLocal[18] = Work_Zone[4] (bits 16*-31*)
  5: 0x002A [0x41] ExtData[1]->WorkLocal[19] = Work_Zone[5] (bits 0*-15*)
  6: 0x0033 [0x41] ExtData[1]->WorkLocal[20] = Work_Zone[5] (bits 16*-31*)
  7: 0x003C [0x41] ExtData[1]->WorkLocal[21] = Work_Zone[6] (bits 0*-15*)
  8: 0x0045 [0x41] ExtData[1]->WorkLocal[22] = Work_Zone[6] (bits 16*-31*)
  9: 0x004E [0x41] ExtData[1]->WorkLocal[23] = Work_Zone[7] (bits 0*-15*)
 10: 0x0057 [0x41] ExtData[1]->WorkLocal[24] = Work_Zone[7] (bits 16*-31*)
 11: 0x0060 [0x03] ExtData[1]->WorkLocal[0] = Work_Zone[8]
 12: 0x0065 [0x05] ExtData[1]->WorkLocal[1] = 1
 13: 0x0068 [0x03] ExtData[1]->WorkLocal[26] = 0*
 14: 0x006D [0x42] SET_CLI_EVENT_CANCEL_DATA()
 15: 0x006E [0x1A] CALL_SUBROUTINE(address=0x022E)
 16: 0x0071 [0x02] IF !(ExtData[1]->WorkLocal[1] <= 0*) GOTO 0x018A
 17: 0x0079 [0x03] Work_Zone[3] = ExtData[1]->WorkLocal[15]
 18: 0x007E [0x03] Work_Zone[4] = ExtData[1]->WorkLocal[16]
 19: 0x0083 [0x03] Work_Zone[5] = ExtData[1]->WorkLocal[17]
 20: 0x0088 [0x03] Work_Zone[6] = ExtData[1]->WorkLocal[18]
 21: 0x008D [0x03] Work_Zone[7] = ExtData[1]->WorkLocal[19]
 22: 0x0092 [0x03] Work_Zone[8] = ExtData[1]->WorkLocal[20]
 23: 0x0097 [0x03] Work_Zone[9] = ExtData[1]->WorkLocal[21]
 24: 0x009C [0x03] Work_Zone_1700[0] = ExtData[1]->WorkLocal[22]
 25: 0x00A1 [0x03] Work_Zone_1700[1] = ExtData[1]->WorkLocal[23]
 26: 0x00A6 [0x03] Work_Zone_1700[2] = ExtData[1]->WorkLocal[24]
 27: 0x00AB [0x1A] CALL_SUBROUTINE(address=0x018F)
 28: 0x00AE [0x24] CREATE_DIALOG(message_id=7266*, default_option=0*, option_flags=0x00)
    → "Which item will you obtain?\u0007\u000BNone.\u0007\u007F\u0000\u0001\u0001\u0001\u0001 \u0001\u0005$\u0002\u0001\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0001\u0001 \u0001\u0005$\u0002\u0002\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0001\u0001 \u0001\u0005$\u0002\u0003\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0001\u0001 \u0001\u0005$\u0002\u0004\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0001\u0001 \u0001\u0005$\u0002\u0005\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0001\u0001 \u0001\u0005$\u0002\u0006\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0001\u0001 \u0001\u0005$\u0002\u0007\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0001\u0001 \u0001\u0005$\u0002\u0008\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0001\u0001 \u0001\u0005$\u0002	\u0000\u0000.\u0007\u007F\u0000\u0001\u0001\u0001\u0001 \u0001\u0005$\u0002
\u0000\u0000.\u0007Destroy 'em all.\u0007All items.\u007F1\u0000\u0007"
 29: 0x00B5 [0x25] WAIT_DIALOG_SELECT()
 30: 0x00B6 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x00C9
 31: 0x00BE [0x06] ExtData[1]->WorkLocal[1] = 0
 32: 0x00C1 [0x03] ExtData[1]->WorkLocal[2] = 0*
 33: 0x00C6 [0x01] GOTO 0x00CE
 34: 0x00C9 [0x03] ExtData[1]->WorkLocal[2] = Work_Zone[0]

SUBROUTINE_00CE:
 35: 0x00CE [0x02] IF !(ExtData[1]->WorkLocal[2] < 1*) GOTO 0x0187
 36: 0x00D6 [0x02] IF !(ExtData[1]->WorkLocal[2] > 10*) GOTO 0x0129
 37: 0x00DE [0x9D] ExtData[1]->WorkLocal[25] = 0x0262[ExtData[1]->WorkLocal[2]] // Read WORD
 38: 0x00E6 [0x93] DISPLAY_ITEM_INFO(item_id=ExtData[1]->WorkLocal[25])
 39: 0x00E9 [0x48] [System] [7267*]:
    → "Obtain this item?\u007F1\u0000\u0007"
 40: 0x00EC [0x23] WAIT_FOR_DIALOG_INTERACTION
 41: 0x00ED [0x93] DISPLAY_ITEM_INFO(item_id=0*)
 42: 0x00F0 [0x03] Work_Zone[2] = ExtData[1]->WorkLocal[25]
 43: 0x00F5 [0x24] CREATE_DIALOG(message_id=7268*, default_option=1*, option_flags=0*)
    → "Obtain the \u0001\u0005#\u0002\u0000\u0000\u0000?\u0007\u000BYes.\u0007No.\u007F1\u0000\u0007"
 44: 0x00FC [0x25] WAIT_DIALOG_SELECT()
 45: 0x00FD [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x0126
 46: 0x0105 [0x03] Work_Zone[1] = ExtData[1]->WorkLocal[2]
 47: 0x010A [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
 48: 0x010C [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
 49: 0x010E [0x03] ExtData[1]->WorkLocal[0] = Work_Zone[8]
 50: 0x0113 [0x02] IF !(Work_Zone[9] == 0*) GOTO 0x0123
 51: 0x011B [0x03] Work_Zone[1] = ExtData[1]->WorkLocal[2]
 52: 0x0120 [0x06] ExtData[1]->WorkLocal[1] = 0
 53: 0x0123 [0x01] GOTO 0x0126

SUBROUTINE_0126:
 54: 0x0126 [0x01] GOTO 0x0187
 55: 0x0129 [0x02] IF !(ExtData[1]->WorkLocal[2] == 11*) GOTO 0x0163
 56: 0x0131 [0x24] CREATE_DIALOG(message_id=7306*, default_option=1*, option_flags=0*)
    → "Relinquish your claim to the battle spoils?\u0007\u000BYes.\u0007On second thought...\u007F1\u0000\u0007"
 57: 0x0138 [0x25] WAIT_DIALOG_SELECT()
 58: 0x0139 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x0155
 59: 0x0141 [0x03] Work_Zone[1] = ExtData[1]->WorkLocal[2]
 60: 0x0146 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
 61: 0x0148 [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
 62: 0x014A [0x03] Work_Zone[1] = ExtData[1]->WorkLocal[2]
 63: 0x014F [0x06] ExtData[1]->WorkLocal[1] = 0
 64: 0x0152 [0x01] GOTO 0x0160
 65: 0x0155 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x0160
 66: 0x015D [0x01] GOTO 0x0160

SUBROUTINE_0160:
 67: 0x0160 [0x01] GOTO 0x0187
 68: 0x0163 [0x02] IF !(ExtData[1]->WorkLocal[2] == 12*) GOTO 0x0187
 69: 0x016B [0x03] Work_Zone[1] = ExtData[1]->WorkLocal[2]
 70: 0x0170 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
 71: 0x0172 [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
 72: 0x0174 [0x02] IF !(Work_Zone[9] == 0*) GOTO 0x0184
 73: 0x017C [0x03] Work_Zone[1] = ExtData[1]->WorkLocal[2]
 74: 0x0181 [0x06] ExtData[1]->WorkLocal[1] = 0
 75: 0x0184 [0x01] GOTO 0x0187

SUBROUTINE_0187:
 76: 0x0187 [0x01] GOTO 0x0071
 77: 0x018A [0x1A] CALL_SUBROUTINE(address=0x0244)
 78: 0x018D [0x21] END_EVENT
 79: 0x018E [0x00] END_REQSTACK()

SUBROUTINE_018F:
 80: 0x018F [0x06] ExtData[1]->WorkLocal[25] = 0
 81: 0x0192 [0x3E] IF !(ExtData[1]->WorkLocal[0] bit 1*) GOTO 0x019C
 82: 0x0199 [0x01] GOTO 0x019F
 83: 0x019C [0x0B] ExtData[1]->WorkLocal[25]++

SUBROUTINE_019F:
 84: 0x019F [0x3E] IF !(ExtData[1]->WorkLocal[0] bit 2*) GOTO 0x01A9
 85: 0x01A6 [0x01] GOTO 0x01AC
 86: 0x01A9 [0x0B] ExtData[1]->WorkLocal[25]++

SUBROUTINE_01AC:
 87: 0x01AC [0x3E] IF !(ExtData[1]->WorkLocal[0] bit 3*) GOTO 0x01B6
 88: 0x01B3 [0x01] GOTO 0x01B9
 89: 0x01B6 [0x0B] ExtData[1]->WorkLocal[25]++

SUBROUTINE_01B9:
 90: 0x01B9 [0x3E] IF !(ExtData[1]->WorkLocal[0] bit 4*) GOTO 0x01C3
 91: 0x01C0 [0x01] GOTO 0x01C6
 92: 0x01C3 [0x0B] ExtData[1]->WorkLocal[25]++

SUBROUTINE_01C6:
 93: 0x01C6 [0x3E] IF !(ExtData[1]->WorkLocal[0] bit 5*) GOTO 0x01D0
 94: 0x01CD [0x01] GOTO 0x01D3
 95: 0x01D0 [0x0B] ExtData[1]->WorkLocal[25]++

SUBROUTINE_01D3:
 96: 0x01D3 [0x3E] IF !(ExtData[1]->WorkLocal[0] bit 6*) GOTO 0x01DD
 97: 0x01DA [0x01] GOTO 0x01E0
 98: 0x01DD [0x0B] ExtData[1]->WorkLocal[25]++

SUBROUTINE_01E0:
 99: 0x01E0 [0x3E] IF !(ExtData[1]->WorkLocal[0] bit 7*) GOTO 0x01EA
100: 0x01E7 [0x01] GOTO 0x01ED
101: 0x01EA [0x0B] ExtData[1]->WorkLocal[25]++

SUBROUTINE_01ED:
102: 0x01ED [0x3E] IF !(ExtData[1]->WorkLocal[0] bit 8*) GOTO 0x01F7
103: 0x01F4 [0x01] GOTO 0x01FA
104: 0x01F7 [0x0B] ExtData[1]->WorkLocal[25]++

SUBROUTINE_01FA:
105: 0x01FA [0x3E] IF !(ExtData[1]->WorkLocal[0] bit 9*) GOTO 0x0204
106: 0x0201 [0x01] GOTO 0x0207
107: 0x0204 [0x0B] ExtData[1]->WorkLocal[25]++

SUBROUTINE_0207:
108: 0x0207 [0x3E] IF !(ExtData[1]->WorkLocal[0] bit 10*) GOTO 0x0211
109: 0x020E [0x01] GOTO 0x0214
110: 0x0211 [0x0B] ExtData[1]->WorkLocal[25]++

SUBROUTINE_0214:
111: 0x0214 [0x02] IF !(ExtData[1]->WorkLocal[25] == 1*) GOTO 0x0226
112: 0x021C [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=0x00, bit_index_work_offset=0x800B, condition_work_offset=0x8005)
113: 0x0223 [0x01] GOTO 0x022D
114: 0x0226 [0x3D] CLEAR_BIT_FLAG_CONDITIONAL(target_work_offset=0x00, bit_index_work_offset=0x800B, condition_work_offset=0x8005)

SUBROUTINE_022D:
115: 0x022D [0x1B] RETURN

SUBROUTINE_022E:
116: 0x022E [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "open" with entities [EventEntity, EventEntity]
117: 0x023B [0x1C] WAIT(120* ticks)
118: 0x023E [0x03] ExtData[1]->WorkLocal[26] = 1*
119: 0x0243 [0x1B] RETURN

SUBROUTINE_0244:
120: 0x0244 [0x02] IF !(ExtData[1]->WorkLocal[26] == 1*) GOTO 0x0261
121: 0x024C [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "clos" with entities [EventEntity, EventEntity]
122: 0x0259 [0x1C] WAIT(120* ticks)
123: 0x025C [0x03] ExtData[1]->WorkLocal[26] = 0*
124: 0x0261 [0x1B] RETURN
```

## Data or dead code:

```
# Data Section: 0x0262 (32 bytes)
     0x0262: 00 80 0F 00 10 00 11 00 12 00 13 00 14 00 15 00
     0x0272: 16 00 17 00 18 00 00 80 00 80 00 80 00 80 00 80
```