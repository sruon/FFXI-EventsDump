# Event 971

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 7/9       |
| Offset          | 0x04AD    |
| Data Size       | 153 bytes |
| Calculated Size | 153 bytes |
| Instructions    | 42        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
04A0:                                         03 06 00               ...
04B0: 08 10 1E F0 FF FF 7F 6F  76 F0 FF FF 7F 93 02 10  .......ov.......
04C0: 1D 30 80 23 93 00 80 24  31 80 0C 80 00 80 25 02  .0.#...$1.....%.
04D0: 00 10 00 80 00 1D 05 42  6E F8 FF FF 7F 06 80 99  .......Bn.......
04E0: F8 FF FF 7F 1D 32 80 23  99 F8 FF FF 7F 1D 33 80  .....2.#......3.
04F0: 23 66 01 80 F8 FF FF 7F  F8 FF FF 7F 74 6C 6B 30  #f..........tlk0
0500: 02 06 00 00 80 00 0F 05  1D 34 80 23 01 13 05 1D  .........4.#....
0510: 35 80 23 03 01 10 36 80  21 00 01 44 05 02 00 10  5.#...6.!..D....
0520: 0C 80 00 44 05 6E F8 FF  FF 7F 1C 80 99 F8 FF FF  ...D.n..........
0530: 7F 1D 1D 80 23 99 F8 FF  FF 7F 03 01 10 0A 80 21  ....#..........!
0540: 00 01 44 05 21 00                                 ..D.!.          
```

## Opcodes

```
  0: 0x04AD [0x03] ExtData[1]->WorkLocal[6] = Work_Zone[8]
  1: 0x04B2 [0x1E] EventEntity looks at LocalPlayer and starts talking
  2: 0x04B7 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  3: 0x04B8 [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until LocalPlayer Render.Flags0 and Render.Flags3 conditions are met
  4: 0x04BD [0x93] DISPLAY_ITEM_INFO(item_id=Work_Zone[2])
  5: 0x04C0 [0x1D] PRINT_EVENT_MESSAGE(message_id=14269*)
    → "It's prrrobably not the cat's meow, but it's good enough, right?\u007F1\u0000\u0007"
  6: 0x04C3 [0x23] WAIT_FOR_DIALOG_INTERACTION
  7: 0x04C4 [0x93] DISPLAY_ITEM_INFO(item_id=0*)
  8: 0x04C7 [0x24] CREATE_DIALOG(message_id=14270*, default_option=1*, option_flags=0*)
    → "Exchange items?\u0007\u000BYes.\u0007No.\u007F1\u0000\u0007"
  9: 0x04CE [0x25] WAIT_DIALOG_SELECT()
 10: 0x04CF [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x051D
 11: 0x04D7 [0x42] SET_CLI_EVENT_CANCEL_DATA()
 12: 0x04D8 [0x6E] EventEntity uses emote 11*
 13: 0x04DF [0x99] Wait for EventEntity animation to complete
 14: 0x04E4 [0x1D] PRINT_EVENT_MESSAGE(message_id=14271*)
    → "Thanks!\u007F1\u0000\u0007"
 15: 0x04E7 [0x23] WAIT_FOR_DIALOG_INTERACTION
 16: 0x04E8 [0x99] Wait for EventEntity animation to complete
 17: 0x04ED [0x1D] PRINT_EVENT_MESSAGE(message_id=14272*)
    → "Here's your rrreward, sugarpelt. I didn't want to keep you waiting, so I prrrepared one in advance.\u007F1\u0000\u0007"
 18: 0x04F0 [0x23] WAIT_FOR_DIALOG_INTERACTION
 19: 0x04F1 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=50*
 20: 0x0500 [0x02] IF !(ExtData[1]->WorkLocal[6] == 0*) GOTO 0x050F
 21: 0x0508 [0x1D] PRINT_EVENT_MESSAGE(message_id=14273*)
    → "Brrring some more when you have the time!\u007F1\u0000\u0007"
 22: 0x050B [0x23] WAIT_FOR_DIALOG_INTERACTION
 23: 0x050C [0x01] GOTO 0x0513

SUBROUTINE_050F:
 24: 0x050F [0x1D] PRINT_EVENT_MESSAGE(message_id=14274*)
    → "Brrring some more when you have the time!\u0007(And don't you dare breathe a word of this to Ghanrrraam!)\u007F1\u0000\u0007"
 25: 0x0512 [0x23] WAIT_FOR_DIALOG_INTERACTION
 26: 0x0513 [0x03] Work_Zone[1] = 6*
 27: 0x0518 [0x21] END_EVENT
 28: 0x0519 [0x00] END_REQSTACK()

SUBROUTINE_051D:
 29: 0x051D [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x0544
 30: 0x0525 [0x6E] EventEntity uses emote 19*
 31: 0x052C [0x99] Wait for EventEntity animation to complete
 32: 0x0531 [0x1D] PRINT_EVENT_MESSAGE(message_id=14242*)
    → "Did I rrrub you the wrong way? Oh well, come back when you set your fur straight.\u007F1\u0000\u0007"
 33: 0x0534 [0x23] WAIT_FOR_DIALOG_INTERACTION
 34: 0x0535 [0x99] Wait for EventEntity animation to complete
 35: 0x053A [0x03] Work_Zone[1] = 7*
 36: 0x053F [0x21] END_EVENT
 37: 0x0540 [0x00] END_REQSTACK()

SUBROUTINE_0544:
 38: 0x0544 [0x21] END_EVENT
 39: 0x0545 [0x00] END_REQSTACK()
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x051A [0x01] GOTO 0x0544
# Dead code (unreachable instructions):
     0x0541 [0x01] GOTO 0x0544
```