# Event 973

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 3/9       |
| Offset          | 0x027C    |
| Data Size       | 189 bytes |
| Calculated Size | 189 bytes |
| Instructions    | 39        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0270:                                      1E F0 FF FF              ....
0280: 7F 6F 76 F0 FF FF 7F 66  01 80 F8 FF FF 7F F8 FF  .ov....f........
0290: FF 7F 74 6C 6B 30 1D 1E  80 23 24 1F 80 0C 80 00  ..tlk0...#$.....
02A0: 80 25 02 00 10 00 80 00  1D 03 13 00 00 0D 80 02  .%..............
02B0: 00 00 00 80 80 BD 02 93  0E 80 01 F5 02 02 00 00  ................
02C0: 0C 80 80 CB 02 93 0F 80  01 F5 02 02 00 00 10 80  ................
02D0: 80 D9 02 93 11 80 01 F5  02 02 00 00 12 80 80 E7  ................
02E0: 02 93 13 80 01 F5 02 02  00 00 0D 80 80 F5 02 93  ................
02F0: 14 80 01 F5 02 66 01 80  F8 FF FF 7F F8 FF FF 7F  .....f..........
0300: 74 6C 6B 31 66 01 80 F8  FF FF 7F F8 FF FF 7F 70  tlk1f..........p
0310: 61 73 30 1D 20 80 23 93  00 80 01 1D 03 6E F8 FF  as0. .#......n..
0320: FF 7F 17 80 99 F8 FF FF  7F 1D 21 80 23 99 F8 FF  ..........!.#...
0330: FF 7F 03 01 10 00 80 21  00                       .......!.       
```

## Opcodes

```
  0: 0x027C [0x1E] EventEntity looks at LocalPlayer and starts talking
  1: 0x0281 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  2: 0x0282 [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until LocalPlayer Render.Flags0 and Render.Flags3 conditions are met
  3: 0x0287 [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=50*, entity1=EventEntity, entity2=EventEntity, action="tlk0")
  4: 0x0296 [0x1D] PRINT_EVENT_MESSAGE(message_id=14284*)
    → "What do you want frrrom me?\u007F1\u0000\u0007"
  5: 0x0299 [0x23] WAIT_FOR_DIALOG_INTERACTION
  6: 0x029A [0x24] CREATE_DIALOG(message_id=14285*, default_option=1*, option_flags=0*)
    → "What do you want from her?\u0007\u000BShow me what can be salvaged!\u0007Nothing whatsoever.\u007F1\u0000\u0007"
  7: 0x02A1 [0x25] WAIT_DIALOG_SELECT()
  8: 0x02A2 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x031D
  9: 0x02AA [0x13] ExtData[1]->WorkLocal[0] = rand() % 4*
 10: 0x02AF [0x02] IF !(ExtData[1]->WorkLocal[0] == 0*) GOTO 0x02BD
 11: 0x02B7 [0x93] DISPLAY_ITEM_INFO(item_id=3880*)
 12: 0x02BA [0x01] GOTO 0x02F5

SUBROUTINE_02BD:
 13: 0x02BD [0x02] IF !(ExtData[1]->WorkLocal[0] == 1*) GOTO 0x02CB
 14: 0x02C5 [0x93] DISPLAY_ITEM_INFO(item_id=3881*)
 15: 0x02C8 [0x01] GOTO 0x02F5

SUBROUTINE_02CB:
 16: 0x02CB [0x02] IF !(ExtData[1]->WorkLocal[0] == 2*) GOTO 0x02D9
 17: 0x02D3 [0x93] DISPLAY_ITEM_INFO(item_id=3882*)
 18: 0x02D6 [0x01] GOTO 0x02F5

SUBROUTINE_02D9:
 19: 0x02D9 [0x02] IF !(ExtData[1]->WorkLocal[0] == 3*) GOTO 0x02E7
 20: 0x02E1 [0x93] DISPLAY_ITEM_INFO(item_id=3883*)
 21: 0x02E4 [0x01] GOTO 0x02F5

SUBROUTINE_02E7:
 22: 0x02E7 [0x02] IF !(ExtData[1]->WorkLocal[0] == 4*) GOTO 0x02F5
 23: 0x02EF [0x93] DISPLAY_ITEM_INFO(item_id=3884*)
 24: 0x02F2 [0x01] GOTO 0x02F5

SUBROUTINE_02F5:
 25: 0x02F5 [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=50*, entity1=EventEntity, entity2=EventEntity, action="tlk1")
 26: 0x0304 [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=50*, entity1=EventEntity, entity2=EventEntity, action="pas0")
 27: 0x0313 [0x1D] PRINT_EVENT_MESSAGE(message_id=14286*)
    → "You can find these thrrroughout the four remnants.\u0007Don't forrrget about the equipment they can modify, either.\u007F1\u0000\u0007"
 28: 0x0316 [0x23] WAIT_FOR_DIALOG_INTERACTION
 29: 0x0317 [0x93] DISPLAY_ITEM_INFO(item_id=0*)
 30: 0x031A [0x01] GOTO 0x031D

SUBROUTINE_031D:
 31: 0x031D [0x6E] EventEntity uses emote 8*
 32: 0x0324 [0x99] Wait for EventEntity animation to complete
 33: 0x0329 [0x1D] PRINT_EVENT_MESSAGE(message_id=14283*)
    → "Don't keep me waiting for too long, lover\u007F\u0005[boy/girl].\u0007And I know my precious \u0008 would never betrrray me, but don't go to Ghanraam if you like your head attached to your neck!\u007F1\u0000\u0007"
 34: 0x032C [0x23] WAIT_FOR_DIALOG_INTERACTION
 35: 0x032D [0x99] Wait for EventEntity animation to complete
 36: 0x0332 [0x03] Work_Zone[1] = 0*
 37: 0x0337 [0x21] END_EVENT
 38: 0x0338 [0x00] END_REQSTACK()
```
