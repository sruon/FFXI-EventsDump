# 16982292 - Dkhaaya

## Common Data

| Field            | Value                         |
|------------------|-------------------------------|
| Zone             | Aht Urhgan Whitegate (ID: 50) |
| Block Size       | 560 bytes                     |
| Total Events     | 8                             |
| References Count | 18                            |

## List of Events

| Event ID              | Entrypoint   |   Size |   Instructions |
|-----------------------|--------------|--------|----------------|
| [65535](#event-65535) | 0x0000       |      1 |              1 |
| [4](#event-4)         | 0x0001       |      1 |              1 |
| [5](#event-5)         | 0x0002       |     50 |             12 |
| [6](#event-6)         | 0x0034       |      1 |              1 |
| [7](#event-7)         | 0x0035       |    244 |             43 |
| [8](#event-8)         | 0x0129       |    135 |             22 |
| [594](#event-594)     | 0x01B0       |      1 |              1 |
| [774](#event-774)     | 0x01B1       |      7 |              2 |

## DAT References (imed_data)

|   Index | Hex Value   |   Dec Value |
|---------|-------------|-------------|
|       0 | 0x0129      |         297 |
|       1 | 0x1336      |        4918 |
|       2 | 0x1337      |        4919 |
|       3 | 0x002D      |          45 |
|       4 | 0x0000      |           0 |
|       5 | 0x133F      |        4927 |
|       6 | 0x1340      |        4928 |
|       7 | 0x0001      |           1 |
|       8 | 0x1341      |        4929 |
|       9 | 0x1342      |        4930 |
|      10 | 0x1343      |        4931 |
|      11 | 0x1344      |        4932 |
|      12 | 0x0063      |          99 |
|      13 | 0x0002      |           2 |
|      14 | 0x1345      |        4933 |
|      15 | 0x08A9      |        2217 |
|      16 | 0x1346      |        4934 |
|      17 | 0x00C9      |         201 |

## Events

### Event 65535

#### Metadata

| Field        | Value   |
|--------------|---------|
| Entrypoint   | 0x0000  |
| Data Size    | 1 bytes |
| Instructions | 1       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000: 00                                                .               
```

#### Opcodes

```
  0: 0x0000 [0x00] END_REQSTACK()
```

### Event 4

#### Metadata

| Field        | Value   |
|--------------|---------|
| Entrypoint   | 0x0001  |
| Data Size    | 1 bytes |
| Instructions | 1       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000:    00                                              .              
```

#### Opcodes

```
  0: 0x0001 [0x00] END_REQSTACK()
```

### Event 5

#### Metadata

| Field        | Value    |
|--------------|----------|
| Entrypoint   | 0x0002   |
| Data Size    | 50 bytes |
| Instructions | 12       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000:       1E F0 FF FF 7F 6F  70 5B 00 80 14 21 03 01    .....op[...!..
0010: 14 21 03 01 74 6C 6B 30  1D 01 80 23 1D 02 80 23  .!..tlk0...#...#
0020: 5B 00 80 14 21 03 01 14  21 03 01 74 6C 6B 31 1C  [...!...!..tlk1.
0030: 03 80 21 00                                       ..!.            
```

#### Opcodes

```
  0: 0x0002 [0x1E] EventEntity looks at LocalPlayer and starts talking
  1: 0x0007 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  2: 0x0008 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
  3: 0x0009 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tlk0" with entities [Dkhaaya (ID: 16982292/0x01032114), Dkhaaya (ID: 16982292/0x01032114)], work=297*
  4: 0x0018 [0x1D] PRINT_EVENT_MESSAGE(message_id=4918*)
    → "All you have to do is bring me back a trinket uncovered from the ruins.\u007F1\u0000\u0007"
  5: 0x001B [0x23] WAIT_FOR_DIALOG_INTERACTION
  6: 0x001C [0x1D] PRINT_EVENT_MESSAGE(message_id=4919*)
    → "I'd appreciate any Olduum artifacts you can dig up, doesn't much matter where you get them from. Enjoy your exploring.\u007F1\u0000\u0007"
  7: 0x001F [0x23] WAIT_FOR_DIALOG_INTERACTION
  8: 0x0020 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tlk1" with entities [Dkhaaya (ID: 16982292/0x01032114), Dkhaaya (ID: 16982292/0x01032114)], work=297*
  9: 0x002F [0x1C] WAIT(45* ticks)
 10: 0x0032 [0x21] END_EVENT
 11: 0x0033 [0x00] END_REQSTACK()
```

### Event 6

#### Metadata

| Field        | Value   |
|--------------|---------|
| Entrypoint   | 0x0034  |
| Data Size    | 1 bytes |
| Instructions | 1       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0030:             00                                        .           
```

#### Opcodes

```
  0: 0x0034 [0x00] END_REQSTACK()
```

### Event 7

#### Metadata

| Field        | Value     |
|--------------|-----------|
| Entrypoint   | 0x0035    |
| Data Size    | 244 bytes |
| Instructions | 43        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0030:                03 00 00  09 10 1E F0 FF FF 7F 6F       ..........o
0040: 70 02 00 00 04 80 80 8E  00 7B 14 21 03 01 5B 00  p........{.!..[.
0050: 80 14 21 03 01 14 21 03  01 74 68 6B 31 1D 05 80  ..!...!..thk1...
0060: 23 5B 00 80 14 21 03 01  14 21 03 01 74 68 6B 32  #[...!...!..thk2
0070: 53 14 21 03 01 14 21 03  01 74 68 6B 32 79 00 14  S.!...!..thk2y..
0080: 21 03 01 F0 FF FF 7F 1D  06 80 23 01 27 01 02 00  !.........#.'...
0090: 00 07 80 80 E9 00 42 1D  08 80 23 7B 14 21 03 01  ......B...#{.!..
00A0: 5B 00 80 14 21 03 01 14  21 03 01 74 68 6B 31 1D  [...!...!..thk1.
00B0: 09 80 23 5B 00 80 14 21  03 01 14 21 03 01 74 68  ..#[...!...!..th
00C0: 6B 32 53 14 21 03 01 14  21 03 01 74 68 6B 32 79  k2S.!...!..thk2y
00D0: 00 14 21 03 01 F0 FF FF  7F 1D 0A 80 23 1D 0B 80  ..!.........#...
00E0: 23 03 01 10 0C 80 01 27  01 02 00 00 0D 80 80 27  #......'.......'
00F0: 01 5B 00 80 14 21 03 01  14 21 03 01 74 6C 6B 30  .[...!...!..tlk0
0100: 1D 01 80 23 1D 02 80 23  5B 00 80 14 21 03 01 14  ...#...#[...!...
0110: 21 03 01 74 6C 6B 31 53  14 21 03 01 14 21 03 01  !..tlk1S.!...!..
0120: 74 6C 6B 31 01 27 01 21  00                       tlk1.'.!.       
```

#### Opcodes

```
  0: 0x0035 [0x03] ExtData[1]->WorkLocal[0] = Work_Zone[9]
  1: 0x003A [0x1E] EventEntity looks at LocalPlayer and starts talking
  2: 0x003F [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  3: 0x0040 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
  4: 0x0041 [0x02] IF !(ExtData[1]->WorkLocal[0] == 0*) GOTO 0x008E
  5: 0x0049 [0x7B] Dkhaaya (ID: 16982292/0x01032114) stops talking
  6: 0x004E [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "thk1" with entities [Dkhaaya (ID: 16982292/0x01032114), Dkhaaya (ID: 16982292/0x01032114)], work=297*
  7: 0x005D [0x1D] PRINT_EVENT_MESSAGE(message_id=4927*)
    → "Legend has it that the Olduum were able to move wagons using the power of lightning. I wouldn't be surprised if that ring had some secret use that we're not aware of.\u007F1\u0000\u0007"
  8: 0x0060 [0x23] WAIT_FOR_DIALOG_INTERACTION
  9: 0x0061 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "thk2" with entities [Dkhaaya (ID: 16982292/0x01032114), Dkhaaya (ID: 16982292/0x01032114)], work=297*
 10: 0x0070 [0x53] WAIT_SCHEDULER_TASK: Wait for scheduler "thk2" with entities [Dkhaaya (ID: 16982292/0x01032114), Dkhaaya (ID: 16982292/0x01032114)]
 11: 0x007D [0x79] Dkhaaya (ID: 16982292/0x01032114) looks at LocalPlayer (Basic look)
 12: 0x0087 [0x1D] PRINT_EVENT_MESSAGE(message_id=4928*)
    → "A curious young monkey like you just might be able to figure it out.\u007F1\u0000\u0007"
 13: 0x008A [0x23] WAIT_FOR_DIALOG_INTERACTION
 14: 0x008B [0x01] GOTO 0x0127
 15: 0x008E [0x02] IF !(ExtData[1]->WorkLocal[0] == 1*) GOTO 0x00E9
 16: 0x0096 [0x42] SET_CLI_EVENT_CANCEL_DATA()
 17: 0x0097 [0x1D] PRINT_EVENT_MESSAGE(message_id=4929*)
    → "Oh, the mercenary.\u0007Sorry, \u00072adventurer.\u00073\u0007Hm? You want another one of those rings?\u007F1\u0000\u0007"
 18: 0x009A [0x23] WAIT_FOR_DIALOG_INTERACTION
 19: 0x009B [0x7B] Dkhaaya (ID: 16982292/0x01032114) stops talking
 20: 0x00A0 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "thk1" with entities [Dkhaaya (ID: 16982292/0x01032114), Dkhaaya (ID: 16982292/0x01032114)], work=297*
 21: 0x00AF [0x1D] PRINT_EVENT_MESSAGE(message_id=4930*)
    → "I might not need them personally, but I can't just go handing out historical relics willy-nilly.\u007F1\u0000\u0007"
 22: 0x00B2 [0x23] WAIT_FOR_DIALOG_INTERACTION
 23: 0x00B3 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "thk2" with entities [Dkhaaya (ID: 16982292/0x01032114), Dkhaaya (ID: 16982292/0x01032114)], work=297*
 24: 0x00C2 [0x53] WAIT_SCHEDULER_TASK: Wait for scheduler "thk2" with entities [Dkhaaya (ID: 16982292/0x01032114), Dkhaaya (ID: 16982292/0x01032114)]
 25: 0x00CF [0x79] Dkhaaya (ID: 16982292/0x01032114) looks at LocalPlayer (Basic look)
 26: 0x00D9 [0x1D] PRINT_EVENT_MESSAGE(message_id=4931*)
    → "I have a feeling you know what I'm going to ask.\u0007Yep, it's back to the ruins for you, my friend.\u007F1\u0000\u0007"
 27: 0x00DC [0x23] WAIT_FOR_DIALOG_INTERACTION
 28: 0x00DD [0x1D] PRINT_EVENT_MESSAGE(message_id=4932*)
    → "I'll take anything you can find.\u0007It's a fair trade, don't you think?\u0007Heh heh.\u007F1\u0000\u0007"
 29: 0x00E0 [0x23] WAIT_FOR_DIALOG_INTERACTION
 30: 0x00E1 [0x03] Work_Zone[1] = 99*
 31: 0x00E6 [0x01] GOTO 0x0127
 32: 0x00E9 [0x02] IF !(ExtData[1]->WorkLocal[0] == 2*) GOTO 0x0127
 33: 0x00F1 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tlk0" with entities [Dkhaaya (ID: 16982292/0x01032114), Dkhaaya (ID: 16982292/0x01032114)], work=297*
 34: 0x0100 [0x1D] PRINT_EVENT_MESSAGE(message_id=4918*)
    → "All you have to do is bring me back a trinket uncovered from the ruins.\u007F1\u0000\u0007"
 35: 0x0103 [0x23] WAIT_FOR_DIALOG_INTERACTION
 36: 0x0104 [0x1D] PRINT_EVENT_MESSAGE(message_id=4919*)
    → "I'd appreciate any Olduum artifacts you can dig up, doesn't much matter where you get them from. Enjoy your exploring.\u007F1\u0000\u0007"
 37: 0x0107 [0x23] WAIT_FOR_DIALOG_INTERACTION
 38: 0x0108 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tlk1" with entities [Dkhaaya (ID: 16982292/0x01032114), Dkhaaya (ID: 16982292/0x01032114)], work=297*
 39: 0x0117 [0x53] WAIT_SCHEDULER_TASK: Wait for scheduler "tlk1" with entities [Dkhaaya (ID: 16982292/0x01032114), Dkhaaya (ID: 16982292/0x01032114)]
 40: 0x0124 [0x01] GOTO 0x0127

SUBROUTINE_0127:
 41: 0x0127 [0x21] END_EVENT
 42: 0x0128 [0x00] END_REQSTACK()
```

### Event 8

#### Metadata

| Field        | Value     |
|--------------|-----------|
| Entrypoint   | 0x0129    |
| Data Size    | 135 bytes |
| Instructions | 22        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0120:                             42 1E F0 FF FF 7F 6F           B.....o
0130: 70 7B 14 21 03 01 5B 00  80 14 21 03 01 14 21 03  p{.!..[...!...!.
0140: 01 74 68 6B 31 03 01 10  07 80 43 00 43 01 1D 0E  .thk1.....C.C...
0150: 80 23 5B 00 80 14 21 03  01 14 21 03 01 74 68 6B  .#[...!...!..thk
0160: 32 79 00 14 21 03 01 F0  FF FF 7F 53 14 21 03 01  2y..!......S.!..
0170: 14 21 03 01 74 68 6B 31  03 02 10 0F 80 1D 10 80  .!..thk1........
0180: 23 5B 00 80 14 21 03 01  14 21 03 01 70 61 73 30  #[...!...!..pas0
0190: 45 11 80 F8 FF FF 7F F8  FF FF 7F 71 73 74 63 04  E..........qstc.
01A0: 80 53 14 21 03 01 14 21  03 01 70 61 73 30 21 00  .S.!...!..pas0!.
```

#### Opcodes

```
  0: 0x0129 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x012A [0x1E] EventEntity looks at LocalPlayer and starts talking
  2: 0x012F [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  3: 0x0130 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
  4: 0x0131 [0x7B] Dkhaaya (ID: 16982292/0x01032114) stops talking
  5: 0x0136 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "thk1" with entities [Dkhaaya (ID: 16982292/0x01032114), Dkhaaya (ID: 16982292/0x01032114)], work=297*
  6: 0x0145 [0x03] Work_Zone[1] = 1*
  7: 0x014A [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
  8: 0x014C [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
  9: 0x014E [0x1D] PRINT_EVENT_MESSAGE(message_id=4933*)
    → "What's this? \u007F\u0000\u0001\u0001\u00056\u0002\u0000\u0000\u0000?\u0007Looks like we're still scratching the surface here.\u007F1\u0000\u0007"
 10: 0x0151 [0x23] WAIT_FOR_DIALOG_INTERACTION
 11: 0x0152 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "thk2" with entities [Dkhaaya (ID: 16982292/0x01032114), Dkhaaya (ID: 16982292/0x01032114)], work=297*
 12: 0x0161 [0x79] Dkhaaya (ID: 16982292/0x01032114) looks at LocalPlayer (Basic look)
 13: 0x016B [0x53] WAIT_SCHEDULER_TASK: Wait for scheduler "thk1" with entities [Dkhaaya (ID: 16982292/0x01032114), Dkhaaya (ID: 16982292/0x01032114)]
 14: 0x0178 [0x03] Work_Zone[2] = 2217*
 15: 0x017D [0x1D] PRINT_EVENT_MESSAGE(message_id=4934*)
    → "Well, good enough, I suppose.\u0007Here's your new \u0001\u0005#\u0002\u0000\u0000\u0000.\u0007Try not to lose this one.\u007F1\u0000\u0007"
 16: 0x0180 [0x23] WAIT_FOR_DIALOG_INTERACTION
 17: 0x0181 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "pas0" with entities [Dkhaaya (ID: 16982292/0x01032114), Dkhaaya (ID: 16982292/0x01032114)], work=297*
 18: 0x0190 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "qstc" with entities [EventEntity, EventEntity], work=[201*, 0*]
 19: 0x01A1 [0x53] WAIT_SCHEDULER_TASK: Wait for scheduler "pas0" with entities [Dkhaaya (ID: 16982292/0x01032114), Dkhaaya (ID: 16982292/0x01032114)]
 20: 0x01AE [0x21] END_EVENT
 21: 0x01AF [0x00] END_REQSTACK()
```

### Event 594

#### Metadata

| Field        | Value   |
|--------------|---------|
| Entrypoint   | 0x01B0  |
| Data Size    | 1 bytes |
| Instructions | 1       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
01B0: 00                                                .               
```

#### Opcodes

```
  0: 0x01B0 [0x00] END_REQSTACK()
```

### Event 774

#### Metadata

| Field        | Value   |
|--------------|---------|
| Entrypoint   | 0x01B1  |
| Data Size    | 7 bytes |
| Instructions | 2       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
01B0:    92 01 F8 FF FF 7F 00                            .......        
```

#### Opcodes

```
  0: 0x01B1 [0x92] EventEntity->Render.Flags3 ^= 0x01
  1: 0x01B7 [0x00] END_REQSTACK()
```
