# Event 859

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 7/13      |
| Offset          | 0x3706    |
| Data Size       | 781 bytes |
| Calculated Size | 781 bytes |
| Instructions    | 109       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
3700:                   42 03  01 10 05 80 03 02 00 05        B.........
3710: 80 45 04 80 F8 FF FF 7F  F8 FF FF 7F 66 64 6F 31  .E..........fdo1
3720: 05 80 55 04 80 F8 FF FF  7F F8 FF FF 7F 66 64 6F  ..U..........fdo
3730: 31 46 01 38 80 81 4E 01  F0 FF FF 7F 80 6C 20 03  1F.8..N......l .
3740: 01 BA 6E 20 03 01 94 81  95 81 05 80 96 81 80 6E  ..n ...........n
3750: 20 03 01 BA 70 20 03 01  97 81 98 81 05 80 99 81   ...p ..........
3760: 80 70 20 03 01 BA 71 20  03 01 9A 81 9B 81 05 80  .p ...q ........
3770: 9C 81 80 71 20 03 01 4A  6E 20 03 01 6C 20 03 01  ...q ..Jn ..l ..
3780: 4A 70 20 03 01 6C 20 03  01 4A 71 20 03 01 6C 20  Jp ..l ..Jq ..l 
3790: 03 01 4E 00 55 21 03 01  BA 55 21 03 01 9D 81 9E  ..N.U!...U!.....
37A0: 81 05 80 9F 81 80 55 21  03 01 03 27 10 05 80 45  ......U!...'...E
37B0: 18 80 F8 FF FF 7F F8 FF  FF 7F 73 32 31 37 05 80  ..........s217..
37C0: 1C 10 80 45 04 80 F8 FF  FF 7F F8 FF FF 7F 66 64  ...E..........fd
37D0: 69 31 05 80 1C 14 80 66  05 80 6C 20 03 01 6C 20  i1.....f..l ..l 
37E0: 03 01 74 6C 6B 30 2B 6C  20 03 01 A0 81 23 66 05  ..tlk0+l ....#f.
37F0: 80 6C 20 03 01 6C 20 03  01 74 65 6E 30 27 05 55  .l ..l ..ten0'.U
3800: 21 03 01 03 03 00 00 05  80 02 02 10 05 80 00 3E  !..............>
3810: 38 13 00 00 30 80 02 00  00 30 80 00 3E 38 3C 01  8...0....0..>8<.
3820: 10 30 80 30 80 43 00 43  01 27 05 2C 21 03 01 24  .0.0.C.C.'.,!..$
3830: 27 05 7B 20 03 01 07 27  05 54 21 03 01 03 03 25  '.{ ...'.T!....%
3840: 10 EA 80 03 01 00 05 80  03 26 10 05 80 24 A1 81  .........&...$..
3850: 05 80 05 80 25 02 00 10  05 80 00 61 39 02 26 10  ....%......a9.&.
3860: 05 80 00 5E 39 03 01 00  30 80 48 A2 81 03 02 00  ...^9...0.H.....
3870: 25 10 1C 8A 81 48 A3 81  45 04 80 F8 FF FF 7F F8  %....H..E.......
3880: FF FF 7F 66 64 6F 31 05  80 55 04 80 F8 FF FF 7F  ...fdo1..U......
3890: F8 FF FF 7F 66 64 6F 31  52 18 80 F8 FF FF 7F F8  ....fdo1R.......
38A0: FF FF 7F 73 32 31 37 02  01 00 30 80 00 10 39 02  ...s217...0...9.
38B0: 00 00 30 80 00 09 39 3C  01 10 30 80 30 80 02 02  ..0...9<..0.0...
38C0: 00 30 80 80 D0 38 3C 01  10 B0 80 30 80 01 06 39  .0...8<....0...9
38D0: 02 02 00 B0 80 80 E2 38  3C 01 10 E7 80 30 80 01  .......8<....0..
38E0: 06 39 02 02 00 E7 80 80  F4 38 3C 01 10 EA 80 30  .9.......8<....0
38F0: 80 01 06 39 02 02 00 EA  80 80 06 39 3C 01 10 39  ...9.......9<..9
3900: 80 30 80 01 06 39 01 10  39 3C 01 10 39 80 30 80  .0...9..9<..9.0.
3910: 02 27 10 30 80 80 22 39  3C 01 10 31 81 30 80 01  .'.0.."9<..1.0..
3920: 46 39 02 27 10 B0 80 80  34 39 3C 01 10 EC 80 30  F9.'....49<....0
3930: 80 01 46 39 02 27 10 E7  80 80 46 39 3C 01 10 EE  ..F9.'....F9<...
3940: 80 30 80 01 46 39 46 00  1C 14 80 45 04 80 F8 FF  .0..F9F....E....
3950: FF 7F F8 FF FF 7F 66 64  69 31 05 80 21 00 01 B3  ......fdi1..!...
3960: 39 02 00 10 30 80 00 B3  39 45 04 80 F8 FF FF 7F  9...0...9E......
3970: F8 FF FF 7F 66 64 6F 31  05 80 55 04 80 F8 FF FF  ....fdo1..U.....
3980: 7F F8 FF FF 7F 66 64 6F  31 52 18 80 F8 FF FF 7F  .....fdo1R......
3990: F8 FF FF 7F 73 32 31 37  46 00 1C 14 80 45 04 80  ....s217F....E..
39A0: F8 FF FF 7F F8 FF FF 7F  66 64 69 31 05 80 21 00  ........fdi1..!.
39B0: 01 B3 39 02 01 00 30 80  00 BE 39 01 CC 39 02 00  ..9...0...9..9..
39C0: 00 30 80 00 CC 39 2A 05  54 21 03 01 45 04 80 F8  .0...9*.T!..E...
39D0: FF FF 7F F8 FF FF 7F 66  64 6F 31 05 80 55 04 80  .......fdo1..U..
39E0: F8 FF FF 7F F8 FF FF 7F  66 64 6F 31 52 18 80 F8  ........fdo1R...
39F0: FF FF 7F F8 FF FF 7F 73  32 31 37 46 00 1C 14 80  .......s217F....
3A00: 45 04 80 F8 FF FF 7F F8  FF FF 7F 66 64 69 31 05  E..........fdi1.
3A10: 80 21 00                                          .!.             
```

## Opcodes

```
  0: 0x3706 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x3707 [0x03] Work_Zone[1] = 0*
  2: 0x370C [0x03] ExtData[1]->WorkLocal[2] = 0*
  3: 0x3711 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [EventEntity, EventEntity], work=[200*, 0*]
  4: 0x3722 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo1" with entities [EventEntity, EventEntity], work=200*
  5: 0x3731 [0x46] CAMERA_CONTROL: Disable user control
  6: 0x3733 [0x38] SET_CLIENT_EVENT_MODE(mode=27*)
  7: 0x3736 [0x4E] SET_ENTITY_HIDE_FLAG: Hide LocalPlayer
  8: 0x373C [0x80] LOAD_WAIT(entity=Zyfhil (ID: 16982124/0x0103206C))
  9: 0x3741 [0xBA] SET_ENTITY_POSITION(entity_id=Tafeesa (ID: 16982126/0x0103206E), pos_x=-103.692*, pos_z=13.995*, pos_y=0.000*, direction=65.5°*)
 10: 0x374E [0x80] LOAD_WAIT(entity=Tafeesa (ID: 16982126/0x0103206E))
 11: 0x3753 [0xBA] SET_ENTITY_POSITION(entity_id=Hamnahb (ID: 16982128/0x01032070), pos_x=-107.579*, pos_z=16.072*, pos_y=0.000*, direction=50.8°*)
 12: 0x3760 [0x80] LOAD_WAIT(entity=Hamnahb (ID: 16982128/0x01032070))
 13: 0x3765 [0xBA] SET_ENTITY_POSITION(entity_id=Bujahwa (ID: 16982129/0x01032071), pos_x=-106.768*, pos_z=15.241*, pos_y=0.000*, direction=242.2°*)
 14: 0x3772 [0x80] LOAD_WAIT(entity=Bujahwa (ID: 16982129/0x01032071))
 15: 0x3777 [0x4A] Tafeesa (ID: 16982126/0x0103206E) looks at Zyfhil (ID: 16982124/0x0103206C)
 16: 0x3780 [0x4A] Hamnahb (ID: 16982128/0x01032070) looks at Zyfhil (ID: 16982124/0x0103206C)
 17: 0x3789 [0x4A] Bujahwa (ID: 16982129/0x01032071) looks at Zyfhil (ID: 16982124/0x0103206C)
 18: 0x3792 [0x4E] SET_ENTITY_HIDE_FLAG: Show Bajhaam (ID: 16982357/0x01032155)
 19: 0x3798 [0xBA] SET_ENTITY_POSITION(entity_id=Bajhaam (ID: 16982357/0x01032155), pos_x=-107.347*, pos_z=10.650*, pos_y=0.000*, direction=174.8°*)
 20: 0x37A5 [0x80] LOAD_WAIT(entity=Bajhaam (ID: 16982357/0x01032155))
 21: 0x37AA [0x03] Work_Zone[39] = 0*
 22: 0x37AF [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s217" with entities [EventEntity, EventEntity], work=[191*, 0*]
 23: 0x37C0 [0x1C] WAIT(15* ticks)
 24: 0x37C3 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [EventEntity, EventEntity], work=[200*, 0*]
 25: 0x37D4 [0x1C] WAIT(60* ticks)
 26: 0x37D7 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [Zyfhil (ID: 16982124/0x0103206C), Zyfhil (ID: 16982124/0x0103206C)], work=0*
 27: 0x37E6 [0x2B] Zyfhil (ID: 16982124/0x0103206C) [6319*]:
    → "Come one, come all!\u0007There's room for everyone--no pushing, now!\u007F1\u0000\u0007"
 28: 0x37ED [0x23] WAIT_FOR_DIALOG_INTERACTION
 29: 0x37EE [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "ten0" with entities [Zyfhil (ID: 16982124/0x0103206C), Zyfhil (ID: 16982124/0x0103206C)], work=0*
 30: 0x37FD [0x27] REQ_SET(priority=0x05, entity_id=Bajhaam (ID: 16982357/0x01032155), tag_num=0x03)
 31: 0x3804 [0x03] ExtData[1]->WorkLocal[0] = 0*
 32: 0x3809 [0x02] IF !(Work_Zone[2] == 0*) GOTO 0x383E
 33: 0x3811 [0x13] ExtData[1]->WorkLocal[0] = rand() % 1*
 34: 0x3816 [0x02] IF !(ExtData[1]->WorkLocal[0] == 1*) GOTO 0x383E
 35: 0x381E [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=0x1001, bit_index_work_offset=0x8030, condition_work_offset=0x8030)
 36: 0x3825 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
 37: 0x3827 [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
 38: 0x3829 [0x27] REQ_SET(priority=0x05, entity_id=Zabahf (ID: 16982316/0x0103212C), tag_num=0x24)
 39: 0x3830 [0x27] REQ_SET(priority=0x05, entity_id=Rujen-Gorgen (ID: 16982139/0x0103207B), tag_num=0x07)
 40: 0x3837 [0x27] REQ_SET(priority=0x05, entity_id=Unnamed NPC (ID: 16982356/0x01032154), tag_num=0x03)
 41: 0x383E [0x03] Work_Zone[37] = 4*
 42: 0x3843 [0x03] ExtData[1]->WorkLocal[1] = 0*
 43: 0x3848 [0x03] Work_Zone[38] = 0*
 44: 0x384D [0x24] CREATE_DIALOG(message_id=7278*, default_option=0*, option_flags=0*)
    → "Begin recording?\u0007\u000BYes.\u0007No.\u007F1\u0000\u0007"
 45: 0x3854 [0x25] WAIT_DIALOG_SELECT()
 46: 0x3855 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x3961
 47: 0x385D [0x02] IF !(Work_Zone[38] == 0*) GOTO 0x395E
 48: 0x3865 [0x03] ExtData[1]->WorkLocal[1] = 1*
 49: 0x386A [0x48] [System] [7279*]:
    → "\u001F\u000FNow recording...\u0000\u0007"
 50: 0x386D [0x03] ExtData[1]->WorkLocal[2] = Work_Zone[37]
 51: 0x3872 [0x1C] WAIT(300* ticks)
 52: 0x3875 [0x48] [System] [7280*]:
    → "\u001F\u000FThe photopticator goes silent.\u0000\u0007"
 53: 0x3878 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [EventEntity, EventEntity], work=[200*, 0*]
 54: 0x3889 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo1" with entities [EventEntity, EventEntity], work=200*
 55: 0x3898 [0x52] END_LOAD_SCHEDULER: End scheduler "s217" with entities [EventEntity, EventEntity], work=191*
 56: 0x38A7 [0x02] IF !(ExtData[1]->WorkLocal[1] == 1*) GOTO 0x3910
 57: 0x38AF [0x02] IF !(ExtData[1]->WorkLocal[0] == 1*) GOTO 0x3909
 58: 0x38B7 [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=0x1001, bit_index_work_offset=0x8030, condition_work_offset=0x8030)
 59: 0x38BE [0x02] IF !(ExtData[1]->WorkLocal[2] == 1*) GOTO 0x38D0
 60: 0x38C6 [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=0x1001, bit_index_work_offset=0x80B0, condition_work_offset=0x8030)
 61: 0x38CD [0x01] GOTO 0x3906
 62: 0x38D0 [0x02] IF !(ExtData[1]->WorkLocal[2] == 2*) GOTO 0x38E2
 63: 0x38D8 [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=0x1001, bit_index_work_offset=0x80E7, condition_work_offset=0x8030)
 64: 0x38DF [0x01] GOTO 0x3906
 65: 0x38E2 [0x02] IF !(ExtData[1]->WorkLocal[2] == 3*) GOTO 0x38F4
 66: 0x38EA [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=0x1001, bit_index_work_offset=0x80EA, condition_work_offset=0x8030)
 67: 0x38F1 [0x01] GOTO 0x3906
 68: 0x38F4 [0x02] IF !(ExtData[1]->WorkLocal[2] == 4*) GOTO 0x3906
 69: 0x38FC [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=0x1001, bit_index_work_offset=0x8039, condition_work_offset=0x8030)
 70: 0x3903 [0x01] GOTO 0x3906

SUBROUTINE_3906:
 71: 0x3906 [0x01] GOTO 0x3910
 72: 0x3909 [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=0x1001, bit_index_work_offset=0x8039, condition_work_offset=0x8030)

SUBROUTINE_3910:
 73: 0x3910 [0x02] IF !(Work_Zone[39] == 1*) GOTO 0x3922
 74: 0x3918 [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=0x1001, bit_index_work_offset=0x8131, condition_work_offset=0x8030)
 75: 0x391F [0x01] GOTO 0x3946
 76: 0x3922 [0x02] IF !(Work_Zone[39] == 2*) GOTO 0x3934
 77: 0x392A [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=0x1001, bit_index_work_offset=0x80EC, condition_work_offset=0x8030)
 78: 0x3931 [0x01] GOTO 0x3946
 79: 0x3934 [0x02] IF !(Work_Zone[39] == 3*) GOTO 0x3946
 80: 0x393C [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=0x1001, bit_index_work_offset=0x80EE, condition_work_offset=0x8030)
 81: 0x3943 [0x01] GOTO 0x3946

SUBROUTINE_3946:
 82: 0x3946 [0x46] CAMERA_CONTROL: Restore default settings
 83: 0x3948 [0x1C] WAIT(60* ticks)
 84: 0x394B [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [EventEntity, EventEntity], work=[200*, 0*]
 85: 0x395C [0x21] END_EVENT
 86: 0x395D [0x00] END_REQSTACK()
 87: 0x395E [0x01] GOTO 0x39B3
 88: 0x3961 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x39B3
 89: 0x3969 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [EventEntity, EventEntity], work=[200*, 0*]
 90: 0x397A [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo1" with entities [EventEntity, EventEntity], work=200*
 91: 0x3989 [0x52] END_LOAD_SCHEDULER: End scheduler "s217" with entities [EventEntity, EventEntity], work=191*
 92: 0x3998 [0x46] CAMERA_CONTROL: Restore default settings
 93: 0x399A [0x1C] WAIT(60* ticks)
 94: 0x399D [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [EventEntity, EventEntity], work=[200*, 0*]
 95: 0x39AE [0x21] END_EVENT
 96: 0x39AF [0x00] END_REQSTACK()

SUBROUTINE_39B3:
 97: 0x39B3 [0x02] IF !(ExtData[1]->WorkLocal[1] == 1*) GOTO 0x39BE
 98: 0x39BB [0x01] GOTO 0x39CC
 99: 0x39BE [0x02] IF !(ExtData[1]->WorkLocal[0] == 1*) GOTO 0x39CC
100: 0x39C6 [0x2A] GET_REQ_LEVEL(level=5, entity_id=Unnamed NPC (ID: 16982356/0x01032154))

SUBROUTINE_39CC:
101: 0x39CC [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [EventEntity, EventEntity], work=[200*, 0*]
102: 0x39DD [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo1" with entities [EventEntity, EventEntity], work=200*
103: 0x39EC [0x52] END_LOAD_SCHEDULER: End scheduler "s217" with entities [EventEntity, EventEntity], work=191*
104: 0x39FB [0x46] CAMERA_CONTROL: Restore default settings
105: 0x39FD [0x1C] WAIT(60* ticks)
106: 0x3A00 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [EventEntity, EventEntity], work=[200*, 0*]
107: 0x3A11 [0x21] END_EVENT
108: 0x3A12 [0x00] END_REQSTACK()
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x39B0 [0x01] GOTO 0x39B3
```