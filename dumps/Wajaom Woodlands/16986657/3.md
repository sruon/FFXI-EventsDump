# Event 3

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 3/3       |
| Offset          | 0x0172    |
| Data Size       | 963 bytes |
| Calculated Size | 963 bytes |
| Instructions    | 56        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0170:       42 02 09 10 00 80  00 7E 01 38 01 80 4A F0    B......~.8..J.
0180: FF FF 7F 22 32 03 01 03  02 10 02 80 24 12 80 06  ..."2.......$...
0190: 80 06 80 25 02 00 10 00  80 00 A6 01 48 07 80 23  ...%........H..#
01A0: 01 87 01 01 A6 01 1A 07  03 46 01 38 01 80 94 01  .........F.8....
01B0: F0 FF FF 7F 94 01 23 32  03 01 94 01 24 32 03 01  ......#2....$2..
01C0: 29 10 23 32 03 01 03 29  10 24 32 03 01 03 29 10  ).#2...).$2...).
01D0: F0 FF FF 7F 0E 80 23 32  03 01 80 24 32 03 01 80  ......#2...$2...
01E0: F0 FF FF 7F 4A F0 FF FF  7F 22 32 03 01 6F 76 F0  ....J...."2..ov.
01F0: FF FF 7F 29 10 F0 FF FF  7F 13 1C 08 80 45 09 80  ...).........E..
0200: F0 FF FF 7F F0 FF FF 7F  6F 64 31 30 06 80 1A E6  ........od10....
0210: 02 1C 0C 80 73 13 80 23  32 03 01 24 32 03 01 1C  ....s..#2..$2...
0220: 0F 80 52 09 80 F0 FF FF  7F F0 FF FF 7F 6F 64 31  ..R..........od1
0230: 30 45 09 80 F0 FF FF 7F  F0 FF FF 7F 6F 64 31 32  0E..........od12
0240: 06 80 55 09 80 F0 FF FF  7F F0 FF FF 7F 6F 64 31  ..U..........od1
0250: 32 45 09 80 F0 FF FF 7F  F0 FF FF 7F 6F 64 31 31  2E..........od11
0260: 06 80 1C 08 80 27 10 F0  FF FF 7F 14 1C 14 80 1A  .....'..........
0270: 07 03 1C 0F 80 03 02 10  02 80 48 0E 80 1C 0F 80  ..........H.....
0280: 52 09 80 F0 FF FF 7F F0  FF FF 7F 6F 64 31 31 46  R..........od11F
0290: 00 45 11 80 F0 FF FF 7F  F0 FF FF 7F 66 64 69 32  .E..........fdi2
02A0: 06 80 21 00 45 11 80 F0  FF FF 7F F0 FF FF 7F 66  ..!.E..........f
02B0: 64 69 30 06 80 55 11 80  F0 FF FF 7F F0 FF FF 7F  di0..U..........
02C0: 66 64 69 30 1B 45 11 80  F0 FF FF 7F F0 FF FF 7F  fdi0.E..........
02D0: 66 64 6F 30 06 80 55 11  80 F0 FF FF 7F F0 FF FF  fdo0..U.........
02E0: 7F 66 64 6F 30 1B 45 11  80 F0 FF FF 7F F0 FF FF  .fdo0.E.........
02F0: 7F 66 64 69 31 06 80 55  11 80 F0 FF FF 7F F0 FF  .fdi1..U........
0300: FF 7F 66 64 69 31 1B 45  11 80 F0 FF FF 7F F0 FF  ..fdi1.E........
0310: FF 7F 66 64 6F 31 06 80  55 11 80 F0 FF FF 7F F0  ..fdo1..U.......
0320: FF FF 7F 66 64 6F 31 1B  45 15 80 F0 FF FF 7F F0  ...fdo1.E.......
0330: FF FF 7F 77 68 69 31 06  80 55 15 80 F0 FF FF 7F  ...whi1..U......
0340: F0 FF FF 7F 77 68 69 31  1B 45 15 80 F0 FF FF 7F  ....whi1.E......
0350: F0 FF FF 7F 77 68 6F 31  06 80 55 15 80 F0 FF FF  ....who1..U.....
0360: 7F F0 FF FF 7F 77 68 6F  31 1B 45 15 80 F0 FF FF  .....who1.E.....
0370: 7F F0 FF FF 7F 77 68 6F  32 06 80 55 15 80 F0 FF  .....who2..U....
0380: FF 7F F0 FF FF 7F 77 68  6F 32 1B 45 15 80 F0 FF  ......who2.E....
0390: FF 7F F0 FF FF 7F 77 68  6F 33 06 80 55 15 80 F0  ......who3..U...
03A0: FF FF 7F F0 FF FF 7F 77  68 6F 33 1B 62 00 80 F0  .......who3.b...
03B0: FF FF 7F F0 FF FF 7F 6D  61 69 6E 06 80 1C 16 80  .......main.....
03C0: 45 11 80 F0 FF FF 7F F0  FF FF 7F 66 64 6F 31 06  E..........fdo1.
03D0: 80 55 11 80 F0 FF FF 7F  F0 FF FF 7F 66 64 6F 31  .U..........fdo1
03E0: 1B 45 11 80 F0 FF FF 7F  F0 FF FF 7F 66 64 69 31  .E..........fdi1
03F0: 06 80 62 17 80 F0 FF FF  7F F0 FF FF 7F 6D 61 69  ..b..........mai
0400: 6E 06 80 1C 08 80 55 11  80 F0 FF FF 7F F0 FF FF  n.....U.........
0410: 7F 66 64 69 31 1B 45 11  80 F0 FF FF 7F F0 FF FF  .fdi1.E.........
0420: 7F 62 6C 6F 6E 06 80 45  15 80 F0 FF FF 7F F0 FF  .blon..E........
0430: FF 7F 62 6C 6F 6E 06 80  1B 45 15 80 F0 FF FF 7F  ..blon...E......
0440: F0 FF FF 7F 77 68 69 30  06 80 55 15 80 F0 FF FF  ....whi0..U.....
0450: 7F F0 FF FF 7F 77 68 69  30 1B 45 15 80 F0 FF FF  .....whi0.E.....
0460: 7F F0 FF FF 7F 77 68 6F  30 06 80 55 15 80 F0 FF  .....who0..U....
0470: FF 7F F0 FF FF 7F 77 68  6F 30 1B 45 18 80 F0 FF  ......who0.E....
0480: FF 7F F0 FF FF 7F 65 66  6F 6E 06 80 55 18 80 F0  ......efon..U...
0490: FF FF 7F F0 FF FF 7F 65  66 6F 6E 1B 45 11 80 F0  .......efon.E...
04A0: FF FF 7F F0 FF FF 7F 66  64 69 73 06 80 1B 45 11  .......fdis...E.
04B0: 80 F0 FF FF 7F F0 FF FF  7F 66 64 6F 73 06 80 55  .........fdos..U
04C0: 11 80 F0 FF FF 7F F0 FF  FF 7F 66 64 6F 73 1B 45  ..........fdos.E
04D0: 11 80 F0 FF FF 7F F0 FF  FF 7F 66 64 69 66 06 80  ..........fdif..
04E0: 1B 45 11 80 F0 FF FF 7F  F0 FF FF 7F 66 64 6F 66  .E..........fdof
04F0: 06 80 55 11 80 F0 FF FF  7F F0 FF FF 7F 66 64 6F  ..U..........fdo
0500: 66 1B 45 11 80 F0 FF FF  7F F0 FF FF 7F 66 64 69  f.E..........fdi
0510: 70 06 80 1B 45 11 80 F0  FF FF 7F F0 FF FF 7F 66  p...E..........f
0520: 64 6F 70 06 80 55 11 80  F0 FF FF 7F F0 FF FF 7F  dop..U..........
0530: 66 64 6F 70 1B                                    fdop.           
```

## Opcodes

```
  0: 0x0172 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x0173 [0x02] IF !(Work_Zone[9] == 1*) GOTO 0x017E
  2: 0x017B [0x38] SET_CLIENT_EVENT_MODE(mode=19*)
  3: 0x017E [0x4A] LocalPlayer looks at Leypoint (ID: 16986658/0x01033222)
  4: 0x0187 [0x03] Work_Zone[2] = 2217*
  5: 0x018C [0x24] CREATE_DIALOG(message_id=7418*, default_option=0*, option_flags=0*)
    → "Place the \u0001\u0005#\u0002\u0000\u0000\u0000 on the platform?\u0007\u000BHere goes...\u0007Ah, maybe not...\u007F1\u0000\u0007"
  6: 0x0193 [0x25] WAIT_DIALOG_SELECT()
  7: 0x0194 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x01A6
  8: 0x019C [0x48] [System] [7420*]:
    → "Your \u0001\u0005#\u0002\u0000\u0000\u0000 is responding strongly to the platform...\u007F6\u0002\u0007You sense some strange connection...\u007F1\u0000\u0007"
  9: 0x019F [0x23] WAIT_FOR_DIALOG_INTERACTION
 10: 0x01A0 [0x01] GOTO 0x0187

SUBROUTINE_01A6:
 11: 0x01A6 [0x1A] CALL_SUBROUTINE(address=0x0307)
 12: 0x01A9 [0x46] CAMERA_CONTROL: Disable user control
 13: 0x01AB [0x38] SET_CLIENT_EVENT_MODE(mode=19*)
 14: 0x01AE [0x94] LocalPlayer->Render.Flags3 ^= 0x01
 15: 0x01B4 [0x94] Unnamed NPC (ID: 16986659/0x01033223)->Render.Flags3 ^= 0x01
 16: 0x01BA [0x94] Unnamed NPC (ID: 16986660/0x01033224)->Render.Flags3 ^= 0x01
 17: 0x01C0 [0x29] REQ_SET_WAIT(priority=0x10, entity_id=Unnamed NPC (ID: 16986659/0x01033223), tag_num=0x03)
 18: 0x01C7 [0x29] REQ_SET_WAIT(priority=0x10, entity_id=Unnamed NPC (ID: 16986660/0x01033224), tag_num=0x03)
 19: 0x01CE [0x29] REQ_SET_WAIT(priority=0x10, entity_id=LocalPlayer, tag_num=0x0E)
 20: 0x01D5 [0x80] LOAD_WAIT(entity=Unnamed NPC (ID: 16986659/0x01033223))
 21: 0x01DA [0x80] LOAD_WAIT(entity=Unnamed NPC (ID: 16986660/0x01033224))
 22: 0x01DF [0x80] LOAD_WAIT(entity=LocalPlayer)
 23: 0x01E4 [0x4A] LocalPlayer looks at Leypoint (ID: 16986658/0x01033222)
 24: 0x01ED [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 25: 0x01EE [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until LocalPlayer Render.Flags0 and Render.Flags3 conditions are met
 26: 0x01F3 [0x29] REQ_SET_WAIT(priority=0x10, entity_id=LocalPlayer, tag_num=0x13)
 27: 0x01FA [0x1C] WAIT(30* ticks)
 28: 0x01FD [0x45] LOAD_SCHEDULED_TASK: Load scheduler "od10" with entities [LocalPlayer, LocalPlayer], work=[258*, 0*]
 29: 0x020E [0x1A] CALL_SUBROUTINE(address=0x02E6)
 30: 0x0211 [0x1C] WAIT(120* ticks)
 31: 0x0214 [0x73] Unnamed NPC (ID: 16986659/0x01033223) casts magic 168* on Unnamed NPC (ID: 16986660/0x01033224)
 32: 0x021F [0x1C] WAIT(60* ticks)
 33: 0x0222 [0x52] END_LOAD_SCHEDULER: End scheduler "od10" with entities [LocalPlayer, LocalPlayer], work=258*
 34: 0x0231 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "od12" with entities [LocalPlayer, LocalPlayer], work=[258*, 0*]
 35: 0x0242 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "od12" with entities [LocalPlayer, LocalPlayer], work=258*
 36: 0x0251 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "od11" with entities [LocalPlayer, LocalPlayer], work=[258*, 0*]
 37: 0x0262 [0x1C] WAIT(30* ticks)
 38: 0x0265 [0x27] REQ_SET(priority=0x10, entity_id=LocalPlayer, tag_num=0x14)
 39: 0x026C [0x1C] WAIT(90* ticks)
 40: 0x026F [0x1A] CALL_SUBROUTINE(address=0x0307)
 41: 0x0272 [0x1C] WAIT(60* ticks)
 42: 0x0275 [0x03] Work_Zone[2] = 2217*
 43: 0x027A [0x48] [System] [7417*]:
    → "The \u0001\u0005#\u0002\u0000\u0000\u0000 has been charged with the power of lightning!\u0000\u0007"
 44: 0x027D [0x1C] WAIT(60* ticks)
 45: 0x0280 [0x52] END_LOAD_SCHEDULER: End scheduler "od11" with entities [LocalPlayer, LocalPlayer], work=258*
 46: 0x028F [0x46] CAMERA_CONTROL: Restore default settings
 47: 0x0291 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi2" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 48: 0x02A2 [0x21] END_EVENT
 49: 0x02A3 [0x00] END_REQSTACK()

SUBROUTINE_02E6:
 50: 0x02E6 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 51: 0x02F7 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=200*
 52: 0x0306 [0x1B] RETURN

SUBROUTINE_0307:
 53: 0x0307 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 54: 0x0318 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=200*
 55: 0x0327 [0x1B] RETURN
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x01A3 [0x01] GOTO 0x01A6
# Dead code (unreachable instructions):
     0x02A4 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi0" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x02B5 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdi0" with entities [LocalPlayer, LocalPlayer], work=200*
     0x02C4 [0x1B] RETURN
     0x02C5 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo0" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x02D6 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo0" with entities [LocalPlayer, LocalPlayer], work=200*
     0x02E5 [0x1B] RETURN
# Dead code (unreachable instructions):
     0x0328 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "whi1" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
     0x0339 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "whi1" with entities [LocalPlayer, LocalPlayer], work=201*
     0x0348 [0x1B] RETURN
     0x0349 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "who1" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
     0x035A [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "who1" with entities [LocalPlayer, LocalPlayer], work=201*
     0x0369 [0x1B] RETURN
     0x036A [0x45] LOAD_SCHEDULED_TASK: Load scheduler "who2" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
     0x037B [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "who2" with entities [LocalPlayer, LocalPlayer], work=201*
     0x038A [0x1B] RETURN
     0x038B [0x45] LOAD_SCHEDULED_TASK: Load scheduler "who3" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
     0x039C [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "who3" with entities [LocalPlayer, LocalPlayer], work=201*
     0x03AB [0x1B] RETURN
     0x03AC [0x62] LOAD_EVENT_SCHEDULER: Load scheduler "main" with entities [LocalPlayer, LocalPlayer], work=[1*, 0*]
     0x03BD [0x1C] WAIT(45* ticks)
     0x03C0 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x03D1 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=200*
     0x03E0 [0x1B] RETURN
     0x03E1 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x03F2 [0x62] LOAD_EVENT_SCHEDULER: Load scheduler "main" with entities [LocalPlayer, LocalPlayer], work=[2*, 0*]
     0x0403 [0x1C] WAIT(30* ticks)
     0x0406 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=200*
     0x0415 [0x1B] RETURN
     0x0416 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "blon" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x0427 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "blon" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
     0x0438 [0x1B] RETURN
     0x0439 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "whi0" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
     0x044A [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "whi0" with entities [LocalPlayer, LocalPlayer], work=201*
     0x0459 [0x1B] RETURN
     0x045A [0x45] LOAD_SCHEDULED_TASK: Load scheduler "who0" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
     0x046B [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "who0" with entities [LocalPlayer, LocalPlayer], work=201*
     0x047A [0x1B] RETURN
     0x047B [0x45] LOAD_SCHEDULED_TASK: Load scheduler "efon" with entities [LocalPlayer, LocalPlayer], work=[215*, 0*]
     0x048C [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "efon" with entities [LocalPlayer, LocalPlayer], work=215*
     0x049B [0x1B] RETURN
     0x049C [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdis" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x04AD [0x1B] RETURN
     0x04AE [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdos" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x04BF [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdos" with entities [LocalPlayer, LocalPlayer], work=200*
     0x04CE [0x1B] RETURN
     0x04CF [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdif" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x04E0 [0x1B] RETURN
     0x04E1 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdof" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x04F2 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdof" with entities [LocalPlayer, LocalPlayer], work=200*
     0x0501 [0x1B] RETURN
     0x0502 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdip" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x0513 [0x1B] RETURN
     0x0514 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdop" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x0525 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdop" with entities [LocalPlayer, LocalPlayer], work=200*
     0x0534 [0x1B] RETURN
```