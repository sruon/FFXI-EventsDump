# Event 20

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 2/3       |
| Offset          | 0x0001    |
| Data Size       | 810 bytes |
| Calculated Size | 810 bytes |
| Instructions    | 118       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000:    42 43 00 43 01 03 00  00 09 10 02 00 00 00 80   BC.C...........
0010: 00 27 00 45 01 80 F0 FF  FF 7F F0 FF FF 7F 66 64  .'.E..........fd
0020: 69 31 02 80 1A 13 14 46  01 38 03 80 4E 00 F0 FF  i1.....F.8..N...
0030: FF 7F 5C 00 04 80 5C 01  04 80 9A AB 09 AB 0F 92  ..\...\.........
0040: 01 8A 32 03 01 92 01 88  32 03 01 94 01 F0 FF FF  ..2.....2.......
0050: 7F BA F0 FF FF 7F 05 80  06 80 07 80 08 80 27 10  ..............'.
0060: 8A 32 03 01 01 27 10 88  32 03 01 01 80 8A 32 03  .2...'..2.....2.
0070: 01 80 88 32 03 01 27 10  8B 32 03 01 01 80 F0 FF  ...2..'..2......
0080: FF 7F BA F0 FF FF 7F 09  80 0A 80 0B 80 0C 80 4B  ...............K
0090: F0 FF FF 7F 0D 80 BA 8B  32 03 01 0E 80 0F 80 10  ........2.......
00A0: 80 11 80 80 8B 32 03 01  94 01 8B 32 03 01 73 12  .....2.....2..s.
00B0: 80 8B 32 03 01 F0 FF FF  7F 1C 13 80 29 10 F0 FF  ..2.........)...
00C0: FF 7F 25 02 02 10 00 80  80 05 01 45 14 80 F0 FF  ..%........E....
00D0: FF 7F F0 FF FF 7F 68 75  6D 35 02 80 1A F2 13 27  ......hum5.....'
00E0: 10 F0 FF FF 7F 38 2B 88  32 03 01 15 80 2A 10 F0  .....8+.2....*..
00F0: FF FF 7F 55 14 80 F0 FF  FF 7F F0 FF FF 7F 68 75  ...U..........hu
0100: 6D 35 01 D3 02 02 02 10  16 80 80 47 01 45 14 80  m5.........G.E..
0110: F0 FF FF 7F F0 FF FF 7F  68 6D 66 35 02 80 1A F2  ........hmf5....
0120: 13 27 10 F0 FF FF 7F 38  2B 88 32 03 01 15 80 2A  .'.....8+.2....*
0130: 10 F0 FF FF 7F 55 14 80  F0 FF FF 7F F0 FF FF 7F  .....U..........
0140: 68 6D 66 35 01 D3 02 02  02 10 17 80 80 89 01 45  hmf5...........E
0150: 14 80 F0 FF FF 7F F0 FF  FF 7F 65 6C 6D 35 02 80  ..........elm5..
0160: 1A F2 13 27 10 F0 FF FF  7F 38 2B 88 32 03 01 15  ...'.....8+.2...
0170: 80 2A 10 F0 FF FF 7F 55  14 80 F0 FF FF 7F F0 FF  .*.....U........
0180: FF 7F 65 6C 6D 35 01 D3  02 02 02 10 18 80 80 CB  ..elm5..........
0190: 01 45 14 80 F0 FF FF 7F  F0 FF FF 7F 65 6C 66 35  .E..........elf5
01A0: 02 80 1A F2 13 27 10 F0  FF FF 7F 38 2B 88 32 03  .....'.....8+.2.
01B0: 01 15 80 2A 10 F0 FF FF  7F 55 14 80 F0 FF FF 7F  ...*.....U......
01C0: F0 FF FF 7F 65 6C 66 35  01 D3 02 02 02 10 19 80  ....elf5........
01D0: 80 0D 02 45 14 80 F0 FF  FF 7F F0 FF FF 7F 74 61  ...E..........ta
01E0: 72 35 02 80 1A F2 13 27  10 F0 FF FF 7F 38 2B 88  r5.....'.....8+.
01F0: 32 03 01 15 80 2A 10 F0  FF FF 7F 55 14 80 F0 FF  2....*.....U....
0200: FF 7F F0 FF FF 7F 74 61  72 35 01 D3 02 02 02 10  ......tar5......
0210: 1A 80 80 4F 02 45 14 80  F0 FF FF 7F F0 FF FF 7F  ...O.E..........
0220: 74 61 72 35 02 80 1A F2  13 27 10 F0 FF FF 7F 38  tar5.....'.....8
0230: 2B 88 32 03 01 15 80 2A  10 F0 FF FF 7F 55 14 80  +.2....*.....U..
0240: F0 FF FF 7F F0 FF FF 7F  74 61 72 35 01 D3 02 02  ........tar5....
0250: 02 10 1B 80 80 91 02 45  14 80 F0 FF FF 7F F0 FF  .......E........
0260: FF 7F 6D 69 74 35 02 80  1A F2 13 27 10 F0 FF FF  ..mit5.....'....
0270: 7F 38 2B 88 32 03 01 15  80 2A 10 F0 FF FF 7F 55  .8+.2....*.....U
0280: 14 80 F0 FF FF 7F F0 FF  FF 7F 6D 69 74 35 01 D3  ..........mit5..
0290: 02 02 02 10 1C 80 80 D3  02 45 14 80 F0 FF FF 7F  .........E......
02A0: F0 FF FF 7F 67 61 6C 35  02 80 1A F2 13 27 10 F0  ....gal5.....'..
02B0: FF FF 7F 38 2B 88 32 03  01 15 80 2A 10 F0 FF FF  ...8+.2....*....
02C0: 7F 55 14 80 F0 FF FF 7F  F0 FF FF 7F 67 61 6C 35  .U..........gal5
02D0: 01 D3 02 1A 13 14 1C 13  80 45 14 80 F0 FF FF 7F  .........E......
02E0: F0 FF FF 7F 30 62 6C 66  02 80 1C 1D 80 AB 11 02  ....0blf........
02F0: 80 1C 00 80 02 00 00 02  80 00 FF 02 30 21 00 1A  ............0!..
0300: D1 13 1A F2 13 5C 00 1E  80 5C 01 1E 80 5C 02 1F  .....\...\...\..
0310: 80 5C 03 20 80 9A 46 00  45 01 80 F0 FF FF 7F F0  .\. ..F.E.......
0320: FF FF 7F 66 64 69 32 02  80 21 00                 ...fdi2..!.     
```

## Opcodes

```
  0: 0x0001 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x0002 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
  2: 0x0004 [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
  3: 0x0006 [0x03] ExtData[1]->WorkLocal[0] = Work_Zone[9]
  4: 0x000B [0x02] IF !(ExtData[1]->WorkLocal[0] == 1*) GOTO 0x0027
  5: 0x0013 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
  6: 0x0024 [0x1A] CALL_SUBROUTINE(address=0x1413)
  7: 0x0027 [0x46] CAMERA_CONTROL: Disable user control
  8: 0x0029 [0x38] SET_CLIENT_EVENT_MODE(mode=19*)
  9: 0x002C [0x4E] SET_ENTITY_HIDE_FLAG: Show LocalPlayer
 10: 0x0032 [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 123*
 11: 0x0036 [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 123*
 12: 0x003A [0x9A] WAIT_MUSIC_SERVER()
 13: 0x003B [0xAB] EventEntity->UnknownFlag = 1 // Enable unknown flag
 14: 0x003D [0xAB] EventEntity->CalibrationFlag = 1 // Set calibration flag
 15: 0x003F [0x92] Clavauert (ID: 16986762/0x0103328A)->Render.Flags3 ^= 0x01
 16: 0x0045 [0x92] Salwa-Molwa (ID: 16986760/0x01033288)->Render.Flags3 ^= 0x01
 17: 0x004B [0x94] LocalPlayer->Render.Flags3 ^= 0x01
 18: 0x0051 [0xBA] SET_ENTITY_POSITION(entity_id=LocalPlayer, pos_x=220.369*, pos_z=-96.329*, pos_y=-25.339*, direction=101.3°*)
 19: 0x005E [0x27] REQ_SET(priority=0x10, entity_id=Clavauert (ID: 16986762/0x0103328A), tag_num=0x01)
 20: 0x0065 [0x27] REQ_SET(priority=0x10, entity_id=Salwa-Molwa (ID: 16986760/0x01033288), tag_num=0x01)
 21: 0x006C [0x80] LOAD_WAIT(entity=Clavauert (ID: 16986762/0x0103328A))
 22: 0x0071 [0x80] LOAD_WAIT(entity=Salwa-Molwa (ID: 16986760/0x01033288))
 23: 0x0076 [0x27] REQ_SET(priority=0x10, entity_id=Unnamed NPC (ID: 16986763/0x0103328B), tag_num=0x01)
 24: 0x007D [0x80] LOAD_WAIT(entity=LocalPlayer)
 25: 0x0082 [0xBA] SET_ENTITY_POSITION(entity_id=LocalPlayer, pos_x=679.063*, pos_z=206.785*, pos_y=-15.827*, direction=99.3°*)
 26: 0x008F [0x4B] UPDATE_ENTITY_YAW(entity=LocalPlayer, yaw=5.6°*)
 27: 0x0096 [0xBA] SET_ENTITY_POSITION(entity_id=Unnamed NPC (ID: 16986763/0x0103328B), pos_x=686.444*, pos_z=206.921*, pos_y=-15.749*, direction=176.9°*)
 28: 0x00A3 [0x80] LOAD_WAIT(entity=Unnamed NPC (ID: 16986763/0x0103328B))
 29: 0x00A8 [0x94] Unnamed NPC (ID: 16986763/0x0103328B)->Render.Flags3 ^= 0x01
 30: 0x00AE [0x73] Unnamed NPC (ID: 16986763/0x0103328B) casts magic 253* on LocalPlayer
 31: 0x00B9 [0x1C] WAIT(30* ticks)
 32: 0x00BC [0x29] REQ_SET_WAIT(priority=0x10, entity_id=LocalPlayer, tag_num=0x25)
 33: 0x00C3 [0x02] IF !(Work_Zone[2] == 1*) GOTO 0x0105
 34: 0x00CB [0x45] LOAD_SCHEDULED_TASK: Load scheduler "hum5" with entities [LocalPlayer, LocalPlayer], work=[282*, 0*]
 35: 0x00DC [0x1A] CALL_SUBROUTINE(address=0x13F2)
 36: 0x00DF [0x27] REQ_SET(priority=0x10, entity_id=LocalPlayer, tag_num=0x38)
 37: 0x00E6 [0x2B] Salwa-Molwa (ID: 16986760/0x01033288) [8225*]:
    → "And I'd bet my grandma's subligar that it was the same one that put us to sleep!\u0000\u0007"
 38: 0x00ED [0x2A] GET_REQ_LEVEL(level=16, entity_id=LocalPlayer)
 39: 0x00F3 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "hum5" with entities [LocalPlayer, LocalPlayer], work=282*
 40: 0x0102 [0x01] GOTO 0x02D3
 41: 0x0105 [0x02] IF !(Work_Zone[2] == 2*) GOTO 0x0147
 42: 0x010D [0x45] LOAD_SCHEDULED_TASK: Load scheduler "hmf5" with entities [LocalPlayer, LocalPlayer], work=[282*, 0*]
 43: 0x011E [0x1A] CALL_SUBROUTINE(address=0x13F2)
 44: 0x0121 [0x27] REQ_SET(priority=0x10, entity_id=LocalPlayer, tag_num=0x38)
 45: 0x0128 [0x2B] Salwa-Molwa (ID: 16986760/0x01033288) [8225*]:
    → "And I'd bet my grandma's subligar that it was the same one that put us to sleep!\u0000\u0007"
 46: 0x012F [0x2A] GET_REQ_LEVEL(level=16, entity_id=LocalPlayer)
 47: 0x0135 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "hmf5" with entities [LocalPlayer, LocalPlayer], work=282*
 48: 0x0144 [0x01] GOTO 0x02D3
 49: 0x0147 [0x02] IF !(Work_Zone[2] == 3*) GOTO 0x0189
 50: 0x014F [0x45] LOAD_SCHEDULED_TASK: Load scheduler "elm5" with entities [LocalPlayer, LocalPlayer], work=[282*, 0*]
 51: 0x0160 [0x1A] CALL_SUBROUTINE(address=0x13F2)
 52: 0x0163 [0x27] REQ_SET(priority=0x10, entity_id=LocalPlayer, tag_num=0x38)
 53: 0x016A [0x2B] Salwa-Molwa (ID: 16986760/0x01033288) [8225*]:
    → "And I'd bet my grandma's subligar that it was the same one that put us to sleep!\u0000\u0007"
 54: 0x0171 [0x2A] GET_REQ_LEVEL(level=16, entity_id=LocalPlayer)
 55: 0x0177 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "elm5" with entities [LocalPlayer, LocalPlayer], work=282*
 56: 0x0186 [0x01] GOTO 0x02D3
 57: 0x0189 [0x02] IF !(Work_Zone[2] == 4*) GOTO 0x01CB
 58: 0x0191 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "elf5" with entities [LocalPlayer, LocalPlayer], work=[282*, 0*]
 59: 0x01A2 [0x1A] CALL_SUBROUTINE(address=0x13F2)
 60: 0x01A5 [0x27] REQ_SET(priority=0x10, entity_id=LocalPlayer, tag_num=0x38)
 61: 0x01AC [0x2B] Salwa-Molwa (ID: 16986760/0x01033288) [8225*]:
    → "And I'd bet my grandma's subligar that it was the same one that put us to sleep!\u0000\u0007"
 62: 0x01B3 [0x2A] GET_REQ_LEVEL(level=16, entity_id=LocalPlayer)
 63: 0x01B9 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "elf5" with entities [LocalPlayer, LocalPlayer], work=282*
 64: 0x01C8 [0x01] GOTO 0x02D3
 65: 0x01CB [0x02] IF !(Work_Zone[2] == 5*) GOTO 0x020D
 66: 0x01D3 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "tar5" with entities [LocalPlayer, LocalPlayer], work=[282*, 0*]
 67: 0x01E4 [0x1A] CALL_SUBROUTINE(address=0x13F2)
 68: 0x01E7 [0x27] REQ_SET(priority=0x10, entity_id=LocalPlayer, tag_num=0x38)
 69: 0x01EE [0x2B] Salwa-Molwa (ID: 16986760/0x01033288) [8225*]:
    → "And I'd bet my grandma's subligar that it was the same one that put us to sleep!\u0000\u0007"
 70: 0x01F5 [0x2A] GET_REQ_LEVEL(level=16, entity_id=LocalPlayer)
 71: 0x01FB [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "tar5" with entities [LocalPlayer, LocalPlayer], work=282*
 72: 0x020A [0x01] GOTO 0x02D3
 73: 0x020D [0x02] IF !(Work_Zone[2] == 6*) GOTO 0x024F
 74: 0x0215 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "tar5" with entities [LocalPlayer, LocalPlayer], work=[282*, 0*]
 75: 0x0226 [0x1A] CALL_SUBROUTINE(address=0x13F2)
 76: 0x0229 [0x27] REQ_SET(priority=0x10, entity_id=LocalPlayer, tag_num=0x38)
 77: 0x0230 [0x2B] Salwa-Molwa (ID: 16986760/0x01033288) [8225*]:
    → "And I'd bet my grandma's subligar that it was the same one that put us to sleep!\u0000\u0007"
 78: 0x0237 [0x2A] GET_REQ_LEVEL(level=16, entity_id=LocalPlayer)
 79: 0x023D [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "tar5" with entities [LocalPlayer, LocalPlayer], work=282*
 80: 0x024C [0x01] GOTO 0x02D3
 81: 0x024F [0x02] IF !(Work_Zone[2] == 7*) GOTO 0x0291
 82: 0x0257 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "mit5" with entities [LocalPlayer, LocalPlayer], work=[282*, 0*]
 83: 0x0268 [0x1A] CALL_SUBROUTINE(address=0x13F2)
 84: 0x026B [0x27] REQ_SET(priority=0x10, entity_id=LocalPlayer, tag_num=0x38)
 85: 0x0272 [0x2B] Salwa-Molwa (ID: 16986760/0x01033288) [8225*]:
    → "And I'd bet my grandma's subligar that it was the same one that put us to sleep!\u0000\u0007"
 86: 0x0279 [0x2A] GET_REQ_LEVEL(level=16, entity_id=LocalPlayer)
 87: 0x027F [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "mit5" with entities [LocalPlayer, LocalPlayer], work=282*
 88: 0x028E [0x01] GOTO 0x02D3
 89: 0x0291 [0x02] IF !(Work_Zone[2] == 8*) GOTO 0x02D3
 90: 0x0299 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "gal5" with entities [LocalPlayer, LocalPlayer], work=[282*, 0*]
 91: 0x02AA [0x1A] CALL_SUBROUTINE(address=0x13F2)
 92: 0x02AD [0x27] REQ_SET(priority=0x10, entity_id=LocalPlayer, tag_num=0x38)
 93: 0x02B4 [0x2B] Salwa-Molwa (ID: 16986760/0x01033288) [8225*]:
    → "And I'd bet my grandma's subligar that it was the same one that put us to sleep!\u0000\u0007"
 94: 0x02BB [0x2A] GET_REQ_LEVEL(level=16, entity_id=LocalPlayer)
 95: 0x02C1 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "gal5" with entities [LocalPlayer, LocalPlayer], work=282*
 96: 0x02D0 [0x01] GOTO 0x02D3

SUBROUTINE_02D3:
 97: 0x02D3 [0x1A] CALL_SUBROUTINE(address=0x1413)
 98: 0x02D6 [0x1C] WAIT(30* ticks)
 99: 0x02D9 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "0blf" with entities [LocalPlayer, LocalPlayer], work=[282*, 0*]
100: 0x02EA [0x1C] WAIT(60* ticks)
101: 0x02ED [0xAB] EventEntity->DespawnValue = 0* // Set despawn value
102: 0x02F1 [0x1C] WAIT(1* ticks)
103: 0x02F4 [0x02] IF !(ExtData[1]->WorkLocal[0] == 0*) GOTO 0x02FF
104: 0x02FC [0x30] SET_UCOFF_CONTINUE_ZERO()
105: 0x02FD [0x21] END_EVENT
106: 0x02FE [0x00] END_REQSTACK()
107: 0x02FF [0x1A] CALL_SUBROUTINE(address=0x13D1)
108: 0x0302 [0x1A] CALL_SUBROUTINE(address=0x13F2)
109: 0x0305 [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 149*
110: 0x0309 [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 149*
111: 0x030D [0x5C] MUSIC_CONTROL: Set Combat (Solo) music to song 101*
112: 0x0311 [0x5C] MUSIC_CONTROL: Set Combat (Party) music to song 138*
113: 0x0315 [0x9A] WAIT_MUSIC_SERVER()
114: 0x0316 [0x46] CAMERA_CONTROL: Restore default settings
115: 0x0318 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi2" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
116: 0x0329 [0x21] END_EVENT
117: 0x032A [0x00] END_REQSTACK()
```
