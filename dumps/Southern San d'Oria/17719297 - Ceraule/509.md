# Event 509

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 5/21      |
| Offset          | 0x001B    |
| Data Size       | 407 bytes |
| Calculated Size | 407 bytes |
| Instructions    | 93        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0010:                                   1E F0 FF FF 7F             .....
0020: 6F 70 66 06 80 01 60 0E  01 01 60 0E 01 74 6C 6B  opf...`...`..tlk
0030: 30 1D 07 80 23 5E 69 64  6C 30 24 08 80 09 80 09  0...#^idl0$.....
0040: 80 25 02 00 10 09 80 00  4D 00 01 D7 00 02 00 10  .%......M.......
0050: 0A 80 00 86 00 66 06 80  01 60 0E 01 01 60 0E 01  .....f...`...`..
0060: 74 6C 6B 30 1D 0B 80 23  1C 0C 80 1D 0D 80 23 1C  tlk0...#......#.
0070: 0C 80 1D 0E 80 23 5E 69  64 6C 30 1C 0C 80 03 01  .....#^idl0.....
0080: 10 09 80 01 D7 00 02 00  10 0F 80 00 B1 00 66 06  ..............f.
0090: 80 01 60 0E 01 01 60 0E  01 74 6C 6B 30 1D 10 80  ..`...`..tlk0...
00A0: 23 5E 69 64 6C 30 1C 0C  80 03 01 10 0A 80 01 D7  #^idl0..........
00B0: 00 02 00 10 11 80 00 D7  00 66 06 80 01 60 0E 01  .........f...`..
00C0: 01 60 0E 01 74 6C 6B 30  1D 12 80 23 5E 69 64 6C  .`..tlk0...#^idl
00D0: 30 01 D9 00 01 D7 00 21  00 24 13 80 09 80 09 80  0......!.$......
00E0: 25 02 00 10 09 80 00 13  01 66 06 80 01 60 0E 01  %........f...`..
00F0: 01 60 0E 01 74 6C 6B 30  1D 14 80 23 1C 0C 80 1D  .`..tlk0...#....
0100: 0E 80 23 5E 69 64 6C 30  1C 0C 80 03 01 10 11 80  ..#^idl0........
0110: 01 B0 01 02 00 10 0A 80  00 45 01 66 06 80 01 60  .........E.f...`
0120: 0E 01 01 60 0E 01 74 6C  6B 30 1D 15 80 23 1C 0C  ...`..tlk0...#..
0130: 80 1D 0E 80 23 5E 69 64  6C 30 1C 0C 80 03 01 10  ....#^idl0......
0140: 16 80 01 B0 01 02 00 10  0F 80 00 7E 01 66 06 80  ...........~.f..
0150: 01 60 0E 01 01 60 0E 01  74 6C 6B 30 1D 17 80 23  .`...`..tlk0...#
0160: 1C 0C 80 1D 18 80 23 1C  0C 80 1D 0E 80 23 5E 69  ......#......#^i
0170: 64 6C 30 1C 0C 80 03 01  10 19 80 01 B0 01 02 00  dl0.............
0180: 10 11 80 00 B0 01 66 06  80 01 60 0E 01 01 60 0E  ......f...`...`.
0190: 01 74 6C 6B 30 1D 1A 80  23 1C 0C 80 1D 0E 80 23  .tlk0...#......#
01A0: 5E 69 64 6C 30 1C 0C 80  03 01 10 1B 80 01 B0 01  ^idl0...........
01B0: 21 00                                             !.              
```

## Opcodes

```
  0: 0x001B [0x1E] EventEntity looks at LocalPlayer and starts talking
  1: 0x0020 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  2: 0x0021 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
  3: 0x0022 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [Ceraule (ID: 17719297/0x010E6001), Ceraule (ID: 17719297/0x010E6001)], work=20*
  4: 0x0031 [0x1D] PRINT_EVENT_MESSAGE(message_id=7705*)
    → "Perhaps I could be of service. Is there anything you'd like to know?\u007F1\u0000\u0007"
  5: 0x0034 [0x23] WAIT_FOR_DIALOG_INTERACTION
  6: 0x0035 [0x5E] EventEntity goes idle (kills current action) (animation: "idl0")
  7: 0x003A [0x24] CREATE_DIALOG(message_id=7725*, default_option=0*, option_flags=0*)
    → "Something you'd like to know?\u0007\u000BNothing in particular.\u0007I want to go out and do battle!\u0007I want to go shopping.\u0007I want to know more about adventuring.\u007F1\u0000\u0007"
  8: 0x0041 [0x25] WAIT_DIALOG_SELECT()
  9: 0x0042 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x004D
 10: 0x004A [0x01] GOTO 0x00D7

SUBROUTINE_004D:
 11: 0x004D [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x0086
 12: 0x0055 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [Ceraule (ID: 17719297/0x010E6001), Ceraule (ID: 17719297/0x010E6001)], work=20*
 13: 0x0064 [0x1D] PRINT_EVENT_MESSAGE(message_id=7726*)
    → "Just got here and you're aching to leave, eh? Listen, the lands are wild beyond our gates, filled with fiends and their ilk.\u007F1\u0000\u0007"
 14: 0x0067 [0x23] WAIT_FOR_DIALOG_INTERACTION
 15: 0x0068 [0x1C] WAIT(30* ticks)
 16: 0x006B [0x1D] PRINT_EVENT_MESSAGE(message_id=7727*)
    → "Right behind you is the Westgate. Beyond that, the wilds of West Ronfaure.\u007F1\u0000\u0007"
 17: 0x006E [0x23] WAIT_FOR_DIALOG_INTERACTION
 18: 0x006F [0x1C] WAIT(30* ticks)
 19: 0x0072 [0x1D] PRINT_EVENT_MESSAGE(message_id=7728*)
    → "Should you need directions, ask those around you. Our citizens are friendly, for the most part.\u007F1\u0000\u0007"
 20: 0x0075 [0x23] WAIT_FOR_DIALOG_INTERACTION
 21: 0x0076 [0x5E] EventEntity goes idle (kills current action) (animation: "idl0")
 22: 0x007B [0x1C] WAIT(30* ticks)
 23: 0x007E [0x03] Work_Zone[1] = 0*
 24: 0x0083 [0x01] GOTO 0x00D7

SUBROUTINE_0086:
 25: 0x0086 [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x00B1
 26: 0x008E [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [Ceraule (ID: 17719297/0x010E6001), Ceraule (ID: 17719297/0x010E6001)], work=20*
 27: 0x009D [0x1D] PRINT_EVENT_MESSAGE(message_id=7732*)
    → "Should you seek weapons, armor, or supplies, there are several shops in this area. Why not go have a look?\u007F1\u0000\u0007"
 28: 0x00A0 [0x23] WAIT_FOR_DIALOG_INTERACTION
 29: 0x00A1 [0x5E] EventEntity goes idle (kills current action) (animation: "idl0")
 30: 0x00A6 [0x1C] WAIT(30* ticks)
 31: 0x00A9 [0x03] Work_Zone[1] = 1*
 32: 0x00AE [0x01] GOTO 0x00D7

SUBROUTINE_00B1:
 33: 0x00B1 [0x02] IF !(Work_Zone[0] == 3*) GOTO 0x00D7
 34: 0x00B9 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [Ceraule (ID: 17719297/0x010E6001), Ceraule (ID: 17719297/0x010E6001)], work=20*
 35: 0x00C8 [0x1D] PRINT_EVENT_MESSAGE(message_id=7733*)
    → "Ahh, recruits... Don't know which way to hold a sword and you think you're ready for adventures. Well, what would you like to know?\u007F1\u0000\u0007"
 36: 0x00CB [0x23] WAIT_FOR_DIALOG_INTERACTION
 37: 0x00CC [0x5E] EventEntity goes idle (kills current action) (animation: "idl0")
 38: 0x00D1 [0x01] GOTO 0x00D9

SUBROUTINE_00D7:
 39: 0x00D7 [0x21] END_EVENT
 40: 0x00D8 [0x00] END_REQSTACK()

SUBROUTINE_00D9:
 41: 0x00D9 [0x24] CREATE_DIALOG(message_id=7735*, default_option=0*, option_flags=0*)
    → "What would you like to hear about?\u0007\u000BHelping people.\u0007Hunting monsters.\u0007Making easy money.\u0007Working for my country.\u007F1\u0000\u0007"
 42: 0x00E0 [0x25] WAIT_DIALOG_SELECT()
 43: 0x00E1 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x0113
 44: 0x00E9 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [Ceraule (ID: 17719297/0x010E6001), Ceraule (ID: 17719297/0x010E6001)], work=20*
 45: 0x00F8 [0x1D] PRINT_EVENT_MESSAGE(message_id=7736*)
    → "Ah, a commendable choice! Come to think of it, there was a lady in front of a house on Pikeman's Way. She may be in need of assistance.\u007F1\u0000\u0007"
 46: 0x00FB [0x23] WAIT_FOR_DIALOG_INTERACTION
 47: 0x00FC [0x1C] WAIT(30* ticks)
 48: 0x00FF [0x1D] PRINT_EVENT_MESSAGE(message_id=7728*)
    → "Should you need directions, ask those around you. Our citizens are friendly, for the most part.\u007F1\u0000\u0007"
 49: 0x0102 [0x23] WAIT_FOR_DIALOG_INTERACTION
 50: 0x0103 [0x5E] EventEntity goes idle (kills current action) (animation: "idl0")
 51: 0x0108 [0x1C] WAIT(30* ticks)
 52: 0x010B [0x03] Work_Zone[1] = 3*
 53: 0x0110 [0x01] GOTO 0x01B0

SUBROUTINE_0113:
 54: 0x0113 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x0145
 55: 0x011B [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [Ceraule (ID: 17719297/0x010E6001), Ceraule (ID: 17719297/0x010E6001)], work=20*
 56: 0x012A [0x1D] PRINT_EVENT_MESSAGE(message_id=7737*)
    → "Novices... Don't know your own limits until a fiend beats it into your head for you. Very well. How about gathering some hides for the Tanners' Guild on Pikeman's Way?\u007F1\u0000\u0007"
 57: 0x012D [0x23] WAIT_FOR_DIALOG_INTERACTION
 58: 0x012E [0x1C] WAIT(30* ticks)
 59: 0x0131 [0x1D] PRINT_EVENT_MESSAGE(message_id=7728*)
    → "Should you need directions, ask those around you. Our citizens are friendly, for the most part.\u007F1\u0000\u0007"
 60: 0x0134 [0x23] WAIT_FOR_DIALOG_INTERACTION
 61: 0x0135 [0x5E] EventEntity goes idle (kills current action) (animation: "idl0")
 62: 0x013A [0x1C] WAIT(30* ticks)
 63: 0x013D [0x03] Work_Zone[1] = 4*
 64: 0x0142 [0x01] GOTO 0x01B0

SUBROUTINE_0145:
 65: 0x0145 [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x017E
 66: 0x014D [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [Ceraule (ID: 17719297/0x010E6001), Ceraule (ID: 17719297/0x010E6001)], work=20*
 67: 0x015C [0x1D] PRINT_EVENT_MESSAGE(message_id=7739*)
    → "Easy money, eh? Typical of a new recruit. I cannot promise ease, but the lumberyard in Northern San d'Oria should have work for you there.\u007F1\u0000\u0007"
 68: 0x015F [0x23] WAIT_FOR_DIALOG_INTERACTION
 69: 0x0160 [0x1C] WAIT(30* ticks)
 70: 0x0163 [0x1D] PRINT_EVENT_MESSAGE(message_id=7740*)
    → "To get to the lumberyard, go through Victory Arch, head northwest across the Parade Grounds, and keep going till you reach Laborman's Way. The lumberyard lies at the far end.\u007F1\u0000\u0007"
 71: 0x0166 [0x23] WAIT_FOR_DIALOG_INTERACTION
 72: 0x0167 [0x1C] WAIT(30* ticks)
 73: 0x016A [0x1D] PRINT_EVENT_MESSAGE(message_id=7728*)
    → "Should you need directions, ask those around you. Our citizens are friendly, for the most part.\u007F1\u0000\u0007"
 74: 0x016D [0x23] WAIT_FOR_DIALOG_INTERACTION
 75: 0x016E [0x5E] EventEntity goes idle (kills current action) (animation: "idl0")
 76: 0x0173 [0x1C] WAIT(30* ticks)
 77: 0x0176 [0x03] Work_Zone[1] = 5*
 78: 0x017B [0x01] GOTO 0x01B0

SUBROUTINE_017E:
 79: 0x017E [0x02] IF !(Work_Zone[0] == 3*) GOTO 0x01B0
 80: 0x0186 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [Ceraule (ID: 17719297/0x010E6001), Ceraule (ID: 17719297/0x010E6001)], work=20*
 81: 0x0195 [0x1D] PRINT_EVENT_MESSAGE(message_id=7741*)
    → "Ah, a commendable choice for a new recruit. Head to any city gate and inquire at the gatehouse. You'll be doing work for the glory of the Kingdom!\u007F1\u0000\u0007"
 82: 0x0198 [0x23] WAIT_FOR_DIALOG_INTERACTION
 83: 0x0199 [0x1C] WAIT(30* ticks)
 84: 0x019C [0x1D] PRINT_EVENT_MESSAGE(message_id=7728*)
    → "Should you need directions, ask those around you. Our citizens are friendly, for the most part.\u007F1\u0000\u0007"
 85: 0x019F [0x23] WAIT_FOR_DIALOG_INTERACTION
 86: 0x01A0 [0x5E] EventEntity goes idle (kills current action) (animation: "idl0")
 87: 0x01A5 [0x1C] WAIT(30* ticks)
 88: 0x01A8 [0x03] Work_Zone[1] = 6*
 89: 0x01AD [0x01] GOTO 0x01B0

SUBROUTINE_01B0:
 90: 0x01B0 [0x21] END_EVENT
 91: 0x01B1 [0x00] END_REQSTACK()
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x00D4 [0x01] GOTO 0x00D7
```