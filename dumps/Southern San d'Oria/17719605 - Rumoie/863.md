# Event 863

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 2/3       |
| Offset          | 0x0001    |
| Data Size       | 638 bytes |
| Calculated Size | 638 bytes |
| Instructions    | 73        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000:    20 01 1E F0 FF FF 7F  1D 00 80 23 03 02 10 01    .........#....
0010: 80 1D 02 80 23 24 03 80  04 80 05 80 25 02 00 10  ....#$......%...
0020: 05 80 00 7D 02 03 02 10  01 80 1D 06 80 23 1C 07  ...}.........#..
0030: 80 A8 00 08 80 04 80 A8  00 08 80 09 80 A8 00 08  ................
0040: 80 0A 80 A8 00 08 80 0B  80 A8 00 08 80 0C 80 A8  ................
0050: 00 08 80 0D 80 A8 00 08  80 0E 80 A8 00 08 80 0F  ................
0060: 80 A8 00 10 80 04 80 A8  00 10 80 09 80 A8 00 10  ................
0070: 80 0A 80 A8 00 10 80 0B  80 A8 00 10 80 0C 80 A8  ................
0080: 00 10 80 0D 80 A8 00 10  80 0E 80 A8 00 10 80 0F  ................
0090: 80 A8 00 11 80 04 80 A8  00 11 80 09 80 A8 00 11  ................
00A0: 80 0A 80 A8 00 11 80 0B  80 A8 00 11 80 0C 80 1C  ................
00B0: 07 80 1D 12 80 23 1C 13  80 89 08 80 1C 07 80 8B  .....#..........
00C0: 08 80 0B 80 14 80 15 80  49 74 65 6D 44 65 70 6F  ........ItemDepo
00D0: 73 69 74 6F 72 79 00 00  1D 16 80 23 1C 07 80 8B  sitory.....#....
00E0: 08 80 0C 80 17 80 18 80  4D 65 6C 6F 64 79 5F 4D  ........Melody_M
00F0: 69 6E 73 74 72 65 6C 00  1D 19 80 23 1C 07 80 8B  instrel....#....
0100: 08 80 0D 80 1A 80 1B 80  57 65 61 74 68 65 72 5F  ........Weather_
0110: 52 65 70 6F 72 74 00 00  1D 1C 80 23 1C 07 80 8B  Report.....#....
0120: 08 80 0E 80 1D 80 1E 80  54 72 61 76 65 6C 69 6E  ........Travelin
0130: 67 5F 42 61 72 64 00 00  1D 1F 80 23 1C 07 80 8B  g_Bard.....#....
0140: 08 80 0F 80 20 80 21 80  52 65 70 75 74 61 74 69  .... .!.Reputati
0150: 6F 6E 00 00 00 00 00 00  1D 22 80 23 1C 07 80 8A  on.......".#....
0160: 1C 07 80 1D 23 80 23 1C  13 80 89 10 80 1C 07 80  ....#.#.........
0170: 8B 10 80 04 80 24 80 25  80 49 6D 6D 69 67 72 61  .....$.%.Immigra
0180: 74 69 6F 6E 00 00 00 00  00 1D 26 80 23 1C 07 80  tion......&.#...
0190: 8B 10 80 09 80 27 80 28  80 54 65 6C 65 70 6F 72  .....'.(.Telepor
01A0: 74 61 74 69 6F 6E 00 00  00 1D 29 80 23 1C 07 80  tation....).#...
01B0: 8B 10 80 0D 80 2A 80 2B  80 41 72 6D 6F 72 44 65  .....*.+.ArmorDe
01C0: 70 6F 73 69 74 6F 72 79  00 1D 2C 80 23 1C 07 80  pository..,.#...
01D0: 8B 10 80 0E 80 2D 80 2E  80 4D 65 6C 6F 64 79 5F  .....-...Melody_
01E0: 4D 69 6E 73 74 72 65 6C  00 1D 19 80 23 1C 07 80  Minstrel....#...
01F0: 8B 10 80 0F 80 2F 80 30  80 50 75 72 73 75 69 76  ...../.0.Pursuiv
0200: 61 6E 74 00 00 00 00 00  00 1D 31 80 23 1C 07 80  ant.......1.#...
0210: 8A 1C 07 80 1D 32 80 23  1C 13 80 89 11 80 1C 07  .....2.#........
0220: 80 8B 11 80 0B 80 33 80  34 80 47 6F 6C 64 5F 57  ......3.4.Gold_W
0230: 6F 72 6C 64 5F 50 61 73  73 00 1D 35 80 23 1C 07  orld_Pass..5.#..
0240: 80 8B 11 80 0C 80 36 80  37 80 4D 65 6C 6F 64 79  ......6.7.Melody
0250: 5F 4D 69 6E 73 74 72 65  6C 00 1D 19 80 23 1C 07  _Minstrel....#..
0260: 80 8A 1C 07 80 03 02 10  01 80 1D 38 80 23 1D 39  ...........8.#.9
0270: 80 23 1D 3A 80 23 1D 3B  80 23 01 7D 02 21 00     .#.:.#.;.#.}.!. 
```

## Opcodes

```
  0: 0x0001 [0x20] SET_CLI_EVENT_UC_FLAG: Lock player control
  1: 0x0003 [0x1E] EventEntity looks at LocalPlayer and starts talking
  2: 0x0008 [0x1D] PRINT_EVENT_MESSAGE(message_id=12296*)
    → "Good day! I'm a Merry Map Marker, and I'd be emphatically ecstatic if you'd allow me to mark your magical map!\u007F1\u0000\u0007"
  3: 0x000B [0x23] WAIT_FOR_DIALOG_INTERACTION
  4: 0x000C [0x03] Work_Zone[2] = 385*
  5: 0x0011 [0x1D] PRINT_EVENT_MESSAGE(message_id=12297*)
    → "A markless \u0001\u00053\u0002\u0000\u0000\u0000 is like a motherless maiden, meandering through a miasmatic mire of misery.\u007F1\u0000\u0007"
  6: 0x0014 [0x23] WAIT_FOR_DIALOG_INTERACTION
  7: 0x0015 [0x24] CREATE_DIALOG(message_id=12298*, default_option=1*, option_flags=0*)
    → "Embark on a map-marking mission?\u0007\u000BMark me up!\u0007Keep your mitts off my map!\u007F1\u0000\u0007"
  8: 0x001C [0x25] WAIT_DIALOG_SELECT()
  9: 0x001D [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x027D
 10: 0x0025 [0x03] Work_Zone[2] = 385*
 11: 0x002A [0x1D] PRINT_EVENT_MESSAGE(message_id=12299*)
    → "Marvelous! Now allow me a minute to make all my marks.\u007F1\u0000\u0007"
 12: 0x002D [0x23] WAIT_FOR_DIALOG_INTERACTION
 13: 0x002E [0x1C] WAIT(30* ticks)
 14: 0x0031 [0xA8] MAP_MARKER_CONTROL: Reset/unlock markers (no map display), zone=230*, marker=1*
 15: 0x0037 [0xA8] MAP_MARKER_CONTROL: Reset/unlock markers (no map display), zone=230*, marker=2*
 16: 0x003D [0xA8] MAP_MARKER_CONTROL: Reset/unlock markers (no map display), zone=230*, marker=3*
 17: 0x0043 [0xA8] MAP_MARKER_CONTROL: Reset/unlock markers (no map display), zone=230*, marker=4*
 18: 0x0049 [0xA8] MAP_MARKER_CONTROL: Reset/unlock markers (no map display), zone=230*, marker=5*
 19: 0x004F [0xA8] MAP_MARKER_CONTROL: Reset/unlock markers (no map display), zone=230*, marker=6*
 20: 0x0055 [0xA8] MAP_MARKER_CONTROL: Reset/unlock markers (no map display), zone=230*, marker=7*
 21: 0x005B [0xA8] MAP_MARKER_CONTROL: Reset/unlock markers (no map display), zone=230*, marker=8*
 22: 0x0061 [0xA8] MAP_MARKER_CONTROL: Reset/unlock markers (no map display), zone=231*, marker=1*
 23: 0x0067 [0xA8] MAP_MARKER_CONTROL: Reset/unlock markers (no map display), zone=231*, marker=2*
 24: 0x006D [0xA8] MAP_MARKER_CONTROL: Reset/unlock markers (no map display), zone=231*, marker=3*
 25: 0x0073 [0xA8] MAP_MARKER_CONTROL: Reset/unlock markers (no map display), zone=231*, marker=4*
 26: 0x0079 [0xA8] MAP_MARKER_CONTROL: Reset/unlock markers (no map display), zone=231*, marker=5*
 27: 0x007F [0xA8] MAP_MARKER_CONTROL: Reset/unlock markers (no map display), zone=231*, marker=6*
 28: 0x0085 [0xA8] MAP_MARKER_CONTROL: Reset/unlock markers (no map display), zone=231*, marker=7*
 29: 0x008B [0xA8] MAP_MARKER_CONTROL: Reset/unlock markers (no map display), zone=231*, marker=8*
 30: 0x0091 [0xA8] MAP_MARKER_CONTROL: Reset/unlock markers (no map display), zone=232*, marker=1*
 31: 0x0097 [0xA8] MAP_MARKER_CONTROL: Reset/unlock markers (no map display), zone=232*, marker=2*
 32: 0x009D [0xA8] MAP_MARKER_CONTROL: Reset/unlock markers (no map display), zone=232*, marker=3*
 33: 0x00A3 [0xA8] MAP_MARKER_CONTROL: Reset/unlock markers (no map display), zone=232*, marker=4*
 34: 0x00A9 [0xA8] MAP_MARKER_CONTROL: Reset/unlock markers (no map display), zone=232*, marker=5*
 35: 0x00AF [0x1C] WAIT(30* ticks)
 36: 0x00B2 [0x1D] PRINT_EVENT_MESSAGE(message_id=12315*)
    → "Let me begin with Southern San d'Oria.\u007F1\u0000\u0007"
 37: 0x00B5 [0x23] WAIT_FOR_DIALOG_INTERACTION
 38: 0x00B6 [0x1C] WAIT(60* ticks)
 39: 0x00B9 [0x89] OPEN_MAP(map_id=0x00008008)
 40: 0x00BC [0x1C] WAIT(30* ticks)
 41: 0x00BF [0x8B] SET_EVENT_MARK: Add/update map marker on map 230* at (-139.8*, 23.1*), index=4*, name=(no name)
 42: 0x00C8 [0x49] Unknown NPC (ID: 1148020084/0x446D6574) (No speaker name) [0x7065]:
 43: 0x00CF [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 44: 0x00D0 [0x73] Unknown NPC (ID: 7959151/0x0079726F) casts magic 0x7469 on Unknown NPC (ID: 2148932864/0x80161D00)
 45: 0x00DB [0x23] WAIT_FOR_DIALOG_INTERACTION
 46: 0x00DC [0x1C] WAIT(30* ticks)
 47: 0x00DF [0x8B] SET_EVENT_MARK: Add/update map marker on map 230* at (-33.8*, 34.0*), index=5*, name=(no name)
 48: 0x00E8 [0x4D] EventEntity->StatusEvent = 9 // Close door
 49: 0x00E9 [0x65] CALCULATE_3D_DISTANCE(result=0x6F6C, entity1=Unknown NPC (ID: 1298102628/0x4D5F7964), entity2=Unknown NPC (ID: 1953721961/0x74736E69))
 50: 0x00F4 [0x72] LOAD_EVENT_WEATHER: Unknown mode 101, weather_id=0x6C
 51: 0x00F8 [0x1D] PRINT_EVENT_MESSAGE(message_id=12307*)
    → "Our local \u001E\u0005minstrel of melodies\u001E\u0001 can be found here. His mirthful musicalities may help you recall misplaced memories.\u007F1\u0000\u0007"
 52: 0x00FB [0x23] WAIT_FOR_DIALOG_INTERACTION
 53: 0x00FC [0x1C] WAIT(30* ticks)
 54: 0x00FF [0x8B] SET_EVENT_MARK: Add/update map marker on map 230* at (33.2*, 21.1*), index=6*, name=(no name)
 55: 0x0108 [0x57] CREATE_FRAME_DELAY(delay=0x6165)
 56: 0x010B [0x74] EventEntity->Render.Flags1 |= 0x68
 57: 0x010D [0x65] CALCULATE_3D_DISTANCE(result=0x5F72, entity1=Unknown NPC (ID: 1869636946/0x6F706552), entity2=Unknown NPC (ID: 29810/0x00007472))
 58: 0x0118 [0x1D] PRINT_EVENT_MESSAGE(message_id=12310*)
    → "Need to know the local \u001E\u0005weather\u001E\u0001? Our local meteorologist will be making his paramount presumptions here.\u007F1\u0000\u0007"
 59: 0x011B [0x23] WAIT_FOR_DIALOG_INTERACTION
 60: 0x011C [0x1C] WAIT(30* ticks)
 61: 0x011F [0x8B] SET_EVENT_MARK: Add/update map marker on map 230* at (83.9*, 120.1*), index=7*, name=(no name)
 62: 0x0128 [0x54] WAIT_MAP_SCHEDULER: Wait for scheduler "_Bar" with entities [Unknown NPC (ID: 1702257010/0x65766172), Unknown NPC (ID: 1735289196/0x676E696C)]
 63: 0x0135 [0x64] CALCULATE_DISTANCE: ExtData[1]->WorkLocal[0] = distance between point1(0x1F1D, 0x2380) and point2(0x071C, References[2944])
 64: 0x0140 [0x08] 0x0F80 -= 0x2080
 65: 0x0145 [0x80] LOAD_WAIT(entity=Unknown NPC (ID: 1699905569/0x65528021))
 66: 0x014A [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
 67: 0x014B [0x75] LOAD_ROOM(Unknown mode 116, room=0x7461)
 68: 0x014F [0x69] SET_SOUND_VOLUME: Mute System/Zone/Master
 69: 0x0153 [0x00] END_REQSTACK()

 70: 0x027D [0x21] END_EVENT
 71: 0x027E [0x00] END_REQSTACK()
```

## Data or dead code:

```
# Data Section: 0x0154 (297 bytes)
     0x0154: 00 00 00 00 1D 22 80 23 1C 07 80 8A 1C 07 80 1D
     0x0164: 23 80 23 1C 13 80 89 10 80 1C 07 80 8B 10 80 04
     0x0174: 80 24 80 25 80 49 6D 6D 69 67 72 61 74 69 6F 6E
     0x0184: 00 00 00 00 00 1D 26 80 23 1C 07 80 8B 10 80 09
     0x0194: 80 27 80 28 80 54 65 6C 65 70 6F 72 74 61 74 69
     0x01A4: 6F 6E 00 00 00 1D 29 80 23 1C 07 80 8B 10 80 0D
     0x01B4: 80 2A 80 2B 80 41 72 6D 6F 72 44 65 70 6F 73 69
     0x01C4: 74 6F 72 79 00 1D 2C 80 23 1C 07 80 8B 10 80 0E
     0x01D4: 80 2D 80 2E 80 4D 65 6C 6F 64 79 5F 4D 69 6E 73
     0x01E4: 74 72 65 6C 00 1D 19 80 23 1C 07 80 8B 10 80 0F
     0x01F4: 80 2F 80 30 80 50 75 72 73 75 69 76 61 6E 74 00
     0x0204: 00 00 00 00 00 1D 31 80 23 1C 07 80 8A 1C 07 80
     0x0214: 1D 32 80 23 1C 13 80 89 11 80 1C 07 80 8B 11 80
     0x0224: 0B 80 33 80 34 80 47 6F 6C 64 5F 57 6F 72 6C 64
     0x0234: 5F 50 61 73 73 00 1D 35 80 23 1C 07 80 8B 11 80
     0x0244: 0C 80 36 80 37 80 4D 65 6C 6F 64 79 5F 4D 69 6E
     0x0254: 73 74 72 65 6C 00 1D 19 80 23 1C 07 80 8A 1C 07
     0x0264: 80 03 02 10 01 80 1D 38 80 23 1D 39 80 23 1D 3A
     0x0274: 80 23 1D 3B 80 23 01 7D 02
```