# Event 2001

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 9/97      |
| Offset          | 0x0773    |
| Data Size       | 467 bytes |
| Calculated Size | 467 bytes |
| Instructions    | 10        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0770:          1E F0 FF FF 7F  6F 70 66 00 80 F8 FF FF     .....opf.....
0780: 7F F8 FF FF 7F 74 6C 6B  30 1D 3B 80 23 5E 69 64  .....tlk0.;.#^id
0790: 6C 30 1C 02 80 21 00 45  03 80 F0 FF FF 7F F0 FF  l0...!.E........
07A0: FF 7F 6F 76 6C 31 04 80  45 0A 80 F0 FF FF 7F F0  ..ovl1..E.......
07B0: FF FF 7F 73 30 32 32 04  80 1D 3C 80 23 1A 30 01  ...s022...<.#.0.
07C0: 00 45 03 80 F0 FF FF 7F  F0 FF FF 7F 6F 76 6C 31  .E..........ovl1
07D0: 04 80 45 0A 80 F0 FF FF  7F F0 FF FF 7F 73 30 32  ..E..........s02
07E0: 32 04 80 27 64 F0 FF FF  7F 19 66 00 80 F8 FF FF  2..'d.....f.....
07F0: 7F F8 FF FF 7F 74 6C 6B  30 1D 3D 80 23 5E 69 64  .....tlk0.=.#^id
0800: 6C 30 24 0E 80 04 80 04  80 25 02 00 10 04 80 00  l0$......%......
0810: 05 09 45 07 80 F8 FF FF  7F F8 FF FF 7F 73 31 30  ..E..........s10
0820: 37 04 80 66 00 80 F8 FF  FF 7F F8 FF FF 7F 74 6C  7..f..........tl
0830: 6B 30 1D 3E 80 23 03 02  10 3F 80 1D 40 80 23 52  k0.>.#...?..@.#R
0840: 07 80 F8 FF FF 7F F8 FF  FF 7F 73 31 30 37 02 09  ..........s107..
0850: 10 12 80 00 6A 08 45 07  80 F8 FF FF 7F F8 FF FF  ....j.E.........
0860: 7F 73 31 30 38 04 80 01  97 08 02 09 10 13 80 00  .s108...........
0870: 86 08 45 07 80 F8 FF FF  7F F8 FF FF 7F 73 31 30  ..E..........s10
0880: 38 04 80 01 97 08 45 0A  80 F0 FF FF 7F F0 FF FF  8.....E.........
0890: 7F 73 30 32 33 04 80 1D  14 80 23 5E 69 64 6C 30  .s023.....#^idl0
08A0: 24 15 80 04 80 04 80 25  02 00 10 04 80 00 E4 08  $......%........
08B0: 45 0A 80 F0 FF FF 7F F0  FF FF 7F 73 30 32 34 04  E..........s024.
08C0: 80 66 00 80 F8 FF FF 7F  F8 FF FF 7F 74 6C 6B 30  .f..........tlk0
08D0: 1D 41 80 23 5E 69 64 6C  30 1C 02 80 03 01 10 17  .A.#^idl0.......
08E0: 80 01 02 09 02 00 10 17  80 00 F2 08 1A 12 08 01  ................
08F0: 02 09 02 00 10 18 80 00  02 09 03 01 10 19 80 01  ................
0900: 02 09 01 15 09 02 00 10  17 80 00 15 09 03 01 10  ................
0910: 19 80 01 15 09 45 03 80  F8 FF FF 7F F8 FF FF 7F  .....E..........
0920: 66 64 6F 31 04 80 1C 05  80 46 00 45 03 80 F8 FF  fdo1.....F.E....
0930: FF 7F F8 FF FF 7F 66 64  69 31 04 80 21 00 29 0F  ......fdi1..!.).
0940: 62 60 0E 01 2F 00                                 b`../.          
```

## Opcodes

```
  0: 0x0773 [0x1E] EventEntity looks at LocalPlayer and starts talking
  1: 0x0778 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  2: 0x0779 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
  3: 0x077A [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=20*
  4: 0x0789 [0x1D] PRINT_EVENT_MESSAGE(message_id=7231*)
    → "Finish your current mission first, then come back for another.\u007F1\u0000\u0007"
  5: 0x078C [0x23] WAIT_FOR_DIALOG_INTERACTION
  6: 0x078D [0x5E] EventEntity goes idle (kills current action) (animation: "idl0")
  7: 0x0792 [0x1C] WAIT(30* ticks)
  8: 0x0795 [0x21] END_EVENT
  9: 0x0796 [0x00] END_REQSTACK()
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x0797 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "ovl1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x07A8 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s022" with entities [LocalPlayer, LocalPlayer], work=[130*, 0*]
     0x07B9 [0x1D] PRINT_EVENT_MESSAGE(message_id=9212*)
    → "What, you want the mission from rank one again?\u007F1\u0000\u0007"
     0x07BC [0x23] WAIT_FOR_DIALOG_INTERACTION
     0x07BD [0x1A] CALL_SUBROUTINE(address=0x0130)
     0x07C0 [0x00] END_REQSTACK()
     0x07C1 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "ovl1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x07D2 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s022" with entities [LocalPlayer, LocalPlayer], work=[130*, 0*]
     0x07E3 [0x27] REQ_SET(priority=0x64, entity_id=LocalPlayer, tag_num=0x19)
     0x07EA [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=20*
     0x07F9 [0x1D] PRINT_EVENT_MESSAGE(message_id=7252*)
    → "Bat patrol! How about it? Shouldn't be a problem for an adventurer such as yourself, no?\u007F1\u0000\u0007"
     0x07FC [0x23] WAIT_FOR_DIALOG_INTERACTION
     0x07FD [0x5E] EventEntity goes idle (kills current action) (animation: "idl0")
     0x0802 [0x24] CREATE_DIALOG(message_id=7240*, default_option=0*, option_flags=0*)
    → "Interested?\u0007\u000BTell me more.\u0007Never mind.\u007F1\u0000\u0007"
     0x0809 [0x25] WAIT_DIALOG_SELECT()
     0x080A [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x0905
     0x0812 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s107" with entities [EventEntity, EventEntity], work=[90*, 0*]
     0x0823 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=20*
     0x0832 [0x1D] PRINT_EVENT_MESSAGE(message_id=7253*)
    → "Here's your mission, then. Clear out bats lurking in King Ranperre's Tomb and bring me a fang as proof.\u007F1\u0000\u0007"
     0x0835 [0x23] WAIT_FOR_DIALOG_INTERACTION
     0x0836 [0x03] Work_Zone[2] = 891*
     0x083B [0x1D] PRINT_EVENT_MESSAGE(message_id=7254*)
    → "Bring me \u0001\u0001\u0001 \u0001\u0005$\u0002\u0000\u0000\u0000 and your mission will be a success.\u007F1\u0000\u0007"
     0x083E [0x23] WAIT_FOR_DIALOG_INTERACTION
     0x083F [0x52] END_LOAD_SCHEDULER: End scheduler "s107" with entities [EventEntity, EventEntity], work=90*
     0x084E [0x02] IF !(Work_Zone[9] == 5*) GOTO 0x086A
     0x0856 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s108" with entities [EventEntity, EventEntity], work=[90*, 0*]
     0x0867 [0x01] GOTO 0x0897
     0x086A [0x02] IF !(Work_Zone[9] == 6*) GOTO 0x0886
     0x0872 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s108" with entities [EventEntity, EventEntity], work=[90*, 0*]
     0x0883 [0x01] GOTO 0x0897
     0x0886 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s023" with entities [LocalPlayer, LocalPlayer], work=[130*, 0*]
     0x0897 [0x1D] PRINT_EVENT_MESSAGE(message_id=7243*)
    → "That is all. You'll take the mission then?\u007F1\u0000\u0007"
     0x089A [0x23] WAIT_FOR_DIALOG_INTERACTION
     0x089B [0x5E] EventEntity goes idle (kills current action) (animation: "idl0")
     0x08A0 [0x24] CREATE_DIALOG(message_id=7244*, default_option=0*, option_flags=0*)
    → "Do you accept the mission?\u0007\u000BI accept.\u0007Could you explain again?\u0007No, thank you.\u007F1\u0000\u0007"
     0x08A7 [0x25] WAIT_DIALOG_SELECT()
     0x08A8 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x08E4
     0x08B0 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s024" with entities [LocalPlayer, LocalPlayer], work=[130*, 0*]
     0x08C1 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=20*
     0x08D0 [0x1D] PRINT_EVENT_MESSAGE(message_id=7255*)
    → "Deep in the tomb you'll find Goblins. Take care; I don't want to lose you yet.\u007F1\u0000\u0007"
     0x08D3 [0x23] WAIT_FOR_DIALOG_INTERACTION
     0x08D4 [0x5E] EventEntity goes idle (kills current action) (animation: "idl0")
     0x08D9 [0x1C] WAIT(30* ticks)
     0x08DC [0x03] Work_Zone[1] = 1*
     0x08E1 [0x01] GOTO 0x0902
     0x08E4 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x08F2
     0x08EC [0x1A] CALL_SUBROUTINE(address=0x0812)
     0x08EF [0x01] GOTO 0x0902
     0x08F2 [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x0902
     0x08FA [0x03] Work_Zone[1] = 1073741824*
     0x08FF [0x01] GOTO 0x0902
     0x0902 [0x01] GOTO 0x0915
     0x0905 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x0915
     0x090D [0x03] Work_Zone[1] = 1073741824*
     0x0912 [0x01] GOTO 0x0915
     0x0915 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [EventEntity, EventEntity], work=[200*, 0*]
     0x0926 [0x1C] WAIT(60* ticks)
     0x0929 [0x46] CAMERA_CONTROL: Restore default settings
     0x092B [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [EventEntity, EventEntity], work=[200*, 0*]
     0x093C [0x21] END_EVENT
     0x093D [0x00] END_REQSTACK()
     0x093E [0x29] REQ_SET_WAIT(priority=0x0F, entity_id=Ambrotien (ID: 17719394/0x010E6062), tag_num=0x2F)
     0x0945 [0x00] END_REQSTACK()
```