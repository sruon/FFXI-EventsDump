# Event 3543

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 3/4       |
| Offset          | 0x0095    |
| Data Size       | 823 bytes |
| Calculated Size | 823 bytes |
| Instructions    | 81        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0090:                1E F0 FF  FF 7F 06 01 10 1D 12 80       ...........
00A0: 23 06 05 00 06 02 00 02  02 10 0F 80 00 B2 00 01  #...............
00B0: B9 00 3C 02 00 13 80 0F  80 02 03 10 0F 80 00 C4  ..<.............
00C0: 00 01 CB 00 3C 02 00 14  80 0F 80 03 02 10 15 80  ....<...........
00D0: 24 16 80 05 00 02 00 25  02 00 10 00 80 00 F3 00  $......%........
00E0: 1D 17 80 23 43 00 43 01  03 05 00 00 10 01 CB 00  ...#C.C.........
00F0: 01 CA 03 02 00 10 0F 80  00 29 01 1A A7 04 1D 06  .........)......
0100: 80 23 1D 07 80 23 1D 08  80 23 1D 09 80 23 03 02  .#...#...#...#..
0110: 10 0A 80 1D 0B 80 23 1D  0C 80 23 1A B7 04 03 05  ......#...#.....
0120: 00 00 10 01 CB 00 01 CA  03 02 00 10 18 80 00 66  ...............f
0130: 03 1D 19 80 23 03 05 00  00 10 06 02 10 06 03 10  ....#...........
0140: 06 04 10 06 05 10 06 06  10 06 07 10 06 08 10 06  ................
0150: 09 10 06 00 17 06 01 17  06 02 17 06 03 17 06 04  ................
0160: 17 06 03 00 03 02 17 1A  80 03 03 17 0F 80 03 04  ................
0170: 17 02 17 15 04 17 1B 80  03 00 00 02 17 3F 00 00  .............?..
0180: 1A 80 1B 80 02 00 00 00  80 01 8F 01 0B 04 17 06  ................
0190: 06 00 02 03 17 0F 80 00  A4 01 3C 03 00 00 80 0F  ..........<.....
01A0: 80 01 C4 01 3D 03 00 00  80 0F 80 02 03 17 04 17  ....=...........
01B0: 00 BD 01 3C 03 00 1C 80  0F 80 01 C4 01 3D 03 00  ...<.........=..
01C0: 1C 80 0F 80 03 01 00 03  17 0C 01 00 14 01 00 1B  ................
01D0: 80 9D 0A C7 04 02 10 01  00 1A 80 02 02 10 00 80  ................
01E0: 00 EA 01 3C 03 00 0F 80  0F 80 0B 01 00 9D 0A C7  ...<............
01F0: 04 03 10 01 00 1A 80 02  03 10 00 80 00 06 02 3C  ...............<
0200: 03 00 18 80 0F 80 0B 01  00 9D 0A C7 04 04 10 01  ................
0210: 00 1A 80 02 04 10 00 80  00 22 02 3C 03 00 14 80  .........".<....
0220: 0F 80 0B 01 00 9D 0A C7  04 05 10 01 00 1A 80 02  ................
0230: 05 10 00 80 00 3E 02 3C  03 00 13 80 0F 80 0B 01  .....>.<........
0240: 00 9D 0A C7 04 06 10 01  00 1A 80 02 06 10 00 80  ................
0250: 00 5A 02 3C 03 00 1D 80  0F 80 0B 01 00 9D 0A C7  .Z.<............
0260: 04 07 10 01 00 1A 80 02  07 10 00 80 00 76 02 3C  .............v.<
0270: 03 00 1E 80 0F 80 0B 01  00 9D 0A C7 04 08 10 01  ................
0280: 00 1A 80 02 08 10 00 80  00 92 02 3C 03 00 1F 80  ...........<....
0290: 0F 80 0B 01 00 9D 0A C7  04 09 10 01 00 1A 80 02  ................
02A0: 09 10 00 80 00 AE 02 3C  03 00 20 80 0F 80 0B 01  .......<.. .....
02B0: 00 9D 0A C7 04 00 17 01  00 1A 80 02 00 17 00 80  ................
02C0: 00 CA 02 3C 03 00 21 80  0F 80 0B 01 00 9D 0A C7  ...<..!.........
02D0: 04 01 17 01 00 1A 80 02  01 17 00 80 00 E6 02 3C  ...............<
02E0: 03 00 1B 80 0F 80 D4 03  0F 80 02 10 D4 03 18 80  ................
02F0: 03 10 D4 03 14 80 04 10  D4 03 13 80 05 10 D4 03  ................
0300: 1D 80 06 10 D4 03 1E 80  07 10 D4 03 1F 80 08 10  ................
0310: D4 03 20 80 09 10 D4 03  21 80 00 17 D4 03 1B 80  .. .....!.......
0320: 01 17 D4 02 22 80 06 00  03 00 25 02 00 10 00 80  ....".....%.....
0330: 00 3C 03 0C 03 17 01 8F  01 01 63 03 02 00 10 23  .<........c....#
0340: 80 00 4A 03 01 CB 00 01  63 03 02 00 10 1C 80 00  ..J.....c.......
0350: 5B 03 0B 03 17 01 8F 01  01 63 03 03 06 00 00 10  [........c......
0360: 01 E6 02 01 CA 03 02 00  10 14 80 00 A3 03 1A A7  ................
0370: 04 1D 24 80 23 1D 25 80  23 1D 26 80 23 1D 27 80  ..$.#.%.#.&.#.'.
0380: 23 1D 28 80 23 03 05 17  29 80 27 10 25 62 0E 01  #.(.#...).'.%b..
0390: 03 1D 2A 80 23 1A B7 04  03 05 00 00 10 01 CB 00  ..*.#...........
03A0: 01 CA 03 02 00 10 13 80  00 BF 03 42 03 02 10 15  ...........B....
03B0: 80 1D 2B 80 23 1D 2C 80  23 05 01 10 01 CA 03 02  ..+.#.,.#.......
03C0: 00 10 1D 80 00 CA 03 01  CA 03 21 00              ..........!.    
```

## Opcodes

```
  0: 0x0095 [0x1E] EventEntity looks at LocalPlayer and starts talking
  1: 0x009A [0x06] Work_Zone[1] = 0
  2: 0x009D [0x1D] PRINT_EVENT_MESSAGE(message_id=16287*)
    → "The pink masquerade is proving to be the event of the season, and I am both humbled and honored to serve as your guide.\u0000\u0007"
  3: 0x00A0 [0x23] WAIT_FOR_DIALOG_INTERACTION
  4: 0x00A1 [0x06] ExtData[1]->WorkLocal[5] = 0
  5: 0x00A4 [0x06] ExtData[1]->WorkLocal[2] = 0
  6: 0x00A7 [0x02] IF !(Work_Zone[2] == 1*) GOTO 0x00B2
  7: 0x00AF [0x01] GOTO 0x00B9
  8: 0x00B2 [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=ExtData[1]->WorkLocal[2], bit_index_work_offset=4*, condition_work_offset=1*)

SUBROUTINE_00B9:
  9: 0x00B9 [0x02] IF !(Work_Zone[3] == 1*) GOTO 0x00C4
 10: 0x00C1 [0x01] GOTO 0x00CB
 11: 0x00C4 [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=ExtData[1]->WorkLocal[2], bit_index_work_offset=3*, condition_work_offset=1*)

SUBROUTINE_00CB:
 12: 0x00CB [0x03] Work_Zone[2] = 25711*
 13: 0x00D0 [0x24] CREATE_DIALOG(message_id=16288*, default_option=ExtData[1]->WorkLocal[5], option_flags=ExtData[1]->WorkLocal[2])
    → "Do you have any questions?\u0007\u000BWho are the winning entrants?\u0007Tell me about the costume contest.\u0007What kind of sweets do you want?\u0007Tell me how entrants are judged.\u0007I'd like \u0001\u0001\u0001 \u0001\u0005$\u0002\u0000\u0000\u0000.\u0007None for now.\u007F1\u0000\u0007"
 14: 0x00D7 [0x25] WAIT_DIALOG_SELECT()
 15: 0x00D8 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x00F3
 16: 0x00E0 [0x1D] PRINT_EVENT_MESSAGE(message_id=16289*)
    → "The costumes of the three entrants with the highest scores are displayed here for you to see. First place is in the center, second place is on the left, and third place is on the right. It is possible that multiple entrants have received the same score.\u007F1\u0000\u0007"
 17: 0x00E3 [0x23] WAIT_FOR_DIALOG_INTERACTION
 18: 0x00E4 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
 19: 0x00E6 [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
 20: 0x00E8 [0x03] ExtData[1]->WorkLocal[5] = Work_Zone[0]
 21: 0x00ED [0x01] GOTO 0x00CB

SUBROUTINE_018F:
 22: 0x018F [0x06] ExtData[1]->WorkLocal[6] = 0
 23: 0x0192 [0x02] IF !(Work_Zone_1700[3] == 1*) GOTO 0x01A4
 24: 0x019A [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=ExtData[1]->WorkLocal[3], bit_index_work_offset=0*, condition_work_offset=1*)
 25: 0x01A1 [0x01] GOTO 0x01C4
 26: 0x01A4 [0x3D] CLEAR_BIT_FLAG_CONDITIONAL(target_work_offset=ExtData[1]->WorkLocal[3], bit_index_work_offset=0*, condition_work_offset=1*)
 27: 0x01AB [0x02] IF !(Work_Zone_1700[3] == Work_Zone_1700[4]) GOTO 0x01BD
 28: 0x01B3 [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=ExtData[1]->WorkLocal[3], bit_index_work_offset=12*, condition_work_offset=1*)
 29: 0x01BA [0x01] GOTO 0x01C4
 30: 0x01BD [0x3D] CLEAR_BIT_FLAG_CONDITIONAL(target_work_offset=ExtData[1]->WorkLocal[3], bit_index_work_offset=12*, condition_work_offset=1*)

SUBROUTINE_01C4:
 31: 0x01C4 [0x03] ExtData[1]->WorkLocal[1] = Work_Zone_1700[3]
 32: 0x01C9 [0x0C] ExtData[1]->WorkLocal[1]--
 33: 0x01CC [0x14] ExtData[1]->WorkLocal[1] *= 10*
 34: 0x01D1 [0x9D] IF (0x04C7) ExtData[1]->WorkLocal[1] = Work_Zone[2] // extra=0x801A
 35: 0x01DB [0x02] IF !(Work_Zone[2] == 0*) GOTO 0x01EA
 36: 0x01E3 [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=ExtData[1]->WorkLocal[3], bit_index_work_offset=1*, condition_work_offset=1*)
 37: 0x01EA [0x0B] ExtData[1]->WorkLocal[1]++
 38: 0x01ED [0x9D] IF (0x04C7) ExtData[1]->WorkLocal[1] = Work_Zone[3] // extra=0x801A
 39: 0x01F7 [0x02] IF !(Work_Zone[3] == 0*) GOTO 0x0206
 40: 0x01FF [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=ExtData[1]->WorkLocal[3], bit_index_work_offset=2*, condition_work_offset=1*)
 41: 0x0206 [0x0B] ExtData[1]->WorkLocal[1]++
 42: 0x0209 [0x9D] IF (0x04C7) ExtData[1]->WorkLocal[1] = Work_Zone[4] // extra=0x801A
 43: 0x0213 [0x02] IF !(Work_Zone[4] == 0*) GOTO 0x0222
 44: 0x021B [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=ExtData[1]->WorkLocal[3], bit_index_work_offset=3*, condition_work_offset=1*)
 45: 0x0222 [0x0B] ExtData[1]->WorkLocal[1]++
 46: 0x0225 [0x9D] IF (0x04C7) ExtData[1]->WorkLocal[1] = Work_Zone[5] // extra=0x801A
 47: 0x022F [0x02] IF !(Work_Zone[5] == 0*) GOTO 0x023E
 48: 0x0237 [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=ExtData[1]->WorkLocal[3], bit_index_work_offset=4*, condition_work_offset=1*)
 49: 0x023E [0x0B] ExtData[1]->WorkLocal[1]++
 50: 0x0241 [0x9D] IF (0x04C7) ExtData[1]->WorkLocal[1] = Work_Zone[6] // extra=0x801A
 51: 0x024B [0x02] IF !(Work_Zone[6] == 0*) GOTO 0x025A
 52: 0x0253 [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=ExtData[1]->WorkLocal[3], bit_index_work_offset=5*, condition_work_offset=1*)
 53: 0x025A [0x0B] ExtData[1]->WorkLocal[1]++
 54: 0x025D [0x9D] IF (0x04C7) ExtData[1]->WorkLocal[1] = Work_Zone[7] // extra=0x801A
 55: 0x0267 [0x02] IF !(Work_Zone[7] == 0*) GOTO 0x0276
 56: 0x026F [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=ExtData[1]->WorkLocal[3], bit_index_work_offset=6*, condition_work_offset=1*)
 57: 0x0276 [0x0B] ExtData[1]->WorkLocal[1]++
 58: 0x0279 [0x9D] IF (0x04C7) ExtData[1]->WorkLocal[1] = Work_Zone[8] // extra=0x801A
 59: 0x0283 [0x02] IF !(Work_Zone[8] == 0*) GOTO 0x0292
 60: 0x028B [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=ExtData[1]->WorkLocal[3], bit_index_work_offset=7*, condition_work_offset=1*)
 61: 0x0292 [0x0B] ExtData[1]->WorkLocal[1]++
 62: 0x0295 [0x9D] IF (0x04C7) ExtData[1]->WorkLocal[1] = Work_Zone[9] // extra=0x801A
 63: 0x029F [0x02] IF !(Work_Zone[9] == 0*) GOTO 0x02AE
 64: 0x02A7 [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=ExtData[1]->WorkLocal[3], bit_index_work_offset=8*, condition_work_offset=1*)
 65: 0x02AE [0x0B] ExtData[1]->WorkLocal[1]++
 66: 0x02B1 [0x9D] IF (0x04C7) ExtData[1]->WorkLocal[1] = Work_Zone_1700[0] // extra=0x801A
 67: 0x02BB [0x02] IF !(Work_Zone_1700[0] == 0*) GOTO 0x02CA
 68: 0x02C3 [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=ExtData[1]->WorkLocal[3], bit_index_work_offset=9*, condition_work_offset=1*)
 69: 0x02CA [0x0B] ExtData[1]->WorkLocal[1]++
 70: 0x02CD [0x9D] IF (0x04C7) ExtData[1]->WorkLocal[1] = Work_Zone_1700[1] // extra=0x801A
 71: 0x02D7 [0x02] IF !(Work_Zone_1700[1] == 0*) GOTO 0x02E6
 72: 0x02DF [0x3C] SET_BIT_FLAG_CONDITIONAL(target_work_offset=ExtData[1]->WorkLocal[3], bit_index_work_offset=10*, condition_work_offset=1*)

SUBROUTINE_02E6:
 73: 0x02E6 [0xD4] MAP_QUERY_WINDOW: Prepare buffer configuration A (buffer=[0F 80 02 10 D4 03 18 80...])
 74: 0x0304 [0xD4] MAP_QUERY_WINDOW: Prepare buffer configuration A (buffer=[1E 80 07 10 D4 03 1F 80...])
 75: 0x0322 [0xD4] MAP_QUERY_WINDOW: Test and open query window (flag=0x22, work=[0x0680, 0x0300, 0x2500])
 76: 0x032B [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x033C
 77: 0x0333 [0x0C] Work_Zone_1700[3]--
 78: 0x0336 [0x01] GOTO 0x018F

SUBROUTINE_03CA:
 79: 0x03CA [0x21] END_EVENT
 80: 0x03CB [0x00] END_REQSTACK()
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x00F0 [0x01] GOTO 0x03CA
     0x0126 [0x01] GOTO 0x03CA
# Dead code (unreachable instructions):
     0x0339 [0x01] GOTO 0x0363
     0x0347 [0x01] GOTO 0x0363
     0x0358 [0x01] GOTO 0x0363
     0x0363 [0x01] GOTO 0x03CA
     0x03A0 [0x01] GOTO 0x03CA
```