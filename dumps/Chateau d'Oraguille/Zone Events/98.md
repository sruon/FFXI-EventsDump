# Event 98

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 98/170    |
| Offset          | 0x4455    |
| Data Size       | 187 bytes |
| Calculated Size | 187 bytes |
| Instructions    | 38        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
4450:                20 01 42  4A 0E 90 0E 01 F0 FF FF        .BJ.......
4460: 7F 6F 76 0E 90 0E 01 1A  8D 44 21 00 45 D3 81 F0  .ov......D!.E...
4470: FF FF 7F F0 FF FF 7F 7A  30 30 32 03 80 55 D3 81  .......z002..U..
4480: F0 FF FF 7F F0 FF FF 7F  7A 30 30 32 1B 06 01 10  ........z002....
4490: 42 27 03 0E 90 0E 01 17  2B 0E 90 0E 01 EA 81 23  B'......+......#
44A0: 2B 0E 90 0E 01 EB 81 23  2B 0E 90 0E 01 EC 81 23  +......#+......#
44B0: 27 04 0E 90 0E 01 18 2B  0E 90 0E 01 ED 81 23 24  '......+......#$
44C0: EE 81 0B 80 03 80 25 02  00 10 03 80 00 FC 44 2B  ......%.......D+
44D0: 0E 90 0E 01 EF 81 23 2B  0E 90 0E 01 F0 81 23 27  ......#+......#'
44E0: 04 0E 90 0E 01 19 2B 0E  90 0E 01 F1 81 23 2A 04  ......+......#*.
44F0: 0E 90 0E 01 03 01 10 0B  80 01 0F 45 02 00 10 0B  ...........E....
4500: 80 00 0F 45 2B 0E 90 0E  01 F2 81 23 01 0F 45 1B  ...E+......#..E.
```

## Opcodes

```
  0: 0x4455 [0x20] SET_CLI_EVENT_UC_FLAG: Lock player control
  1: 0x4457 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  2: 0x4458 [0x4A] Chalvatot (ID: 17731598/0x010E900E) looks at LocalPlayer
  3: 0x4461 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  4: 0x4462 [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until Chalvatot (ID: 17731598/0x010E900E) Render.Flags0 and Render.Flags3 conditions are met
  5: 0x4467 [0x1A] CALL_SUBROUTINE(address=0x448D)
  6: 0x446A [0x21] END_EVENT
  7: 0x446B [0x00] END_REQSTACK()

SUBROUTINE_448D:
  8: 0x448D [0x06] Work_Zone[1] = 0
  9: 0x4490 [0x42] SET_CLI_EVENT_CANCEL_DATA()
 10: 0x4491 [0x27] REQ_SET(priority=0x03, entity_id=Chalvatot (ID: 17731598/0x010E900E), tag_num=0x17)
 11: 0x4498 [0x2B] Chalvatot (ID: 17731598/0x010E900E) [7490*]:
    → "Her ring was given to my forefather, and since then it was passed down to me. \u007F1\u0000\u0007"
 12: 0x449F [0x23] WAIT_FOR_DIALOG_INTERACTION
 13: 0x44A0 [0x2B] Chalvatot (ID: 17731598/0x010E900E) [7491*]:
    → "Without a doubt, the ring you hold belonged to her lover, the bard!\u007F1\u0000\u0007"
 14: 0x44A7 [0x23] WAIT_FOR_DIALOG_INTERACTION
 15: 0x44A8 [0x2B] Chalvatot (ID: 17731598/0x010E900E) [7492*]:
    → "I believe that the two rings should be together. Please, could you place them together upon the altar in the Monastic Cavern?\u007F1\u0000\u0007"
 16: 0x44AF [0x23] WAIT_FOR_DIALOG_INTERACTION
 17: 0x44B0 [0x27] REQ_SET(priority=0x04, entity_id=Chalvatot (ID: 17731598/0x010E900E), tag_num=0x18)
 18: 0x44B7 [0x2B] Chalvatot (ID: 17731598/0x010E900E) [7493*]:
    → "Her Majesty's interred there, and I am sure her spirit would be greatly pleased.\u007F1\u0000\u0007"
 19: 0x44BE [0x23] WAIT_FOR_DIALOG_INTERACTION
 20: 0x44BF [0x24] CREATE_DIALOG(message_id=7494*, default_option=1*, option_flags=0*)
    → "Take the rings?\u0007\u000BIt's the least I can do.\u0007I cannot.\u007F1\u0000\u0007"
 21: 0x44C6 [0x25] WAIT_DIALOG_SELECT()
 22: 0x44C7 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x44FC
 23: 0x44CF [0x2B] Chalvatot (ID: 17731598/0x010E900E) [7495*]:
    → "At long last Her Majesty's wish shall come true! I suppose it's not proper and all, but my conviction says she would wish it.\u007F1\u0000\u0007"
 24: 0x44D6 [0x23] WAIT_FOR_DIALOG_INTERACTION
 25: 0x44D7 [0x2B] Chalvatot (ID: 17731598/0x010E900E) [7497*]:
    → "I remain a servant of royalty, you see, so perhaps I behave disloyally. But I would that her final wish come true!\u007F1\u0000\u0007"
 26: 0x44DE [0x23] WAIT_FOR_DIALOG_INTERACTION
 27: 0x44DF [0x27] REQ_SET(priority=0x04, entity_id=Chalvatot (ID: 17731598/0x010E900E), tag_num=0x19)
 28: 0x44E6 [0x2B] Chalvatot (ID: 17731598/0x010E900E) [7496*]:
    → "Now, place the two rings upon the altar in the Monastic Cavern. I believe in you, friend!\u007F1\u0000\u0007"
 29: 0x44ED [0x23] WAIT_FOR_DIALOG_INTERACTION
 30: 0x44EE [0x2A] GET_REQ_LEVEL(level=4, entity_id=Chalvatot (ID: 17731598/0x010E900E))
 31: 0x44F4 [0x03] Work_Zone[1] = 1*
 32: 0x44F9 [0x01] GOTO 0x450F
 33: 0x44FC [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x450F
 34: 0x4504 [0x2B] Chalvatot (ID: 17731598/0x010E900E) [7498*]:
    → "Well, I do believe it best if they were placed together, but the rings are not mine; I'll not order you to!\u007F1\u0000\u0007"
 35: 0x450B [0x23] WAIT_FOR_DIALOG_INTERACTION
 36: 0x450C [0x01] GOTO 0x450F

SUBROUTINE_450F:
 37: 0x450F [0x1B] RETURN
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x446C [0x45] LOAD_SCHEDULED_TASK: Load scheduler "z002" with entities [LocalPlayer, LocalPlayer], work=[207*, 0*]
     0x447D [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "z002" with entities [LocalPlayer, LocalPlayer], work=207*
     0x448C [0x1B] RETURN
```