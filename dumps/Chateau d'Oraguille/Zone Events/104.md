# Event 104

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 113/170   |
| Offset          | 0x6954    |
| Data Size       | 595 bytes |
| Calculated Size | 595 bytes |
| Instructions    | 76        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
6950:             20 01 46 01  42 27 03 2C 90 0E 01 0D       .F.B'.,....
6960: 32 34 80 45 02 80 F0 FF  FF 7F F0 FF FF 7F 66 64  24.E..........fd
6970: 6F 31 03 80 55 02 80 F0  FF FF 7F F0 FF FF 7F 66  o1..U..........f
6980: 64 6F 31 5C 00 92 81 5C  01 92 81 4E 00 40 90 0E  do1\...\...N.@..
6990: 01 4E 00 41 90 0E 01 38  05 80 37 0F 81 10 81 11  .N.A...8..7.....
69A0: 81 5F 80 45 93 81 F0 FF  FF 7F F0 FF FF 7F 63 6D  ._.E..........cm
69B0: 30 30 03 80 45 02 80 F0  FF FF 7F F0 FF FF 7F 66  00..E..........f
69C0: 64 69 31 03 80 45 93 81  F0 FF FF 7F F0 FF FF 7F  di1..E..........
69D0: 62 30 30 30 03 80 1F 00  03 80 12 81 13 81 1F 01  b000............
69E0: 55 93 81 F0 FF FF 7F F0  FF FF 7F 62 30 30 30 37  U..........b0007
69F0: 03 80 14 81 13 81 15 81  27 03 2C 90 0E 01 0E 1C  ........'.,.....
6A00: 0B 80 45 93 81 F0 FF FF  7F F0 FF FF 7F 62 30 30  ..E..........b00
6A10: 31 03 80 55 93 81 F0 FF  FF 7F F0 FF FF 7F 62 30  1..U..........b0
6A20: 30 31 45 93 81 F0 FF FF  7F F0 FF FF 7F 63 6D 30  01E..........cm0
6A30: 31 03 80 1F 00 03 80 16  81 17 81 1F 01 6F 55 93  1............oU.
6A40: 81 F0 FF FF 7F F0 FF FF  7F 63 6D 30 31 45 55 82  .........cm01EU.
6A50: F0 FF FF 7F F0 FF FF 7F  76 30 30 31 03 80 03 03  ........v001....
6A60: 00 07 7F 1A DD 2E 66 04  00 F0 FF FF 7F F0 FF FF  ......f.........
6A70: 7F 73 68 61 30 1C 4E 80  55 55 82 F0 FF FF 7F F0  .sha0.N.UU......
6A80: FF FF 7F 76 30 30 31 27  03 01 90 0E 01 10 2B 01  ...v001'......+.
6A90: 90 0E 01 A0 82 23 27 04  01 90 0E 01 11 45 55 82  .....#'......EU.
6AA0: F0 FF FF 7F F0 FF FF 7F  76 30 30 30 03 80 55 55  ........v000..UU
6AB0: 82 F0 FF FF 7F F0 FF FF  7F 76 30 30 30 2B 01 90  .........v000+..
6AC0: 0E 01 A1 82 23 27 03 01  90 0E 01 10 2B 01 90 0E  ....#'......+...
6AD0: 01 A2 82 23 45 55 82 F0  FF FF 7F F0 FF FF 7F 76  ...#EU.........v
6AE0: 30 30 32 03 80 55 55 82  F0 FF FF 7F F0 FF FF 7F  002..UU.........
6AF0: 76 30 30 32 2B 01 90 0E  01 A3 82 23 27 04 01 90  v002+......#'...
6B00: 0E 01 11 2B 01 90 0E 01  A4 82 23 1C 17 80 03 03  ...+......#.....
6B10: 00 07 7F 1A DD 2E 66 04  00 F0 FF FF 7F F0 FF FF  ......f.........
6B20: 7F 73 68 61 31 53 F0 FF  FF 7F F0 FF FF 7F 73 68  .sha1S........sh
6B30: 61 31 1C 17 80 7D A5 82  45 C6 80 F0 FF FF 7F F0  a1...}..E.......
6B40: FF FF 7F 71 73 74 63 03  80 1C A6 82 45 02 80 F0  ...qstc.....E...
6B50: FF FF 7F F0 FF FF 7F 66  64 6F 32 03 80 1F 00 03  .......fdo2.....
6B60: 80 B0 81 17 81 1F 01 55  02 80 F0 FF FF 7F F0 FF  .......U........
6B70: FF 7F 66 64 6F 32 5C 00  38 80 5C 01 38 80 27 03  ..fdo2\.8.\.8.'.
6B80: 2C 90 0E 01 0D 1C C1 80  27 04 2C 90 0E 01 0E 1C  ,.......'.,.....
6B90: 17 80 45 02 80 F0 FF FF  7F F0 FF FF 7F 66 64 69  ..E..........fdi
6BA0: 32 03 80 46 00 21 00                              2..F.!.         
```

## Opcodes

```
  0: 0x6954 [0x20] SET_CLI_EVENT_UC_FLAG: Lock player control
  1: 0x6956 [0x46] CAMERA_CONTROL: Disable user control
  2: 0x6958 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  3: 0x6959 [0x27] REQ_SET(priority=0x03, entity_id=Door:Great Hall (ID: 17731628/0x010E902C), tag_num=0x0D)
  4: 0x6960 [0x32] ExtData[1]->MainSpeed = 13* * 0.1
  5: 0x6963 [0x45] LOAD_SCHEDULED_TASK(work_offset1=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdo1", work_offset2=0*)
  6: 0x6974 [0x55] WAIT_LOAD_SCHEDULER(work_offset=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdo1")
  7: 0x6983 [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 153*
  8: 0x6987 [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 153*
  9: 0x698B [0x4E] SET_ENTITY_HIDE_FLAG: Show Unnamed NPC (ID: 17731648/0x010E9040)
 10: 0x6991 [0x4E] SET_ENTITY_HIDE_FLAG: Show Unnamed NPC (ID: 17731649/0x010E9041)
 11: 0x6997 [0x38] SET_CLIENT_EVENT_MODE(mode=3*)
 12: 0x699A [0x37] UPDATE_EVENT_POSITION_AND_DIR: x=-0.101*, z=18.599*, y=-1.500*, direction=270.0°*
 13: 0x69A3 [0x45] LOAD_SCHEDULED_TASK(work_offset1=187*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="cm00", work_offset2=0*)
 14: 0x69B4 [0x45] LOAD_SCHEDULED_TASK(work_offset1=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdi1", work_offset2=0*)
 15: 0x69C5 [0x45] LOAD_SCHEDULED_TASK(work_offset1=187*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="b000", work_offset2=0*)
 16: 0x69D6 [0x1F] MOVE_ENTITY: EventEntity moves to X=0.000*, Z=24.396*, Y=-1.499*
 17: 0x69DE [0x1F] MOVE_ENTITY: Update entity position (mode=1)
 18: 0x69E0 [0x55] WAIT_LOAD_SCHEDULER(work_offset=187*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="b000")
 19: 0x69EF [0x37] UPDATE_EVENT_POSITION_AND_DIR: x=0.000*, z=27.529*, y=-1.499*, direction=265.9°*
 20: 0x69F8 [0x27] REQ_SET(priority=0x03, entity_id=Door:Great Hall (ID: 17731628/0x010E902C), tag_num=0x0E)
 21: 0x69FF [0x1C] WAIT(1* ticks)
 22: 0x6A02 [0x45] LOAD_SCHEDULED_TASK(work_offset1=187*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="b001", work_offset2=0*)
 23: 0x6A13 [0x55] WAIT_LOAD_SCHEDULER(work_offset=187*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="b001")
 24: 0x6A22 [0x45] LOAD_SCHEDULED_TASK(work_offset1=187*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="cm01", work_offset2=0*)
 25: 0x6A33 [0x1F] MOVE_ENTITY: EventEntity moves to X=0.000*, Z=37.449*, Y=-2.999*
 26: 0x6A3B [0x1F] MOVE_ENTITY: Update entity position (mode=1)
 27: 0x6A3D [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 28: 0x6A3E [0x55] WAIT_LOAD_SCHEDULER(work_offset=187*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="cm01")
 29: 0x6A4D [0x45] LOAD_SCHEDULED_TASK(work_offset1=242*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="v001", work_offset2=0*)
 30: 0x6A5E [0x03] ExtData[1]->WorkLocal[3] = Entity->Race
 31: 0x6A63 [0x1A] CALL_SUBROUTINE(address=0x2EDD)
 32: 0x6A66 [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=0x0004, entity1=LocalPlayer, entity2=LocalPlayer, action="sha0")
 33: 0x6A75 [0x1C] WAIT(40* ticks)
 34: 0x6A78 [0x55] WAIT_LOAD_SCHEDULER(work_offset=242*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="v001")
 35: 0x6A87 [0x27] REQ_SET(priority=0x03, entity_id=Destin (ID: 17731585/0x010E9001), tag_num=0x10)
 36: 0x6A8E [0x2B] Destin (ID: 17731585/0x010E9001) [6846*]:
    → "Welcome back from your long journey, \u0008. I am pleased to report that Curilla's forces located the holy sword, Lightbringer.\u007F1\u0000\u0007"
 37: 0x6A95 [0x23] WAIT_FOR_DIALOG_INTERACTION
 38: 0x6A96 [0x27] REQ_SET(priority=0x04, entity_id=Destin (ID: 17731585/0x010E9001), tag_num=0x11)
 39: 0x6A9D [0x45] LOAD_SCHEDULED_TASK(work_offset1=242*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="v000", work_offset2=0*)
 40: 0x6AAE [0x55] WAIT_LOAD_SCHEDULER(work_offset=242*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="v000")
 41: 0x6ABD [0x2B] Destin (ID: 17731585/0x010E9001) [6847*]:
    → "According to the writings in our ancient tomes, the scholars feel that the retrieved sword is truly the lost Treasure of the Dragon King.\u007F1\u0000\u0007"
 42: 0x6AC4 [0x23] WAIT_FOR_DIALOG_INTERACTION
 43: 0x6AC5 [0x27] REQ_SET(priority=0x03, entity_id=Destin (ID: 17731585/0x010E9001), tag_num=0x10)
 44: 0x6ACC [0x2B] Destin (ID: 17731585/0x010E9001) [6848*]:
    → "The path leading to this day has been long and treacherous. However, our journey is nearly complete. I do not have the words to express my gratitude for your services.\u007F1\u0000\u0007"
 45: 0x6AD3 [0x23] WAIT_FOR_DIALOG_INTERACTION
 46: 0x6AD4 [0x45] LOAD_SCHEDULED_TASK(work_offset1=242*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="v002", work_offset2=0*)
 47: 0x6AE5 [0x55] WAIT_LOAD_SCHEDULER(work_offset=242*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="v002")
 48: 0x6AF4 [0x2B] Destin (ID: 17731585/0x010E9001) [6849*]:
    → "I thank you, and wish that you might continue your work for the good of San d'Oria long after I have stepped down from the throne.\u007F1\u0000\u0007"
 49: 0x6AFB [0x23] WAIT_FOR_DIALOG_INTERACTION
 50: 0x6AFC [0x27] REQ_SET(priority=0x04, entity_id=Destin (ID: 17731585/0x010E9001), tag_num=0x11)
 51: 0x6B03 [0x2B] Destin (ID: 17731585/0x010E9001) [6850*]:
    → "However, one final ceremony must be held--the true heir to the House of d'Oraguille must be decided. At that time, your service will again be called upon.\u007F1\u0000\u0007"
 52: 0x6B0A [0x23] WAIT_FOR_DIALOG_INTERACTION
 53: 0x6B0B [0x1C] WAIT(30* ticks)
 54: 0x6B0E [0x03] ExtData[1]->WorkLocal[3] = Entity->Race
 55: 0x6B13 [0x1A] CALL_SUBROUTINE(address=0x2EDD)
 56: 0x6B16 [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=0x0004, entity1=LocalPlayer, entity2=LocalPlayer, action="sha1")
 57: 0x6B25 [0x53] WAIT_SCHEDULER_TASK(entity1=LocalPlayer, entity2=LocalPlayer, action_id="sha1")
 58: 0x6B32 [0x1C] WAIT(30* ticks)
 59: 0x6B35 [0x7D] LOAD_START_SCHEDULER_PLAYER(animation_id=33445)
 60: 0x6B38 [0x45] LOAD_SCHEDULED_TASK(work_offset1=201*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="qstc", work_offset2=0*)
 61: 0x6B49 [0x1C] WAIT(230* ticks)
 62: 0x6B4C [0x45] LOAD_SCHEDULED_TASK(work_offset1=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdo2", work_offset2=0*)
 63: 0x6B5D [0x1F] MOVE_ENTITY: EventEntity moves to X=0.000*, Z=32.272*, Y=-2.999*
 64: 0x6B65 [0x1F] MOVE_ENTITY: Update entity position (mode=1)
 65: 0x6B67 [0x55] WAIT_LOAD_SCHEDULER(work_offset=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdo2")
 66: 0x6B76 [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 156*
 67: 0x6B7A [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 156*
 68: 0x6B7E [0x27] REQ_SET(priority=0x03, entity_id=Door:Great Hall (ID: 17731628/0x010E902C), tag_num=0x0D)
 69: 0x6B85 [0x1C] WAIT(90* ticks)
 70: 0x6B88 [0x27] REQ_SET(priority=0x04, entity_id=Door:Great Hall (ID: 17731628/0x010E902C), tag_num=0x0E)
 71: 0x6B8F [0x1C] WAIT(30* ticks)
 72: 0x6B92 [0x45] LOAD_SCHEDULED_TASK(work_offset1=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdi2", work_offset2=0*)
 73: 0x6BA3 [0x46] CAMERA_CONTROL: Restore default settings
 74: 0x6BA5 [0x21] END_EVENT
 75: 0x6BA6 [0x00] END_REQSTACK()
```
