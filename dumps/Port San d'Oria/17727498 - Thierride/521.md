# Event 521

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 8/18      |
| Offset          | 0x0045    |
| Data Size       | 381 bytes |
| Calculated Size | 381 bytes |
| Instructions    | 62        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0040:                46 01 42  75 00 09 80 75 01 27 64       F.Bu...u.'d
0050: F0 FF FF 7F 24 2A 64 F0  FF FF 7F 45 0A 80 F0 FF  ....$*d....E....
0060: FF 7F F0 FF FF 7F 73 30  35 37 0B 80 45 0C 80 F0  ......s057..E...
0070: FF FF 7F F0 FF FF 7F 66  64 69 31 0B 80 38 0D 80  .......fdi1..8..
0080: 1E F0 FF FF 7F 6F 70 5B  07 80 0A 80 0E 01 0A 80  .....op[........
0090: 0E 01 74 6C 6B 30 1D 08  80 23 5E 69 64 6C 30 1C  ..tlk0...#^idl0.
00A0: 07 80 45 0A 80 F0 FF FF  7F F0 FF FF 7F 73 30 36  ..E..........s06
00B0: 31 0B 80 4A 0B 80 0E 01  0C 80 0E 01 6F 76 0B 80  1..J........ov..
00C0: 0E 01 5B 07 80 0B 80 0E  01 0B 80 0E 01 74 6C 6B  ..[..........tlk
00D0: 30 2B 0B 80 0E 01 0E 80  23 1C 07 80 27 65 0B 80  0+......#...'e..
00E0: 0E 01 01 2A 65 0B 80 0E  01 1C 07 80 27 64 F0 FF  ...*e.......'d..
00F0: FF 7F 21 45 0A 80 F0 FF  FF 7F F0 FF FF 7F 73 30  ..!E..........s0
0100: 35 39 0B 80 4A 0C 80 0E  01 0B 80 0E 01 6F 76 0C  59..J........ov.
0110: 80 0E 01 66 0F 80 0C 80  0E 01 0C 80 0E 01 74 6C  ...f..........tl
0120: 6B 30 2B 0C 80 0E 01 10  80 23 1C 07 80 27 66 0C  k0+......#...'f.
0130: 80 0E 01 01 2A 66 0C 80  0E 01 1C 07 80 45 0A 80  ....*f.......E..
0140: F0 FF FF 7F F0 FF FF 7F  73 30 36 30 0B 80 5B 07  ........s060..[.
0150: 80 0B 80 0E 01 0B 80 0E  01 74 6C 6B 30 2B 0B 80  .........tlk0+..
0160: 0E 01 11 80 23 1C 07 80  27 65 0B 80 0E 01 01 2A  ....#...'e.....*
0170: 65 0B 80 0E 01 1C 07 80  45 0A 80 F0 FF FF 7F F0  e.......E.......
0180: FF FF 7F 73 30 36 31 0B  80 66 0F 80 0C 80 0E 01  ...s061..f......
0190: 0C 80 0E 01 74 6C 6B 30  2B 0C 80 0E 01 12 80 23  ....tlk0+......#
01A0: 1C 07 80 2B 0C 80 0E 01  13 80 23 1C 07 80 27 66  ...+......#...'f
01B0: 0C 80 0E 01 01 2A 66 0C  80 0E 01 1C 07 80 46 00  .....*f.......F.
01C0: 21 00                                             !.              
```

## Opcodes

```
  0: 0x0045 [0x46] CAMERA_CONTROL: Disable user control
  1: 0x0047 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  2: 0x0048 [0x75] LOAD_ROOM(Load indoor room, room=365*)
  3: 0x004C [0x75] LOAD_ROOM(No action)
  4: 0x004E [0x27] REQ_SET(priority=0x64, entity_id=LocalPlayer, tag_num=0x24)
  5: 0x0055 [0x2A] GET_REQ_LEVEL(level=100, entity_id=LocalPlayer)
  6: 0x005B [0x45] LOAD_SCHEDULED_TASK(work_offset1=132*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="s057", work_offset2=0*)
  7: 0x006C [0x45] LOAD_SCHEDULED_TASK(work_offset1=200*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="fdi1", work_offset2=0*)
  8: 0x007D [0x38] SET_CLIENT_EVENT_MODE(mode=3*)
  9: 0x0080 [0x1E] EventEntity looks at LocalPlayer and starts talking
 10: 0x0085 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 11: 0x0086 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
 12: 0x0087 [0x5B] LOAD_EXT_SCHEDULER(work_offset=30*, entity1=Thierride (ID: 17727498/0x010E800A), entity2=Thierride (ID: 17727498/0x010E800A), action="tlk0")
 13: 0x0096 [0x1D] PRINT_EVENT_MESSAGE(message_id=7419*)
    → "Welcome. What'll it be?\u007F1\u0000\u0007"
 14: 0x0099 [0x23] WAIT_FOR_DIALOG_INTERACTION
 15: 0x009A [0x5E] EventEntity goes idle (kills current action) (animation: "idl0")
 16: 0x009F [0x1C] WAIT(30* ticks)
 17: 0x00A2 [0x45] LOAD_SCHEDULED_TASK(work_offset1=132*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="s061", work_offset2=0*)
 18: 0x00B3 [0x4A] Gulemont (ID: 17727499/0x010E800B) looks at Ilgusin (ID: 17727500/0x010E800C)
 19: 0x00BC [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 20: 0x00BD [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until Gulemont (ID: 17727499/0x010E800B) Render.Flags0 and Render.Flags3 conditions are met
 21: 0x00C2 [0x5B] LOAD_EXT_SCHEDULER(work_offset=30*, entity1=Gulemont (ID: 17727499/0x010E800B), entity2=Gulemont (ID: 17727499/0x010E800B), action="tlk0")
 22: 0x00D1 [0x2B] Gulemont (ID: 17727499/0x010E800B) [7420*]:
    → "I clearly heard that the knights were planning a strike on those Ghelsba Orcs. Whatever came of that?\u007F1\u0000\u0007"
 23: 0x00D8 [0x23] WAIT_FOR_DIALOG_INTERACTION
 24: 0x00D9 [0x1C] WAIT(30* ticks)
 25: 0x00DC [0x27] REQ_SET(priority=0x65, entity_id=Gulemont (ID: 17727499/0x010E800B), tag_num=0x01)
 26: 0x00E3 [0x2A] GET_REQ_LEVEL(level=101, entity_id=Gulemont (ID: 17727499/0x010E800B))
 27: 0x00E9 [0x1C] WAIT(30* ticks)
 28: 0x00EC [0x27] REQ_SET(priority=0x64, entity_id=LocalPlayer, tag_num=0x21)
 29: 0x00F3 [0x45] LOAD_SCHEDULED_TASK(work_offset1=132*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="s059", work_offset2=0*)
 30: 0x0104 [0x4A] Ilgusin (ID: 17727500/0x010E800C) looks at Gulemont (ID: 17727499/0x010E800B)
 31: 0x010D [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 32: 0x010E [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until Ilgusin (ID: 17727500/0x010E800C) Render.Flags0 and Render.Flags3 conditions are met
 33: 0x0113 [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=20*, entity1=Ilgusin (ID: 17727500/0x010E800C), entity2=Ilgusin (ID: 17727500/0x010E800C), action="tlk0")
 34: 0x0122 [0x2B] Ilgusin (ID: 17727500/0x010E800C) [7421*]:
    → "Well, how could the two princes possibly organize a raid? They can't even agree on the color of the sky!\u007F1\u0000\u0007"
 35: 0x0129 [0x23] WAIT_FOR_DIALOG_INTERACTION
 36: 0x012A [0x1C] WAIT(30* ticks)
 37: 0x012D [0x27] REQ_SET(priority=0x66, entity_id=Ilgusin (ID: 17727500/0x010E800C), tag_num=0x01)
 38: 0x0134 [0x2A] GET_REQ_LEVEL(level=102, entity_id=Ilgusin (ID: 17727500/0x010E800C))
 39: 0x013A [0x1C] WAIT(30* ticks)
 40: 0x013D [0x45] LOAD_SCHEDULED_TASK(work_offset1=132*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="s060", work_offset2=0*)
 41: 0x014E [0x5B] LOAD_EXT_SCHEDULER(work_offset=30*, entity1=Gulemont (ID: 17727499/0x010E800B), entity2=Gulemont (ID: 17727499/0x010E800B), action="tlk0")
 42: 0x015D [0x2B] Gulemont (ID: 17727499/0x010E800B) [7422*]:
    → "Then, is it true that the first prince to quell the Orcs of Ghelsba will inherit the Kingdom?\u007F1\u0000\u0007"
 43: 0x0164 [0x23] WAIT_FOR_DIALOG_INTERACTION
 44: 0x0165 [0x1C] WAIT(30* ticks)
 45: 0x0168 [0x27] REQ_SET(priority=0x65, entity_id=Gulemont (ID: 17727499/0x010E800B), tag_num=0x01)
 46: 0x016F [0x2A] GET_REQ_LEVEL(level=101, entity_id=Gulemont (ID: 17727499/0x010E800B))
 47: 0x0175 [0x1C] WAIT(30* ticks)
 48: 0x0178 [0x45] LOAD_SCHEDULED_TASK(work_offset1=132*, entity1=LocalPlayer, entity2=LocalPlayer, scheduler_id="s061", work_offset2=0*)
 49: 0x0189 [0x66] LOAD_EXT_SCHEDULER_MAIN(work_offset=20*, entity1=Ilgusin (ID: 17727500/0x010E800C), entity2=Ilgusin (ID: 17727500/0x010E800C), action="tlk0")
 50: 0x0198 [0x2B] Ilgusin (ID: 17727500/0x010E800C) [7423*]:
    → "Bah. Simply taking Ghelsba won't make anybody king.\u007F1\u0000\u0007"
 51: 0x019F [0x23] WAIT_FOR_DIALOG_INTERACTION
 52: 0x01A0 [0x1C] WAIT(30* ticks)
 53: 0x01A3 [0x2B] Ilgusin (ID: 17727500/0x010E800C) [7424*]:
    → "Aye, but he'd be a step closer to the throne! Still, it must be in their blood to quarrel.\u007F1\u0000\u0007"
 54: 0x01AA [0x23] WAIT_FOR_DIALOG_INTERACTION
 55: 0x01AB [0x1C] WAIT(30* ticks)
 56: 0x01AE [0x27] REQ_SET(priority=0x66, entity_id=Ilgusin (ID: 17727500/0x010E800C), tag_num=0x01)
 57: 0x01B5 [0x2A] GET_REQ_LEVEL(level=102, entity_id=Ilgusin (ID: 17727500/0x010E800C))
 58: 0x01BB [0x1C] WAIT(30* ticks)
 59: 0x01BE [0x46] CAMERA_CONTROL: Restore default settings
 60: 0x01C0 [0x21] END_EVENT
 61: 0x01C1 [0x00] END_REQSTACK()
```
