# Event 510

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 2/8       |
| Offset          | 0x0001    |
| Data Size       | 446 bytes |
| Calculated Size | 446 bytes |
| Instructions    | 98        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000:    03 00 00 02 10 03 01  10 00 80 1E F0 FF FF 7F   ...............
0010: 6F 70 66 01 80 F8 FF FF  7F F8 FF FF 7F 74 6C 6B  opf..........tlk
0020: 30 1D 02 80 23 5E 69 64  6C 30 02 00 00 03 80 80  0...#^idl0......
0030: 3A 00 03 01 00 04 80 01  4F 00 02 00 00 05 80 80  :.......O.......
0040: 4A 00 03 01 00 06 80 01  4F 00 03 01 00 07 80 24  J.......O......$
0050: 08 80 09 80 01 00 25 02  00 10 09 80 00 8A 00 66  ......%........f
0060: 01 80 F8 FF FF 7F F8 FF  FF 7F 64 69 73 30 1D 0A  ..........dis0..
0070: 80 23 53 F8 FF FF 7F F8  FF FF 7F 64 69 73 30 1C  .#S........dis0.
0080: 01 80 03 01 10 00 80 01  BD 01 02 00 10 0B 80 00  ................
0090: D5 00 66 01 80 F8 FF FF  7F F8 FF FF 7F 74 6C 6B  ..f..........tlk
00A0: 30 1D 0C 80 23 5E 69 64  6C 30 24 0D 80 09 80 09  0...#^idl0$.....
00B0: 80 25 02 00 10 09 80 00  C2 00 03 01 10 09 80 01  .%..............
00C0: D2 00 02 00 10 0B 80 00  D2 00 03 01 10 0B 80 01  ................
00D0: D2 00 01 BD 01 02 00 10  03 80 00 A3 01 1E F0 FF  ................
00E0: FF 7F 6F 70 66 01 80 F8  FF FF 7F F8 FF FF 7F 74  ..opf..........t
00F0: 6C 6B 30 1D 0E 80 23 1D  0F 80 23 5E 69 64 6C 30  lk0...#...#^idl0
0100: 4A 14 80 0E 01 13 80 0E  01 6F 76 13 80 0E 01 66  J........ov....f
0110: 01 80 14 80 0E 01 14 80  0E 01 74 6C 6B 30 2B 14  ..........tlk0+.
0120: 80 0E 01 10 80 23 6B 69  64 6C 30 14 80 0E 01 1E  .....#kidl0.....
0130: 14 80 0E 01 6F 70 1D 11  80 23 1E F0 FF FF 7F 6F  ....op...#.....o
0140: 70 66 01 80 F8 FF FF 7F  F8 FF FF 7F 74 6C 6B 30  pf..........tlk0
0150: 1D 12 80 23 1D 13 80 23  5E 69 64 6C 30 24 14 80  ...#...#^idl0$..
0160: 0B 80 09 80 25 02 00 10  09 80 00 91 01 42 66 01  ....%........Bf.
0170: 80 F8 FF FF 7F F8 FF FF  7F 74 6C 6B 31 1D 15 80  .........tlk1...
0180: 23 1D 16 80 23 1D 17 80  23 03 01 10 03 80 01 A0  #...#...#.......
0190: 01 02 00 10 0B 80 00 A0  01 1D 18 80 23 01 A0 01  ............#...
01A0: 01 BD 01 02 00 10 05 80  00 BD 01 42 03 09 10 19  ...........B....
01B0: 80 1D 1A 80 23 03 01 10  05 80 01 BD 01 21 00     ....#........!. 
```

## Opcodes

```
  0: 0x0001 [0x03] ExtData[1]->WorkLocal[0] = Work_Zone[2]
  1: 0x0006 [0x03] Work_Zone[1] = 1073741824*
  2: 0x000B [0x1E] EventEntity looks at LocalPlayer and starts talking
  3: 0x0010 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  4: 0x0011 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
  5: 0x0012 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=30*
  6: 0x0021 [0x1D] PRINT_EVENT_MESSAGE(message_id=7538*)
    → "Good day! I am Regine. How might I help you?\u007F1\u0000\u0007"
  7: 0x0024 [0x23] WAIT_FOR_DIALOG_INTERACTION
  8: 0x0025 [0x5E] EventEntity goes idle (kills current action) (animation: "idl0")
  9: 0x002A [0x02] IF !(ExtData[1]->WorkLocal[0] == 2*) GOTO 0x003A
 10: 0x0032 [0x03] ExtData[1]->WorkLocal[1] = 8*
 11: 0x0037 [0x01] GOTO 0x004F

SUBROUTINE_003A:
 12: 0x003A [0x02] IF !(ExtData[1]->WorkLocal[0] == 3*) GOTO 0x004A
 13: 0x0042 [0x03] ExtData[1]->WorkLocal[1] = 4*
 14: 0x0047 [0x01] GOTO 0x004F

SUBROUTINE_004A:
 15: 0x004A [0x03] ExtData[1]->WorkLocal[1] = 12*
 16: 0x004F [0x24] CREATE_DIALOG(message_id=7540*, default_option=0*, option_flags=0x01)
    → "How may I help you?\u0007\u000BI forgot why I'm here.\u0007I want to buy magic.\u0007I'm looking for work.\u0007I'm out of flyers.\u007F1\u0000\u0007"
 17: 0x0056 [0x25] WAIT_DIALOG_SELECT()
 18: 0x0057 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x008A
 19: 0x005F [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "dis0" with entities [EventEntity, EventEntity], work=30*
 20: 0x006E [0x1D] PRINT_EVENT_MESSAGE(message_id=7543*)
    → "Now, that won't do. Come back when you remember what brought you here.\u007F1\u0000\u0007"
 21: 0x0071 [0x23] WAIT_FOR_DIALOG_INTERACTION
 22: 0x0072 [0x53] WAIT_SCHEDULER_TASK: Wait for scheduler "dis0" with entities [EventEntity, EventEntity]
 23: 0x007F [0x1C] WAIT(30* ticks)
 24: 0x0082 [0x03] Work_Zone[1] = 1073741824*
 25: 0x0087 [0x01] GOTO 0x01BD

SUBROUTINE_008A:
 26: 0x008A [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x00D5
 27: 0x0092 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=30*
 28: 0x00A1 [0x1D] PRINT_EVENT_MESSAGE(message_id=7541*)
    → "There are two kinds of magic in the world: white that heals wounds, and black that makes them. Which do you choose?\u007F1\u0000\u0007"
 29: 0x00A4 [0x23] WAIT_FOR_DIALOG_INTERACTION
 30: 0x00A5 [0x5E] EventEntity goes idle (kills current action) (animation: "idl0")
 31: 0x00AA [0x24] CREATE_DIALOG(message_id=7542*, default_option=0*, option_flags=0*)
    → "Which do you choose?\u0007\u000BWhite magic.\u0007Black magic.\u007F1\u0000\u0007"
 32: 0x00B1 [0x25] WAIT_DIALOG_SELECT()
 33: 0x00B2 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x00C2
 34: 0x00BA [0x03] Work_Zone[1] = 0*
 35: 0x00BF [0x01] GOTO 0x00D2

SUBROUTINE_00C2:
 36: 0x00C2 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x00D2
 37: 0x00CA [0x03] Work_Zone[1] = 1*
 38: 0x00CF [0x01] GOTO 0x00D2

SUBROUTINE_00D2:
 39: 0x00D2 [0x01] GOTO 0x01BD

SUBROUTINE_00D5:
 40: 0x00D5 [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x01A3
 41: 0x00DD [0x1E] EventEntity looks at LocalPlayer and starts talking
 42: 0x00E2 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 43: 0x00E3 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
 44: 0x00E4 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=30*
 45: 0x00F3 [0x1D] PRINT_EVENT_MESSAGE(message_id=7582*)
    → "For two years we have run this shop, but alas! Hardly a customer in all this time!\u007F1\u0000\u0007"
 46: 0x00F6 [0x23] WAIT_FOR_DIALOG_INTERACTION
 47: 0x00F7 [0x1D] PRINT_EVENT_MESSAGE(message_id=7583*)
    → "We finally decided that perhaps our store is not in a good location.\u007F1\u0000\u0007"
 48: 0x00FA [0x23] WAIT_FOR_DIALOG_INTERACTION
 49: 0x00FB [0x5E] EventEntity goes idle (kills current action) (animation: "idl0")
 50: 0x0100 [0x4A] Rugiette (ID: 17727508/0x010E8014) looks at Regine (ID: 17727507/0x010E8013)
 51: 0x0109 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 52: 0x010A [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until Regine (ID: 17727507/0x010E8013) Render.Flags0 and Render.Flags3 conditions are met
 53: 0x010F [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [Rugiette (ID: 17727508/0x010E8014), Rugiette (ID: 17727508/0x010E8014)], work=30*
 54: 0x011E [0x2B] Rugiette (ID: 17727508/0x010E8014) [7584*]:
    → "Were I a customer, I would never turn from the corridor up above, and come all the way down this dreary stairwell!\u007F1\u0000\u0007"
 55: 0x0125 [0x23] WAIT_FOR_DIALOG_INTERACTION
 56: 0x0126 [0x6B] STOP_AND_IDLE: Rugiette (ID: 17727508/0x010E8014) stops current action and resets to idle (animation="idl0")
 57: 0x012F [0x1E] EventEntity looks at Rugiette (ID: 17727508/0x010E8014) and starts talking
 58: 0x0134 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 59: 0x0135 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
 60: 0x0136 [0x1D] PRINT_EVENT_MESSAGE(message_id=7585*)
    → "Really! Hold your tongue when I speak with a customer, my dear, dear sister!\u007F1\u0000\u0007"
 61: 0x0139 [0x23] WAIT_FOR_DIALOG_INTERACTION
 62: 0x013A [0x1E] EventEntity looks at LocalPlayer and starts talking
 63: 0x013F [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 64: 0x0140 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
 65: 0x0141 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=30*
 66: 0x0150 [0x1D] PRINT_EVENT_MESSAGE(message_id=7586*)
    → "As a matter of fact, I've a request for you.\u007F1\u0000\u0007"
 67: 0x0153 [0x23] WAIT_FOR_DIALOG_INTERACTION
 68: 0x0154 [0x1D] PRINT_EVENT_MESSAGE(message_id=7587*)
    → "I need help passing out flyers for our Magicmart to people in town. I will pay you! Please, will you help?\u007F1\u0000\u0007"
 69: 0x0157 [0x23] WAIT_FOR_DIALOG_INTERACTION
 70: 0x0158 [0x5E] EventEntity goes idle (kills current action) (animation: "idl0")
 71: 0x015D [0x24] CREATE_DIALOG(message_id=7588*, default_option=1*, option_flags=0*)
    → "Pass out flyers?\u0007\u000BI'd love to.\u0007Not now, sorry.\u007F1\u0000\u0007"
 72: 0x0164 [0x25] WAIT_DIALOG_SELECT()
 73: 0x0165 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x0191
 74: 0x016D [0x42] SET_CLI_EVENT_CANCEL_DATA()
 75: 0x016E [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk1" with entities [EventEntity, EventEntity], work=30*
 76: 0x017D [0x1D] PRINT_EVENT_MESSAGE(message_id=7589*)
    → "Here are the flyers, then. Please hand them to people on the streets of San d'Oria. Pass them all out, if you can!\u007F1\u0000\u0007"
 77: 0x0180 [0x23] WAIT_FOR_DIALOG_INTERACTION
 78: 0x0181 [0x1D] PRINT_EVENT_MESSAGE(message_id=7590*)
    → "Give them only to city folk; adventurers seem to find our place without help, and I wouldn't want to waste flyers.\u007F1\u0000\u0007"
 79: 0x0184 [0x23] WAIT_FOR_DIALOG_INTERACTION
 80: 0x0185 [0x1D] PRINT_EVENT_MESSAGE(message_id=7591*)
    → "Thank you! Come back when you've passed out all fifteen flyers. I'll pay you then!\u007F1\u0000\u0007"
 81: 0x0188 [0x23] WAIT_FOR_DIALOG_INTERACTION
 82: 0x0189 [0x03] Work_Zone[1] = 2*
 83: 0x018E [0x01] GOTO 0x01A0

SUBROUTINE_0191:
 84: 0x0191 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x01A0
 85: 0x0199 [0x1D] PRINT_EVENT_MESSAGE(message_id=7592*)
    → "As you wish. But come back if you have a change of heart.\u007F1\u0000\u0007"
 86: 0x019C [0x23] WAIT_FOR_DIALOG_INTERACTION
 87: 0x019D [0x01] GOTO 0x01A0

SUBROUTINE_01A0:
 88: 0x01A0 [0x01] GOTO 0x01BD

SUBROUTINE_01A3:
 89: 0x01A3 [0x02] IF !(Work_Zone[0] == 3*) GOTO 0x01BD
 90: 0x01AB [0x42] SET_CLI_EVENT_CANCEL_DATA()
 91: 0x01AC [0x03] Work_Zone[9] = 10*
 92: 0x01B1 [0x1D] PRINT_EVENT_MESSAGE(message_id=7594*)
    → "You've lost the flyers? Paper and ink are not free, you know. I'll give you one flyer for 
\u0007 gil. Just \u00072Trade\u00073 the money to me.\u007F1\u0000\u0007"
 93: 0x01B4 [0x23] WAIT_FOR_DIALOG_INTERACTION
 94: 0x01B5 [0x03] Work_Zone[1] = 3*
 95: 0x01BA [0x01] GOTO 0x01BD

SUBROUTINE_01BD:
 96: 0x01BD [0x21] END_EVENT
 97: 0x01BE [0x00] END_REQSTACK()
```
