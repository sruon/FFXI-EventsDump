# Event 778

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 4/5       |
| Offset          | 0x06B1    |
| Data Size       | 686 bytes |
| Calculated Size | 686 bytes |
| Instructions    | 154       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
06B0:    42 4A F8 FF FF 7F F0  FF FF 7F 03 02 10 02 80   BJ.............
06C0: 1D 42 80 23 1D 43 80 23  03 01 10 1E 80 43 00 43  .B.#.C.#.....C.C
06D0: 01 02 09 10 00 80 00 75  07 02 02 10 00 80 80 F7  .......u........
06E0: 06 1D 44 80 23 1D 45 80  23 03 01 00 02 10 1A B4  ..D.#.E.#.......
06F0: 03 1A EA 07 01 72 07 02  02 10 08 80 80 15 07 1D  .....r..........
0700: 46 80 23 1D 47 80 23 03  01 00 02 10 1A B4 03 1A  F.#.G.#.........
0710: EA 07 01 72 07 02 02 10  0C 80 80 33 07 1D 48 80  ...r.......3..H.
0720: 23 1D 49 80 23 03 01 00  02 10 1A B4 03 1A EA 07  #.I.#...........
0730: 01 72 07 02 02 10 1D 80  80 51 07 1D 4A 80 23 1D  .r.......Q..J.#.
0740: 4B 80 23 03 01 00 02 10  1A B4 03 1A EA 07 01 72  K.#............r
0750: 07 02 02 10 22 80 80 6F  07 1D 4C 80 23 1D 4D 80  ...."..o..L.#.M.
0760: 23 03 01 00 02 10 1A B4  03 1A EA 07 01 72 07 1A  #............r..
0770: 98 07 01 96 07 02 09 10  4E 80 00 83 07 1A 98 07  ........N.......
0780: 01 96 07 02 09 10 4F 80  00 91 07 1A 98 07 01 96  ......O.........
0790: 07 03 01 10 19 80 21 00  03 16 17 00 80 1D 50 80  ......!.......P.
07A0: 23 1D 51 80 23 03 02 10  52 80 1D 53 80 23 03 0E  #.Q.#...R..S.#..
07B0: 17 52 80 24 54 80 00 80  0C 80 25 02 00 10 00 80  .R.$T.....%.....
07C0: 00 D2 07 1D 55 80 23 03  01 10 2C 80 06 00 00 01  ....U.#...,.....
07D0: E9 07 02 00 10 08 80 00  DD 07 01 E9 07 1D 56 80  ..............V.
07E0: 23 03 01 10 2D 80 06 00  00 1B 1D 57 80 23 03 00  #...-......W.#..
07F0: 00 08 80 06 14 00 02 00  00 00 80 02 5E 09 03 0D  ............^...
0800: 17 01 00 0B 0D 17 D4 03  08 80 03 10 D4 03 0C 80  ................
0810: 04 10 D4 03 1D 80 05 10  D4 03 22 80 06 10 D4 03  ..........".....
0820: 19 80 07 10 D4 03 2C 80  08 10 D4 03 2D 80 09 10  ......,.....-...
0830: D4 03 1E 80 00 17 D4 03  05 80 01 17 D4 03 07 80  ................
0840: 02 17 D4 03 2E 80 03 17  D4 03 2F 80 04 17 D4 03  ........../.....
0850: 30 80 05 17 D4 03 31 80  06 17 D4 03 32 80 07 17  0.....1.....2...
0860: D4 03 33 80 08 17 D4 03  34 80 09 17 D4 03 35 80  ..3.....4.....5.
0870: 0A 17 D4 03 36 80 0B 17  D4 03 37 80 0C 17 D4 02  ....6.....7.....
0880: 58 80 00 80 0E 00 25 02  00 10 00 80 00 DF 08 03  X.....%.........
0890: 14 00 00 10 24 59 80 08  80 00 80 25 02 00 10 00  ....$Y.....%....
08A0: 80 00 C5 08 1D 55 80 23  03 01 10 22 80 40 1E 80  .....U.#...".@..
08B0: 32 80 01 10 00 80 40 33  80 1F 80 01 10 14 00 0C  2.....@3........
08C0: 00 00 01 DC 08 02 00 10  08 80 00 D0 08 01 DC 08  ................
08D0: 1D 56 80 23 0C 00 00 03  01 10 19 80 01 58 09 02  .V.#.........X..
08E0: 00 10 5A 80 00 F6 08 0C  00 00 1D 56 80 23 03 01  ..Z........V.#..
08F0: 10 19 80 01 58 09 03 14  00 00 10 9D 00 E1 04 0E  ....X...........
0900: 17 00 10 93 0E 17 1D 3B  80 23 93 00 80 24 54 80  .......;.#...$T.
0910: 08 80 00 80 25 02 00 10  00 80 00 3E 09 1D 55 80  ....%......>..U.
0920: 23 03 01 10 22 80 40 1E  80 32 80 01 10 0E 17 40  #...".@..2.....@
0930: 33 80 1F 80 01 10 14 00  0C 00 00 01 58 09 02 00  3...........X...
0940: 10 08 80 00 49 09 01 58  09 1D 56 80 23 0C 00 00  ....I..X..V.#...
0950: 03 01 10 19 80 0C 00 00  06 14 00 01 F6 07 1B     ............... 
```

## Opcodes

```
  0: 0x06B1 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x06B2 [0x4A] EventEntity looks at LocalPlayer
  2: 0x06BB [0x03] Work_Zone[2] = 2559*
  3: 0x06C0 [0x1D] PRINT_EVENT_MESSAGE(message_id=8106*)
    → "Let me check the number on your \u0001\u0005#\u0002\u0000\u0000\u0000...\u007F1\u0000\u0007"
  4: 0x06C3 [0x23] WAIT_FOR_DIALOG_INTERACTION
  5: 0x06C4 [0x1D] PRINT_EVENT_MESSAGE(message_id=8107*)
    → "...\u007F1\u0000\u0007"
  6: 0x06C7 [0x23] WAIT_FOR_DIALOG_INTERACTION
  7: 0x06C8 [0x03] Work_Zone[1] = 8*
  8: 0x06CD [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
  9: 0x06CF [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
 10: 0x06D1 [0x02] IF !(Work_Zone[9] == 0*) GOTO 0x0775
 11: 0x06D9 [0x02] IF !(Work_Zone[2] == 0*) GOTO 0x06F7
 12: 0x06E1 [0x1D] PRINT_EVENT_MESSAGE(message_id=8108*)
    → "<Gasp>! \u0007It...it...it's a miracle, kupo!!!\u007F1\u0000\u0007"
 13: 0x06E4 [0x23] WAIT_FOR_DIALOG_INTERACTION
 14: 0x06E5 [0x1D] PRINT_EVENT_MESSAGE(message_id=8109*)
    → "You won a Rank 1 Prize!!!\u0007I-I'm so excited, I-I...k-k-k-kupoooooo!!!\u007F1\u0000\u0007"
 15: 0x06E8 [0x23] WAIT_FOR_DIALOG_INTERACTION
 16: 0x06E9 [0x03] ExtData[1]->WorkLocal[1] = Work_Zone[2]
 17: 0x06EE [0x1A] CALL_SUBROUTINE(address=0x03B4)
 18: 0x06F1 [0x1A] CALL_SUBROUTINE(address=0x07EA)
 19: 0x06F4 [0x01] GOTO 0x0772
 20: 0x06F7 [0x02] IF !(Work_Zone[2] == 1*) GOTO 0x0715
 21: 0x06FF [0x1D] PRINT_EVENT_MESSAGE(message_id=8110*)
    → "Oh my sparkling stars!!!\u0007Th-this is...!!!\u007F1\u0000\u0007"
 22: 0x0702 [0x23] WAIT_FOR_DIALOG_INTERACTION
 23: 0x0703 [0x1D] PRINT_EVENT_MESSAGE(message_id=8111*)
    → "You won a Rank 2 Prize!!!\u0007That's incredible, kupo!!!\u007F1\u0000\u0007"
 24: 0x0706 [0x23] WAIT_FOR_DIALOG_INTERACTION
 25: 0x0707 [0x03] ExtData[1]->WorkLocal[1] = Work_Zone[2]
 26: 0x070C [0x1A] CALL_SUBROUTINE(address=0x03B4)
 27: 0x070F [0x1A] CALL_SUBROUTINE(address=0x07EA)
 28: 0x0712 [0x01] GOTO 0x0772
 29: 0x0715 [0x02] IF !(Work_Zone[2] == 2*) GOTO 0x0733
 30: 0x071D [0x1D] PRINT_EVENT_MESSAGE(message_id=8112*)
    → "Wowsers! Wonderful!\u007F1\u0000\u0007"
 31: 0x0720 [0x23] WAIT_FOR_DIALOG_INTERACTION
 32: 0x0721 [0x1D] PRINT_EVENT_MESSAGE(message_id=8113*)
    → "You won a Rank 3 Prize!\u0007Congratulations, kupo!\u007F1\u0000\u0007"
 33: 0x0724 [0x23] WAIT_FOR_DIALOG_INTERACTION
 34: 0x0725 [0x03] ExtData[1]->WorkLocal[1] = Work_Zone[2]
 35: 0x072A [0x1A] CALL_SUBROUTINE(address=0x03B4)
 36: 0x072D [0x1A] CALL_SUBROUTINE(address=0x07EA)
 37: 0x0730 [0x01] GOTO 0x0772
 38: 0x0733 [0x02] IF !(Work_Zone[2] == 3*) GOTO 0x0751
 39: 0x073B [0x1D] PRINT_EVENT_MESSAGE(message_id=8114*)
    → "Hmmm...!\u007F1\u0000\u0007"
 40: 0x073E [0x23] WAIT_FOR_DIALOG_INTERACTION
 41: 0x073F [0x1D] PRINT_EVENT_MESSAGE(message_id=8115*)
    → "You won a Rank 4 Prize!\u0007Congratulations, kupo!\u007F1\u0000\u0007"
 42: 0x0742 [0x23] WAIT_FOR_DIALOG_INTERACTION
 43: 0x0743 [0x03] ExtData[1]->WorkLocal[1] = Work_Zone[2]
 44: 0x0748 [0x1A] CALL_SUBROUTINE(address=0x03B4)
 45: 0x074B [0x1A] CALL_SUBROUTINE(address=0x07EA)
 46: 0x074E [0x01] GOTO 0x0772
 47: 0x0751 [0x02] IF !(Work_Zone[2] == 4*) GOTO 0x076F
 48: 0x0759 [0x1D] PRINT_EVENT_MESSAGE(message_id=8116*)
    → "Hmmm...\u007F1\u0000\u0007"
 49: 0x075C [0x23] WAIT_FOR_DIALOG_INTERACTION
 50: 0x075D [0x1D] PRINT_EVENT_MESSAGE(message_id=8117*)
    → "You won a Rank 5 Prize!\u0007Well done, kupo.\u007F1\u0000\u0007"
 51: 0x0760 [0x23] WAIT_FOR_DIALOG_INTERACTION
 52: 0x0761 [0x03] ExtData[1]->WorkLocal[1] = Work_Zone[2]
 53: 0x0766 [0x1A] CALL_SUBROUTINE(address=0x03B4)
 54: 0x0769 [0x1A] CALL_SUBROUTINE(address=0x07EA)
 55: 0x076C [0x01] GOTO 0x0772
 56: 0x076F [0x1A] CALL_SUBROUTINE(address=0x0798)

SUBROUTINE_0772:
 57: 0x0772 [0x01] GOTO 0x0796
 58: 0x0775 [0x02] IF !(Work_Zone[9] == 4294967295*) GOTO 0x0783
 59: 0x077D [0x1A] CALL_SUBROUTINE(address=0x0798)
 60: 0x0780 [0x01] GOTO 0x0796
 61: 0x0783 [0x02] IF !(Work_Zone[9] == 4294967294*) GOTO 0x0791
 62: 0x078B [0x1A] CALL_SUBROUTINE(address=0x0798)
 63: 0x078E [0x01] GOTO 0x0796
 64: 0x0791 [0x03] Work_Zone[1] = 5*

SUBROUTINE_0796:
 65: 0x0796 [0x21] END_EVENT
 66: 0x0797 [0x00] END_REQSTACK()

SUBROUTINE_0798:
 67: 0x0798 [0x03] Work_Zone_1700[22] = 0*
 68: 0x079D [0x1D] PRINT_EVENT_MESSAGE(message_id=8118*)
    → "Hm...\u007F1\u0000\u0007"
 69: 0x07A0 [0x23] WAIT_FOR_DIALOG_INTERACTION
 70: 0x07A1 [0x1D] PRINT_EVENT_MESSAGE(message_id=8119*)
    → "I'm sorry, but you got the least-coveted Rank \u000C\u001E[6/4] Prize, kupo.\u007F1\u0000\u0007"
 71: 0x07A4 [0x23] WAIT_FOR_DIALOG_INTERACTION
 72: 0x07A5 [0x03] Work_Zone[2] = 18468*
 73: 0x07AA [0x1D] PRINT_EVENT_MESSAGE(message_id=8127*)
    → "Your consolation prize is \u0001\u0001\u0001 \u0001\u0005$\u0002\u0000\u0000\u0000, kupo!\u007F1\u0000\u0007"
 74: 0x07AD [0x23] WAIT_FOR_DIALOG_INTERACTION
 75: 0x07AE [0x03] Work_Zone_1700[14] = 18468*
 76: 0x07B3 [0x24] CREATE_DIALOG(message_id=8126*, default_option=0*, option_flags=2*)
    → "You chose \u0001\u0001\u0001 \u0001\u0005$\u0002\u0016\u0000\u0000.\u0007\u000BConfirm.\u0007Changed my mind.\u0007Choose later.\u007F1\u0000\u0007"
 77: 0x07BA [0x25] WAIT_DIALOG_SELECT()
 78: 0x07BB [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x07D2
 79: 0x07C3 [0x1D] PRINT_EVENT_MESSAGE(message_id=8123*)
    → "You got it! Just a moment, kupo.\u007F1\u0000\u0007"
 80: 0x07C6 [0x23] WAIT_FOR_DIALOG_INTERACTION
 81: 0x07C7 [0x03] Work_Zone[1] = 6*
 82: 0x07CC [0x06] ExtData[1]->WorkLocal[0] = 0
 83: 0x07CF [0x01] GOTO 0x07E9
 84: 0x07D2 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x07DD
 85: 0x07DA [0x01] GOTO 0x07E9
 86: 0x07DD [0x1D] PRINT_EVENT_MESSAGE(message_id=8124*)
    → "Understood. Please come back when you've made up your mind, kupo.\u007F1\u0000\u0007"
 87: 0x07E0 [0x23] WAIT_FOR_DIALOG_INTERACTION
 88: 0x07E1 [0x03] Work_Zone[1] = 7*
 89: 0x07E6 [0x06] ExtData[1]->WorkLocal[0] = 0

SUBROUTINE_07E9:
 90: 0x07E9 [0x1B] RETURN

SUBROUTINE_07EA:
 91: 0x07EA [0x1D] PRINT_EVENT_MESSAGE(message_id=8120*)
    → "Please choose a prize from the following list, kupo.\u007F1\u0000\u0007"
 92: 0x07ED [0x23] WAIT_FOR_DIALOG_INTERACTION
 93: 0x07EE [0x03] ExtData[1]->WorkLocal[0] = 1*
 94: 0x07F3 [0x06] ExtData[1]->WorkLocal[20] = 0

SUBROUTINE_07F6:
 95: 0x07F6 [0x02] IF !(ExtData[1]->WorkLocal[0] <= 0*) GOTO 0x095E
 96: 0x07FE [0x03] Work_Zone_1700[13] = ExtData[1]->WorkLocal[1]
 97: 0x0803 [0x0B] Work_Zone_1700[13]++
 98: 0x0806 [0xD4] MAP_QUERY_WINDOW: Prepare buffer configuration A (buffer=[08 80 03 10 D4 03 0C 80...])
 99: 0x0824 [0xD4] MAP_QUERY_WINDOW: Prepare buffer configuration A (buffer=[2C 80 08 10 D4 03 2D 80...])
100: 0x0842 [0xD4] MAP_QUERY_WINDOW: Prepare buffer configuration A (buffer=[2E 80 03 17 D4 03 2F 80...])
101: 0x0860 [0xD4] MAP_QUERY_WINDOW: Prepare buffer configuration A (buffer=[33 80 08 17 D4 03 34 80...])
102: 0x087E [0xD4] MAP_QUERY_WINDOW: Test and open query window (flag=0x58, work=[0x80, 0x0E80, 0x2500])
103: 0x0887 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x08DF
104: 0x088F [0x03] ExtData[1]->WorkLocal[20] = Work_Zone[0]
105: 0x0894 [0x24] CREATE_DIALOG(message_id=8125*, default_option=1*, option_flags=0*)
    → "You chose 
\u0000 gil.\u0007\u000BConfirm.\u0007Changed my mind.\u0007Choose later.\u007F1\u0000\u0007"
106: 0x089B [0x25] WAIT_DIALOG_SELECT()
107: 0x089C [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x08C5
108: 0x08A4 [0x1D] PRINT_EVENT_MESSAGE(message_id=8123*)
    → "You got it! Just a moment, kupo.\u007F1\u0000\u0007"
109: 0x08A7 [0x23] WAIT_FOR_DIALOG_INTERACTION
110: 0x08A8 [0x03] Work_Zone[1] = 4*
111: 0x08AD [0x40] SET_BIT_WORK_RANGE(start_bit=8*, end_bit=15*, target=Work_Zone[1], source=0*)
112: 0x08B6 [0x40] SET_BIT_WORK_RANGE(start_bit=16*, end_bit=31*, target=Work_Zone[1], source=ExtData[1]->WorkLocal[20])
113: 0x08BF [0x0C] ExtData[1]->WorkLocal[0]--
114: 0x08C2 [0x01] GOTO 0x08DC
115: 0x08C5 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x08D0
116: 0x08CD [0x01] GOTO 0x08DC
117: 0x08D0 [0x1D] PRINT_EVENT_MESSAGE(message_id=8124*)
    → "Understood. Please come back when you've made up your mind, kupo.\u007F1\u0000\u0007"
118: 0x08D3 [0x23] WAIT_FOR_DIALOG_INTERACTION
119: 0x08D4 [0x0C] ExtData[1]->WorkLocal[0]--
120: 0x08D7 [0x03] Work_Zone[1] = 5*

SUBROUTINE_08DC:
121: 0x08DC [0x01] GOTO 0x0958
122: 0x08DF [0x02] IF !(Work_Zone[0] == 21*) GOTO 0x08F6
123: 0x08E7 [0x0C] ExtData[1]->WorkLocal[0]--
124: 0x08EA [0x1D] PRINT_EVENT_MESSAGE(message_id=8124*)
    → "Understood. Please come back when you've made up your mind, kupo.\u007F1\u0000\u0007"
125: 0x08ED [0x23] WAIT_FOR_DIALOG_INTERACTION
126: 0x08EE [0x03] Work_Zone[1] = 5*
127: 0x08F3 [0x01] GOTO 0x0958
128: 0x08F6 [0x03] ExtData[1]->WorkLocal[20] = Work_Zone[0]
129: 0x08FB [0x9D] Work_Zone_1700[14] = 0x04E1[Work_Zone[0]] // Read WORD
130: 0x0903 [0x93] DISPLAY_ITEM_INFO(item_id=Work_Zone_1700[14])
131: 0x0906 [0x1D] PRINT_EVENT_MESSAGE(message_id=8088*)
    → "\u007F\u0000\u0001\u0001\u0005#\u0002\u0016\u0000\u0000 is a rank 
\u0015 prize, kupo!\u007F1\u0000\u0007"
132: 0x0909 [0x23] WAIT_FOR_DIALOG_INTERACTION
133: 0x090A [0x93] DISPLAY_ITEM_INFO(item_id=0*)
134: 0x090D [0x24] CREATE_DIALOG(message_id=8126*, default_option=1*, option_flags=0*)
    → "You chose \u0001\u0001\u0001 \u0001\u0005$\u0002\u0016\u0000\u0000.\u0007\u000BConfirm.\u0007Changed my mind.\u0007Choose later.\u007F1\u0000\u0007"
135: 0x0914 [0x25] WAIT_DIALOG_SELECT()
136: 0x0915 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x093E
137: 0x091D [0x1D] PRINT_EVENT_MESSAGE(message_id=8123*)
    → "You got it! Just a moment, kupo.\u007F1\u0000\u0007"
138: 0x0920 [0x23] WAIT_FOR_DIALOG_INTERACTION
139: 0x0921 [0x03] Work_Zone[1] = 4*
140: 0x0926 [0x40] SET_BIT_WORK_RANGE(start_bit=8*, end_bit=15*, target=Work_Zone[1], source=Work_Zone_1700[14])
141: 0x092F [0x40] SET_BIT_WORK_RANGE(start_bit=16*, end_bit=31*, target=Work_Zone[1], source=ExtData[1]->WorkLocal[20])
142: 0x0938 [0x0C] ExtData[1]->WorkLocal[0]--
143: 0x093B [0x01] GOTO 0x0958
144: 0x093E [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x0949
145: 0x0946 [0x01] GOTO 0x0958
146: 0x0949 [0x1D] PRINT_EVENT_MESSAGE(message_id=8124*)
    → "Understood. Please come back when you've made up your mind, kupo.\u007F1\u0000\u0007"
147: 0x094C [0x23] WAIT_FOR_DIALOG_INTERACTION
148: 0x094D [0x0C] ExtData[1]->WorkLocal[0]--
149: 0x0950 [0x03] Work_Zone[1] = 5*
150: 0x0955 [0x0C] ExtData[1]->WorkLocal[0]--

SUBROUTINE_0958:
151: 0x0958 [0x06] ExtData[1]->WorkLocal[20] = 0
152: 0x095B [0x01] GOTO 0x07F6
153: 0x095E [0x1B] RETURN
```
