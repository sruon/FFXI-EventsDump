# Event 2

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 3/3       |
| Offset          | 0x001E    |
| Data Size       | 645 bytes |
| Calculated Size | 645 bytes |
| Instructions    | 64        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0010:                                            42 1A                B.
0020: DD 01 46 01 38 01 80 27  10 F0 FF FF 7F 0B 27 10  ..F.8..'......'.
0030: 60 B0 0C 01 01 27 10 61  B0 0C 01 02 27 10 60 B0  `....'.a....'.`.
0040: 0C 01 02 59 05 60 B0 0C  01 01 BA F0 FF FF 7F 02  ...Y.`..........
0050: 80 03 80 04 80 05 80 BA  60 B0 0C 01 06 80 07 80  ........`.......
0060: 04 80 05 80 59 05 61 B0  0C 01 01 BA 61 B0 0C 01  ....Y.a.....a...
0070: 08 80 09 80 0A 80 05 80  80 F0 FF FF 7F 80 60 B0  ..............`.
0080: 0C 01 80 61 B0 0C 01 1C  0B 80 4A 60 B0 0C 01 F0  ...a......J`....
0090: FF FF 7F 6F 76 60 B0 0C  01 1C 0B 80 3A 60 B0 0C  ...ov`......:`..
00A0: 01 01 00 07 01 00 0C 80  4B 60 B0 0C 01 01 00 6F  ........K`.....o
00B0: 76 60 B0 0C 01 1C 0D 80  03 00 00 0E 80 02 00 00  v`..............
00C0: 0F 80 05 E3 00 02 10 80  00 00 04 DB 00 02 00 00  ................
00D0: 11 80 80 DB 00 1A BC 01  01 DB 00 07 00 00 0E 80  ................
00E0: 01 BD 00 03 00 00 0E 80  02 00 00 0F 80 05 03 01  ................
00F0: 02 10 80 00 00 05 FB 00  1A 2B 01 07 00 00 0E 80  .........+......
0100: 01 E8 00 1A DD 01 1C 0D  80 46 00 45 12 80 F0 FF  .........F.E....
0110: FF 7F F0 FF FF 7F 66 64  69 32 10 80 21 00 02 10  ......fdi2..!...
0120: 80 0E 80 00 2A 01 48 13  80 23 1B 02 00 00 0E 80  ....*.H..#......
0130: 80 79 01 45 14 80 F0 FF  FF 7F F0 FF FF 7F 35 30  .y.E..........50
0140: 31 31 10 80 79 00 F0 FF  FF 7F 61 B0 0C 01 6E F0  11..y.....a...n.
0150: FF FF 7F 10 80 99 F0 FF  FF 7F 1A BC 01 29 10 60  .............).`
0160: B0 0C 01 06 1C 15 80 55  14 80 F0 FF FF 7F F0 FF  .......U........
0170: FF 7F 35 30 31 31 01 79  01 1B 45 12 80 F0 FF FF  ..5011.y..E.....
0180: 7F F0 FF FF 7F 66 64 69  30 10 80 55 12 80 F0 FF  .....fdi0..U....
0190: FF 7F F0 FF FF 7F 66 64  69 30 1B 45 12 80 F0 FF  ......fdi0.E....
01A0: FF 7F F0 FF FF 7F 66 64  6F 30 10 80 55 12 80 F0  ......fdo0..U...
01B0: FF FF 7F F0 FF FF 7F 66  64 6F 30 1B 45 12 80 F0  .......fdo0.E...
01C0: FF FF 7F F0 FF FF 7F 66  64 69 31 10 80 55 12 80  .......fdi1..U..
01D0: F0 FF FF 7F F0 FF FF 7F  66 64 69 31 1B 45 12 80  ........fdi1.E..
01E0: F0 FF FF 7F F0 FF FF 7F  66 64 6F 31 10 80 55 12  ........fdo1..U.
01F0: 80 F0 FF FF 7F F0 FF FF  7F 66 64 6F 31 1B 45 16  .........fdo1.E.
0200: 80 F0 FF FF 7F F0 FF FF  7F 77 68 69 31 10 80 55  .........whi1..U
0210: 16 80 F0 FF FF 7F F0 FF  FF 7F 77 68 69 31 1B 45  ..........whi1.E
0220: 16 80 F0 FF FF 7F F0 FF  FF 7F 77 68 6F 31 10 80  ..........who1..
0230: 55 16 80 F0 FF FF 7F F0  FF FF 7F 77 68 6F 31 1B  U..........who1.
0240: 45 16 80 F0 FF FF 7F F0  FF FF 7F 77 68 69 30 10  E..........whi0.
0250: 80 55 16 80 F0 FF FF 7F  F0 FF FF 7F 77 68 69 30  .U..........whi0
0260: 1B 45 16 80 F0 FF FF 7F  F0 FF FF 7F 77 68 6F 30  .E..........who0
0270: 10 80 55 16 80 F0 FF FF  7F F0 FF FF 7F 77 68 6F  ..U..........who
0280: 30 1B 45 17 80 F0 FF FF  7F F0 FF FF 7F 65 66 6F  0.E..........efo
0290: 6E 10 80 55 17 80 F0 FF  FF 7F F0 FF FF 7F 65 66  n..U..........ef
02A0: 6F 6E 1B                                          on.             
```

## Opcodes

```
  0: 0x001E [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x001F [0x1A] CALL_SUBROUTINE(address=0x01DD)
  2: 0x0022 [0x46] CAMERA_CONTROL: Disable user control
  3: 0x0024 [0x38] SET_CLIENT_EVENT_MODE(mode=19*)
  4: 0x0027 [0x27] REQ_SET(priority=0x10, entity_id=LocalPlayer, tag_num=0x0B)
  5: 0x002E [0x27] REQ_SET(priority=0x10, entity_id=??? (ID: 17608800/0x010CB060), tag_num=0x01)
  6: 0x0035 [0x27] REQ_SET(priority=0x10, entity_id=Unnamed NPC (ID: 17608801/0x010CB061), tag_num=0x02)
  7: 0x003C [0x27] REQ_SET(priority=0x10, entity_id=??? (ID: 17608800/0x010CB060), tag_num=0x02)
  8: 0x0043 [0x59] UPDATE_ENTITY_DATA: ??? (ID: 17608800/0x010CB060)->Render.Flags0 |= 0x200000
  9: 0x004A [0xBA] SET_ENTITY_POSITION(entity_id=LocalPlayer, pos_x=558.427*, pos_z=597.417*, pos_y=0.574*, direction=292.6°*)
 10: 0x0057 [0xBA] SET_ENTITY_POSITION(entity_id=References[17576032], pos_x=560.011*, pos_z=600.017*, pos_y=0.574*, direction=292.6°*)
 11: 0x0064 [0x59] UPDATE_ENTITY_DATA: Unnamed NPC (ID: 17608801/0x010CB061)->Render.Flags0 |= 0x200000
 12: 0x006B [0xBA] SET_ENTITY_POSITION(entity_id=References[17576033], pos_x=560.009*, pos_z=600.013*, pos_y=-1.500*, direction=292.6°*)
 13: 0x0078 [0x80] LOAD_WAIT(entity=LocalPlayer)
 14: 0x007D [0x80] LOAD_WAIT(entity=??? (ID: 17608800/0x010CB060))
 15: 0x0082 [0x80] LOAD_WAIT(entity=Unnamed NPC (ID: 17608801/0x010CB061))
 16: 0x0087 [0x1C] WAIT(15* ticks)
 17: 0x008A [0x4A] ??? (ID: 17608800/0x010CB060) looks at LocalPlayer
 18: 0x0093 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 19: 0x0094 [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until ??? (ID: 17608800/0x010CB060) Render.Flags0 and Render.Flags3 conditions are met
 20: 0x0099 [0x1C] WAIT(15* ticks)
 21: 0x009C [0x3A] CONVERT_YAW_TO_BYTE(entity=??? (ID: 17608800/0x010CB060), result_destination=ExtData[1]->WorkLocal[1])
 22: 0x00A3 [0x07] ExtData[1]->WorkLocal[1] += 1024*
 23: 0x00A8 [0x4B] UPDATE_ENTITY_YAW(entity=??? (ID: 17608800/0x010CB060), yaw=0.01°)
 24: 0x00AF [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 25: 0x00B0 [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until ??? (ID: 17608800/0x010CB060) Render.Flags0 and Render.Flags3 conditions are met
 26: 0x00B5 [0x1C] WAIT(30* ticks)
 27: 0x00B8 [0x03] ExtData[1]->WorkLocal[0] = 1*
 28: 0x00BD [0x02] IF !(ExtData[1]->WorkLocal[0] > 3*) GOTO 0x00E3
 29: 0x00C5 [0x02] IF !(0* < ExtData[1]->WorkLocal[0]) GOTO 0x00DB
 30: 0x00CD [0x02] IF !(ExtData[1]->WorkLocal[0] == 2*) GOTO 0x00DB
 31: 0x00D5 [0x1A] CALL_SUBROUTINE(address=0x01BC)
 32: 0x00D8 [0x01] GOTO 0x00DB

SUBROUTINE_00DB:
 33: 0x00DB [0x07] ExtData[1]->WorkLocal[0] += 1*
 34: 0x00E0 [0x01] GOTO 0x00BD
 35: 0x00E3 [0x03] ExtData[1]->WorkLocal[0] = 1*

SUBROUTINE_00E8:
 36: 0x00E8 [0x02] IF !(ExtData[1]->WorkLocal[0] > 3*) GOTO 0x0103
 37: 0x00F0 [0x02] IF !(0* > ExtData[1]->WorkLocal[0]) GOTO 0x00FB
 38: 0x00F8 [0x1A] CALL_SUBROUTINE(address=0x012B)
 39: 0x00FB [0x07] ExtData[1]->WorkLocal[0] += 1*
 40: 0x0100 [0x01] GOTO 0x00E8
 41: 0x0103 [0x1A] CALL_SUBROUTINE(address=0x01DD)
 42: 0x0106 [0x1C] WAIT(30* ticks)
 43: 0x0109 [0x46] CAMERA_CONTROL: Restore default settings
 44: 0x010B [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi2" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 45: 0x011C [0x21] END_EVENT
 46: 0x011D [0x00] END_REQSTACK()

SUBROUTINE_012B:
 47: 0x012B [0x02] IF !(ExtData[1]->WorkLocal[0] == 1*) GOTO 0x0179
 48: 0x0133 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "5011" with entities [LocalPlayer, LocalPlayer], work=[473*, 0*]
 49: 0x0144 [0x79] LocalPlayer looks at Unnamed NPC (ID: 17608801/0x010CB061) (Basic look)
 50: 0x014E [0x6E] LocalPlayer uses emote 0*
 51: 0x0155 [0x99] Wait for LocalPlayer animation to complete
 52: 0x015A [0x1A] CALL_SUBROUTINE(address=0x01BC)
 53: 0x015D [0x29] REQ_SET_WAIT(priority=0x10, entity_id=??? (ID: 17608800/0x010CB060), tag_num=0x06)
 54: 0x0164 [0x1C] WAIT(20* ticks)
 55: 0x0167 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "5011" with entities [LocalPlayer, LocalPlayer], work=473*
 56: 0x0176 [0x01] GOTO 0x0179

SUBROUTINE_0179:
 57: 0x0179 [0x1B] RETURN

SUBROUTINE_01BC:
 58: 0x01BC [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 59: 0x01CD [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=200*
 60: 0x01DC [0x1B] RETURN

SUBROUTINE_01DD:
 61: 0x01DD [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 62: 0x01EE [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=200*
 63: 0x01FD [0x1B] RETURN
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x011E [0x02] IF !(0* == 1*) GOTO 0x012A
     0x0126 [0x48] [System] [7714*]:
    → "\u007F4\u0001\u0000\u0007"
     0x0129 [0x23] WAIT_FOR_DIALOG_INTERACTION
     0x012A [0x1B] RETURN
# Dead code (unreachable instructions):
     0x017A [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi0" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x018B [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdi0" with entities [LocalPlayer, LocalPlayer], work=200*
     0x019A [0x1B] RETURN
     0x019B [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo0" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x01AC [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo0" with entities [LocalPlayer, LocalPlayer], work=200*
     0x01BB [0x1B] RETURN
# Dead code (unreachable instructions):
     0x01FE [0x45] LOAD_SCHEDULED_TASK: Load scheduler "whi1" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
     0x020F [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "whi1" with entities [LocalPlayer, LocalPlayer], work=201*
     0x021E [0x1B] RETURN
     0x021F [0x45] LOAD_SCHEDULED_TASK: Load scheduler "who1" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
     0x0230 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "who1" with entities [LocalPlayer, LocalPlayer], work=201*
     0x023F [0x1B] RETURN
     0x0240 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "whi0" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
     0x0251 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "whi0" with entities [LocalPlayer, LocalPlayer], work=201*
     0x0260 [0x1B] RETURN
     0x0261 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "who0" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
     0x0272 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "who0" with entities [LocalPlayer, LocalPlayer], work=201*
     0x0281 [0x1B] RETURN
     0x0282 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "efon" with entities [LocalPlayer, LocalPlayer], work=[215*, 0*]
     0x0293 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "efon" with entities [LocalPlayer, LocalPlayer], work=215*
     0x02A2 [0x1B] RETURN
```