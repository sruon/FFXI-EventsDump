# Event 4

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 5/17      |
| Offset          | 0x0038    |
| Data Size       | 100 bytes |
| Calculated Size | 100 bytes |
| Instructions    | 28        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0030:                          42 1E F0 FF FF 7F 6F 76          B.....ov
0040: F8 FF FF 7F 1D 02 80 23  1D 04 80 23 48 05 80 1C  .......#...#H...
0050: 06 80 03 01 10 07 80 43  00 43 01 48 08 80 23 24  .......C.C.H..#$
0060: 09 80 07 80 0A 80 25 02  00 10 07 80 00 7A 00 03  ......%......z..
0070: 01 10 0B 80 01 9A 00 01  7A 00 24 0C 80 07 80 0A  ........z.$.....
0080: 80 25 02 00 10 07 80 00  95 00 03 01 10 0B 80 01  .%..............
0090: 9A 00 01 95 00 03 01 10  07 80 21 00              ..........!.    
```

## Opcodes

```
  0: 0x0038 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x0039 [0x1E] EventEntity looks at LocalPlayer and starts talking
  2: 0x003E [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  3: 0x003F [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until EventEntity Render.Flags0 and Render.Flags3 conditions are met
  4: 0x0044 [0x1D] PRINT_EVENT_MESSAGE(message_id=11752*)
    → "Says here you've already gone and joined some other nation's forces.\u007F1\u0000\u0007"
  5: 0x0047 [0x23] WAIT_FOR_DIALOG_INTERACTION
  6: 0x0048 [0x1D] PRINT_EVENT_MESSAGE(message_id=11758*)
    → "But if you've finally come to your senses and decided to return to the Cobras, I think I can pull a few strings...for a price. You're carrying Allied Notes, right?\u007F1\u0000\u0007"
  7: 0x004B [0x23] WAIT_FOR_DIALOG_INTERACTION
  8: 0x004C [0x48] [System] [11759*]:
    → "\u001FyPlease note that upon changing allegiance, you will be required to return the two most prestigious campaign medals you possess. There is no penalty if you have yet to earn any medals.\u007F1\u0000\u0007"
  9: 0x004F [0x1C] WAIT(120* ticks)
 10: 0x0052 [0x03] Work_Zone[1] = 1*
 11: 0x0057 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
 12: 0x0059 [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
 13: 0x005B [0x48] [System] [11761*]:
    → "Exchange 
\u0002 Allied \u007F\u0012\u0002[Note/Notes] to transfer from \u000C\u0000[/the Knights of the Iron Ram/the Fourth Division/the Cobra Unit] to \u000C\u0001[/the Knights of the Iron Ram/the Fourth Division/the Cobra Unit]? You currently possess 
\u0003 \u007F\u0012\u0003[Allied Note/Allied Notes].\u007F1\u0000\u0007"
 14: 0x005E [0x23] WAIT_FOR_DIALOG_INTERACTION
 15: 0x005F [0x24] CREATE_DIALOG(message_id=11762*, default_option=1*, option_flags=0*)
    → "Proceed with the transaction?\u0007\u000BYes.\u0007No.\u007F1\u0000\u0007"
 16: 0x0066 [0x25] WAIT_DIALOG_SELECT()
 17: 0x0067 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x007A
 18: 0x006F [0x03] Work_Zone[1] = 1073741824*
 19: 0x0074 [0x01] GOTO 0x009A

SUBROUTINE_007A:
 20: 0x007A [0x24] CREATE_DIALOG(message_id=11763*, default_option=1*, option_flags=0*)
    → "Are you absolutely sure?\u0007\u000BYes.\u0007No.\u007F1\u0000\u0007"
 21: 0x0081 [0x25] WAIT_DIALOG_SELECT()
 22: 0x0082 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x0095
 23: 0x008A [0x03] Work_Zone[1] = 1073741824*
 24: 0x008F [0x01] GOTO 0x009A

SUBROUTINE_0095:
 25: 0x0095 [0x03] Work_Zone[1] = 1*
 26: 0x009A [0x21] END_EVENT
 27: 0x009B [0x00] END_REQSTACK()
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x0077 [0x01] GOTO 0x007A
# Dead code (unreachable instructions):
     0x0092 [0x01] GOTO 0x0095
```