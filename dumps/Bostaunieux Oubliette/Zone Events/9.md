# Event 9

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 10/10     |
| Offset          | 0x072D    |
| Data Size       | 595 bytes |
| Calculated Size | 595 bytes |
| Instructions    | 64        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0720:                                         4A 0B 71               J.q
0730: 0A 01 F0 FF FF 7F 6F 76  0B 71 0A 01 2B 0B 71 0A  ......ov.q..+.q.
0740: 01 49 80 23 2B 0B 71 0A  01 4A 80 23 24 4B 80 08  .I.#+.q..J.#$K..
0750: 80 01 80 25 02 00 10 01  80 00 EA 08 43 00 43 01  ...%........C.C.
0760: 20 01 46 01 42 45 00 80  F0 FF FF 7F F0 FF FF 7F   .F.BE..........
0770: 66 64 6F 31 01 80 55 00  80 F0 FF FF 7F F0 FF FF  fdo1..U.........
0780: 7F 66 64 6F 31 38 03 80  79 00 F0 FF FF 7F F0 FF  .fdo18..y.......
0790: FF 7F 47 00 4C 80 4D 80  4E 80 4F 80 47 01 37 50  ..G.L.M.N.O.G.7P
07A0: 80 51 80 52 80 53 80 97  01 80 08 80 45 44 80 F0  .Q.R.S......ED..
07B0: FF FF 7F F0 FF FF 7F 71  30 30 30 01 80 55 44 80  .......q000..UD.
07C0: F0 FF FF 7F F0 FF FF 7F  71 30 30 30 03 00 00 87  ........q000....
07D0: 7F 1A EC 08 66 01 00 F0  FF FF 7F F0 FF FF 7F 00  ....f...........
07E0: FE FE FE 45 00 80 F0 FF  FF 7F F0 FF FF 7F 66 64  ...E..........fd
07F0: 69 31 01 80 55 00 80 F0  FF FF 7F F0 FF FF 7F 66  i1..U..........f
0800: 64 69 31 1C 25 80 32 54  80 1F 00 4C 80 4D 80 55  di1.%.2T...L.M.U
0810: 80 1F 01 1C 25 80 29 03  0C 71 0A 01 02 1C 56 80  ....%.)..q....V.
0820: 45 44 80 F0 FF FF 7F F0  FF FF 7F 71 30 30 31 01  ED.........q001.
0830: 80 55 44 80 F0 FF FF 7F  F0 FF FF 7F 71 30 30 31  .UD.........q001
0840: 66 01 00 F0 FF FF 7F F0  FF FF 7F 73 68 61 30 1C  f..........sha0.
0850: 56 80 45 44 80 F0 FF FF  7F F0 FF FF 7F 71 30 30  V.ED.........q00
0860: 32 01 80 55 44 80 F0 FF  FF 7F F0 FF FF 7F 71 30  2..UD.........q0
0870: 30 32 1C 56 80 45 44 80  F0 FF FF 7F F0 FF FF 7F  02.V.ED.........
0880: 71 30 30 33 01 80 55 44  80 F0 FF FF 7F F0 FF FF  q003..UD........
0890: 7F 71 30 30 33 1C 25 80  66 01 00 F0 FF FF 7F F0  .q003.%.f.......
08A0: FF FF 7F 73 68 61 31 53  F0 FF FF 7F F0 FF FF 7F  ...sha1S........
08B0: 73 68 61 31 45 00 80 F0  FF FF 7F F0 FF FF 7F 66  sha1E..........f
08C0: 64 6F 32 01 80 55 00 80  F0 FF FF 7F F0 FF FF 7F  do2..U..........
08D0: 66 64 6F 32 46 00 45 00  80 F0 FF FF 7F F0 FF FF  fdo2F.E.........
08E0: 7F 66 64 69 32 01 80 01  EA 08 21 00 03 01 00 00  .fdi2.....!.....
08F0: 00 02 01 00 56 80 05 01  09 08 01 00 08 80 01 06  ....V...........
0900: 09 08 01 00 1D 80 14 01  00 27 80 07 01 00 57 80  .........'....W.
0910: 1B 03 01 00 00 00 02 01  00 56 80 05 26 09 08 01  .........V..&...
0920: 00 08 80 01 2B 09 08 01  00 1D 80 14 01 00 27 80  ....+.........'.
0930: 07 01 00 58 80 1B 03 01  00 00 00 02 01 00 56 80  ...X..........V.
0940: 05 4B 09 08 01 00 08 80  01 50 09 08 01 00 1D 80  .K.......P......
0950: 14 01 00 27 80 07 01 00  59 80 1B 03 01 00 00 00  ...'....Y.......
0960: 02 01 00 56 80 05 70 09  08 01 00 08 80 01 75 09  ...V..p.......u.
0970: 08 01 00 1D 80 14 01 00  27 80 07 01 00 5A 80 1B  ........'....Z..
```

## Opcodes

```
  0: 0x072D [0x4A] Couchatorage (ID: 17461515/0x010A710B) looks at LocalPlayer
  1: 0x0736 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  2: 0x0737 [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until Couchatorage (ID: 17461515/0x010A710B) Render.Flags0 and Render.Flags3 conditions are met
  3: 0x073C [0x2B] Couchatorage (ID: 17461515/0x010A710B) [7330*]:
    → "In past times, it was said that nobles accused of treason were thrown down there.\u0007They would wander for days through the maze of sewer tunnels, until they would finally collapse from starvation.\u007F1\u0000\u0007"
  4: 0x0743 [0x23] WAIT_FOR_DIALOG_INTERACTION
  5: 0x0744 [0x2B] Couchatorage (ID: 17461515/0x010A710B) [7331*]:
    → "Now terrible beasts prowl through the darkness. If you have the courage, you may enter.\u007F1\u0000\u0007"
  6: 0x074B [0x23] WAIT_FOR_DIALOG_INTERACTION
  7: 0x074C [0x24] CREATE_DIALOG(message_id=7332*, default_option=1*, option_flags=0*)
    → "What will you do?\u0007\u000BOpen the lid and enter.\u0007Stay up here for now.\u007F1\u0000\u0007"
  8: 0x0753 [0x25] WAIT_DIALOG_SELECT()
  9: 0x0754 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x08EA
 10: 0x075C [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
 11: 0x075E [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
 12: 0x0760 [0x20] SET_CLI_EVENT_UC_FLAG: Lock player control
 13: 0x0762 [0x46] CAMERA_CONTROL: Disable user control
 14: 0x0764 [0x42] SET_CLI_EVENT_CANCEL_DATA()
 15: 0x0765 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 16: 0x0776 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=200*
 17: 0x0785 [0x38] SET_CLIENT_EVENT_MODE(mode=19*)
 18: 0x0788 [0x79] LocalPlayer looks at LocalPlayer (Basic look)
 19: 0x0792 [0x47] UPDATE_PLAYER_POS(-18.832*, 19.982*, 1.154*, yaw=185.3°*)
 20: 0x079C [0x47] WAIT_PLAYER_POS_UPDATE
 21: 0x079E [0x37] UPDATE_EVENT_POSITION_AND_DIR: x=-16.691*, z=19.945*, y=-18.000*, direction=180.0°*
 22: 0x07A7 [0x97] SAVE_SET_WIND_VALUES(wind_base=0x8001, wind_width=0x8008)
 23: 0x07AC [0x45] LOAD_SCHEDULED_TASK: Load scheduler "q000" with entities [LocalPlayer, LocalPlayer], work=[67*, 0*]
 24: 0x07BD [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "q000" with entities [LocalPlayer, LocalPlayer], work=67*
 25: 0x07CC [0x03] ExtData[1]->WorkLocal[0] = LocalPlayer->Race
 26: 0x07D1 [0x1A] CALL_SUBROUTINE(address=0x08EC)
 27: 0x07D4 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler 0xFEFEFE00 with entities [LocalPlayer, LocalPlayer], work=ExtData[1]->WorkLocal[1]
 28: 0x07E3 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 29: 0x07F4 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=200*
 30: 0x0803 [0x1C] WAIT(60* ticks)
 31: 0x0806 [0x32] ExtData[1]->MainSpeed = 13* * 0.1
 32: 0x0809 [0x1F] MOVE_ENTITY: EventEntity moves to X=-18.832*, Z=19.982*, Y=-17.999*
 33: 0x0811 [0x1F] MOVE_ENTITY: Update entity position (mode=1)
 34: 0x0813 [0x1C] WAIT(60* ticks)
 35: 0x0816 [0x29] REQ_SET_WAIT(priority=0x03, entity_id=Sewer Lid (ID: 17461516/0x010A710C), tag_num=0x02)
 36: 0x081D [0x1C] WAIT(5* ticks)
 37: 0x0820 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "q001" with entities [LocalPlayer, LocalPlayer], work=[67*, 0*]
 38: 0x0831 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "q001" with entities [LocalPlayer, LocalPlayer], work=67*
 39: 0x0840 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "sha0" with entities [LocalPlayer, LocalPlayer], work=ExtData[1]->WorkLocal[1]
 40: 0x084F [0x1C] WAIT(5* ticks)
 41: 0x0852 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "q002" with entities [LocalPlayer, LocalPlayer], work=[67*, 0*]
 42: 0x0863 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "q002" with entities [LocalPlayer, LocalPlayer], work=67*
 43: 0x0872 [0x1C] WAIT(5* ticks)
 44: 0x0875 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "q003" with entities [LocalPlayer, LocalPlayer], work=[67*, 0*]
 45: 0x0886 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "q003" with entities [LocalPlayer, LocalPlayer], work=67*
 46: 0x0895 [0x1C] WAIT(60* ticks)
 47: 0x0898 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "sha1" with entities [LocalPlayer, LocalPlayer], work=ExtData[1]->WorkLocal[1]
 48: 0x08A7 [0x53] WAIT_SCHEDULER_TASK: Wait for scheduler "sha1" with entities [LocalPlayer, LocalPlayer]
 49: 0x08B4 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo2" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 50: 0x08C5 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo2" with entities [LocalPlayer, LocalPlayer], work=200*
 51: 0x08D4 [0x46] CAMERA_CONTROL: Restore default settings
 52: 0x08D6 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi2" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 53: 0x08E7 [0x01] GOTO 0x08EA

SUBROUTINE_08EA:
 54: 0x08EA [0x21] END_EVENT
 55: 0x08EB [0x00] END_REQSTACK()

SUBROUTINE_08EC:
 56: 0x08EC [0x03] ExtData[1]->WorkLocal[1] = ExtData[1]->WorkLocal[0]
 57: 0x08F1 [0x02] IF !(ExtData[1]->WorkLocal[1] > 5*) GOTO 0x0901
 58: 0x08F9 [0x08] ExtData[1]->WorkLocal[1] -= 1*
 59: 0x08FE [0x01] GOTO 0x0906
 60: 0x0901 [0x08] ExtData[1]->WorkLocal[1] -= 2*
 61: 0x0906 [0x14] ExtData[1]->WorkLocal[1] *= 10*
 62: 0x090B [0x07] ExtData[1]->WorkLocal[1] += 9*
 63: 0x0910 [0x1B] RETURN
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x0911 [0x03] ExtData[1]->WorkLocal[1] = ExtData[1]->WorkLocal[0]
     0x0916 [0x02] IF !(ExtData[1]->WorkLocal[1] > 5*) GOTO 0x0926
     0x091E [0x08] ExtData[1]->WorkLocal[1] -= 1*
     0x0923 [0x01] GOTO 0x092B
     0x0926 [0x08] ExtData[1]->WorkLocal[1] -= 2*
     0x092B [0x14] ExtData[1]->WorkLocal[1] *= 10*
     0x0930 [0x07] ExtData[1]->WorkLocal[1] += 70*
     0x0935 [0x1B] RETURN
     0x0936 [0x03] ExtData[1]->WorkLocal[1] = ExtData[1]->WorkLocal[0]
     0x093B [0x02] IF !(ExtData[1]->WorkLocal[1] > 5*) GOTO 0x094B
     0x0943 [0x08] ExtData[1]->WorkLocal[1] -= 1*
     0x0948 [0x01] GOTO 0x0950
     0x094B [0x08] ExtData[1]->WorkLocal[1] -= 2*
     0x0950 [0x14] ExtData[1]->WorkLocal[1] *= 10*
     0x0955 [0x07] ExtData[1]->WorkLocal[1] += 140*
     0x095A [0x1B] RETURN
     0x095B [0x03] ExtData[1]->WorkLocal[1] = ExtData[1]->WorkLocal[0]
     0x0960 [0x02] IF !(ExtData[1]->WorkLocal[1] > 5*) GOTO 0x0970
     0x0968 [0x08] ExtData[1]->WorkLocal[1] -= 1*
     0x096D [0x01] GOTO 0x0975
     0x0970 [0x08] ExtData[1]->WorkLocal[1] -= 2*
     0x0975 [0x14] ExtData[1]->WorkLocal[1] *= 10*
     0x097A [0x07] ExtData[1]->WorkLocal[1] += 210*
     0x097F [0x1B] RETURN
```