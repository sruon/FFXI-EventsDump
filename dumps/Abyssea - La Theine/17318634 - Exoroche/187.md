# Event 187

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 3/4       |
| Offset          | 0x0039    |
| Data Size       | 130 bytes |
| Calculated Size | 130 bytes |
| Instructions    | 29        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0030:                             20 01 42 03 00 00 09            .B....
0040: 10 1E F0 FF FF 7F 6F 70  66 00 80 F8 FF FF 7F F8  ......opf.......
0050: FF FF 7F 74 6C 6B 30 03  02 10 00 00 1D 08 80 23  ...tlk0........#
0060: 1D 09 80 23 1D 0A 80 23  02 00 00 02 80 80 78 00  ...#...#......x.
0070: 03 01 10 0B 80 01 A8 00  02 00 00 03 80 80 88 00  ................
0080: 03 01 10 0C 80 01 A8 00  02 00 00 04 80 80 98 00  ................
0090: 03 01 10 0D 80 01 A8 00  02 00 00 05 80 80 A8 00  ................
00A0: 03 01 10 0E 80 01 A8 00  45 0F 80 F0 FF FF 7F F0  ........E.......
00B0: FF FF 7F 71 73 74 63 10  80 21 00                 ...qstc..!.     
```

## Opcodes

```
  0: 0x0039 [0x20] SET_CLI_EVENT_UC_FLAG: Lock player control
  1: 0x003B [0x42] SET_CLI_EVENT_CANCEL_DATA()
  2: 0x003C [0x03] ExtData[1]->WorkLocal[0] = Work_Zone[9]
  3: 0x0041 [0x1E] EventEntity looks at LocalPlayer and starts talking
  4: 0x0046 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  5: 0x0047 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
  6: 0x0048 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=20*
  7: 0x0057 [0x03] Work_Zone[2] = ExtData[1]->WorkLocal[0]
  8: 0x005C [0x1D] PRINT_EVENT_MESSAGE(message_id=7991*)
    → "Ah, you've brought me \u0001\u0001\u0001 \u0001\u0005$\u0002\u0000\u0000\u0000. You have my thanks.\u007F1\u0000\u0007"
  9: 0x005F [0x23] WAIT_FOR_DIALOG_INTERACTION
 10: 0x0060 [0x1D] PRINT_EVENT_MESSAGE(message_id=7992*)
    → "This should keep our soldiers from having to charge into battle with naught but their smallclothes...if only for a while.\u007F1\u0000\u0007"
 11: 0x0063 [0x23] WAIT_FOR_DIALOG_INTERACTION
 12: 0x0064 [0x1D] PRINT_EVENT_MESSAGE(message_id=7993*)
    → "For now, please accept this as a small token of my gratitude.\u0007Should you fish up any more equipment, I ask you to bring them to me with all haste. Lives are depending on it.\u007F1\u0000\u0007"
 13: 0x0067 [0x23] WAIT_FOR_DIALOG_INTERACTION
 14: 0x0068 [0x02] IF !(ExtData[1]->WorkLocal[0] == 16188*) GOTO 0x0078
 15: 0x0070 [0x03] Work_Zone[1] = 1*
 16: 0x0075 [0x01] GOTO 0x00A8

SUBROUTINE_0078:
 17: 0x0078 [0x02] IF !(ExtData[1]->WorkLocal[0] == 18962*) GOTO 0x0088
 18: 0x0080 [0x03] Work_Zone[1] = 2*
 19: 0x0085 [0x01] GOTO 0x00A8

SUBROUTINE_0088:
 20: 0x0088 [0x02] IF !(ExtData[1]->WorkLocal[0] == 19308*) GOTO 0x0098
 21: 0x0090 [0x03] Work_Zone[1] = 3*
 22: 0x0095 [0x01] GOTO 0x00A8

SUBROUTINE_0098:
 23: 0x0098 [0x02] IF !(ExtData[1]->WorkLocal[0] == 19283*) GOTO 0x00A8
 24: 0x00A0 [0x03] Work_Zone[1] = 4*
 25: 0x00A5 [0x01] GOTO 0x00A8

SUBROUTINE_00A8:
 26: 0x00A8 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "qstc" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
 27: 0x00B9 [0x21] END_EVENT
 28: 0x00BA [0x00] END_REQSTACK()
```
