# Event 165

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 3/5       |
| Offset          | 0x001D    |
| Data Size       | 185 bytes |
| Calculated Size | 185 bytes |
| Instructions    | 47        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0010:                                         20 01 42                .B
0020: 03 02 10 02 80 03 03 10  03 80 03 00 00 09 10 06  ................
0030: 01 10 1E F0 FF FF 7F 6F  70 66 00 80 F8 FF FF 7F  .......opf......
0040: F8 FF FF 7F 74 6C 6B 30  02 00 00 04 80 00 D0 00  ....tlk0........
0050: 1D 05 80 23 24 06 80 07  80 04 80 25 02 00 10 04  ...#$......%....
0060: 80 00 6E 00 1D 08 80 23  01 80 00 01 80 00 02 00  ..n....#........
0070: 10 07 80 00 80 00 1D 09  80 23 01 D4 00 01 80 00  .........#......
0080: 24 0A 80 07 80 04 80 25  02 00 10 04 80 00 96 00  $......%........
0090: 01 A4 00 01 A4 00 02 00  10 07 80 00 A4 00 01 A4  ................
00A0: 00 01 A4 00 03 01 10 07  80 1D 0B 80 23 1D 0C 80  ............#...
00B0: 23 1D 0D 80 23 1D 0E 80  23 1D 0F 80 23 1D 10 80  #...#...#...#...
00C0: 23 1D 11 80 23 1D 12 80  23 1D 13 80 23 01 D4 00  #...#...#...#...
00D0: 1D 14 80 23 21 00                                 ...#!.          
```

## Opcodes

```
  0: 0x001D [0x20] SET_CLI_EVENT_UC_FLAG: Lock player control
  1: 0x001F [0x42] SET_CLI_EVENT_CANCEL_DATA()
  2: 0x0020 [0x03] Work_Zone[2] = 2874*
  3: 0x0025 [0x03] Work_Zone[3] = 2*
  4: 0x002A [0x03] ExtData[1]->WorkLocal[0] = Work_Zone[9]
  5: 0x002F [0x06] Work_Zone[1] = 0
  6: 0x0032 [0x1E] EventEntity looks at LocalPlayer and starts talking
  7: 0x0037 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  8: 0x0038 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
  9: 0x0039 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=20*
 10: 0x0048 [0x02] IF !(ExtData[1]->WorkLocal[0] == 0*) GOTO 0x00D0
 11: 0x0050 [0x1D] PRINT_EVENT_MESSAGE(message_id=8049*)
    → "Your selfless deeds on behalf of the survivor community have done much to forward our cause, so I'm told.\u0007Now my turn is come to entreat your assistance. Will you hear my plea?\u007F1\u0000\u0007"
 12: 0x0053 [0x23] WAIT_FOR_DIALOG_INTERACTION
 13: 0x0054 [0x24] CREATE_DIALOG(message_id=8050*, default_option=1*, option_flags=0*)
    → "Hear his plea?\u0007\u000BI'm all ears.\u0007Not interested, sorry.\u007F1\u0000\u0007"
 14: 0x005B [0x25] WAIT_DIALOG_SELECT()
 15: 0x005C [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x006E
 16: 0x0064 [0x1D] PRINT_EVENT_MESSAGE(message_id=8052*)
    → "You have my boundless gratitude!\u0007Now then, know you of a woman called Curilla presently in convalescence at the northern encampment?\u007F1\u0000\u0007"
 17: 0x0067 [0x23] WAIT_FOR_DIALOG_INTERACTION
 18: 0x0068 [0x01] GOTO 0x0080

SUBROUTINE_0080:
 19: 0x0080 [0x24] CREATE_DIALOG(message_id=8053*, default_option=1*, option_flags=0*)
    → "Do you know Curilla?\u0007\u000BI surely do.\u0007Cura...who?\u007F1\u0000\u0007"
 20: 0x0087 [0x25] WAIT_DIALOG_SELECT()
 21: 0x0088 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x0096
 22: 0x0090 [0x01] GOTO 0x00A4

SUBROUTINE_00A4:
 23: 0x00A4 [0x03] Work_Zone[1] = 1*
 24: 0x00A9 [0x1D] PRINT_EVENT_MESSAGE(message_id=8054*)
    → "To call her the stone upon which San d'Oria's proud order of Temple Knights is built would be no exaggeration.\u007F1\u0000\u0007"
 25: 0x00AC [0x23] WAIT_FOR_DIALOG_INTERACTION
 26: 0x00AD [0x1D] PRINT_EVENT_MESSAGE(message_id=8055*)
    → "Were it not for Curilla's inspiring fortitude, we wouldn't still be here this day, waging resistance against the Abyssean hordes.\u007F1\u0000\u0007"
 27: 0x00B0 [0x23] WAIT_FOR_DIALOG_INTERACTION
 28: 0x00B1 [0x1D] PRINT_EVENT_MESSAGE(message_id=8056*)
    → "With her helming our defenses, we had successfully repelled the enemy on a number of occasions. But one fateful day, they came at us with such numbers as would make a grown man's bowels turn to water. It was all Curilla could do to buy time for the civilians to flee to safety before she and the soldiers were overwhelmed.\u007F1\u0000\u0007"
 29: 0x00B4 [0x23] WAIT_FOR_DIALOG_INTERACTION
 30: 0x00B5 [0x1D] PRINT_EVENT_MESSAGE(message_id=8057*)
    → "Thinking her forever taken from us, we lamented the death of a great heroine. So it was to our great joy when we discovered her alive, if severely weakened. She took a grievous wound which left her blind in one eye, but otherwise has been returned to sound physical health.\u007F1\u0000\u0007"
 31: 0x00B8 [0x23] WAIT_FOR_DIALOG_INTERACTION
 32: 0x00B9 [0x1D] PRINT_EVENT_MESSAGE(message_id=8058*)
    → "But alas, all is not well. While she is with us in body, the trauma of the ordeal seems to have reft her mind from her. She has no recollection of her own identity, let alone recent events, and will not say so much as a single word to any of us.\u007F1\u0000\u0007"
 33: 0x00BC [0x23] WAIT_FOR_DIALOG_INTERACTION
 34: 0x00BD [0x1D] PRINT_EVENT_MESSAGE(message_id=8059*)
    → "I spent many a sleepless night researching a cure for her affliction, and eventually found the knowledge I sought in a tome of healing salvaged from the Kingdom library: a medicine concocted with \u0001\u0005%\u0002\u0000\u0000\u0000. Yet the procurement of this key ingredient eludes me.\u007F1\u0000\u0007"
 35: 0x00C0 [0x23] WAIT_FOR_DIALOG_INTERACTION
 36: 0x00C1 [0x1D] PRINT_EVENT_MESSAGE(message_id=8060*)
    → "This brings us back to the matter of my plea. I would have you find the \u0001\u0005%\u0002\u0000\u0000\u0000 we need.\u007F1\u0000\u0007"
 37: 0x00C4 [0x23] WAIT_FOR_DIALOG_INTERACTION
 38: 0x00C5 [0x1D] PRINT_EVENT_MESSAGE(message_id=8061*)
    → "According to the tome of healing, 
\u0001 \u0001	)\u0002\u0001\u0000\u0000\u0002\u0000\u0000\u0000 are required to concoct the medicine.\u007F1\u0000\u0007"
 39: 0x00C8 [0x23] WAIT_FOR_DIALOG_INTERACTION
 40: 0x00C9 [0x1D] PRINT_EVENT_MESSAGE(message_id=8062*)
    → "For the longest time, Curilla was the beating heart of our resistance effort. Bereft of her leadership and military prowess, our defenses may as well be made of clay. Our survival depends on your finding what we need!\u007F1\u0000\u0007"
 41: 0x00CC [0x23] WAIT_FOR_DIALOG_INTERACTION
 42: 0x00CD [0x01] GOTO 0x00D4
 43: 0x00D0 [0x1D] PRINT_EVENT_MESSAGE(message_id=8066*)
    → "Ah, 'tis heartening to see you again. I've learned from the tome of healing that \u0001\u0005%\u0002\u0000\u0000\u0000 have myriad other applications.\u0007Should you come by any more in your journeys, be sure to bring them to me.\u007F1\u0000\u0007"
 44: 0x00D3 [0x23] WAIT_FOR_DIALOG_INTERACTION

SUBROUTINE_00D4:
 45: 0x00D4 [0x21] END_EVENT
 46: 0x00D5 [0x00] END_REQSTACK()
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x006B [0x01] GOTO 0x0080
     0x007D [0x01] GOTO 0x0080
# Dead code (unreachable instructions):
     0x0093 [0x01] GOTO 0x00A4
     0x00A1 [0x01] GOTO 0x00A4
```