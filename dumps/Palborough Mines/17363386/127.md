# Event 127

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 3/4       |
| Offset          | 0x05F1    |
| Data Size       | 826 bytes |
| Calculated Size | 826 bytes |
| Instructions    | 101       |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
05F0:    42 45 00 80 F0 FF FF  7F F0 FF FF 7F 66 64 6F   BE..........fdo
0600: 31 01 80 55 00 80 F0 FF  FF 7F F0 FF FF 7F 66 64  1..U..........fd
0610: 6F 31 46 01 38 02 80 2F  00 BC F1 08 01 2F 00 BD  o1F.8../...../..
0620: F1 08 01 2F 00 BE F1 08  01 4E 00 BE F1 08 01 94  .../.....N......
0630: 01 BC F1 08 01 94 01 BD  F1 08 01 94 01 BE F1 08  ................
0640: 01 94 01 F0 FF FF 7F BA  BC F1 08 01 22 80 23 80  ............".#.
0650: 24 80 06 80 BA BD F1 08  01 25 80 26 80 27 80 06  $........%.&.'..
0660: 80 BA BE F1 08 01 28 80  29 80 2A 80 2B 80 BA F0  ......(.).*.+...
0670: FF FF 7F 2C 80 2D 80 2E  80 06 80 27 10 F0 FF FF  ...,.-.....'....
0680: 7F 3D 2A 10 F0 FF FF 7F  4A BE F1 08 01 F0 FF FF  .=*.....J.......
0690: 7F 6C BE F1 08 01 01 80  01 80 80 BE F1 08 01 1C  .l..............
06A0: 2F 80 45 00 80 F0 FF FF  7F F0 FF FF 7F 66 64 69  /.E..........fdi
06B0: 31 01 80 45 0C 80 F8 FF  FF 7F F8 FF FF 7F 73 30  1..E..........s0
06C0: 31 30 01 80 1C 07 80 5C  00 30 80 5C 01 30 80 5C  10.....\.0.\.0.\
06D0: 02 30 80 5C 03 30 80 6C  BE F1 08 01 31 80 07 80  .0.\.0.l....1...
06E0: 1C 14 80 9A 73 32 80 BE  F1 08 01 BE F1 08 01 1C  ....s2..........
06F0: 16 80 52 0C 80 F8 FF FF  7F F8 FF FF 7F 73 30 31  ..R..........s01
0700: 30 45 0C 80 F8 FF FF 7F  F8 FF FF 7F 73 30 31 31  0E..........s011
0710: 01 80 1C 1D 80 27 10 F0  FF FF 7F 3E 1C 16 80 52  .....'.....>...R
0720: 0C 80 F8 FF FF 7F F8 FF  FF 7F 73 30 31 31 45 0C  ..........s011E.
0730: 80 F8 FF FF 7F F8 FF FF  7F 73 30 31 35 01 80 2A  .........s015..*
0740: 10 F0 FF FF 7F 1C 33 80  4A F0 FF FF 7F BE F1 08  ......3.J.......
0750: 01 6F 76 F0 FF FF 7F 27  10 F0 FF FF 7F 40 1C 34  .ov....'.....@.4
0760: 80 4E 00 BC F1 08 01 4E  00 BD F1 08 01 9F 2F 80  .N.....N....../.
0770: BC F1 08 01 BC F1 08 01  6D 61 69 6E 01 80 9F 2F  ........main.../
0780: 80 BD F1 08 01 BD F1 08  01 6D 61 69 6E 01 80 27  .........main..'
0790: 10 BD F1 08 01 03 1C 33  80 27 10 BC F1 08 01 03  .......3.'......
07A0: 52 0C 80 F8 FF FF 7F F8  FF FF 7F 73 30 31 35 45  R..........s015E
07B0: 0C 80 F8 FF FF 7F F8 FF  FF 7F 73 30 31 34 01 80  ..........s014..
07C0: 1C 1F 80 52 0C 80 F8 FF  FF 7F F8 FF FF 7F 73 30  ...R..........s0
07D0: 31 34 45 0C 80 F8 FF FF  7F F8 FF FF 7F 73 30 31  14E..........s01
07E0: 32 01 80 2A 10 BD F1 08  01 B4 00 03 00 3F 3F 3F  2..*.........???
07F0: 00 00 00 00 00 00 00 00  00 00 00 00 00 B5 00 03  ................
0800: 00 1D 35 80 23 2A 10 BC  F1 08 01 1D 36 80 23 B4  ..5.#*......6.#.
0810: 13 03 00 00 00 00 00 00  00 00 00 00 00 00 00 00  ................
0820: 00 00 00 B5 00 03 00 7B  BE F1 08 01 52 0C 80 F8  .......{....R...
0830: FF FF 7F F8 FF FF 7F 73  30 31 32 45 0C 80 F8 FF  .......s012E....
0840: FF 7F F8 FF FF 7F 73 30  31 33 01 80 27 10 BE F1  ......s013..'...
0850: 08 01 03 2A 10 BE F1 08  01 45 37 80 F0 FF FF 7F  ...*.....E7.....
0860: F0 FF FF 7F 77 68 6F 31  01 80 55 00 80 F0 FF FF  ....who1..U.....
0870: 7F F0 FF FF 7F 77 68 6F  31 1C 18 80 45 00 80 F0  .....who1...E...
0880: FF FF 7F F0 FF FF 7F 66  64 6F 31 01 80 55 00 80  .......fdo1..U..
0890: F0 FF FF 7F F0 FF FF 7F  66 64 6F 31 45 37 80 F0  ........fdo1E7..
08A0: FF FF 7F F0 FF FF 7F 77  68 69 31 01 80 52 0C 80  .......whi1..R..
08B0: F8 FF FF 7F F8 FF FF 7F  73 30 31 33 45 0C 80 F8  ........s013E...
08C0: FF FF 7F F8 FF FF 7F 62  6F 66 66 01 80 55 0C 80  .......boff..U..
08D0: F8 FF FF 7F F8 FF FF 7F  62 6F 66 66 BA F0 FF FF  ........boff....
08E0: 7F 01 80 01 80 01 80 01  80 27 10 F0 FF FF 7F 41  .........'.....A
08F0: 2A 10 F0 FF FF 7F 5C 00  01 80 5C 01 01 80 5C 02  *.....\...\...\.
0900: 30 80 5C 03 38 80 9A 5D  39 80 12 80 1C 21 80 AB  0.\.8..]9....!..
0910: 11 01 80 1C 12 80 46 00  45 00 80 F0 FF FF 7F F0  ......F.E.......
0920: FF FF 7F 66 64 69 32 01  80 21 00                 ...fdi2..!.     
```

## Opcodes

```
  0: 0x05F1 [0x42] SET_CLI_EVENT_CANCEL_DATA()
  1: 0x05F2 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
  2: 0x0603 [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=200*
  3: 0x0612 [0x46] CAMERA_CONTROL: Disable user control
  4: 0x0614 [0x38] SET_CLIENT_EVENT_MODE(mode=19*)
  5: 0x0617 [0x2F] Sirius (ID: 17363388/0x0108F1BC)->Render.Flags0 &= ~0x80000 // Bit 19
  6: 0x061D [0x2F] Almid (ID: 17363389/0x0108F1BD)->Render.Flags0 &= ~0x80000 // Bit 19
  7: 0x0623 [0x2F] Incensed Pineapple (ID: 17363390/0x0108F1BE)->Render.Flags0 &= ~0x80000 // Bit 19
  8: 0x0629 [0x4E] SET_ENTITY_HIDE_FLAG: Show Incensed Pineapple (ID: 17363390/0x0108F1BE)
  9: 0x062F [0x94] Sirius (ID: 17363388/0x0108F1BC)->Render.Flags3 ^= 0x01
 10: 0x0635 [0x94] Almid (ID: 17363389/0x0108F1BD)->Render.Flags3 ^= 0x01
 11: 0x063B [0x94] Incensed Pineapple (ID: 17363390/0x0108F1BE)->Render.Flags3 ^= 0x01
 12: 0x0641 [0x94] LocalPlayer->Render.Flags3 ^= 0x01
 13: 0x0647 [0xBA] SET_ENTITY_POSITION(entity_id=Sirius (ID: 17363388/0x0108F1BC), pos_x=21.310*, pos_z=66.630*, pos_y=-31.920*, direction=377476129.3°*)
 14: 0x0654 [0xBA] SET_ENTITY_POSITION(entity_id=Almid (ID: 17363389/0x0108F1BD), pos_x=20.210*, pos_z=66.450*, pos_y=-31.960*, direction=377476129.3°*)
 15: 0x0661 [0xBA] SET_ENTITY_POSITION(entity_id=Incensed Pineapple (ID: 17363390/0x0108F1BE), pos_x=21.670*, pos_z=83.200*, pos_y=-32.730*, direction=134.9°*)
 16: 0x066E [0xBA] SET_ENTITY_POSITION(entity_id=LocalPlayer, pos_x=18.600*, pos_z=79.500*, pos_y=-31.930*, direction=377476129.3°*)
 17: 0x067B [0x27] REQ_SET(priority=0x10, entity_id=LocalPlayer, tag_num=0x3D)
 18: 0x0682 [0x2A] GET_REQ_LEVEL(level=16, entity_id=LocalPlayer)
 19: 0x0688 [0x4A] Incensed Pineapple (ID: 17363390/0x0108F1BE) looks at LocalPlayer
 20: 0x0691 [0x6C] FADE_ENTITY_COLOR(entity_id=Incensed Pineapple (ID: 17363390/0x0108F1BE), end_alpha=0*, fade_time=0*)
 21: 0x069A [0x80] LOAD_WAIT(entity=Incensed Pineapple (ID: 17363390/0x0108F1BE))
 22: 0x069F [0x1C] WAIT(240* ticks)
 23: 0x06A2 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 24: 0x06B3 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s010" with entities [EventEntity, EventEntity], work=[784*, 0*]
 25: 0x06C4 [0x1C] WAIT(60* ticks)
 26: 0x06C7 [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 115*
 27: 0x06CB [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 115*
 28: 0x06CF [0x5C] MUSIC_CONTROL: Set Combat (Solo) music to song 115*
 29: 0x06D3 [0x5C] MUSIC_CONTROL: Set Combat (Party) music to song 115*
 30: 0x06D7 [0x6C] FADE_ENTITY_COLOR(entity_id=Incensed Pineapple (ID: 17363390/0x0108F1BE), end_alpha=128*, fade_time=60*)
 31: 0x06E0 [0x1C] WAIT(90* ticks)
 32: 0x06E3 [0x9A] WAIT_MUSIC_SERVER()
 33: 0x06E4 [0x73] Incensed Pineapple (ID: 17363390/0x0108F1BE) casts magic 249* on Incensed Pineapple (ID: 17363390/0x0108F1BE)
 34: 0x06EF [0x1C] WAIT(30* ticks)
 35: 0x06F2 [0x52] END_LOAD_SCHEDULER: End scheduler "s010" with entities [EventEntity, EventEntity], work=784*
 36: 0x0701 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s011" with entities [EventEntity, EventEntity], work=[784*, 0*]
 37: 0x0712 [0x1C] WAIT(150* ticks)
 38: 0x0715 [0x27] REQ_SET(priority=0x10, entity_id=LocalPlayer, tag_num=0x3E)
 39: 0x071C [0x1C] WAIT(30* ticks)
 40: 0x071F [0x52] END_LOAD_SCHEDULER: End scheduler "s011" with entities [EventEntity, EventEntity], work=784*
 41: 0x072E [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s015" with entities [EventEntity, EventEntity], work=[784*, 0*]
 42: 0x073F [0x2A] GET_REQ_LEVEL(level=16, entity_id=LocalPlayer)
 43: 0x0745 [0x1C] WAIT(10* ticks)
 44: 0x0748 [0x4A] LocalPlayer looks at Incensed Pineapple (ID: 17363390/0x0108F1BE)
 45: 0x0751 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
 46: 0x0752 [0x76] CHECK_ENTITY_RENDER_FLAGS: Wait until LocalPlayer Render.Flags0 and Render.Flags3 conditions are met
 47: 0x0757 [0x27] REQ_SET(priority=0x10, entity_id=LocalPlayer, tag_num=0x40)
 48: 0x075E [0x1C] WAIT(210* ticks)
 49: 0x0761 [0x4E] SET_ENTITY_HIDE_FLAG: Show Sirius (ID: 17363388/0x0108F1BC)
 50: 0x0767 [0x4E] SET_ENTITY_HIDE_FLAG: Show Almid (ID: 17363389/0x0108F1BD)
 51: 0x076D [0x9F] LOAD_SCHEDULED_TASK_ALT: Load scheduler "main" with entities [Sirius (ID: 17363388/0x0108F1BC), Sirius (ID: 17363388/0x0108F1BC)], work=[240*, 0*]
 52: 0x077E [0x9F] LOAD_SCHEDULED_TASK_ALT: Load scheduler "main" with entities [Almid (ID: 17363389/0x0108F1BD), Almid (ID: 17363389/0x0108F1BD)], work=[240*, 0*]
 53: 0x078F [0x27] REQ_SET(priority=0x10, entity_id=Almid (ID: 17363389/0x0108F1BD), tag_num=0x03)
 54: 0x0796 [0x1C] WAIT(10* ticks)
 55: 0x0799 [0x27] REQ_SET(priority=0x10, entity_id=Sirius (ID: 17363388/0x0108F1BC), tag_num=0x03)
 56: 0x07A0 [0x52] END_LOAD_SCHEDULER: End scheduler "s015" with entities [EventEntity, EventEntity], work=784*
 57: 0x07AF [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s014" with entities [EventEntity, EventEntity], work=[784*, 0*]
 58: 0x07C0 [0x1C] WAIT(120* ticks)
 59: 0x07C3 [0x52] END_LOAD_SCHEDULER: End scheduler "s014" with entities [EventEntity, EventEntity], work=784*
 60: 0x07D2 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s012" with entities [EventEntity, EventEntity], work=[784*, 0*]
 61: 0x07E3 [0x2A] GET_REQ_LEVEL(level=16, entity_id=Almid (ID: 17363389/0x0108F1BD))
 62: 0x07E9 [0xB4] UI_WINDOW_STRING_HANDLER(case=0x00 - Copy string from opcode, work_offset=ExtData[1]->WorkLocal[3], string="???")
 63: 0x07FD [0xB5] SET_EVENT_ENTITY_NAME: Change EventEntity name to ExtData[1]->WorkLocal[3]
 64: 0x0801 [0x1D] PRINT_EVENT_MESSAGE(message_id=7503*)
    → "Wait! What are you doing!?\u007F1\u0000\u0007"
 65: 0x0804 [0x23] WAIT_FOR_DIALOG_INTERACTION
 66: 0x0805 [0x2A] GET_REQ_LEVEL(level=16, entity_id=Sirius (ID: 17363388/0x0108F1BC))
 67: 0x080B [0x1D] PRINT_EVENT_MESSAGE(message_id=7504*)
    → "Not there! That wall isn't safe!\u007F1\u0000\u0007"
 68: 0x080E [0x23] WAIT_FOR_DIALOG_INTERACTION
 69: 0x080F [0xB4] UI_WINDOW_STRING_HANDLER(case=0x13 - Copy string and replace @ with space, work_offset=ExtData[1]->WorkLocal[3], string="")
 70: 0x0823 [0xB5] SET_EVENT_ENTITY_NAME: Change EventEntity name to ExtData[1]->WorkLocal[3]
 71: 0x0827 [0x7B] Incensed Pineapple (ID: 17363390/0x0108F1BE) stops talking
 72: 0x082C [0x52] END_LOAD_SCHEDULER: End scheduler "s012" with entities [EventEntity, EventEntity], work=784*
 73: 0x083B [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s013" with entities [EventEntity, EventEntity], work=[784*, 0*]
 74: 0x084C [0x27] REQ_SET(priority=0x10, entity_id=Incensed Pineapple (ID: 17363390/0x0108F1BE), tag_num=0x03)
 75: 0x0853 [0x2A] GET_REQ_LEVEL(level=16, entity_id=Incensed Pineapple (ID: 17363390/0x0108F1BE))
 76: 0x0859 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "who1" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
 77: 0x086A [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "who1" with entities [LocalPlayer, LocalPlayer], work=200*
 78: 0x0879 [0x1C] WAIT(180* ticks)
 79: 0x087C [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 80: 0x088D [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=200*
 81: 0x089C [0x45] LOAD_SCHEDULED_TASK: Load scheduler "whi1" with entities [LocalPlayer, LocalPlayer], work=[201*, 0*]
 82: 0x08AD [0x52] END_LOAD_SCHEDULER: End scheduler "s013" with entities [EventEntity, EventEntity], work=784*
 83: 0x08BC [0x45] LOAD_SCHEDULED_TASK: Load scheduler "boff" with entities [EventEntity, EventEntity], work=[784*, 0*]
 84: 0x08CD [0x55] WAIT_LOAD_SCHEDULER: Wait for scheduler "boff" with entities [EventEntity, EventEntity], work=784*
 85: 0x08DC [0xBA] SET_ENTITY_POSITION(entity_id=LocalPlayer, pos_x=0.000*, pos_z=0.000*, pos_y=0.000*, direction=0.0°*)
 86: 0x08E9 [0x27] REQ_SET(priority=0x10, entity_id=LocalPlayer, tag_num=0x41)
 87: 0x08F0 [0x2A] GET_REQ_LEVEL(level=16, entity_id=LocalPlayer)
 88: 0x08F6 [0x5C] MUSIC_CONTROL: Set Idle (Day) music to song 0*
 89: 0x08FA [0x5C] MUSIC_CONTROL: Set Idle (Night) music to song 0*
 90: 0x08FE [0x5C] MUSIC_CONTROL: Set Combat (Solo) music to song 115*
 91: 0x0902 [0x5C] MUSIC_CONTROL: Set Combat (Party) music to song 102*
 92: 0x0906 [0x9A] WAIT_MUSIC_SERVER()
 93: 0x0907 [0x5D] SET_MUSIC_VOLUME(volume=127*, fade_time=1*)
 94: 0x090C [0x1C] WAIT(15* ticks)
 95: 0x090F [0xAB] EventEntity->DespawnValue = 0* // Set despawn value
 96: 0x0913 [0x1C] WAIT(1* ticks)
 97: 0x0916 [0x46] CAMERA_CONTROL: Restore default settings
 98: 0x0918 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi2" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 99: 0x0929 [0x21] END_EVENT
100: 0x092A [0x00] END_REQSTACK()
```
