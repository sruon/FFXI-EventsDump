# Event 133

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 5/12      |
| Offset          | 0x0156    |
| Data Size       | 211 bytes |
| Calculated Size | 211 bytes |
| Instructions    | 47        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0150:                   1E F0  FF FF 7F 03 06 00 02 10        ..........
0160: 03 04 00 03 10 03 07 00  04 10 03 05 00 05 10 03  ................
0170: 08 00 06 10 03 0A 00 08  10 03 0B 00 09 10 03 09  ................
0180: 00 06 00 03 0C 00 07 10  1D 18 80 23 03 01 10 19  ...........#....
0190: 80 43 00 43 01 02 02 10  1A 80 00 A5 01 03 0F 00  .C.C............
01A0: 1B 80 01 AA 01 03 0F 00  10 80 03 02 10 0A 00 03  ................
01B0: 03 10 07 00 03 04 10 08  00 03 05 10 11 80 24 1C  ..............$.
01C0: 80 10 80 0F 00 25 02 00  10 10 80 00 D4 01 01 27  .....%.........'
01D0: 02 01 24 02 02 00 10 1D  80 00 E2 01 01 DE 04 01  ..$.............
01E0: 24 02 02 00 10 1E 80 00  F0 01 01 18 05 01 24 02  $.............$.
01F0: 02 00 10 1F 80 00 11 02  5B 00 80 06 32 09 01 06  ........[...2...
0200: 32 09 01 74 6C 6B 30 1D  20 80 23 1A AD 06 01 24  2..tlk0. .#....$
0210: 02 02 00 10 1B 80 00 24  02 03 02 10 07 00 1A 82  .......$........
0220: 03 01 24 02 01 8C 01 21  00                       ..$....!.       
```

## Opcodes

```
  0: 0x0156 [0x1E] EventEntity looks at LocalPlayer and starts talking
  1: 0x015B [0x03] ExtData[1]->WorkLocal[6] = Work_Zone[2]
  2: 0x0160 [0x03] ExtData[1]->WorkLocal[4] = Work_Zone[3]
  3: 0x0165 [0x03] ExtData[1]->WorkLocal[7] = Work_Zone[4]
  4: 0x016A [0x03] ExtData[1]->WorkLocal[5] = Work_Zone[5]
  5: 0x016F [0x03] ExtData[1]->WorkLocal[8] = Work_Zone[6]
  6: 0x0174 [0x03] ExtData[1]->WorkLocal[10] = Work_Zone[8]
  7: 0x0179 [0x03] ExtData[1]->WorkLocal[11] = Work_Zone[9]
  8: 0x017E [0x03] ExtData[1]->WorkLocal[9] = ExtData[1]->WorkLocal[6]
  9: 0x0183 [0x03] ExtData[1]->WorkLocal[12] = Work_Zone[7]
 10: 0x0188 [0x1D] PRINT_EVENT_MESSAGE(message_id=7446*)
    → "Hmm? Was there something you wanted to ask me?\u007F1\u0000\u0007"
 11: 0x018B [0x23] WAIT_FOR_DIALOG_INTERACTION
 12: 0x018C [0x03] Work_Zone[1] = 11*
 13: 0x0191 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
 14: 0x0193 [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
 15: 0x0195 [0x02] IF !(Work_Zone[2] == 2046*) GOTO 0x01A5
 16: 0x019D [0x03] ExtData[1]->WorkLocal[15] = 4*
 17: 0x01A2 [0x01] GOTO 0x01AA

SUBROUTINE_01A5:
 18: 0x01A5 [0x03] ExtData[1]->WorkLocal[15] = 0*
 19: 0x01AA [0x03] Work_Zone[2] = ExtData[1]->WorkLocal[10]
 20: 0x01AF [0x03] Work_Zone[3] = ExtData[1]->WorkLocal[7]
 21: 0x01B4 [0x03] Work_Zone[4] = ExtData[1]->WorkLocal[8]
 22: 0x01B9 [0x03] Work_Zone[5] = 1550*
 23: 0x01BE [0x24] CREATE_DIALOG(message_id=7448*, default_option=0*, option_flags=0x0F)
    → "What do you want to ask about?\u0007\u000BNothing.\u0007Hourglasses.\u0007Maps.\u0007Old currencies.\u0007Trading \u0001\u0005%\u0002\u0001\u0000\u0000.\u007F1\u0000\u0007"
 24: 0x01C5 [0x25] WAIT_DIALOG_SELECT()
 25: 0x01C6 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x01D4
 26: 0x01CE [0x01] GOTO 0x0227

SUBROUTINE_01D4:
 27: 0x01D4 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x01E2
 28: 0x01DC [0x01] GOTO 0x04DE

SUBROUTINE_01E2:
 29: 0x01E2 [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x01F0
 30: 0x01EA [0x01] GOTO 0x0518

SUBROUTINE_01F0:
 31: 0x01F0 [0x02] IF !(Work_Zone[0] == 3*) GOTO 0x0211
 32: 0x01F8 [0x5B] LOAD_EXT_SCHEDULER: Load scheduler "tlk0" with entities [Haggleblix (ID: 17379846/0x01093206), Haggleblix (ID: 17379846/0x01093206)], work=215*
 33: 0x0207 [0x1D] PRINT_EVENT_MESSAGE(message_id=7449*)
    → "Old currencies?\u0007I was telling you about how the three nations all used to have different types of money. You remember, right?\u007F1\u0000\u0007"
 34: 0x020A [0x23] WAIT_FOR_DIALOG_INTERACTION
 35: 0x020B [0x1A] CALL_SUBROUTINE(address=0x06AD)
 36: 0x020E [0x01] GOTO 0x0224

SUBROUTINE_0211:
 37: 0x0211 [0x02] IF !(Work_Zone[0] == 4*) GOTO 0x0224
 38: 0x0219 [0x03] Work_Zone[2] = ExtData[1]->WorkLocal[7]
 39: 0x021E [0x1A] CALL_SUBROUTINE(address=0x0382)
 40: 0x0221 [0x01] GOTO 0x0224

SUBROUTINE_0224:
 41: 0x0224 [0x01] GOTO 0x018C

SUBROUTINE_0227:
 42: 0x0227 [0x21] END_EVENT
 43: 0x0228 [0x00] END_REQSTACK()
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x01D1 [0x01] GOTO 0x0224
# Dead code (unreachable instructions):
     0x01DF [0x01] GOTO 0x0224
# Dead code (unreachable instructions):
     0x01ED [0x01] GOTO 0x0224
```