# Event 864

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 3/5       |
| Offset          | 0x01F9    |
| Data Size       | 374 bytes |
| Calculated Size | 374 bytes |
| Instructions    | 93        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
01F0:                             03 00 00 02 10 03 01           .......
0200: 00 03 10 03 02 00 04 10  03 03 00 05 10 03 04 00  ................
0210: 06 10 41 00 80 01 80 07  10 05 00 41 02 80 03 80  ..A........A....
0220: 07 10 06 00 41 04 80 05  80 07 10 07 00 03 0B 00  ....A...........
0230: 08 10 03 0A 00 09 10 20  01 1E F0 FF FF 7F 02 05  ....... ........
0240: 00 06 00 00 46 03 02 0B  00 06 80 03 5D 02 1A 5A  ....F.......]..Z
0250: 03 1D 07 80 23 03 01 10  08 80 01 43 03 02 0A 00  ....#......C....
0260: 09 80 00 74 02 1A 5A 03  1D 0A 80 23 03 01 10 08  ...t..Z....#....
0270: 80 01 43 03 1D 0B 80 23  03 01 10 08 80 24 0C 80  ..C....#.....$..
0280: 0D 80 0A 00 25 02 00 10  0E 80 00 93 02 1A 5A 03  ....%.........Z.
0290: 01 43 03 02 00 10 05 80  00 9E 02 01 43 03 42 03  .C..........C.B.
02A0: 08 00 00 10 03 01 10 08  00 43 00 43 01 03 0D 00  .........C.C....
02B0: 02 10 03 0E 00 03 10 03  10 00 05 10 03 0F 00 06  ................
02C0: 10 06 01 10 02 05 00 00  80 80 D4 02 03 0C 00 00  ................
02D0: 00 01 F4 02 02 05 00 10  80 80 E4 02 03 0C 00 01  ................
02E0: 00 01 F4 02 02 05 00 11  80 80 F4 02 03 0C 00 02  ................
02F0: 00 01 F4 02 06 04 10 3E  0C 00 08 00 01 03 05 04  .......>........
0300: 10 1D 1C 80 23 24 13 80  14 80 1D 80 25 02 00 10  ....#$......%...
0310: 00 80 00 2F 03 03 01 10  08 00 1D 15 80 23 73 16  .../.........#s.
0320: 80 F8 FF FF 7F F0 FF FF  7F 1C 17 80 01 43 03 02  .............C..
0330: 00 10 14 80 00 43 03 1D  1A 80 23 03 01 10 08 80  .....C....#.....
0340: 01 43 03 01 58 03 1D 0B  80 23 03 02 10 06 00 1D  .C..X....#......
0350: 1B 80 23 03 01 10 08 80  21 00 1D 1E 80 23 1D 1F  ..#.....!....#..
0360: 80 23 1D 20 80 23 1D 21  80 23 1D 22 80 23 1B     .#. .#.!.#.".#. 
```

## Opcodes

```
  0: 0x01F9 [0x03] ExtData[1]->WorkLocal[0] = Work_Zone[2]
  1: 0x01FE [0x03] ExtData[1]->WorkLocal[1] = Work_Zone[3]
  2: 0x0203 [0x03] ExtData[1]->WorkLocal[2] = Work_Zone[4]
  3: 0x0208 [0x03] ExtData[1]->WorkLocal[3] = Work_Zone[5]
  4: 0x020D [0x03] ExtData[1]->WorkLocal[4] = Work_Zone[6]
  5: 0x0212 [0x41] ExtData[1]->WorkLocal[5] = Work_Zone[7] (bits 0*-7*)
  6: 0x021B [0x41] ExtData[1]->WorkLocal[6] = Work_Zone[7] (bits 8*-15*)
  7: 0x0224 [0x41] ExtData[1]->WorkLocal[7] = Work_Zone[7] (bits 16*-31*)
  8: 0x022D [0x03] ExtData[1]->WorkLocal[11] = Work_Zone[8]
  9: 0x0232 [0x03] ExtData[1]->WorkLocal[10] = Work_Zone[9]
 10: 0x0237 [0x20] SET_CLI_EVENT_UC_FLAG: Lock player control
 11: 0x0239 [0x1E] EventEntity looks at LocalPlayer and starts talking
 12: 0x023E [0x02] IF !(ExtData[1]->WorkLocal[5] == ExtData[1]->WorkLocal[6]) GOTO 0x0346
 13: 0x0246 [0x02] IF !(ExtData[1]->WorkLocal[11] >= 10*) GOTO 0x025D
 14: 0x024E [0x1A] CALL_SUBROUTINE(address=0x035A)
 15: 0x0251 [0x1D] PRINT_EVENT_MESSAGE(message_id=13054*)
    → "You have not yet reached level 10. I am sorry, but for safety reasons, I am not authorized to teleport anyone under the current level cap.\u007F1\u0000\u0007"
 16: 0x0254 [0x23] WAIT_FOR_DIALOG_INTERACTION
 17: 0x0255 [0x03] Work_Zone[1] = 1073741824*
 18: 0x025A [0x01] GOTO 0x0343
 19: 0x025D [0x02] IF !(ExtData[1]->WorkLocal[10] == 1073741823*) GOTO 0x0274
 20: 0x0265 [0x1A] CALL_SUBROUTINE(address=0x035A)
 21: 0x0268 [0x1D] PRINT_EVENT_MESSAGE(message_id=13053*)
    → "Unfortunately, at this time there is nowhere I can teleport you. Please come again.\u007F1\u0000\u0007"
 22: 0x026B [0x23] WAIT_FOR_DIALOG_INTERACTION
 23: 0x026C [0x03] Work_Zone[1] = 1073741824*
 24: 0x0271 [0x01] GOTO 0x0343
 25: 0x0274 [0x1D] PRINT_EVENT_MESSAGE(message_id=13043*)
    → "Welcome to the Regional Teleportation Service!\u007F1\u0000\u0007"
 26: 0x0277 [0x23] WAIT_FOR_DIALOG_INTERACTION
 27: 0x0278 [0x03] Work_Zone[1] = 1073741824*
 28: 0x027D [0x24] CREATE_DIALOG(message_id=13037*, default_option=5*, option_flags=0x0A)
    → "Where would you like to teleport to?\u0007\u000B.\u0007.\u0007.\u0007.\u0007.\u0007The Ronfaure Region.\u0007The Zulkheim Region.\u0007The Norvallen Region.\u0007The Gustaberg Region.\u0007The Derfland Region.\u0007The Sarutabaruta Region.\u0007The Kolshushu Region.\u0007The Aragoneu Region.\u0007The Fauregandi Region.\u0007The Valdeaunia Region.\u0007Qufim Island.\u0007The Li'Telor Region.\u0007The Kuzotz Region.\u0007The Vollbow Region.\u0007The Elshimo Lowlands Region.\u0007The Elshimo Uplands Region.\u0007Tu'Lia.\u0007.\u0007The Tavnazian Archipelago.\u0007.\u0007.\u0007.\u0007.\u0007.\u0007.\u0007Teleport?\u0007Nowhere at the moment.\u007F1\u0000\u0007"
 29: 0x0284 [0x25] WAIT_DIALOG_SELECT()
 30: 0x0285 [0x02] IF !(Work_Zone[0] == 30*) GOTO 0x0293
 31: 0x028D [0x1A] CALL_SUBROUTINE(address=0x035A)
 32: 0x0290 [0x01] GOTO 0x0343
 33: 0x0293 [0x02] IF !(Work_Zone[0] == 31*) GOTO 0x029E
 34: 0x029B [0x01] GOTO 0x0343
 35: 0x029E [0x42] SET_CLI_EVENT_CANCEL_DATA()
 36: 0x029F [0x03] ExtData[1]->WorkLocal[8] = Work_Zone[0]
 37: 0x02A4 [0x03] Work_Zone[1] = ExtData[1]->WorkLocal[8]
 38: 0x02A9 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
 39: 0x02AB [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
 40: 0x02AD [0x03] ExtData[1]->WorkLocal[13] = Work_Zone[2]
 41: 0x02B2 [0x03] ExtData[1]->WorkLocal[14] = Work_Zone[3]
 42: 0x02B7 [0x03] ExtData[1]->WorkLocal[16] = Work_Zone[5]
 43: 0x02BC [0x03] ExtData[1]->WorkLocal[15] = Work_Zone[6]
 44: 0x02C1 [0x06] Work_Zone[1] = 0
 45: 0x02C4 [0x02] IF !(ExtData[1]->WorkLocal[5] == 0*) GOTO 0x02D4
 46: 0x02CC [0x03] ExtData[1]->WorkLocal[12] = ExtData[1]->WorkLocal[0]
 47: 0x02D1 [0x01] GOTO 0x02F4
 48: 0x02D4 [0x02] IF !(ExtData[1]->WorkLocal[5] == 1*) GOTO 0x02E4
 49: 0x02DC [0x03] ExtData[1]->WorkLocal[12] = ExtData[1]->WorkLocal[1]
 50: 0x02E1 [0x01] GOTO 0x02F4
 51: 0x02E4 [0x02] IF !(ExtData[1]->WorkLocal[5] == 2*) GOTO 0x02F4
 52: 0x02EC [0x03] ExtData[1]->WorkLocal[12] = ExtData[1]->WorkLocal[2]
 53: 0x02F1 [0x01] GOTO 0x02F4

SUBROUTINE_02F4:
 54: 0x02F4 [0x06] Work_Zone[4] = 0
 55: 0x02F7 [0x3E] IF !(ExtData[1]->WorkLocal[12] bit ExtData[1]->WorkLocal[8]) GOTO 0x0301
 56: 0x02FE [0x05] Work_Zone[4] = 1
 57: 0x0301 [0x1D] PRINT_EVENT_MESSAGE(message_id=13050*)
    → "As a special, limited-time service to commemorate the recovery of the full mog tablet set, I can teleport you to your destination absolutely free of charge!\u007F1\u0000\u0007"
 58: 0x0304 [0x23] WAIT_FOR_DIALOG_INTERACTION
 59: 0x0305 [0x24] CREATE_DIALOG(message_id=13051*, default_option=3*, option_flags=6*)
    → "Teleport?\u0007\u000BYes.\u0007Teleport with gil.\u0007Teleport with conquest points.\u0007Later.\u007F1\u0000\u0007"
 60: 0x030C [0x25] WAIT_DIALOG_SELECT()
 61: 0x030D [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x032F
 62: 0x0315 [0x03] Work_Zone[1] = ExtData[1]->WorkLocal[8]
 63: 0x031A [0x1D] PRINT_EVENT_MESSAGE(message_id=13052*)
    → "Have a wonderful journey!\u007F1\u0000\u0007"
 64: 0x031D [0x23] WAIT_FOR_DIALOG_INTERACTION
 65: 0x031E [0x73] EventEntity casts magic 122* on LocalPlayer
 66: 0x0329 [0x1C] WAIT(260* ticks)
 67: 0x032C [0x01] GOTO 0x0343
 68: 0x032F [0x02] IF !(Work_Zone[0] == 3*) GOTO 0x0343
 69: 0x0337 [0x1D] PRINT_EVENT_MESSAGE(message_id=13059*)
    → "We look forward to seeing you again!\u007F1\u0000\u0007"
 70: 0x033A [0x23] WAIT_FOR_DIALOG_INTERACTION
 71: 0x033B [0x03] Work_Zone[1] = 1073741824*
 72: 0x0340 [0x01] GOTO 0x0343

SUBROUTINE_0343:
 73: 0x0343 [0x01] GOTO 0x0358
 74: 0x0346 [0x1D] PRINT_EVENT_MESSAGE(message_id=13043*)
    → "Welcome to the Regional Teleportation Service!\u007F1\u0000\u0007"
 75: 0x0349 [0x23] WAIT_FOR_DIALOG_INTERACTION
 76: 0x034A [0x03] Work_Zone[2] = ExtData[1]->WorkLocal[6]
 77: 0x034F [0x1D] PRINT_EVENT_MESSAGE(message_id=13060*)
    → "However, at this time I am only authorized to teleport citizens of \u000C\u0000[San d'Oria/Bastok/Windurst].\u007F1\u0000\u0007"
 78: 0x0352 [0x23] WAIT_FOR_DIALOG_INTERACTION
 79: 0x0353 [0x03] Work_Zone[1] = 1073741824*
 80: 0x0358 [0x21] END_EVENT
 81: 0x0359 [0x00] END_REQSTACK()

SUBROUTINE_035A:
 82: 0x035A [0x1D] PRINT_EVENT_MESSAGE(message_id=13044*)
    → "Greetings, adventurer. My name is 	. I have been sent by the Specialty Goods Trade Union.\u007F1\u0000\u0007"
 83: 0x035D [0x23] WAIT_FOR_DIALOG_INTERACTION
 84: 0x035E [0x1D] PRINT_EVENT_MESSAGE(message_id=13045*)
    → "At the previous Conference of Nations, it was decided that the restriction on \u00072regional teleporting\u00073 would be lifted, and that cities could now offer teleportation services to various outposts.\u007F1\u0000\u0007"
 85: 0x0361 [0x23] WAIT_FOR_DIALOG_INTERACTION
 86: 0x0362 [0x1D] PRINT_EVENT_MESSAGE(message_id=13046*)
    → "We are now authorized to teleport you to any outpost you have previously visited on a supplies quest.\u007F1\u0000\u0007"
 87: 0x0365 [0x23] WAIT_FOR_DIALOG_INTERACTION
 88: 0x0366 [0x1D] PRINT_EVENT_MESSAGE(message_id=13047*)
    → "The nominal fee we require varies with the current control of the region.\u007F1\u0000\u0007"
 89: 0x0369 [0x23] WAIT_FOR_DIALOG_INTERACTION
 90: 0x036A [0x1D] PRINT_EVENT_MESSAGE(message_id=13048*)
    → "Also, depending on your level, there may be some areas I am not authorized to teleport you to.\u007F1\u0000\u0007"
 91: 0x036D [0x23] WAIT_FOR_DIALOG_INTERACTION
 92: 0x036E [0x1B] RETURN
```
