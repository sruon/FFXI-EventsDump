# Event 771

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 5/5       |
| Offset          | 0x05E1    |
| Data Size       | 284 bytes |
| Calculated Size | 284 bytes |
| Instructions    | 64        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
05E0:    03 00 00 02 10 03 01  00 03 10 03 02 00 04 10   ...............
05F0: 03 03 00 05 10 03 04 00  06 10 41 00 80 01 80 07  ..........A.....
0600: 10 05 00 41 02 80 03 80  07 10 06 00 41 04 80 05  ...A........A...
0610: 80 07 10 07 00 03 0B 00  08 10 03 0A 00 09 10 20  ............... 
0620: 01 42 1E F0 FF FF 7F 1D  2F 80 23 02 0A 00 2A 80  .B....../.#...*.
0630: 00 3F 06 1D 0A 80 23 03  01 10 08 80 01 FB 06 24  .?....#........$
0640: 0C 80 0D 80 0A 00 25 02  00 10 05 80 00 57 06 03  ......%......W..
0650: 01 10 30 80 01 FB 06 03  08 00 00 10 03 01 10 08  ..0.............
0660: 00 43 00 43 01 03 12 00  02 10 03 0E 00 03 10 03  .C.C............
0670: 10 00 05 10 03 0F 00 06  10 06 01 10 02 05 00 00  ................
0680: 80 80 8C 06 03 0C 00 00  00 01 AC 06 02 05 00 10  ................
0690: 80 80 9C 06 03 0C 00 01  00 01 AC 06 02 05 00 11  ................
06A0: 80 80 AC 06 03 0C 00 02  00 01 AC 06 06 04 10 3E  ...............>
06B0: 0C 00 08 00 B9 06 05 04  10 1D 31 80 23 24 13 80  ..........1.#$..
06C0: 14 80 1D 80 25 02 00 10  00 80 00 E7 06 03 01 10  ....%...........
06D0: 08 00 1D 15 80 23 73 16  80 F8 FF FF 7F F0 FF FF  .....#s.........
06E0: 7F 1C 17 80 01 FB 06 02  00 10 14 80 00 FB 06 1D  ................
06F0: 1A 80 23 03 01 10 30 80  01 FB 06 21 00           ..#...0....!.   
```

## Opcodes

```
  0: 0x05E1 [0x03] ExtData[1]->WorkLocal[0] = Work_Zone[2]
  1: 0x05E6 [0x03] ExtData[1]->WorkLocal[1] = Work_Zone[3]
  2: 0x05EB [0x03] ExtData[1]->WorkLocal[2] = Work_Zone[4]
  3: 0x05F0 [0x03] ExtData[1]->WorkLocal[3] = Work_Zone[5]
  4: 0x05F5 [0x03] ExtData[1]->WorkLocal[4] = Work_Zone[6]
  5: 0x05FA [0x41] GET_BIT_WORK_RANGE(start_bit=0*, end_bit=7*, source=Work_Zone[7], result=ExtData[1]->WorkLocal[5])
  6: 0x0603 [0x41] GET_BIT_WORK_RANGE(start_bit=8*, end_bit=15*, source=Work_Zone[7], result=ExtData[1]->WorkLocal[6])
  7: 0x060C [0x41] GET_BIT_WORK_RANGE(start_bit=16*, end_bit=31*, source=Work_Zone[7], result=ExtData[1]->WorkLocal[7])
  8: 0x0615 [0x03] ExtData[1]->WorkLocal[11] = Work_Zone[8]
  9: 0x061A [0x03] ExtData[1]->WorkLocal[10] = Work_Zone[9]
 10: 0x061F [0x20] SET_CLI_EVENT_UC_FLAG: Lock player control
 11: 0x0621 [0x42] SET_CLI_EVENT_CANCEL_DATA()
 12: 0x0622 [0x1E] EventEntity looks at LocalPlayer and starts talking
 13: 0x0627 [0x1D] PRINT_EVENT_MESSAGE(message_id=13069*)
    → "Thank you very much for taking part in our holiday special!\u007F1\u0000\u0007"
 14: 0x062A [0x23] WAIT_FOR_DIALOG_INTERACTION
 15: 0x062B [0x02] IF !(ExtData[1]->WorkLocal[10] == 2147483647*) GOTO 0x063F
 16: 0x0633 [0x1D] PRINT_EVENT_MESSAGE(message_id=13053*)
    → "Unfortunately, at this time there is nowhere I can teleport you. Please come again.\u007F1\u0000\u0007"
 17: 0x0636 [0x23] WAIT_FOR_DIALOG_INTERACTION
 18: 0x0637 [0x03] Work_Zone[1] = 1073741824*
 19: 0x063C [0x01] GOTO 0x06FB

SUBROUTINE_063F:
 20: 0x063F [0x24] CREATE_DIALOG(message_id=13037*, default_option=5*, option_flags=0x0A)
    → "Where would you like to teleport to?\u0007\u000B.\u0007.\u0007.\u0007.\u0007.\u0007The Ronfaure Region.\u0007The Zulkheim Region.\u0007The Norvallen Region.\u0007The Gustaberg Region.\u0007The Derfland Region.\u0007The Sarutabaruta Region.\u0007The Kolshushu Region.\u0007The Aragoneu Region.\u0007The Fauregandi Region.\u0007The Valdeaunia Region.\u0007Qufim Island.\u0007The Li'Telor Region.\u0007The Kuzotz Region.\u0007The Vollbow Region.\u0007The Elshimo Lowlands Region.\u0007The Elshimo Uplands Region.\u0007Tu'Lia.\u0007.\u0007The Tavnazian Archipelago.\u0007.\u0007.\u0007.\u0007.\u0007.\u0007.\u0007Teleport?\u0007Nowhere at the moment.\u007F1\u0000\u0007"
 21: 0x0646 [0x25] WAIT_DIALOG_SELECT()
 22: 0x0647 [0x02] IF !(Work_Zone[0] == 31*) GOTO 0x0657
 23: 0x064F [0x03] Work_Zone[1] = 4294967295*
 24: 0x0654 [0x01] GOTO 0x06FB

SUBROUTINE_0657:
 25: 0x0657 [0x03] ExtData[1]->WorkLocal[8] = Work_Zone[0]
 26: 0x065C [0x03] Work_Zone[1] = ExtData[1]->WorkLocal[8]
 27: 0x0661 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
 28: 0x0663 [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
 29: 0x0665 [0x03] ExtData[1]->WorkLocal[18] = Work_Zone[2]
 30: 0x066A [0x03] ExtData[1]->WorkLocal[14] = Work_Zone[3]
 31: 0x066F [0x03] ExtData[1]->WorkLocal[16] = Work_Zone[5]
 32: 0x0674 [0x03] ExtData[1]->WorkLocal[15] = Work_Zone[6]
 33: 0x0679 [0x06] Work_Zone[1] = 0
 34: 0x067C [0x02] IF !(ExtData[1]->WorkLocal[5] == 0*) GOTO 0x068C
 35: 0x0684 [0x03] ExtData[1]->WorkLocal[12] = ExtData[1]->WorkLocal[0]
 36: 0x0689 [0x01] GOTO 0x06AC

SUBROUTINE_068C:
 37: 0x068C [0x02] IF !(ExtData[1]->WorkLocal[5] == 1*) GOTO 0x069C
 38: 0x0694 [0x03] ExtData[1]->WorkLocal[12] = ExtData[1]->WorkLocal[1]
 39: 0x0699 [0x01] GOTO 0x06AC

SUBROUTINE_069C:
 40: 0x069C [0x02] IF !(ExtData[1]->WorkLocal[5] == 2*) GOTO 0x06AC
 41: 0x06A4 [0x03] ExtData[1]->WorkLocal[12] = ExtData[1]->WorkLocal[2]
 42: 0x06A9 [0x01] GOTO 0x06AC

SUBROUTINE_06AC:
 43: 0x06AC [0x06] Work_Zone[4] = 0
 44: 0x06AF [0x3E] IF !(ExtData[1]->WorkLocal[12] bit ExtData[1]->WorkLocal[8]) GOTO 0x06B9
 45: 0x06B6 [0x05] Work_Zone[4] = 1
 46: 0x06B9 [0x1D] PRINT_EVENT_MESSAGE(message_id=13072*)
    → "The recommended level for the requested area is 
\u0000. Are you sure you would like to teleport there?\u007F1\u0000\u0007"
 47: 0x06BC [0x23] WAIT_FOR_DIALOG_INTERACTION
 48: 0x06BD [0x24] CREATE_DIALOG(message_id=13051*, default_option=3*, option_flags=6*)
    → "Teleport?\u0007\u000BYes.\u0007Teleport with gil.\u0007Teleport with conquest points.\u0007Later.\u007F1\u0000\u0007"
 49: 0x06C4 [0x25] WAIT_DIALOG_SELECT()
 50: 0x06C5 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x06E7
 51: 0x06CD [0x03] Work_Zone[1] = ExtData[1]->WorkLocal[8]
 52: 0x06D2 [0x1D] PRINT_EVENT_MESSAGE(message_id=13052*)
    → "Have a wonderful journey!\u007F1\u0000\u0007"
 53: 0x06D5 [0x23] WAIT_FOR_DIALOG_INTERACTION
 54: 0x06D6 [0x73] EventEntity casts magic 122* on LocalPlayer
 55: 0x06E1 [0x1C] WAIT(260* ticks)
 56: 0x06E4 [0x01] GOTO 0x06FB

SUBROUTINE_06E7:
 57: 0x06E7 [0x02] IF !(Work_Zone[0] == 3*) GOTO 0x06FB
 58: 0x06EF [0x1D] PRINT_EVENT_MESSAGE(message_id=13059*)
    → "We look forward to seeing you again!\u007F1\u0000\u0007"
 59: 0x06F2 [0x23] WAIT_FOR_DIALOG_INTERACTION
 60: 0x06F3 [0x03] Work_Zone[1] = 4294967295*
 61: 0x06F8 [0x01] GOTO 0x06FB

SUBROUTINE_06FB:
 62: 0x06FB [0x21] END_EVENT
 63: 0x06FC [0x00] END_REQSTACK()
```
