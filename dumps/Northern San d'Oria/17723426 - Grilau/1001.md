# Event 1001

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 8/91      |
| Offset          | 0x0792    |
| Data Size       | 467 bytes |
| Calculated Size | 467 bytes |
| Instructions    | 10        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0790:       1E F0 FF FF 7F 6F  70 66 00 80 F8 FF FF 7F    .....opf......
07A0: F8 FF FF 7F 74 6C 6B 30  1D 15 80 23 5E 69 64 6C  ....tlk0...#^idl
07B0: 30 1C 00 80 21 00 45 02  80 F0 FF FF 7F F0 FF FF  0...!.E.........
07C0: 7F 6F 76 6C 31 03 80 45  08 80 F0 FF FF 7F F0 FF  .ovl1..E........
07D0: FF 7F 73 30 32 31 03 80  1D 28 80 23 01 2F 01 00  ..s021...(.#./..
07E0: 45 02 80 F0 FF FF 7F F0  FF FF 7F 6F 76 6C 31 03  E..........ovl1.
07F0: 80 45 08 80 F0 FF FF 7F  F0 FF FF 7F 73 30 32 31  .E..........s021
0800: 03 80 27 64 F0 FF FF 7F  25 66 00 80 F8 FF FF 7F  ..'d....%f......
0810: F8 FF FF 7F 74 6C 6B 30  1D 21 80 23 5E 69 64 6C  ....tlk0.!.#^idl
0820: 30 24 0C 80 03 80 03 80  25 02 00 10 03 80 00 24  0$......%......$
0830: 09 45 06 80 F8 FF FF 7F  F8 FF FF 7F 73 31 30 35  .E..........s105
0840: 03 80 66 00 80 F8 FF FF  7F F8 FF FF 7F 74 6C 6B  ..f..........tlk
0850: 30 1D 22 80 23 03 02 10  29 80 1D 23 80 23 52 06  0.".#...)..#.#R.
0860: 80 F8 FF FF 7F F8 FF FF  7F 73 31 30 35 02 09 10  .........s105...
0870: 10 80 00 89 08 45 06 80  F8 FF FF 7F F8 FF FF 7F  .....E..........
0880: 73 31 30 36 03 80 01 B6  08 02 09 10 11 80 00 A5  s106............
0890: 08 45 06 80 F8 FF FF 7F  F8 FF FF 7F 73 31 30 36  .E..........s106
08A0: 03 80 01 B6 08 45 08 80  F0 FF FF 7F F0 FF FF 7F  .....E..........
08B0: 73 30 32 32 03 80 1D 12  80 23 5E 69 64 6C 30 24  s022.....#^idl0$
08C0: 13 80 03 80 03 80 25 02  00 10 03 80 00 03 09 45  ......%........E
08D0: 08 80 F0 FF FF 7F F0 FF  FF 7F 73 30 32 33 03 80  ..........s023..
08E0: 66 00 80 F8 FF FF 7F F8  FF FF 7F 74 6C 6B 30 1D  f..........tlk0.
08F0: 24 80 23 5E 69 64 6C 30  1C 00 80 03 01 10 01 80  $.#^idl0........
0900: 01 21 09 02 00 10 01 80  00 11 09 01 31 08 01 21  .!..........1..!
0910: 09 02 00 10 15 80 00 21  09 03 01 10 16 80 01 21  .......!.......!
0920: 09 01 34 09 02 00 10 01  80 00 34 09 03 01 10 16  ..4.......4.....
0930: 80 01 34 09 45 02 80 F8  FF FF 7F F8 FF FF 7F 66  ..4.E..........f
0940: 64 6F 31 03 80 1C 04 80  46 00 45 02 80 F8 FF FF  do1.....F.E.....
0950: 7F F8 FF FF 7F 66 64 69  31 03 80 21 00 29 0F 22  .....fdi1..!.)."
0960: 70 0E 01 2A 00                                    p..*.           
```

## Opcodes

```
  0: 0x0792 [0x1E] EventEntity looks at LocalPlayer and starts talking
  1: 0x0797 [0x6F] WAIT_FRAME_DELAY: Yield until WaitTime reaches zero
  2: 0x0798 [0x70] WAIT_ENTITY_RENDER_FLAG: Wait while EventEntity->Render.Flags3 bit 2 is set (cancel turn if not)
  3: 0x0799 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=30*
  4: 0x07A8 [0x1D] PRINT_EVENT_MESSAGE(message_id=2*)
    → "Finish your current mission first, then come back for another.\u007F1\u0000\u0007"
  5: 0x07AB [0x23] WAIT_FOR_DIALOG_INTERACTION
  6: 0x07AC [0x5E] EventEntity goes idle (kills current action) (animation: "idl0")
  7: 0x07B1 [0x1C] WAIT(30* ticks)
  8: 0x07B4 [0x21] END_EVENT
  9: 0x07B5 [0x00] END_REQSTACK()
```

## Data or dead code:

```
# Dead code (unreachable instructions):
     0x07B6 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "ovl1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x07C7 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s021" with entities [LocalPlayer, LocalPlayer], work=[131*, 0*]
     0x07D8 [0x1D] PRINT_EVENT_MESSAGE(message_id=12606*)
    → "What, you want the mission from rank one again?\u007F1\u0000\u0007"
     0x07DB [0x23] WAIT_FOR_DIALOG_INTERACTION
     0x07DC [0x01] GOTO 0x012F
     0x07DF [0x00] END_REQSTACK()
     0x07E0 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "ovl1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
     0x07F1 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s021" with entities [LocalPlayer, LocalPlayer], work=[131*, 0*]
     0x0802 [0x27] REQ_SET(priority=0x64, entity_id=LocalPlayer, tag_num=0x25)
     0x0809 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=30*
     0x0818 [0x1D] PRINT_EVENT_MESSAGE(message_id=23*)
    → "Bat patrol! How about it? Shouldn't be a problem for an adventurer such as yourself, no?\u007F1\u0000\u0007"
     0x081B [0x23] WAIT_FOR_DIALOG_INTERACTION
     0x081C [0x5E] EventEntity goes idle (kills current action) (animation: "idl0")
     0x0821 [0x24] CREATE_DIALOG(message_id=11*, default_option=0*, option_flags=0*)
    → "Interested?\u0007\u000BTell me more.\u0007Never mind.\u007F1\u0000\u0007"
     0x0828 [0x25] WAIT_DIALOG_SELECT()
     0x0829 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x0924
     0x0831 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s105" with entities [EventEntity, EventEntity], work=[90*, 0*]
     0x0842 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=30*
     0x0851 [0x1D] PRINT_EVENT_MESSAGE(message_id=24*)
    → "Here's your mission, then. Clear out bats lurking in King Ranperre's Tomb and bring me a fang as proof.\u007F1\u0000\u0007"
     0x0854 [0x23] WAIT_FOR_DIALOG_INTERACTION
     0x0855 [0x03] Work_Zone[2] = 891*
     0x085A [0x1D] PRINT_EVENT_MESSAGE(message_id=25*)
    → "Bring me \u0001\u0001\u0001 \u0001\u0005$\u0002\u0000\u0000\u0000 and your mission will be a success.\u007F1\u0000\u0007"
     0x085D [0x23] WAIT_FOR_DIALOG_INTERACTION
     0x085E [0x52] END_LOAD_SCHEDULER: End scheduler "s105" with entities [EventEntity, EventEntity], work=90*
     0x086D [0x02] IF !(Work_Zone[9] == 5*) GOTO 0x0889
     0x0875 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s106" with entities [EventEntity, EventEntity], work=[90*, 0*]
     0x0886 [0x01] GOTO 0x08B6
     0x0889 [0x02] IF !(Work_Zone[9] == 6*) GOTO 0x08A5
     0x0891 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s106" with entities [EventEntity, EventEntity], work=[90*, 0*]
     0x08A2 [0x01] GOTO 0x08B6
     0x08A5 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s022" with entities [LocalPlayer, LocalPlayer], work=[131*, 0*]
     0x08B6 [0x1D] PRINT_EVENT_MESSAGE(message_id=14*)
    → "That is all. You'll take the mission then?\u007F1\u0000\u0007"
     0x08B9 [0x23] WAIT_FOR_DIALOG_INTERACTION
     0x08BA [0x5E] EventEntity goes idle (kills current action) (animation: "idl0")
     0x08BF [0x24] CREATE_DIALOG(message_id=15*, default_option=0*, option_flags=0*)
    → "Do you accept the mission?\u0007\u000BI accept.\u0007Could you explain again?\u0007No, thank you.\u007F1\u0000\u0007"
     0x08C6 [0x25] WAIT_DIALOG_SELECT()
     0x08C7 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x0903
     0x08CF [0x45] LOAD_SCHEDULED_TASK: Load scheduler "s023" with entities [LocalPlayer, LocalPlayer], work=[131*, 0*]
     0x08E0 [0x66] LOAD_EXT_SCHEDULER_MAIN: Load scheduler "tlk0" with entities [EventEntity, EventEntity], work=30*
     0x08EF [0x1D] PRINT_EVENT_MESSAGE(message_id=26*)
    → "Deep in the tomb you'll find Goblins. Take care; I don't want to lose you yet.\u007F1\u0000\u0007"
     0x08F2 [0x23] WAIT_FOR_DIALOG_INTERACTION
     0x08F3 [0x5E] EventEntity goes idle (kills current action) (animation: "idl0")
     0x08F8 [0x1C] WAIT(30* ticks)
     0x08FB [0x03] Work_Zone[1] = 1*
     0x0900 [0x01] GOTO 0x0921
     0x0903 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x0911
     0x090B [0x01] GOTO 0x0831
     0x090E [0x01] GOTO 0x0921
     0x0911 [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x0921
     0x0919 [0x03] Work_Zone[1] = 1073741824*
     0x091E [0x01] GOTO 0x0921
     0x0921 [0x01] GOTO 0x0934
     0x0924 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x0934
     0x092C [0x03] Work_Zone[1] = 1073741824*
     0x0931 [0x01] GOTO 0x0934
     0x0934 [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [EventEntity, EventEntity], work=[200*, 0*]
     0x0945 [0x1C] WAIT(60* ticks)
     0x0948 [0x46] CAMERA_CONTROL: Restore default settings
     0x094A [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdi1" with entities [EventEntity, EventEntity], work=[200*, 0*]
     0x095B [0x21] END_EVENT
     0x095C [0x00] END_REQSTACK()
     0x095D [0x29] REQ_SET_WAIT(priority=0x0F, entity_id=Grilau (ID: 17723426/0x010E7022), tag_num=0x2A)
     0x0964 [0x00] END_REQSTACK()
```