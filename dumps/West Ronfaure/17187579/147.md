# Event 147

## Metadata

| Field           | Value     |
|-----------------|-----------|
| Event Index     | 2/5       |
| Offset          | 0x0001    |
| Data Size       | 485 bytes |
| Calculated Size | 485 bytes |
| Instructions    | 80        |

```
      00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
      -- -- -- -- -- -- -- --  -- -- -- -- -- -- -- --
0000:    03 00 00 03 10 41 00  80 01 80 02 10 01 00 41   .....A........A
0010: 02 80 03 80 02 10 02 00  41 04 80 05 80 02 10 03  ........A.......
0020: 00 03 04 00 04 10 4A FC  42 06 01 F0 FF FF 7F 02  ......J.B.......
0030: 00 00 00 80 00 96 00 2C  FC 42 06 01 FC 42 06 01  .......,.B...B..
0040: 68 61 70 30 2B FC 42 06  01 06 80 23 2C FC 42 06  hap0+.B....#,.B.
0050: 01 FC 42 06 01 65 78 70  30 2B FC 42 06 01 07 80  ..B..exp0+.B....
0060: 23 2B FC 42 06 01 08 80  23 2B FC 42 06 01 09 80  #+.B....#+.B....
0070: 23 2B FC 42 06 01 0A 80  23 2B FC 42 06 01 0B 80  #+.B....#+.B....
0080: 23 2C FC 42 06 01 FC 42  06 01 65 78 70 31 03 01  #,.B...B..exp1..
0090: 10 00 80 01 E4 01 02 00  00 0C 80 00 CB 00 2C FC  ..............,.
00A0: 42 06 01 FC 42 06 01 65  78 70 30 2B FC 42 06 01  B...B..exp0+.B..
00B0: 0D 80 23 2B FC 42 06 01  0E 80 23 2C FC 42 06 01  ..#+.B....#,.B..
00C0: FC 42 06 01 65 78 70 31  01 FC 00 03 02 10 01 00  .B..exp1........
00D0: 03 03 10 02 00 03 04 10  03 00 2C FC 42 06 01 FC  ..........,.B...
00E0: 42 06 01 74 6C 6B 30 2B  FC 42 06 01 0F 80 23 2C  B..tlk0+.B....#,
00F0: FC 42 06 01 FC 42 06 01  74 6C 6B 31 03 02 10 04  .B...B..tlk1....
0100: 00 24 10 80 00 80 00 80  25 02 00 10 00 80 00 85  .$......%.......
0110: 01 42 02 04 00 00 80 00  4C 01 2C FC 42 06 01 FC  .B......L.,.B...
0120: 42 06 01 74 6C 6B 30 2B  FC 42 06 01 11 80 23 2B  B..tlk0+.B....#+
0130: FC 42 06 01 12 80 23 2C  FC 42 06 01 FC 42 06 01  .B....#,.B...B..
0140: 74 6C 6B 31 03 01 10 13  80 01 73 01 2C FC 42 06  tlk1......s.,.B.
0150: 01 FC 42 06 01 74 6C 6B  30 2B FC 42 06 01 14 80  ..B..tlk0+.B....
0160: 23 2C FC 42 06 01 FC 42  06 01 74 6C 6B 31 03 01  #,.B...B..tlk1..
0170: 10 15 80 AD 00 16 80 FC  42 06 01 F0 FF FF 7F 1C  ........B.......
0180: 17 80 01 E4 01 02 00 10  0C 80 00 D4 01 42 03 01  .............B..
0190: 10 18 80 43 00 43 01 2C  FC 42 06 01 FC 42 06 01  ...C.C.,.B...B..
01A0: 6A 6F 62 30 2B FC 42 06  01 19 80 23 03 01 10 18  job0+.B....#....
01B0: 80 73 1A 80 FC 42 06 01  F0 FF FF 7F 1C 1B 80 45  .s...B.........E
01C0: 1C 80 F0 FF FF 7F F0 FF  FF 7F 66 64 6F 31 00 80  ..........fdo1..
01D0: 30 01 E4 01 02 00 10 13  80 00 E4 01 03 01 10 00  0...............
01E0: 80 01 E4 01 21 00                                 ....!.          
```

## Opcodes

```
  0: 0x0001 [0x03] ExtData[1]->WorkLocal[0] = Work_Zone[3]
  1: 0x0006 [0x41] GET_BIT_WORK_RANGE(start_bit=0*, end_bit=9*, source=Work_Zone[2], result=ExtData[1]->WorkLocal[1])
  2: 0x000F [0x41] GET_BIT_WORK_RANGE(start_bit=10*, end_bit=19*, source=Work_Zone[2], result=ExtData[1]->WorkLocal[2])
  3: 0x0018 [0x41] GET_BIT_WORK_RANGE(start_bit=20*, end_bit=29*, source=Work_Zone[2], result=ExtData[1]->WorkLocal[3])
  4: 0x0021 [0x03] ExtData[1]->WorkLocal[4] = Work_Zone[4]
  5: 0x0026 [0x4A] Moogle (ID: 17187580/0x010642FC) looks at LocalPlayer
  6: 0x002F [0x02] IF !(ExtData[1]->WorkLocal[0] == 0*) GOTO 0x0096
  7: 0x0037 [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "hap0" with entities [Moogle (ID: 17187580/0x010642FC), Moogle (ID: 17187580/0x010642FC)]
  8: 0x0044 [0x2B] Moogle (ID: 17187580/0x010642FC) [12469*]:
    → "Kupopopo!\u0007This rowdy recreational romp will be the best time ever!\u007F1\u0000\u0007"
  9: 0x004B [0x23] WAIT_FOR_DIALOG_INTERACTION
 10: 0x004C [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "exp0" with entities [Moogle (ID: 17187580/0x010642FC), Moogle (ID: 17187580/0x010642FC)]
 11: 0x0059 [0x2B] Moogle (ID: 17187580/0x010642FC) [12470*]:
    → "Hmm? Oh, please ignore my idiomatic insinuations.\u007F1\u0000\u0007"
 12: 0x0060 [0x23] WAIT_FOR_DIALOG_INTERACTION
 13: 0x0061 [0x2B] Moogle (ID: 17187580/0x010642FC) [12471*]:
    → "This crazed creature captivates your interest, does it?\u007F1\u0000\u0007"
 14: 0x0068 [0x23] WAIT_FOR_DIALOG_INTERACTION
 15: 0x0069 [0x2B] Moogle (ID: 17187580/0x010642FC) [12472*]:
    → "Not too long ago, its bespeckled brethren came vaulting into Vana'diel, causing a preponderance of problems, kupo!\u007F1\u0000\u0007"
 16: 0x0070 [0x23] WAIT_FOR_DIALOG_INTERACTION
 17: 0x0071 [0x2B] Moogle (ID: 17187580/0x010642FC) [12473*]:
    → "And now there are these vermilion ones and violet ones traipsing into town, so I've been keeping an acute eye on their actions.\u007F1\u0000\u0007"
 18: 0x0078 [0x23] WAIT_FOR_DIALOG_INTERACTION
 19: 0x0079 [0x2B] Moogle (ID: 17187580/0x010642FC) [12474*]:
    → "Thankfully, there have been no ill-advised incidents yet. But still, some of these enigmatic entities have emigrated to ambient areas. Hopefully they aren't causing calamitous conundrums, kupo...\u007F1\u0000\u0007"
 20: 0x0080 [0x23] WAIT_FOR_DIALOG_INTERACTION
 21: 0x0081 [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "exp1" with entities [Moogle (ID: 17187580/0x010642FC), Moogle (ID: 17187580/0x010642FC)]
 22: 0x008E [0x03] Work_Zone[1] = 0*
 23: 0x0093 [0x01] GOTO 0x01E4

SUBROUTINE_0096:
 24: 0x0096 [0x02] IF !(ExtData[1]->WorkLocal[0] == 1*) GOTO 0x00CB
 25: 0x009E [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "exp0" with entities [Moogle (ID: 17187580/0x010642FC), Moogle (ID: 17187580/0x010642FC)]
 26: 0x00AB [0x2B] Moogle (ID: 17187580/0x010642FC) [12475*]:
    → "Our adventurer has arrived! You've taken in the tale, right?\u007F1\u0000\u0007"
 27: 0x00B2 [0x23] WAIT_FOR_DIALOG_INTERACTION
 28: 0x00B3 [0x2B] Moogle (ID: 17187580/0x010642FC) [12476*]:
    → "Then let me sprinkle sundry moogle magics upon you! Ready?\u007F1\u0000\u0007"
 29: 0x00BA [0x23] WAIT_FOR_DIALOG_INTERACTION
 30: 0x00BB [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "exp1" with entities [Moogle (ID: 17187580/0x010642FC), Moogle (ID: 17187580/0x010642FC)]
 31: 0x00C8 [0x01] GOTO 0x00FC

SUBROUTINE_00CB:
 32: 0x00CB [0x03] Work_Zone[2] = ExtData[1]->WorkLocal[1]
 33: 0x00D0 [0x03] Work_Zone[3] = ExtData[1]->WorkLocal[2]
 34: 0x00D5 [0x03] Work_Zone[4] = ExtData[1]->WorkLocal[3]
 35: 0x00DA [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "tlk0" with entities [Moogle (ID: 17187580/0x010642FC), Moogle (ID: 17187580/0x010642FC)]
 36: 0x00E7 [0x2B] Moogle (ID: 17187580/0x010642FC) [12477*]:
    → "You have amassed an amazing 
\u0000 chartruese stone shard\u007F\u0012\u0000[/s], 
\u0001 vermilion stone shard\u007F\u0012\u0001[/s], and 
\u0002 mauve stone shard\u007F\u0012\u0002[/s]. I'll teleport you to town to try your luck at the lottery. Do you truly wish to travel?\u007F1\u0000\u0007"
 37: 0x00EE [0x23] WAIT_FOR_DIALOG_INTERACTION
 38: 0x00EF [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "tlk1" with entities [Moogle (ID: 17187580/0x010642FC), Moogle (ID: 17187580/0x010642FC)]
 39: 0x00FC [0x03] Work_Zone[2] = ExtData[1]->WorkLocal[4]
 40: 0x0101 [0x24] CREATE_DIALOG(message_id=12478*, default_option=0*, option_flags=0*)
    → "What will you do?\u0007\u000B\u000C\u0000[Receive moogle magic/Remove moogle magic].\u0007Teleport to town.\u0007Nothing.\u007F1\u0000\u0007"
 41: 0x0108 [0x25] WAIT_DIALOG_SELECT()
 42: 0x0109 [0x02] IF !(Work_Zone[0] == 0*) GOTO 0x0185
 43: 0x0111 [0x42] SET_CLI_EVENT_CANCEL_DATA()
 44: 0x0112 [0x02] IF !(ExtData[1]->WorkLocal[4] == 0*) GOTO 0x014C
 45: 0x011A [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "tlk0" with entities [Moogle (ID: 17187580/0x010642FC), Moogle (ID: 17187580/0x010642FC)]
 46: 0x0127 [0x2B] Moogle (ID: 17187580/0x010642FC) [12479*]:
    → "Certainly, my capable compadre!\u0007I'll hang around here should you desire the dissolution of my invigorating incantation.\u007F1\u0000\u0007"
 47: 0x012E [0x23] WAIT_FOR_DIALOG_INTERACTION
 48: 0x012F [0x2B] Moogle (ID: 17187580/0x010642FC) [12480*]:
    → "Good luck, kupo!\u007F1\u0000\u0007"
 49: 0x0136 [0x23] WAIT_FOR_DIALOG_INTERACTION
 50: 0x0137 [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "tlk1" with entities [Moogle (ID: 17187580/0x010642FC), Moogle (ID: 17187580/0x010642FC)]
 51: 0x0144 [0x03] Work_Zone[1] = 2*
 52: 0x0149 [0x01] GOTO 0x0173

SUBROUTINE_014C:
 53: 0x014C [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "tlk0" with entities [Moogle (ID: 17187580/0x010642FC), Moogle (ID: 17187580/0x010642FC)]
 54: 0x0159 [0x2B] Moogle (ID: 17187580/0x010642FC) [12481*]:
    → "Understood!\u0007Inform me immediately should you be inclined to capture the creatures, kupo!\u007F1\u0000\u0007"
 55: 0x0160 [0x23] WAIT_FOR_DIALOG_INTERACTION
 56: 0x0161 [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "tlk1" with entities [Moogle (ID: 17187580/0x010642FC), Moogle (ID: 17187580/0x010642FC)]
 57: 0x016E [0x03] Work_Zone[1] = 3*
 58: 0x0173 [0xAD] DUAL_ENTITY_SCHEDULER_HANDLER: Execute sub-case 0 with entities [Moogle (ID: 17187580/0x010642FC), LocalPlayer], work=7*
 59: 0x017F [0x1C] WAIT(60* ticks)
 60: 0x0182 [0x01] GOTO 0x01E4

SUBROUTINE_0185:
 61: 0x0185 [0x02] IF !(Work_Zone[0] == 1*) GOTO 0x01D4
 62: 0x018D [0x42] SET_CLI_EVENT_CANCEL_DATA()
 63: 0x018E [0x03] Work_Zone[1] = 4*
 64: 0x0193 [0x43] SEND_EVENT_UPDATE: Send pending tag to server (packet 0x005B)
 65: 0x0195 [0x43] SEND_EVENT_UPDATE: Check pending flag (skip if not pending)
 66: 0x0197 [0x2C] CREATE_SCHEDULER_TASK: Create scheduler "job0" with entities [Moogle (ID: 17187580/0x010642FC), Moogle (ID: 17187580/0x010642FC)]
 67: 0x01A4 [0x2B] Moogle (ID: 17187580/0x010642FC) [12482*]:
    → "Got it, kupo!\u0007My moogle mate will be pleased to propel you from town should you desperately desire!\u007F1\u0000\u0007"
 68: 0x01AB [0x23] WAIT_FOR_DIALOG_INTERACTION
 69: 0x01AC [0x03] Work_Zone[1] = 4*
 70: 0x01B1 [0x73] Moogle (ID: 17187580/0x010642FC) casts magic 122* on LocalPlayer
 71: 0x01BC [0x1C] WAIT(270* ticks)
 72: 0x01BF [0x45] LOAD_SCHEDULED_TASK: Load scheduler "fdo1" with entities [LocalPlayer, LocalPlayer], work=[200*, 0*]
 73: 0x01D0 [0x30] SET_UCOFF_CONTINUE_ZERO()
 74: 0x01D1 [0x01] GOTO 0x01E4

SUBROUTINE_01D4:
 75: 0x01D4 [0x02] IF !(Work_Zone[0] == 2*) GOTO 0x01E4
 76: 0x01DC [0x03] Work_Zone[1] = 0*
 77: 0x01E1 [0x01] GOTO 0x01E4

SUBROUTINE_01E4:
 78: 0x01E4 [0x21] END_EVENT
 79: 0x01E5 [0x00] END_REQSTACK()
```
